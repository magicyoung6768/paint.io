import{a0 as e,d as t,a1 as n,w as r,r as i,R as o,e as a,C as s,q as l,p as c,g as u,a2 as d,N as h,l as f,D as p,a3 as g,a4 as m,a5 as b,$ as y,h as v,Q as x,a6 as S,a7 as w,a8 as C,a9 as k,aa as _,ab as E,ac as P,F as $,ad as M,U as N,T as A,k as T,M as R,b as I,a as D,Z as L,_ as z,j as W,ae as O,af as B,ag as F,ah as j,ai as H,aj as G,ak as U,al as q,am as X,X as V,an as Y,O as K,c as Q}from"./index-CChO9Vg1.js";import{_ as J,j as Z,q as ee,s as te,d as ne,t as re,v as ie,w as oe,x as ae,I as se,b as le,g as ce,m as ue,h as de,K as he,a as fe,i as pe,F as ge,u as me,y as be,z as ye,o as ve,T as xe,B as Se,D as we,E as Ce,G as ke,H as _e,J as Ee,L as Pe,M as $e,N as Me,O as Ne,P as Ae,k as Te,Q as Re,A as Ie,R as De,S as Le,U as ze,V as We,c as Oe,W as Be}from"./compiler-runtime-CwbLR5yF.js";import{M as Fe}from"./index-CSYM1ITx.js";import"./index-BvTVX54g.js";import{u as je,C as He,a as Ge}from"./useMutation-DG9CawgU.js";import{C as Ue,d as qe,B as Xe,h as Ve,s as Ye,R as Ke}from"./http-DO3teD3Y.js";import{k as Qe,c as Je}from"./emotion-react.browser.esm-C0TnrUQ4.js";import{_ as Ze}from"./collapse-BIO5DT9H.js";import{a as et,i as tt,S as nt}from"./index-B6ROWnzS.js";import{W as rt,T as it,p as ot}from"./index-jFeez9v3.js";import{D as at}from"./index-hRiOfZGF.js";import{P as st,A as lt}from"./index-DInnPtqo.js";import{g as ct,b as ut,c as dt,u as ht,R as ft}from"./statusUtils-2taAijp_.js";import{T as pt,R as gt}from"./index-B4CXudU8.js";import{R as mt}from"./EllipsisOutlined-B51VsHvw.js";import{D as bt}from"./index-D_zXVVg7.js";import{R as yt}from"./UserOutlined-CsnuRIFN.js";import{T as vt,R as xt,S as St,a as wt}from"./index-rZG-SypO.js";import{g as Ct,R as kt}from"./Dropdown-BPj8wmlX.js";import{a as _t,I as Et}from"./index-C3rTBCHT.js";import{t as Pt,c as $t,C as Mt,R as Nt}from"./convertToTooltipProps-dqxAfv7W.js";import{u as At,i as Tt,a as Rt,g as It,b as Dt,c as Lt,d as zt,e as Wt,f as Ot}from"./TextArea--T38f8ra.js";import{S as Bt,M as Ft}from"./index-BlsU9tn9.js";import{R as jt}from"./PlusOutlined-V6Ur5t-R.js";import{a as Ht}from"./useBreakpoint-D9_7lvgG.js";import"./RightOutlined-ChP_CaZI.js";import"./SearchOutlined-CxYtYLsm.js";import"./useGutter-BjGeB2_h.js";function Gt(e){return void 0!==e}function Ut(e){let t=null;const n=(...n)=>{null===t&&(t=r((n=>()=>{t=null,e.apply(void 0,J(n))})(n)))};return n.cancel=()=>{r.cancel(t),t=null},n}function qt(e){return Z(e)&&e===e.window}const Xt=e=>{if("undefined"==typeof window)return 0;let t=0;return qt(e)?t=e.pageYOffset:e instanceof Document?t=e.documentElement.scrollTop:(e instanceof HTMLElement||e)&&(t=e.scrollTop),e&&!qt(e)&&"number"!=typeof t&&(t=(e.ownerDocument??e).documentElement?.scrollTop),t};function Vt(e){const{targetRef:t,containerRef:n,direction:r,onDragChange:o,onDragChangeComplete:a,calculate:s,color:l,disabledDrag:c}=e,[u,d]=i.useState({x:0,y:0}),h=i.useRef(null),f=i.useRef(null);i.useEffect(()=>{d(s())},[l]),i.useEffect(()=>()=>{document.removeEventListener("mousemove",h.current),document.removeEventListener("mouseup",f.current),document.removeEventListener("touchmove",h.current),document.removeEventListener("touchend",f.current),h.current=null,f.current=null},[]);const p=e=>{const{pageX:i,pageY:a}=function(e){const t="touches"in e?e.touches[0]:e,n=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,r=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:t.pageX-n,pageY:t.pageY-r}}(e),{x:s,y:l,width:c,height:d}=n.current.getBoundingClientRect(),{width:h,height:f}=t.current.getBoundingClientRect(),p=h/2,g=f/2,m=Math.max(0,Math.min(i-s,c))-p,b=Math.max(0,Math.min(a-l,d))-g,y={x:m,y:"x"===r?u.y:b};if(0===h&&0===f||h!==f)return!1;o?.(y)},g=e=>{e.preventDefault(),p(e)},m=e=>{e.preventDefault(),document.removeEventListener("mousemove",h.current),document.removeEventListener("mouseup",f.current),document.removeEventListener("touchmove",h.current),document.removeEventListener("touchend",f.current),h.current=null,f.current=null,a?.()};return[u,e=>{document.removeEventListener("mousemove",h.current),document.removeEventListener("mouseup",f.current),c||(p(e),document.addEventListener("mousemove",g),document.addEventListener("mouseup",m),document.addEventListener("touchmove",g),document.addEventListener("touchend",m),h.current=g,f.current=m)}]}const Yt=({size:e="default",color:t,prefixCls:n})=>o.createElement("div",{className:a(`${n}-handler`,{[`${n}-handler-sm`]:"small"===e}),style:{backgroundColor:t}}),Kt=({children:e,style:t,prefixCls:n})=>o.createElement("div",{className:`${n}-palette`,style:{position:"relative",...t}},e),Qt=i.forwardRef((e,t)=>{const{children:n,x:r,y:i}=e;return o.createElement("div",{ref:t,style:{position:"absolute",left:`${r}%`,top:`${i}%`,zIndex:1,transform:"translate(-50%, -50%)"}},n)}),Jt=({color:e,onChange:n,prefixCls:r,onChangeComplete:a,disabled:s})=>{const l=i.useRef(),c=i.useRef(),u=i.useRef(e),d=t(t=>{const r=ee({offset:t,targetRef:c,containerRef:l,color:e});u.current=r,n(r)}),[h,f]=Vt({color:e,containerRef:l,targetRef:c,calculate:()=>te(e),onDragChange:d,onDragChangeComplete:()=>a?.(u.current),disabledDrag:s});return o.createElement("div",{ref:l,className:`${r}-select`,onMouseDown:f,onTouchStart:f},o.createElement(Kt,{prefixCls:r},o.createElement(Qt,{x:h.x,y:h.y,ref:c},o.createElement(Yt,{color:e.toRgbString(),prefixCls:r})),o.createElement("div",{className:`${r}-saturation`,style:{backgroundColor:`hsl(${e.toHsb().h},100%, 50%)`,backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},Zt=({colors:e,children:t,direction:n="to right",type:r,prefixCls:a})=>{const s=i.useMemo(()=>e.map((t,n)=>{let i=re(t);return"alpha"===r&&n===e.length-1&&(i=new ie(i.setA(1))),i.toRgbString()}).join(","),[e,r]);return o.createElement("div",{className:`${a}-gradient`,style:{position:"absolute",inset:0,background:`linear-gradient(${n}, ${s})`}},t)},en=e=>{const{prefixCls:n,colors:r,disabled:s,onChange:l,onChangeComplete:c,color:u,type:d}=e,h=i.useRef(null),f=i.useRef(null),p=i.useRef(u),g=e=>"hue"===d?e.getHue():100*e.a,m=t(e=>{const t=ee({offset:e,targetRef:f,containerRef:h,color:u,type:d});p.current=t,l(g(t))}),[b,y]=Vt({color:u,targetRef:f,containerRef:h,calculate:()=>te(u,d),onDragChange:m,onDragChangeComplete(){c(g(p.current))},direction:"x",disabledDrag:s}),v=o.useMemo(()=>{if("hue"===d){const e=u.toHsb();e.s=1,e.b=1,e.a=1;return new ie(e)}return u},[u,d]),x=o.useMemo(()=>r.map(e=>`${e.color} ${e.percent}%`),[r]);return o.createElement("div",{ref:h,className:a(`${n}-slider`,`${n}-slider-${d}`),onMouseDown:y,onTouchStart:y},o.createElement(Kt,{prefixCls:n},o.createElement(Qt,{x:b.x,y:b.y,ref:f},o.createElement(Yt,{size:"small",color:v.toHexString(),prefixCls:n})),o.createElement(Zt,{colors:x,type:d,prefixCls:n})))};function tn(){return tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tn.apply(this,arguments)}const nn=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],rn=i.forwardRef((e,t)=>{const{value:n,defaultValue:r,prefixCls:s=oe,onChange:l,onChangeComplete:c,className:u,style:d,panelRender:h,disabledAlpha:f=!1,disabled:p=!1,components:g}=e,[m]=function(e){return i.useMemo(()=>{const{slider:t}=e||{};return[t||en]},[e])}(g),[b,y]=((e,t)=>{const[n,r]=ne(e,t);return[i.useMemo(()=>re(n),[n]),r]})(r||ae,n),v=i.useMemo(()=>b.setA(1).toRgbString(),[b]),x=(e,t)=>{n||y(e),l?.(e,t)},S=e=>new ie(b.setHue(e)),w=e=>new ie(b.setA(e/100)),C=a(`${s}-panel`,u,{[`${s}-panel-disabled`]:p}),k={prefixCls:s,disabled:p,color:b},_=o.createElement(o.Fragment,null,o.createElement(Jt,tn({onChange:x},k,{onChangeComplete:c})),o.createElement("div",{className:`${s}-slider-container`},o.createElement("div",{className:a(`${s}-slider-group`,{[`${s}-slider-group-disabled-alpha`]:f})},o.createElement(m,tn({},k,{type:"hue",colors:nn,min:0,max:359,value:b.getHue(),onChange:e=>{x(S(e),{type:"hue",value:e})},onChangeComplete:e=>{c&&c(S(e))}})),!f&&o.createElement(m,tn({},k,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:v}],min:0,max:100,value:100*b.a,onChange:e=>{x(w(e),{type:"alpha",value:e})},onChangeComplete:e=>{c&&c(w(e))}}))),o.createElement(Ue,{color:b.toRgbString(),prefixCls:s})));return o.createElement("div",{className:C,style:d,ref:t},"function"==typeof h?h(_):_)});var on={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}}]},name:"vertical-align-top",theme:"outlined"};function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},an.apply(this,arguments)}const sn=(e,t)=>i.createElement(se,an({},e,{ref:t,icon:on})),ln=i.forwardRef(sn),cn=e=>{const{prefixCls:t,value:n,current:r,offset:o=0}=e;let s;return o&&(s={position:"absolute",top:`${o}00%`,left:0}),i.createElement("span",{style:s,className:a(`${t}-only-unit`,{current:r})},n)};function un(e,t,n){let r=e,i=0;for(;(r+10)%10!==t;)r+=n,i+=n;return i}const dn=e=>{const{prefixCls:t,count:n,value:r}=e,o=Number(r),a=Math.abs(n),[s,l]=i.useState(o),[c,u]=i.useState(a),d=()=>{l(o),u(a)};let h,f;if(i.useEffect(()=>{const e=setTimeout(d,1e3);return()=>clearTimeout(e)},[o]),s===o||Number.isNaN(o)||Number.isNaN(s))h=[i.createElement(cn,{...e,key:o,current:!0})],f={transition:"none"};else{h=[];const t=o+10,n=[];for(let e=o;e<=t;e+=1)n.push(e);const r=c<a?1:-1,l=n.findIndex(e=>e%10===s);h=(r<0?n.slice(0,l+1):n.slice(l)).map((t,n)=>{const o=t%10;return i.createElement(cn,{...e,key:t,value:o,offset:r<0?n-l:n,current:n===l})}),f={transform:`translateY(${-un(s,o,r)}00%)`}}return i.createElement("span",{className:`${t}-only`,style:f,onTransitionEnd:d},h)},hn=i.forwardRef((e,t)=>{const{prefixCls:n,count:r,className:o,motionClassName:l,style:c,title:u,show:d,component:h="sup",children:f,...p}=e,{getPrefixCls:g}=i.useContext(s),m=g("scroll-number",n),b={...p,"data-show":d,style:c,className:a(m,o,l),title:u};let y=r;if(r&&Number(r)%1==0){const e=String(r).split("");y=i.createElement("bdi",null,e.map((t,n)=>i.createElement(dn,{prefixCls:m,count:Number(r),value:t,key:e.length-n})))}return c?.borderColor&&(b.style={...c,boxShadow:`0 0 0 1px ${c.borderColor} inset`}),f?le(f,e=>({className:a(`${m}-custom-component`,e?.className,l)})):i.createElement(h,{...b,ref:t},y)}),fn=new he("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),pn=new he("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),gn=new he("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),mn=new he("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),bn=new he("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),yn=new he("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),vn=e=>{const{fontHeight:t,lineWidth:n,marginXS:r,colorBorderBg:i}=e,o=t,a=n,s=e.colorTextLightSolid,l=e.colorError,c=e.colorErrorHover;return ue(e,{badgeFontHeight:o,badgeShadowSize:a,badgeTextColor:s,badgeColor:l,badgeColorHover:c,badgeShadowColor:i,badgeProcessingDuration:"1.2s",badgeRibbonOffset:r,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},xn=e=>{const{fontSize:t,lineHeight:n,fontSizeSM:r,lineWidth:i}=e;return{indicatorZIndex:"auto",indicatorHeight:Math.round(t*n)-2*i,indicatorHeightSM:t,dotSize:r/2,textFontSize:r,textFontSizeSM:r,textFontWeight:"normal",statusSize:r/2}},Sn=ce("Badge",e=>(e=>{const{componentCls:t,iconCls:n,antCls:r,badgeShadowSize:i,textFontSize:o,textFontSizeSM:a,statusSize:s,dotSize:u,textFontWeight:d,indicatorHeight:h,indicatorHeightSM:f,marginXS:p,calc:g}=e,m=`${r}-scroll-number`,b=de(e,(e,{darkColor:n})=>({[`&${t} ${t}-color-${e}`]:{background:n,[`&:not(${t}-count)`]:{color:n},"a:hover &":{background:n}}}));return{[t]:{...c(e),position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${t}-count`]:{display:"inline-flex",justifyContent:"center",zIndex:e.indicatorZIndex,minWidth:h,height:h,color:e.badgeTextColor,fontWeight:d,fontSize:o,lineHeight:l(h),whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:g(h).div(2).equal(),boxShadow:`0 0 0 ${l(i)} ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${t}-count-sm`]:{minWidth:f,height:f,fontSize:a,lineHeight:l(f),borderRadius:g(f).div(2).equal()},[`${t}-multiple-words`]:{padding:`0 ${l(e.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${t}-dot`]:{zIndex:e.indicatorZIndex,width:u,minWidth:u,height:u,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${l(i)} ${e.badgeShadowColor}`},[`${t}-count, ${t}-dot, ${m}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${n}-spin`]:{animationName:yn,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${t}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${t}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:s,height:s,verticalAlign:"middle",borderRadius:"50%"},[`${t}-status-success`]:{backgroundColor:e.colorSuccess},[`${t}-status-processing`]:{overflow:"visible",color:e.colorInfo,backgroundColor:e.colorInfo,borderColor:"currentcolor","&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:i,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:fn,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${t}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${t}-status-error`]:{backgroundColor:e.colorError},[`${t}-status-warning`]:{backgroundColor:e.colorWarning},[`${t}-status-text`]:{marginInlineStart:p,color:e.colorText,fontSize:e.fontSize}},...b,[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:pn,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${t}-zoom-leave`]:{animationName:gn,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${t}-not-a-wrapper`]:{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:mn,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${t}-zoom-leave`]:{animationName:bn,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${t}-status)`]:{verticalAlign:"middle"},[`${m}-custom-component, ${t}-count`]:{transform:"none"},[`${m}-custom-component, ${m}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[m]:{overflow:"hidden",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack}`,[`${m}-only`]:{position:"relative",display:"inline-block",height:h,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${m}-only-unit`]:{height:h,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${m}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${t}-count, ${t}-dot, ${m}-custom-component`]:{transform:"translate(-50%, -50%)"}}}}})(vn(e)),xn),wn=i.forwardRef((e,t)=>{const{prefixCls:n,scrollNumberPrefixCls:r,children:o,status:s,text:l,color:c,count:h=null,overflowCount:f=99,dot:p=!1,size:g="default",title:m,offset:b,style:y,className:v,rootClassName:x,classNames:S,styles:w,showZero:C=!1,...k}=e,{getPrefixCls:_,direction:E,className:P,style:$,classNames:M,styles:N}=u("badge"),A=_("badge",n),[T,R]=Sn(A),I={...e,overflowCount:f,size:g,dot:p,showZero:C},[D,L]=fe([M,S],[N,w],{props:I}),z=h>f?`${f}+`:h,W="0"===z||0===z||"0"===l||0===l,O=null===h||W&&!C,B=(Z(s)||Z(c))&&O,F=Z(s)||!W,j=p&&!W,H=j?"":z,G=i.useMemo(()=>(!(Z(H)&&""!==H||Z(l)&&""!==l)||W&&!C)&&!j,[H,W,C,j,l]),U=i.useRef(h);G||(U.current=h);const q=U.current,X=i.useRef(H);G||(X.current=H);const V=X.current,Y=i.useRef(j);G||(Y.current=j);const K=i.useMemo(()=>{if(!b)return{...$,...y};const e=Number.parseInt(b[0],10);return{...{marginTop:b[1],insetInlineEnd:-e},...$,...y}},[b,y,$]),Q=m??("string"==typeof q||"number"==typeof q?q:void 0),J=!G&&(0===l?C:!!l&&!0!==l),ee=J?i.createElement("span",{className:`${A}-status-text`},l):null,te=q&&"object"==typeof q?le(q,e=>({style:{...K,...e.style}})):void 0,ne=pe(c,!1),re=a(D.indicator,{[`${A}-status-dot`]:B,[`${A}-status-${s}`]:!!s,[`${A}-color-${c}`]:ne}),ie={};c&&!ne&&(ie.color=c,ie.background=c);const oe=a(A,{[`${A}-status`]:B,[`${A}-not-a-wrapper`]:!o,[`${A}-rtl`]:"rtl"===E},v,x,P,D.root,T,R);if(!o&&B&&(l||F||!O)){const e=K.color;return i.createElement("span",{...k,className:oe,style:{...L.root,...K}},i.createElement("span",{className:re,style:{...L.indicator,...ie}}),J&&i.createElement("span",{style:{color:e},className:`${A}-status-text`},l))}return i.createElement("span",{ref:t,...k,className:oe,style:L.root},o,i.createElement(d,{visible:!G,motionName:`${A}-zoom`,motionAppear:!1,motionDeadline:1e3},({className:e})=>{const t=_("scroll-number",r),n=Y.current,o=a(D.indicator,{[`${A}-dot`]:n,[`${A}-count`]:!n,[`${A}-count-sm`]:"small"===g,[`${A}-multiple-words`]:!n&&V&&V.toString().length>1,[`${A}-status-${s}`]:!!s,[`${A}-color-${c}`]:ne});let l={...L.indicator,...K};return c&&!ne&&(l=l||{},l.background=c),i.createElement(hn,{prefixCls:t,show:!G,motionClassName:e,className:o,count:V,title:Q,style:l,key:"scrollNumber"},te)}),ee)}),Cn=ce(["Badge","Ribbon"],e=>(e=>{const{antCls:t,badgeFontHeight:n,marginXS:r,badgeRibbonOffset:i,calc:o}=e,a=`${t}-ribbon`,s=`${t}-ribbon-wrapper`,u=de(e,(e,{darkColor:t})=>({[`&${a}-color-${e}`]:{background:t,color:t}}));return{[s]:{position:"relative"},[a]:{...c(e),position:"absolute",top:r,padding:`0 ${l(e.paddingXS)}`,color:e.colorPrimary,lineHeight:l(n),whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${a}-content`]:{color:e.badgeTextColor},[`${a}-corner`]:{position:"absolute",top:"100%",width:i,height:i,color:"currentcolor",border:`${l(o(i).div(2).equal())} solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter},...u,[`&${a}-placement-end`]:{insetInlineEnd:o(i).mul(-1).equal(),borderEndEndRadius:0,[`${a}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${a}-placement-start`]:{insetInlineStart:o(i).mul(-1).equal(),borderEndStartRadius:0,[`${a}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}}}})(vn(e)),xn),kn=wn;kn.Ribbon=e=>{const{className:t,prefixCls:n,style:r,color:o,children:s,text:l,placement:c="end",rootClassName:d,styles:h,classNames:f}=e,{getPrefixCls:p,direction:g,className:m,style:b,classNames:y,styles:v}=u("ribbon"),x=p("ribbon",n),S=`${x}-wrapper`,[w,C]=Cn(x,S),k={...e,placement:c},[_,E]=fe([y,f],[v,h],{props:k}),P=pe(o,!1),$=a(x,`${x}-placement-${c}`,{[`${x}-rtl`]:"rtl"===g,[`${x}-color-${o}`]:P},t,m,_.indicator),M={},N={};return o&&!P&&(M.background=o,N.color=o),i.createElement("div",{className:a(S,d,w,C,_.root),style:E.root},s,i.createElement("div",{className:a($,w),style:{...M,...E.indicator,...b,...r}},i.createElement("span",{className:a(`${x}-content`,_.content),style:E.content},l),i.createElement("div",{className:`${x}-corner`,style:N})))};const _n=i.createContext(null),En=_n.Provider,Pn=i.createContext(null),$n=Pn.Provider,Mn=e=>{const{componentCls:t,antCls:n}=e,r=`${t}-group`;return{[r]:{...c(e),display:"inline-block",fontSize:0,[`&${r}-rtl`]:{direction:"rtl"},[`&${r}-block`]:{display:"flex"},[`${n}-badge ${n}-badge-count`]:{zIndex:1},[`> ${n}-badge:not(:first-child) > ${n}-button-wrapper`]:{borderInlineStart:"none"},"&-vertical":{display:"flex",flexDirection:"column",rowGap:e.marginXS}}}},Nn=e=>{const{componentCls:t,wrapperMarginInlineEnd:n,colorPrimary:r,radioSize:i,motionDurationSlow:o,motionDurationMid:a,motionEaseInOutCirc:s,colorBgContainer:u,colorBorder:d,lineWidth:f,colorBgContainerDisabled:p,colorTextDisabled:g,paddingXS:m,dotColorDisabled:b,lineType:y,radioColor:v,radioBgColor:x,calc:S}=e,w=`${t}-inner`,C=S(i).sub(S(4).mul(2)),k=S(1).mul(i).equal({unit:!0});return{[`${t}-wrapper`]:{...c(e),display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:n,cursor:"pointer","&:last-child":{marginInlineEnd:0},[`&${t}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:e.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},"&-block":{flex:1,justifyContent:"center"},[`${t}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${l(f)} ${y} ${r}`,borderRadius:"50%",visibility:"hidden",opacity:0,content:'""'},[t]:{...c(e),position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center",borderRadius:"50%"},[`${t}-wrapper:hover &,\n        &:hover ${w}`]:{borderColor:r},[`${t}-input:focus-visible + ${w}`]:h(e),[`${t}:hover::after, ${t}-wrapper:hover &::after`]:{visibility:"visible"},[`${t}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:k,height:k,marginBlockStart:S(1).mul(i).div(-2).equal({unit:!0}),marginInlineStart:S(1).mul(i).div(-2).equal({unit:!0}),backgroundColor:v,borderBlockStart:0,borderInlineStart:0,borderRadius:k,transform:"scale(0)",opacity:0,transition:`all ${o} ${s}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:k,height:k,backgroundColor:u,borderColor:d,borderStyle:"solid",borderWidth:f,borderRadius:"50%",transition:`all ${a}`},[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0},[`${t}-checked`]:{[w]:{borderColor:r,backgroundColor:x,"&::after":{transform:`scale(${e.calc(e.dotSize).div(i).equal()})`,opacity:1,transition:`all ${o} ${s}`}}},[`${t}-disabled`]:{cursor:"not-allowed",[w]:{backgroundColor:p,borderColor:d,cursor:"not-allowed","&::after":{backgroundColor:b}},[`${t}-input`]:{cursor:"not-allowed"},[`${t}-disabled + span`]:{color:g,cursor:"not-allowed"},[`&${t}-checked`]:{[w]:{"&::after":{transform:`scale(${S(C).div(i).equal()})`}}}},[`span${t} + *`]:{paddingInlineStart:m,paddingInlineEnd:m}}}},An=e=>{const{buttonColor:t,controlHeight:n,componentCls:r,lineWidth:i,lineType:o,colorBorder:a,motionDurationMid:s,buttonPaddingInline:c,fontSize:u,buttonBg:d,fontSizeLG:f,controlHeightLG:p,controlHeightSM:g,paddingXS:m,borderRadius:b,borderRadiusSM:y,borderRadiusLG:v,buttonCheckedBg:x,buttonSolidCheckedColor:S,colorTextDisabled:w,colorBgContainerDisabled:C,buttonCheckedBgDisabled:k,buttonCheckedColorDisabled:_,colorPrimary:E,colorPrimaryHover:P,colorPrimaryActive:$,buttonSolidCheckedBg:M,buttonSolidCheckedHoverBg:N,buttonSolidCheckedActiveBg:A,calc:T}=e;return{[`${r}-button-wrapper`]:{position:"relative",display:"inline-block",height:n,margin:0,paddingInline:c,paddingBlock:0,color:t,fontSize:u,lineHeight:l(T(n).sub(T(i).mul(2)).equal()),background:d,border:`${l(i)} ${o} ${a}`,borderBlockStartWidth:T(i).add(.02).equal(),borderInlineEndWidth:i,cursor:"pointer",transition:[`color ${s}`,`background ${s}`,`box-shadow ${s}`].join(","),a:{color:t},[`> ${r}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:last-child)":{marginInlineEnd:T(i).mul(-1).equal()},"&:first-child":{borderInlineStart:`${l(i)} ${o} ${a}`,borderStartStartRadius:b,borderEndStartRadius:b},"&:last-child":{borderStartEndRadius:b,borderEndEndRadius:b},"&:first-child:last-child":{borderRadius:b},[`${r}-group-large &`]:{height:p,fontSize:f,lineHeight:l(T(p).sub(T(i).mul(2)).equal()),"&:first-child":{borderStartStartRadius:v,borderEndStartRadius:v},"&:last-child":{borderStartEndRadius:v,borderEndEndRadius:v}},[`${r}-group-small &`]:{height:g,paddingInline:T(m).sub(i).equal(),paddingBlock:0,lineHeight:l(T(g).sub(T(i).mul(2)).equal()),"&:first-child":{borderStartStartRadius:y,borderEndStartRadius:y},"&:last-child":{borderStartEndRadius:y,borderEndEndRadius:y}},"&:hover":{position:"relative",color:E},"&:has(:focus-visible)":h(e),[`${r}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${r}-button-wrapper-disabled)`]:{zIndex:1,color:E,background:x,borderColor:E,"&::before":{backgroundColor:E},"&:first-child":{borderColor:E},"&:hover":{color:P,borderColor:P,"&::before":{backgroundColor:P}},"&:active":{color:$,borderColor:$,"&::before":{backgroundColor:$}}},[`${r}-group-solid &-checked:not(${r}-button-wrapper-disabled)`]:{color:S,background:M,borderColor:M,"&:hover":{color:S,background:N,borderColor:N},"&:active":{color:S,background:A,borderColor:A}},"&-disabled":{color:w,backgroundColor:C,borderColor:a,cursor:"not-allowed","&:first-child, &:hover":{color:w,backgroundColor:C,borderColor:a}},[`&-disabled${r}-button-wrapper-checked`]:{color:_,backgroundColor:k,borderColor:a,boxShadow:"none"},"&-block":{flex:1,textAlign:"center"}}}},Tn=ce("Radio",e=>{const{controlOutline:t,controlOutlineWidth:n}=e,r=`0 0 0 ${l(n)} ${t}`,i=ue(e,{radioFocusShadow:r,radioButtonFocusShadow:r});return[Mn(i),Nn(i),An(i)]},e=>{const{wireframe:t,padding:n,marginXS:r,lineWidth:i,fontSizeLG:o,colorText:a,colorBgContainer:s,colorTextDisabled:l,controlItemBgActiveDisabled:c,colorTextLightSolid:u,colorPrimary:d,colorPrimaryHover:h,colorPrimaryActive:f,colorWhite:p}=e;return{radioSize:o,dotSize:t?o-8:o-2*(4+i),dotColorDisabled:l,buttonSolidCheckedColor:u,buttonSolidCheckedBg:d,buttonSolidCheckedHoverBg:h,buttonSolidCheckedActiveBg:f,buttonBg:s,buttonCheckedBg:s,buttonColor:a,buttonCheckedBgDisabled:c,buttonCheckedColorDisabled:l,buttonPaddingInline:n-i,wrapperMarginInlineEnd:r,radioColor:t?d:p,radioBgColor:t?s:d}},{unitless:{radioSize:!0,dotSize:!0}}),Rn=(e,t)=>{const n=i.useContext(_n),r=i.useContext(Pn),{getPrefixCls:o,direction:s,className:l,style:c,classNames:d,styles:h}=u("radio"),g=i.useRef(null),m=f(t,g),{isFormItemInput:b}=i.useContext(ge),y=t=>{e.onChange?.(t),n?.onChange?.(t)},{prefixCls:v,className:x,rootClassName:S,children:w,style:C,title:k,classNames:_,styles:E,...P}=e,$=o("radio",v),M="button"===(n?.optionType||r),N=M?`${$}-button`:$,A=me($),[T,R]=Tn($,A),I={...P},D=i.useContext(p);n&&(I.name=n.name,I.onChange=y,I.checked=e.value===n.value,I.disabled=I.disabled??n.disabled),I.disabled=I.disabled??D;const L={...e,...I},[z,W]=fe([d,_],[h,E],{props:L}),O=a(`${N}-wrapper`,{[`${N}-wrapper-checked`]:I.checked,[`${N}-wrapper-disabled`]:I.disabled,[`${N}-wrapper-rtl`]:"rtl"===s,[`${N}-wrapper-in-form-item`]:b,[`${N}-wrapper-block`]:!!n?.block},l,x,S,z.root,T,R,A),[B,F]=je(I.onClick);return i.createElement(rt,{component:"Radio",disabled:I.disabled},i.createElement("label",{className:O,style:{...W.root,...c,...C},onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,title:k,onClick:B},i.createElement(He,{...I,className:a(z.icon,{[it]:!M}),style:W.icon,type:"radio",prefixCls:N,ref:m,onClick:F}),void 0!==w?i.createElement("span",{className:a(`${N}-label`,z.label),style:W.label},w):null))},In=i.forwardRef(Rn),Dn=i.forwardRef((e,t)=>{const{getPrefixCls:n,direction:r}=i.useContext(s),{name:o}=i.useContext(ge),l=g(Pt(o)),{prefixCls:c,className:u,rootClassName:d,options:h,buttonStyle:f="outline",disabled:p,children:m,size:b,style:y,id:v,optionType:x,name:S=l,defaultValue:w,value:C,block:k=!1,onChange:_,onMouseEnter:E,onMouseLeave:P,onFocus:$,onBlur:M,orientation:N,vertical:A}=e,[T,R]=ne(w,C),I=i.useCallback(t=>{const n=T,r=t.target.value;"value"in e||R(r),r!==n&&_?.(t)},[T,R,_]),D=n("radio",c),L=`${D}-group`,z=me(D),[W,O]=Tn(D,z);let B=m;h&&h.length>0&&(B=h.map(e=>"string"==typeof e||"number"==typeof e?i.createElement(In,{key:e.toString(),prefixCls:D,disabled:p,value:e,checked:T===e},e):i.createElement(In,{key:`radio-group-value-options-${e.value}`,prefixCls:D,disabled:e.disabled||p,value:e.value,checked:T===e.value,title:e.title,style:e.style,className:e.className,id:e.id,required:e.required},e.label)));const F=be(b),[,j]=ye(N,A),H=a(L,`${L}-${f}`,{[`${L}-${F}`]:F,[`${L}-rtl`]:"rtl"===r,[`${L}-block`]:k},u,d,W,O,z),G=i.useMemo(()=>({onChange:I,value:T,disabled:p,name:S,optionType:x,block:k}),[I,T,p,S,x,k]);return i.createElement("div",{...ot(e,{aria:!0,data:!0}),className:a(H,{[`${D}-group-vertical`]:j}),style:y,onMouseEnter:E,onMouseLeave:P,onFocus:$,onBlur:M,id:v,ref:t},i.createElement(En,{value:G},B))}),Ln=i.memo(Dn),zn=(e,t)=>{const{getPrefixCls:n}=i.useContext(s),{prefixCls:r,...o}=e,a=n("radio",r);return i.createElement($n,{value:"button"},i.createElement(In,{prefixCls:a,...o,type:"radio",ref:t}))},Wn=i.forwardRef(zn),On=In;On.Button=Wn,On.Group=Ln,On.__ANT_RADIO=!0;const Bn=({prefixCls:e,className:t,hoverable:n=!0,...r})=>{const{getPrefixCls:o}=i.useContext(s),l=o("card",e),c=a(`${l}-grid`,t,{[`${l}-grid-hoverable`]:n});return i.createElement("div",{...r,className:c})},Fn=e=>{const{antCls:t,componentCls:n,headerHeight:r,headerPadding:i,tabsMarginBottom:o}=e;return{display:"flex",justifyContent:"center",flexDirection:"column",minHeight:r,marginBottom:-1,padding:`0 ${l(i)}`,color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.headerFontSize,background:e.headerBg,borderBottom:`${l(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`,borderRadius:`${l(e.borderRadiusLG)} ${l(e.borderRadiusLG)} 0 0`,...b(),"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":{display:"inline-block",flex:1,...m,[`\n          > ${n}-typography,\n          > ${n}-typography-edit-content\n        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}},[`${t}-tabs-top`]:{clear:"both",marginBottom:o,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,"&-bar":{borderBottom:`${l(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`}}}},jn=e=>{const{cardPaddingBase:t,colorBorderSecondary:n,cardShadow:r,lineWidth:i}=e;return{width:"33.33%",padding:t,border:0,borderRadius:0,boxShadow:`\n      ${l(i)} 0 0 0 ${n},\n      0 ${l(i)} 0 0 ${n},\n      ${l(i)} ${l(i)} 0 0 ${n},\n      ${l(i)} 0 0 0 ${n} inset,\n      0 ${l(i)} 0 0 ${n} inset;\n    `,transition:`all ${e.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:r}}},Hn=e=>{const{componentCls:t,iconCls:n,actionsLiMargin:r,cardActionsIconSize:i,colorBorderSecondary:o,actionsBg:a}=e;return{margin:0,padding:0,listStyle:"none",background:a,borderTop:`${l(e.lineWidth)} ${e.lineType} ${o}`,display:"flex",borderRadius:`0 0 ${l(e.borderRadiusLG)} ${l(e.borderRadiusLG)}`,...b(),"& > li":{margin:r,color:e.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:e.calc(e.cardActionsIconSize).mul(2).equal(),fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimary,transition:`color ${e.motionDurationMid}`},[`a:not(${t}-btn), > ${n}`]:{display:"inline-block",width:"100%",color:e.colorIcon,lineHeight:l(e.fontHeight),transition:`color ${e.motionDurationMid}`,"&:hover":{color:e.colorPrimary}},[`> ${n}`]:{fontSize:i,lineHeight:l(e.calc(i).mul(e.lineHeight).equal())}},"&:not(:last-child)":{borderInlineEnd:`${l(e.lineWidth)} ${e.lineType} ${o}`}}}},Gn=e=>({margin:`${l(e.calc(e.marginXXS).mul(-1).equal())} 0`,display:"flex",...b(),"&-avatar":{paddingInlineEnd:e.padding},"&-section":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:e.marginXS}},"&-title":{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,...m},"&-description":{color:e.colorTextDescription}}),Un=e=>{const{componentCls:t,colorFillAlter:n,headerPadding:r,bodyPadding:i}=e;return{[`${t}-head`]:{padding:`0 ${l(r)}`,background:n,"&-title":{fontSize:e.fontSize}},[`${t}-body`]:{padding:`${l(e.padding)} ${l(i)}`}}},qn=e=>{const{componentCls:t}=e;return{overflow:"hidden",[`${t}-body`]:{userSelect:"none"}}},Xn=e=>{const{componentCls:t,cardShadow:n,cardHeadPadding:r,colorBorderSecondary:i,boxShadowTertiary:o,bodyPadding:a,extraColor:s}=e;return{[t]:{...c(e),position:"relative",background:e.colorBgContainer,borderRadius:e.borderRadiusLG,[`&:not(${t}-bordered)`]:{boxShadow:o},[`${t}-head`]:Fn(e),[`${t}-extra`]:{marginInlineStart:"auto",color:s,fontWeight:"normal",fontSize:e.fontSize},[`${t}-body`]:{padding:a,borderRadius:`0 0 ${l(e.borderRadiusLG)} ${l(e.borderRadiusLG)}`},[`${t}-grid`]:jn(e),[`${t}-cover`]:{"> *":{display:"block",width:"100%",borderRadius:`${l(e.borderRadiusLG)} ${l(e.borderRadiusLG)} 0 0`}},[`${t}-actions`]:Hn(e),[`${t}-meta`]:Gn(e)},[`${t}-bordered`]:{border:`${l(e.lineWidth)} ${e.lineType} ${i}`,[`${t}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${t}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${e.motionDurationMid}, border-color ${e.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:n}},[`${t}-contain-grid`]:{borderRadius:`${l(e.borderRadiusLG)} ${l(e.borderRadiusLG)} 0 0 `,[`&:not(:has(> ${t}-head))`]:{borderRadius:0},[`${t}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${t}-loading) ${t}-body`]:{marginBlockStart:e.calc(e.lineWidth).mul(-1).equal(),marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),padding:0}},[`${t}-contain-tabs`]:{[`> div${t}-head`]:{minHeight:0,[`${t}-head-title, ${t}-extra`]:{paddingTop:r}}},[`${t}-type-inner`]:Un(e),[`${t}-loading`]:qn(e),[`${t}-rtl`]:{direction:"rtl"}}},Vn=e=>{const{componentCls:t,bodyPaddingSM:n,headerPaddingSM:r,headerHeightSM:i,headerFontSizeSM:o}=e;return{[`${t}-small`]:{[`> ${t}-head`]:{minHeight:i,padding:`0 ${l(r)}`,fontSize:o,[`> ${t}-head-wrapper`]:{[`> ${t}-extra`]:{fontSize:e.fontSize}}},[`> ${t}-body`]:{padding:n}},[`${t}-small${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{paddingTop:0,display:"flex",alignItems:"center"}}}}},Yn=ce("Card",e=>{const t=ue(e,{cardShadow:e.boxShadowCard,cardHeadPadding:e.padding,cardPaddingBase:e.paddingLG,cardActionsIconSize:e.fontSize});return[Xn(t),Vn(t)]},e=>({headerBg:"transparent",headerFontSize:e.fontSizeLG,headerFontSizeSM:e.fontSize,headerHeight:e.fontSizeLG*e.lineHeightLG+2*e.padding,headerHeightSM:e.fontSize*e.lineHeight+2*e.paddingXS,actionsBg:e.colorBgContainer,actionsLiMargin:`${e.paddingSM}px 0`,tabsMarginBottom:-e.padding-e.lineWidth,extraColor:e.colorText,bodyPaddingSM:12,headerPaddingSM:12,bodyPadding:e.bodyPadding??e.paddingLG,headerPadding:e.headerPadding??e.paddingLG})),Kn=e=>{const{actionClasses:t,actions:n=[],actionStyle:r}=e;return i.createElement("ul",{className:t,style:r},n.map((e,t)=>{const r=`action-${t}`;return i.createElement("li",{style:{width:100/n.length+"%"},key:r},i.createElement("span",null,e))}))},Qn=i.forwardRef((e,t)=>{const{prefixCls:n,className:r,rootClassName:o,style:s,extra:l,headStyle:c={},bodyStyle:d={},title:h,loading:f,bordered:p,variant:g,size:m,type:b,cover:v,actions:x,tabList:S,children:w,activeTabKey:C,defaultActiveTabKey:k,tabBarExtraContent:_,hoverable:E,tabProps:P={},classNames:$,styles:M,...N}=e,{getPrefixCls:A,direction:T,className:R,style:I,classNames:D,styles:L}=u("card"),[z]=At("card",g,p),W=be(m),O={...e,size:W,variant:z,loading:f},[B,F]=fe([D,$],[L,M],{props:O}),j=i.useMemo(()=>y(w).some(e=>i.isValidElement(e)&&e.type===Bn),[w]),H=A("card",n),[G,U]=Yn(H),q=i.createElement(Bt,{loading:!0,active:!0,paragraph:{rows:4},title:!1},w),X=void 0!==C,V={...P,[X?"activeKey":"defaultActiveKey"]:X?C:k,tabBarExtraContent:_};let Y;const K=W&&"default"!==W?W:"large",Q=S?i.createElement(vt,{size:K,...V,className:`${H}-head-tabs`,onChange:t=>{e.onTabChange?.(t)},items:S.map(({tab:e,...t})=>({label:e,...t}))}):null;if(h||l||Q){const e=a(`${H}-head`,B.header),t=a(`${H}-head-title`,B.title),n=a(`${H}-extra`,B.extra),r={...c,...F.header};Y=i.createElement("div",{className:e,style:r},i.createElement("div",{className:`${H}-head-wrapper`},h&&i.createElement("div",{className:t,style:F.title},h),l&&i.createElement("div",{className:n,style:F.extra},l)),Q)}const J=a(`${H}-cover`,B.cover),Z=v?i.createElement("div",{className:J,style:F.cover},v):null,ee=a(`${H}-body`,B.body),te={...d,...F.body},ne=i.createElement("div",{className:ee,style:te},f?q:w),re=a(`${H}-actions`,B.actions),ie=x?.length?i.createElement(Kn,{actionClasses:re,actionStyle:F.actions,actions:x}):null,oe=ve(N,["onTabChange"]),ae=a(H,R,{[`${H}-loading`]:f,[`${H}-bordered`]:"borderless"!==z,[`${H}-hoverable`]:E,[`${H}-contain-grid`]:j,[`${H}-contain-tabs`]:S?.length,[`${H}-${W}`]:W,[`${H}-type-${b}`]:!!b,[`${H}-rtl`]:"rtl"===T},r,o,G,U,B.root),se={...F.root,...I,...s};return i.createElement("div",{ref:t,...oe,className:ae,style:se},Y,Z,ne,ie)});Qn.Grid=Bn,Qn.Meta=e=>{const{prefixCls:t,className:n,avatar:r,title:o,description:s,style:l,classNames:c,styles:d,...h}=e,{getPrefixCls:f,className:p,style:g,classNames:m,styles:b}=u("cardMeta"),y=`${f("card",t)}-meta`,[v,x]=fe([m,c],[b,d],{props:e}),S=a(y,n,p,v.root),w={...g,...x.root,...l},C=a(`${y}-avatar`,v.avatar),k=a(`${y}-title`,v.title),_=a(`${y}-description`,v.description),E=a(`${y}-section`,v.section),P=r?i.createElement("div",{className:C,style:x.avatar},r):null,$=o?i.createElement("div",{className:k,style:x.title},o):null,M=s?i.createElement("div",{className:_,style:x.description},s):null,N=$||M?i.createElement("div",{className:E,style:x.section},$,M):null;return i.createElement("div",{...h,className:S,style:w},P,N)};const Jn=(e,t)=>{if(!e)return null;const n={left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth,top:e.offsetTop,bottom:e.parentElement.clientHeight-e.clientHeight-e.offsetTop,height:e.clientHeight};return t?{left:0,right:0,width:0,top:n.top,bottom:n.bottom,height:n.height}:{left:n.left,right:n.right,width:n.width,top:0,bottom:0,height:0}},Zn=e=>void 0!==e?`${e}px`:void 0;function er(e){const{prefixCls:t,containerRef:n,value:r,getValueIndex:o,motionName:s,onMotionStart:l,onMotionEnd:c,direction:u,vertical:d=!1}=e,h=i.useRef(null),[p,g]=i.useState(r),m=e=>{const r=o(e),i=n.current?.querySelectorAll(`.${t}-item`)[r];return i?.offsetParent&&i},[b,y]=i.useState(null),[S,w]=i.useState(null);v(()=>{if(p!==r){const e=m(p),t=m(r),n=Jn(e,d),i=Jn(t,d);g(r),y(n),w(i),e&&t?l():c()}},[r]);const C=i.useMemo(()=>Zn(d?b?.top??0:"rtl"===u?-b?.right:b?.left),[d,u,b]),k=i.useMemo(()=>Zn(d?S?.top??0:"rtl"===u?-S?.right:S?.left),[d,u,S]);return b&&S?i.createElement(x,{visible:!0,motionName:s,motionAppear:!0,onAppearStart:()=>d?{transform:"translateY(var(--thumb-start-top))",height:"var(--thumb-start-height)"}:{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"},onAppearActive:()=>d?{transform:"translateY(var(--thumb-active-top))",height:"var(--thumb-active-height)"}:{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"},onVisibleChanged:()=>{y(null),w(null),c()}},({className:e,style:n},r)=>{const o={...n,"--thumb-start-left":C,"--thumb-start-width":Zn(b?.width),"--thumb-active-left":k,"--thumb-active-width":Zn(S?.width),"--thumb-start-top":C,"--thumb-start-height":Zn(b?.height),"--thumb-active-top":k,"--thumb-active-height":Zn(S?.height)},s={ref:f(h,r),style:o,className:a(`${t}-thumb`,e)};return i.createElement("div",s)}):null}const tr=({prefixCls:e,className:t,style:n,styles:r,classNames:o,data:s,disabled:l,checked:c,label:u,title:d,value:h,name:f,onChange:p,onFocus:g,onBlur:m,onKeyDown:b,onKeyUp:y,onMouseDown:v,itemRender:x=e=>e})=>x(i.createElement("label",{className:a(t,{[`${e}-item-disabled`]:l}),style:n,onMouseDown:v},i.createElement("input",{name:f,className:`${e}-item-input`,type:"radio",disabled:l,checked:c,onChange:e=>{l||p(e,h)},onFocus:g,onBlur:m,onKeyDown:b,onKeyUp:y}),i.createElement("div",{className:a(`${e}-item-label`,o?.label),title:d,style:r?.label},u)),{item:s}),nr=i.forwardRef((e,t)=>{const{prefixCls:n="rc-segmented",direction:r,vertical:o,options:s=[],disabled:l,defaultValue:c,value:u,name:d,onChange:h,className:p="",style:g,styles:m,classNames:b,motionName:y="thumb-motion",itemRender:v,...x}=e,S=i.useRef(null),w=i.useMemo(()=>f(S,t),[S,t]),C=i.useMemo(()=>function(e){return e.map(e=>{if("object"==typeof e&&null!==e){const t=function(e){return void 0!==e.title?e.title:"object"!=typeof e.label?e.label?.toString():void 0}(e);return{...e,title:t}}return{label:e?.toString(),title:e?.toString(),value:e}})}(s),[s]),[k,_]=ne(c??C[0]?.value,u),[E,P]=i.useState(!1),$=(e,t)=>{_(t),h?.(t)},M=ve(x,["children"]),[N,A]=i.useState(!1),[T,R]=i.useState(!1),I=()=>{R(!0)},D=()=>{R(!1)},L=()=>{A(!1)},z=e=>{"Tab"===e.key&&A(!0)},W=e=>{const t=C.findIndex(e=>e.value===k),n=C.length,r=C[(t+e+n)%n];r&&(_(r.value),h?.(r.value))},O=e=>{switch(e.key){case"ArrowLeft":case"ArrowUp":W(-1);break;case"ArrowRight":case"ArrowDown":W(1)}};return i.createElement("div",Ze({role:"radiogroup","aria-label":"segmented control",tabIndex:l?void 0:0,"aria-orientation":o?"vertical":"horizontal",style:g},M,{className:a(n,{[`${n}-rtl`]:"rtl"===r,[`${n}-disabled`]:l,[`${n}-vertical`]:o},p),ref:w}),i.createElement("div",{className:`${n}-group`},i.createElement(er,{vertical:o,prefixCls:n,value:k,containerRef:S,motionName:`${n}-${y}`,direction:r,getValueIndex:e=>C.findIndex(t=>t.value===e),onMotionStart:()=>{P(!0)},onMotionEnd:()=>{P(!1)}}),C.map(e=>{const{value:t,disabled:r}=e;return i.createElement(tr,Ze({},e,{name:d,data:e,itemRender:v,key:t,prefixCls:n,className:a(e.className,`${n}-item`,b?.item,{[`${n}-item-selected`]:t===k&&!E,[`${n}-item-focused`]:T&&N&&t===k}),style:m?.item,classNames:b,styles:m,checked:t===k,onChange:$,onFocus:I,onBlur:D,onKeyDown:O,onKeyUp:z,onMouseDown:L,disabled:!!l||!!r}))})))}),rr=nr;function ir(e,t){return{[`${e}, ${e}:hover, ${e}:focus`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function or(e){return{background:e.itemSelectedBg,boxShadow:e.boxShadowTertiary}}const ar={overflow:"hidden",...m},sr=ce("Segmented",e=>{const{lineWidth:t,calc:n}=e;return(e=>{const{componentCls:t}=e,n=e.calc(e.controlHeight).sub(e.calc(e.trackPadding).mul(2)).equal(),r=e.calc(e.controlHeightLG).sub(e.calc(e.trackPadding).mul(2)).equal(),i=e.calc(e.controlHeightSM).sub(e.calc(e.trackPadding).mul(2)).equal();return{[t]:{...c(e),display:"inline-block",padding:e.trackPadding,color:e.itemColor,background:e.trackBg,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`,...S(e),[`${t}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",flexDirection:"row",width:"100%"},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-vertical`]:{[`${t}-group`]:{flexDirection:"column"},[`${t}-thumb`]:{width:"100%",height:0,padding:`0 ${l(e.paddingXXS)}`}},[`&${t}-block`]:{display:"flex"},[`&${t}-block ${t}-item`]:{flex:1,minWidth:0},[`${t}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${e.motionDurationMid}`,borderRadius:e.borderRadiusSM,transform:"translateZ(0)","&-selected":{...or(e),color:e.itemSelectedColor},"&-focused":h(e),"&::after":{content:'""',position:"absolute",zIndex:-1,width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",opacity:0,transition:`opacity ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,pointerEvents:"none"},[`&:not(${t}-item-selected):not(${t}-item-disabled)`]:{"&:hover, &:active":{color:e.itemHoverColor},"&:hover::after":{opacity:1,backgroundColor:e.itemHoverBg},"&:active::after":{opacity:1,backgroundColor:e.itemActiveBg}},"&-label":{minHeight:n,lineHeight:l(n),padding:`0 ${l(e.segmentedPaddingHorizontal)}`,...ar},"&-icon + *":{marginInlineStart:e.calc(e.marginSM).div(2).equal()},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${t}-thumb`]:{...or(e),position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${l(e.paddingXXS)} 0`,borderRadius:e.borderRadiusSM,[`& ~ ${t}-item:not(${t}-item-selected):not(${t}-item-disabled)::after`]:{backgroundColor:"transparent"}},[`&${t}-lg`]:{borderRadius:e.borderRadiusLG,[`${t}-item-label`]:{minHeight:r,lineHeight:l(r),padding:`0 ${l(e.segmentedPaddingHorizontal)}`,fontSize:e.fontSizeLG},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadius}},[`&${t}-sm`]:{borderRadius:e.borderRadiusSM,[`${t}-item-label`]:{minHeight:i,lineHeight:l(i),padding:`0 ${l(e.segmentedPaddingHorizontalSM)}`},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadiusXS}},...ir(`&-disabled ${t}-item`,e),...ir(`${t}-item-disabled`,e),[`${t}-thumb-motion-appear-active`]:{transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, width ${e.motionDurationSlow} ${e.motionEaseInOut}`,willChange:"transform, width"},[`&${t}-shape-round`]:{borderRadius:9999,[`${t}-item, ${t}-thumb`]:{borderRadius:9999}}}}})(ue(e,{segmentedPaddingHorizontal:n(e.controlPaddingHorizontal).sub(t).equal(),segmentedPaddingHorizontalSM:n(e.controlPaddingHorizontalSM).sub(t).equal()}))},e=>{const{colorTextLabel:t,colorText:n,colorFillSecondary:r,colorBgElevated:i,colorFill:o,lineWidthBold:a,colorBgLayout:s}=e;return{trackPadding:a,trackBg:s,itemColor:t,itemHoverColor:n,itemHoverBg:r,itemSelectedBg:i,itemActiveBg:o,itemSelectedColor:n}});const lr=i.forwardRef((e,t)=>{const n=g(),{prefixCls:r,className:o,rootClassName:s,block:l,options:c=[],size:d="middle",style:h,vertical:f,orientation:p,shape:m="default",name:b=n,styles:y,classNames:v,...x}=e,{getPrefixCls:S,direction:w,className:C,style:k,classNames:_,styles:E}=u("segmented"),P={...e,options:c,size:d,shape:m},[$,M]=fe([_,v],[E,y],{props:P}),N=S("segmented",r),[A,T]=sr(N),R=be(d),I=i.useMemo(()=>c.map(e=>{if(function(e){return"object"==typeof e&&!!e?.icon}(e)){const{icon:t,label:n,...r}=e;return{...r,label:i.createElement(i.Fragment,null,i.createElement("span",{className:a(`${N}-item-icon`,$.icon),style:M.icon},t),n&&i.createElement("span",null,n))}}return e}),[c,N,$.icon,M.icon]),[,D]=ye(p,f),L=a(o,s,C,$.root,{[`${N}-block`]:l,[`${N}-sm`]:"small"===R,[`${N}-lg`]:"large"===R,[`${N}-vertical`]:D,[`${N}-shape-${m}`]:"round"===m},A,T),z={...M.root,...k,...h};return i.createElement(rr,{...x,name:b,className:L,style:z,classNames:$,styles:M,itemRender:(e,{item:t})=>{if(!t.tooltip)return e;const n="object"==typeof t.tooltip?t.tooltip:{title:t.tooltip};return i.createElement(xe,{...n},e)},options:I,ref:t,prefixCls:N,direction:w,vertical:D})}),cr=lr,ur=o.createContext({}),dr=o.createContext({}),hr=({prefixCls:e,value:t,onChange:n})=>o.createElement("div",{className:`${e}-clear`,onClick:()=>{if(n&&t&&!t.cleared){const e=t.toHsb();e.a=0;const r=Se(e);r.cleared=!0,n(r)}}}),fr="hex",pr="rgb",gr="hsb";var mr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M716.3 313.8c19-18.9 19-49.7 0-68.6l-69.9-69.9.1.1c-18.5-18.5-50.3-50.3-95.3-95.2-21.2-20.7-55.5-20.5-76.5.5L80.9 474.2a53.84 53.84 0 000 76.4L474.6 944a54.14 54.14 0 0076.5 0l165.1-165c19-18.9 19-49.7 0-68.6a48.7 48.7 0 00-68.7 0l-125 125.2c-5.2 5.2-13.3 5.2-18.5 0L189.5 521.4c-5.2-5.2-5.2-13.3 0-18.5l314.4-314.2c.4-.4.9-.7 1.3-1.1 5.2-4.1 12.4-3.7 17.2 1.1l125.2 125.1c19 19 49.8 19 68.7 0zM408.6 514.4a106.3 106.2 0 10212.6 0 106.3 106.2 0 10-212.6 0zm536.2-38.6L821.9 353.5c-19-18.9-49.8-18.9-68.7.1a48.4 48.4 0 000 68.6l83 82.9c5.2 5.2 5.2 13.3 0 18.5l-81.8 81.7a48.4 48.4 0 000 68.6 48.7 48.7 0 0068.7 0l121.8-121.7a53.93 53.93 0 00-.1-76.4z"}}]},name:"ant-design",theme:"outlined"};function br(){return br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},br.apply(this,arguments)}const yr=(e,t)=>i.createElement(se,br({},e,{ref:t,icon:mr})),vr=i.forwardRef(yr);var xr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};function Sr(){return Sr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sr.apply(this,arguments)}const wr=(e,t)=>i.createElement(se,Sr({},e,{ref:t,icon:xr})),Cr=i.forwardRef(wr);var kr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"};function _r(){return _r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_r.apply(this,arguments)}const Er=(e,t)=>i.createElement(se,_r({},e,{ref:t,icon:kr})),Pr=i.forwardRef(Er);var $r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M682 455V311l-76 76v68c-.1 50.7-42 92.1-94 92a95.8 95.8 0 01-52-15l-54 55c29.1 22.4 65.9 36 106 36 93.8 0 170-75.1 170-168z"}},{tag:"path",attrs:{d:"M833 446h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254-63 0-120.7-23-165-61l-54 54a334.01 334.01 0 00179 81v102H326c-13.9 0-24.9 14.3-25 32v36c.1 4.4 2.9 8 6 8h408c3.2 0 6-3.6 6-8v-36c0-17.7-11-32-25-32H547V782c165.3-17.9 294-157.9 294-328 0-4.4-3.6-8-8-8zm13.1-377.7l-43.5-41.9a8 8 0 00-11.2.1l-129 129C634.3 101.2 577 64 511 64c-93.9 0-170 75.3-170 168v224c0 6.7.4 13.3 1.2 19.8l-68 68A252.33 252.33 0 01258 454c-.2-4.4-3.8-8-8-8h-60c-4.4 0-8 3.6-8 8 0 53 12.5 103 34.6 147.4l-137 137a8.03 8.03 0 000 11.3l42.7 42.7c3.1 3.1 8.2 3.1 11.3 0L846.2 79.8l.1-.1c3.1-3.2 3-8.3-.2-11.4zM417 401V232c0-50.6 41.9-92 94-92 46 0 84.1 32.3 92.3 74.7L417 401z"}}]},name:"audio-muted",theme:"outlined"};function Mr(){return Mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mr.apply(this,arguments)}const Nr=(e,t)=>i.createElement(se,Mr({},e,{ref:t,icon:$r})),Ar=i.forwardRef(Nr);var Tr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z"}}]},name:"audio",theme:"outlined"};function Rr(){return Rr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rr.apply(this,arguments)}const Ir=(e,t)=>i.createElement(se,Rr({},e,{ref:t,icon:Tr})),Dr=i.forwardRef(Ir);var Lr={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"};function zr(){return zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zr.apply(this,arguments)}const Wr=(e,t)=>i.createElement(se,zr({},e,{ref:t,icon:Lr})),Or=i.forwardRef(Wr);var Br={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};function Fr(){return Fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fr.apply(this,arguments)}const jr=(e,t)=>i.createElement(se,Fr({},e,{ref:t,icon:Br})),Hr=i.forwardRef(jr);var Gr={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};function Ur(){return Ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ur.apply(this,arguments)}const qr=(e,t)=>i.createElement(se,Ur({},e,{ref:t,icon:Gr})),Xr=i.forwardRef(qr);var Vr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 140H96c-17.7 0-32 14.3-32 32v496c0 17.7 14.3 32 32 32h380v112H304c-8.8 0-16 7.2-16 16v48c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-48c0-8.8-7.2-16-16-16H548V700h380c17.7 0 32-14.3 32-32V172c0-17.7-14.3-32-32-32zm-40 488H136V212h752v416z"}}]},name:"desktop",theme:"outlined"};function Yr(){return Yr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yr.apply(this,arguments)}const Kr=(e,t)=>i.createElement(se,Yr({},e,{ref:t,icon:Vr})),Qr=i.forwardRef(Kr);var Jr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 00-26.5-5.4H273v428h.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4 20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3 40.4-23.5 65.5-66.1 65.5-111 0-28.3-9.3-55.5-26.1-77.7zM112 132v364c0 17.7 14.3 32 32 32h65V100h-65c-17.7 0-32 14.3-32 32z"}}]},name:"dislike",theme:"filled"};function Zr(){return Zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zr.apply(this,arguments)}const ei=(e,t)=>i.createElement(se,Zr({},e,{ref:t,icon:Jr})),ti=i.forwardRef(ei);var ni={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 00-26.5-5.4H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h129.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4 20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3 40.4-23.5 65.5-66.1 65.5-111 0-28.3-9.3-55.5-26.1-77.7zM184 456V172h81v284h-81zm627.2 160.4H496.8l9.6 198.4c.6 11.9-4.7 23.1-14.6 30.5-6.1 4.5-13.6 6.8-21.1 6.7a44.28 44.28 0 01-42.2-32.3L329 459.2V172h415.4a56.85 56.85 0 0133.6 51.8c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0119.6 43c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0119.6 43c0 9.7-2.3 18.9-6.9 27.3l-14 25.5 21.9 19a56.76 56.76 0 0119.6 43c0 19.1-11 37.5-28.8 48.4z"}}]},name:"dislike",theme:"outlined"};function ri(){return ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ri.apply(this,arguments)}const ii=(e,t)=>i.createElement(se,ri({},e,{ref:t,icon:ni})),oi=i.forwardRef(ii);var ai={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"};function si(){return si=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},si.apply(this,arguments)}const li=(e,t)=>i.createElement(se,si({},e,{ref:t,icon:ai})),ci=i.forwardRef(li);var ui={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"};function di(){return di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},di.apply(this,arguments)}const hi=(e,t)=>i.createElement(se,di({},e,{ref:t,icon:ui})),fi=i.forwardRef(hi);var pi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311h-.3v428h472.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM112 528v364c0 17.7 14.3 32 32 32h65V496h-65c-17.7 0-32 14.3-32 32z"}}]},name:"like",theme:"filled"};function gi(){return gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gi.apply(this,arguments)}const mi=(e,t)=>i.createElement(se,gi({},e,{ref:t,icon:pi})),bi=i.forwardRef(mi);var yi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]},name:"like",theme:"outlined"};function vi(){return vi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vi.apply(this,arguments)}const xi=(e,t)=>i.createElement(se,vi({},e,{ref:t,icon:yi})),Si=i.forwardRef(xi);var wi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"};function Ci(){return Ci=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ci.apply(this,arguments)}const ki=(e,t)=>i.createElement(se,Ci({},e,{ref:t,icon:wi})),_i=i.forwardRef(ki);var Ei={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};function Pi(){return Pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pi.apply(this,arguments)}const $i=(e,t)=>i.createElement(se,Pi({},e,{ref:t,icon:Ei})),Mi=i.forwardRef($i);var Ni={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M771.91 115a31.65 31.65 0 00-17.42 5.27L400 351.97H236a16 16 0 00-16 16v288.06a16 16 0 0016 16h164l354.5 231.7a31.66 31.66 0 0017.42 5.27c16.65 0 32.08-13.25 32.08-32.06V147.06c0-18.8-15.44-32.06-32.09-32.06M732 221v582L439.39 611.75l-17.95-11.73H292V423.98h129.44l17.95-11.73z"}}]},name:"muted",theme:"outlined"};function Ai(){return Ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ai.apply(this,arguments)}const Ti=(e,t)=>i.createElement(se,Ai({},e,{ref:t,icon:Ni})),Ri=i.forwardRef(Ti);var Ii={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482.88 128c-84.35 0-156.58 52.8-185.68 126.98-60.89 8.13-115.3 43.63-146.6 97.84-42.16 73-32.55 161.88 17.14 224.16-23.38 56.75-19.85 121.6 11.42 175.78 42.18 73.02 124.1 109.15 202.94 97.23C419.58 898.63 477.51 928 540.12 928c84.35 0 156.58-52.8 185.68-126.98 60.89-8.13 115.3-43.62 146.6-97.84 42.16-73 32.55-161.88-17.14-224.16 23.38-56.75 19.85-121.6-11.42-175.78-42.18-73.02-124.1-109.15-202.94-97.23C603.42 157.38 545.49 128 482.88 128m0 61.54c35.6 0 68.97 13.99 94.22 37.74-1.93 1.03-3.92 1.84-5.83 2.94l-136.68 78.91a46.11 46.11 0 00-23.09 39.78l-.84 183.6-65.72-38.34V327.4c0-76 61.9-137.86 137.94-137.86m197.7 75.9c44.19 3.14 86.16 27.44 109.92 68.57 17.8 30.8 22.38 66.7 14.43 100.42-1.88-1.17-3.6-2.49-5.53-3.6l-136.73-78.91a46.23 46.23 0 00-46-.06l-159.47 91.1.36-76.02 144.5-83.41a137.19 137.19 0 0178.53-18.09m-396.92 55.4c-.07 2.2-.3 4.35-.3 6.56v157.75a46.19 46.19 0 0022.91 39.9l158.68 92.5-66.02 37.67-144.55-83.35c-65.86-38-88.47-122.53-50.45-188.34 17.78-30.78 46.55-52.69 79.73-62.68m340.4 79.93l144.54 83.35c65.86 38 88.47 122.53 50.45 188.34-17.78 30.78-46.55 52.69-79.73 62.68.07-2.19.3-4.34.3-6.55V570.85a46.19 46.19 0 00-22.9-39.9l-158.69-92.5zM511.8 464.84l54.54 31.79-.3 63.22-54.84 31.31-54.54-31.85.3-63.16zm100.54 58.65l65.72 38.35V728.6c0 76-61.9 137.86-137.94 137.86-35.6 0-68.97-13.99-94.22-37.74 1.93-1.03 3.92-1.84 5.83-2.94l136.68-78.9a46.11 46.11 0 0023.09-39.8zm-46.54 89.55l-.36 76.02-144.5 83.41c-65.85 38-150.42 15.34-188.44-50.48-17.8-30.8-22.38-66.7-14.43-100.42 1.88 1.17 3.6 2.5 5.53 3.6l136.74 78.91a46.23 46.23 0 0046 .06z"}}]},name:"open-a-i",theme:"outlined"};function Di(){return Di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Di.apply(this,arguments)}const Li=(e,t)=>i.createElement(se,Di({},e,{ref:t,icon:Ii})),zi=i.forwardRef(Li);var Wi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"};function Oi(){return Oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oi.apply(this,arguments)}const Bi=(e,t)=>i.createElement(se,Oi({},e,{ref:t,icon:Wi})),Fi=i.forwardRef(Bi);var ji={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM492 400h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zM340 368a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"profile",theme:"outlined"};function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hi.apply(this,arguments)}const Gi=(e,t)=>i.createElement(se,Hi({},e,{ref:t,icon:ji})),Ui=i.forwardRef(Gi);var qi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xi.apply(this,arguments)}const Vi=(e,t)=>i.createElement(se,Xi({},e,{ref:t,icon:qi})),Yi=i.forwardRef(Vi);var Ki={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};function Qi(){return Qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qi.apply(this,arguments)}const Ji=(e,t)=>i.createElement(se,Qi({},e,{ref:t,icon:Ki})),Zi=i.forwardRef(Ji);function eo(){return eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eo.apply(this,arguments)}const to=i.forwardRef((e,t)=>{const{className:n,component:r,viewBox:o,spin:s,rotate:l,tabIndex:c,onClick:u,children:d,...h}=e,f=i.useRef(null),p=w(f,t);we(Boolean(r||d),"Should have `component` prop or `children`."),Ce(f);const{prefixCls:g="anticon",rootClassName:m}=i.useContext(C),b=a(m,g,{[`${g}-spin`]:!!s&&!!r},n),y=a({[`${g}-spin`]:!!s}),v={...ke,className:y,style:l?{msTransform:`rotate(${l}deg)`,transform:`rotate(${l}deg)`}:void 0,viewBox:o};o||delete v.viewBox;let x=c;return void 0===x&&u&&(x=-1),i.createElement("span",eo({role:"img"},h,{ref:p,tabIndex:x,onClick:u,className:b}),r?i.createElement(r,v,d):d?(we(Boolean(o)||1===i.Children.count(d)&&i.isValidElement(d)&&"use"===i.Children.only(d).type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),i.createElement("svg",eo({},v,{viewBox:o}),d)):null)});function no(){return no=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},no.apply(this,arguments)}const ro=new Set;function io(e,t=0){const n=e[t];if(r=n,Boolean("string"==typeof r&&r.length&&!ro.has(r))){const r=document.createElement("script");r.setAttribute("src",n),r.setAttribute("data-namespace",n),e.length>t+1&&(r.onload=()=>{io(e,t+1)},r.onerror=()=>{io(e,t+1)}),ro.add(n),document.body.appendChild(r)}var r}function oo(){return"function"==typeof BigInt}function ao(e){return!e&&0!==e&&!Number.isNaN(e)||!String(e).trim()}function so(e){var t=e.trim(),n=t.startsWith("-");n&&(t=t.slice(1)),(t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,"")).startsWith(".")&&(t="0".concat(t));var r=t||"0",i=r.split("."),o=i[0]||"0",a=i[1]||"0";"0"===o&&"0"===a&&(n=!1);var s=n?"-":"";return{negative:n,negativeStr:s,trimStr:r,integerStr:o,decimalStr:a,fullStr:"".concat(s).concat(r)}}function lo(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function co(e){var t=String(e);if(lo(e)){var n=Number(t.slice(t.indexOf("e-")+2)),r=t.match(/\.(\d+)/);return null!=r&&r[1]&&(n+=r[1].length),n}return t.includes(".")&&ho(t)?t.length-t.indexOf(".")-1:0}function uo(e){var t=String(e);if(lo(e)){if(e>Number.MAX_SAFE_INTEGER)return String(oo()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(oo()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(co(t))}return so(t).fullStr}function ho(e){return"number"==typeof e?!Number.isNaN(e):!!e&&(/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e))}var fo=function(){function e(t){if(_(this,e),E(this,"origin",""),E(this,"negative",void 0),E(this,"integer",void 0),E(this,"decimal",void 0),E(this,"decimalLen",void 0),E(this,"empty",void 0),E(this,"nan",void 0),ao(t))this.empty=!0;else if(this.origin=String(t),"-"===t||Number.isNaN(t))this.nan=!0;else{var n=t;if(lo(n)&&(n=Number(n)),ho(n="string"==typeof n?n:uo(n))){var r=so(n);this.negative=r.negative;var i=r.trimStr.split(".");this.integer=BigInt(i[0]);var o=i[1]||"0";this.decimal=BigInt(o),this.decimalLen=o.length}else this.nan=!0}}return k(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var t="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(t)}},{key:"negate",value:function(){var t=new e(this.toString());return t.negative=!t.negative,t}},{key:"cal",value:function(t,n,r){var i=Math.max(this.getDecimalStr().length,t.getDecimalStr().length),o=n(this.alignDecimal(i),t.alignDecimal(i)).toString(),a=r(i),s=so(o),l=s.negativeStr,c=s.trimStr,u="".concat(l).concat(c.padStart(a+1,"0"));return new e("".concat(u.slice(0,-a),".").concat(u.slice(-a)))}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var n=new e(t);return n.isInvalidate()?this:this.cal(n,function(e,t){return e+t},function(e){return e})}},{key:"multi",value:function(t){var n=new e(t);return this.isInvalidate()||n.isInvalidate()?new e(NaN):this.cal(n,function(e,t){return e*t},function(e){return 2*e})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(null==e?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":so("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e}(),po=function(){function e(t){_(this,e),E(this,"origin",""),E(this,"number",void 0),E(this,"empty",void 0),ao(t)?this.empty=!0:(this.origin=String(t),this.number=Number(t))}return k(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var n=Number(t);if(Number.isNaN(n))return this;var r=this.number+n;if(r>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var i=Math.max(co(this.number),co(n));return new e(r.toFixed(i))}},{key:"multi",value:function(t){var n=Number(t);if(this.isInvalidate()||Number.isNaN(n))return new e(NaN);var r=this.number*n;if(r>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var i=Math.max(co(this.number),co(n));return new e(r.toFixed(i))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(null==e?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":uo(this.number):this.origin}}]),e}();function go(e){return oo()?new fo(e):new po(e)}function mo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""===e)return"";var i=so(e),o=i.negativeStr,a=i.integerStr,s=i.decimalStr,l="".concat(t).concat(s),c="".concat(o).concat(a);if(n>=0){var u=Number(s[n]);return u>=5&&!r?mo(go(e).add("".concat(o,"0.").concat("0".repeat(n)).concat(10-u)).toString(),t,n,r):0===n?c:"".concat(c).concat(t).concat(s.padEnd(n,"0").slice(0,n))}return".0"===l?c:"".concat(c).concat(l)}function bo({prefixCls:e,action:t,children:n,disabled:o,className:s,style:l,onStep:c}){const u="up"===t,d=i.useRef(),h=i.useRef([]),f=()=>{clearTimeout(d.current)};i.useEffect(()=>()=>{f(),h.current.forEach(e=>{r.cancel(e)})},[]);const p=`${e}-action`,g=a(p,`${p}-${t}`,{[`${p}-${t}-disabled`]:o},s),m=()=>h.current.push(r(f));return i.createElement("span",{unselectable:"on",role:"button",onMouseUp:m,onMouseLeave:m,onMouseDown:e=>{(e=>{e.preventDefault(),f(),c(u,"handler"),d.current=setTimeout(function e(){c(u,"handler"),d.current=setTimeout(e,200)},600)})(e)},"aria-label":u?"Increase Value":"Decrease Value","aria-disabled":o,className:g,style:l},n||i.createElement("span",{unselectable:"on",className:`${e}-action-${t}-inner`}))}function yo(e){const t="number"==typeof e?uo(e):so(e).fullStr;return t.includes(".")?so(t.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:e+"0"}function vo(){return vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vo.apply(this,arguments)}const xo=(e,t)=>e||t.isEmpty()?t.toString():t.toNumber(),So=e=>{const t=go(e);return t.isInvalidate()?null:t},wo=i.forwardRef((e,o)=>{const{mode:s="input",prefixCls:l="rc-input-number",className:c,style:u,classNames:d,styles:h,min:f,max:p,step:g=1,defaultValue:m,value:b,disabled:y,readOnly:v,upHandler:x,downHandler:S,keyboard:w,changeOnWheel:C=!1,controls:k=!0,prefix:_,suffix:E,stringMode:$,parser:M,formatter:N,precision:A,decimalSeparator:T,onChange:R,onInput:I,onPressEnter:D,onStep:L,onMouseDown:z,onClick:W,onMouseUp:O,onMouseLeave:B,onMouseMove:F,onMouseEnter:j,onMouseOut:H,changeOnBlur:G=!0,...U}=e,[q,X]=i.useState(!1),V=i.useRef(!1),Y=i.useRef(!1),K=i.useRef(!1),Q=i.useRef(null),J=i.useRef(null);i.useImperativeHandle(o,()=>{return e=J.current,t={focus:e=>{_e(J.current,e)},blur:()=>{J.current?.blur()},nativeElement:Q.current},"undefined"!=typeof Proxy&&e?new Proxy(e,{get(e,n){if(t[n])return t[n];const r=e[n];return"function"==typeof r?r.bind(e):r}}):e;var e,t});const[Z,ee]=i.useState(()=>go(b??m));const te=i.useCallback((e,t)=>{if(!t)return A>=0?A:Math.max(co(e),co(g))},[A,g]),ne=i.useCallback(e=>{const t=String(e);if(M)return M(t);let n=t;return T&&(n=n.replace(T,".")),n.replace(/[^\w.-]+/g,"")},[M,T]),re=i.useRef(""),ie=i.useCallback((e,t)=>{if(N)return N(e,{userTyping:t,input:String(re.current)});let n="number"==typeof e?uo(e):e;if(!t){const e=te(n,t);if(ho(n)&&(T||e>=0)){n=mo(n,T||".",e)}}return n},[N,te,T]),[oe,ae]=i.useState(()=>{const e=m??b;return Z.isInvalidate()&&["string","number"].includes(typeof e)?Number.isNaN(e)?"":e:ie(Z.toString(),!1)});function se(e,t){ae(ie(e.isInvalidate()?e.toString(!1):e.toString(!t),t))}re.current=oe;const le=i.useMemo(()=>So(p),[p,A]),ce=i.useMemo(()=>So(f),[f,A]),ue=i.useMemo(()=>!(!le||!Z||Z.isInvalidate())&&le.lessEquals(Z),[le,Z]),de=i.useMemo(()=>!(!ce||!Z||Z.isInvalidate())&&Z.lessEquals(ce),[ce,Z]),[he,fe]=function(e,t){const n=i.useRef(null);return[function(){try{const{selectionStart:t,selectionEnd:r,value:i}=e,o=i.substring(0,t),a=i.substring(r);n.current={start:t,end:r,value:i,beforeTxt:o,afterTxt:a}}catch(t){}},function(){if(e&&n.current&&t)try{const{value:t}=e,{beforeTxt:r,afterTxt:i,start:o}=n.current;let a=t.length;if(t.startsWith(r))a=r.length;else if(t.endsWith(i))a=t.length-n.current.afterTxt.length;else{const e=r[o-1],n=t.indexOf(e,o-1);-1!==n&&(a=n+1)}e.setSelectionRange(a,a)}catch(r){P(!1,`Something warning of cursor restore. Please fire issue about this: ${r.message}`)}}]}(J.current,q),pe=e=>le&&!e.lessEquals(le)?le:ce&&!ce.lessEquals(e)?ce:null,ge=e=>!pe(e),me=(e,t)=>{let n=e,r=ge(n)||n.isEmpty();if(n.isEmpty()||t||(n=pe(n)||n,r=!0),!v&&!y&&r){const e=n.toString(),r=te(e,t);return r>=0&&(n=go(mo(e,".",r)),ge(n)||(n=go(mo(e,".",r,!0)))),n.equals(Z)||(i=n,void 0===b&&ee(i),R?.(n.isEmpty()?null:xo($,n)),void 0===b&&se(n,t)),n}var i;return Z},be=(()=>{const e=i.useRef(0),t=()=>{r.cancel(e.current)};return i.useEffect(()=>t,[]),n=>{t(),e.current=r(()=>{n()})}})(),ye=e=>{if(he(),re.current=e,ae(e),!Y.current){const t=go(ne(e));t.isNaN()||me(t,!0)}I?.(e),be(()=>{let t=e;M||(t=e.replace(//g,".")),t!==e&&ye(t)})},ve=t((e,t)=>{if(e&&ue||!e&&de)return;V.current=!1;let n=go(K.current?yo(g):g);e||(n=n.negate());const r=(Z||go(0)).add(n.toString()),i=me(r,!1);L?.(xo($,i),{offset:K.current?yo(g):g,type:e?"up":"down",emitter:t}),J.current?.focus()}),xe=e=>{const t=go(ne(oe));let n;n=t.isNaN()?me(Z,e):me(t,e),void 0!==b?se(Z,!1):n.isNaN()||se(n,!1)};i.useEffect(()=>{if(C&&q){const e=e=>{ve(e.deltaY<0,"wheel"),e.preventDefault()},t=J.current;if(t)return t.addEventListener("wheel",e,{passive:!1}),()=>t.removeEventListener("wheel",e)}});n(()=>{Z.isInvalidate()||se(Z,!1)},[A,N]),n(()=>{const e=go(b);ee(e);const t=go(ne(oe));e.equals(t)&&V.current&&!N||se(e,V.current)},[b]),n(()=>{N&&fe()},[oe]);const Se={prefixCls:l,onStep:ve,className:d?.action,style:h?.action},we=i.createElement(bo,vo({},Se,{action:"up",disabled:ue}),x),Ce=i.createElement(bo,vo({},Se,{action:"down",disabled:de}),S);return i.createElement("div",{ref:Q,className:a(l,`${l}-mode-${s}`,c,d?.root,{[`${l}-focused`]:q,[`${l}-disabled`]:y,[`${l}-readonly`]:v,[`${l}-not-a-number`]:Z.isNaN(),[`${l}-out-of-range`]:!Z.isInvalidate()&&!ge(Z)}),style:{...h?.root,...u},onMouseDown:e=>{J.current&&e.target!==J.current&&(J.current.focus(),e.preventDefault()),z?.(e)},onMouseUp:O,onMouseLeave:B,onMouseMove:F,onMouseEnter:j,onMouseOut:H,onClick:W,onFocus:()=>{X(!0)},onBlur:()=>{G&&xe(!1),X(!1),V.current=!1},onKeyDown:e=>{const{key:t,shiftKey:n}=e;V.current=!0,K.current=n,"Enter"===t&&(Y.current||(V.current=!1),xe(!1),D?.(e)),!1!==w&&!Y.current&&["Up","ArrowUp","Down","ArrowDown"].includes(t)&&(ve("Up"===t||"ArrowUp"===t,"keyboard"),e.preventDefault())},onKeyUp:()=>{V.current=!1,K.current=!1},onCompositionStart:()=>{Y.current=!0},onCompositionEnd:()=>{Y.current=!1,ye(J.current.value)},onBeforeInput:()=>{V.current=!0}},"spinner"===s&&k&&Ce,void 0!==_&&i.createElement("div",{className:a(`${l}-prefix`,d?.prefix),style:h?.prefix},_),i.createElement("input",vo({autoComplete:"off",role:"spinbutton","aria-valuemin":f,"aria-valuemax":p,"aria-valuenow":Z.isInvalidate()?null:Z.toString(),step:g,ref:J,className:a(`${l}-input`,d?.input),style:h?.input,value:oe,onChange:e=>{ye(e.target.value)},disabled:y,readOnly:v},U)),void 0!==E&&i.createElement("div",{className:a(`${l}-suffix`,d?.suffix),style:h?.suffix},E),"spinner"===s&&k&&we,"input"===s&&k&&i.createElement("div",{className:a(`${l}-actions`,d?.actions),style:h?.actions},we,Ce))}),Co=e=>{const{componentCls:t,lineWidth:n,lineType:r,borderRadius:i,inputFontSizeSM:o,inputFontSizeLG:a,colorError:s,paddingInlineSM:u,paddingBlockSM:d,paddingBlockLG:h,paddingInlineLG:f,colorIcon:p,motionDurationMid:g,handleHoverColor:m,handleOpacity:b,paddingInline:y,paddingBlock:v,handleBg:x,handleActiveBg:S,inputAffixPadding:w,borderRadiusSM:C,controlWidth:k,handleBorderColor:_,filledHandleBg:E,lineHeightLG:P}=e,$=`${l(n)} ${r} ${_}`;return[{[t]:{...c(e),...Ot(e),"--input-number-input-padding-block":l(v),"--input-number-input-padding-inline":l(y),display:"inline-flex",width:k,margin:0,paddingBlock:0,borderRadius:i,...Wt(e,{[`${t}-actions`]:{background:x,[`${t}-action-down`]:{borderBlockStart:$}}}),...zt(e,{[`${t}-actions`]:{background:E,[`${t}-action-down`]:{borderBlockStart:$}},"&:focus-within":{[`${t}-actions`]:{background:x}}}),...Lt(e,{[`${t}-actions`]:{background:x,[`${t}-action-down`]:{borderBlockStart:$}}}),...Dt(e),"&-rtl":{direction:"rtl",[`${t}-input`]:{direction:"rtl"}},[`&${t}-out-of-range`]:{[`${t}-input`]:{color:s}},[`${t}-input`]:{...c(e),width:"100%",paddingBlock:"var(--input-number-input-padding-block)",textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:i,outline:0,transition:`all ${g} linear`,appearance:"textfield",fontSize:"inherit",lineHeight:"inherit",...It(e.colorTextPlaceholder),'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,appearance:"none"}},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1},[`&-disabled ${t}-input`]:{cursor:"not-allowed",color:e.colorTextDisabled}}},{[t]:{[`\n          ${t}-action-up-disabled,\n          ${t}-action-down-disabled\n        `]:{cursor:"not-allowed"},[`${t}-action`]:{...M(),userSelect:"none",overflow:"hidden",fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",transition:`all ${g} linear`,"&:active":{background:S},"&:hover":{color:m}},"&-mode-input":{overflow:"hidden",[`${t}-actions`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:e.handleVisibleWidth,opacity:b,height:"100%",borderRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${g}`,overflow:"hidden",[`${t}-action`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",marginInlineEnd:0,fontSize:e.handleFontSize}},[`&:hover ${t}-actions, &-focused ${t}-actions`]:{width:e.handleWidth,opacity:1},[`${t}-action`]:{color:p,height:"50%",borderInlineStart:$,"&:hover":{height:"60%"}},[`&${t}-disabled, &${t}-readonly`]:{[`${t}-actions`]:{display:"none"}}},[`&${t}-mode-spinner`]:{padding:0,width:"auto",[`${t}-action`]:{flex:"none",paddingInline:"var(--input-number-input-padding-inline)","&-up":{borderInlineStart:$},"&-down":{borderInlineEnd:$}},[`${t}-input`]:{textAlign:"center",paddingInline:"var(--input-number-input-padding-inline)"}}}},{[t]:{"&-lg":{"--input-number-input-padding-block":l(h),"--input-number-input-padding-inline":l(f),paddingBlock:0,fontSize:a,lineHeight:P},"&-sm":{"--input-number-input-padding-block":l(d),"--input-number-input-padding-inline":l(u),paddingBlock:0,fontSize:o,borderRadius:C}}},{[t]:{[`${t}-prefix, ${t}-suffix`]:{display:"flex",flex:"none",alignItems:"center",alignSelf:"center",pointerEvents:"none"},[`${t}-prefix`]:{marginInlineEnd:w},[`${t}-suffix`]:{height:"100%",marginInlineStart:w,transition:`margin ${g}`},[`&:hover:not(${t}-without-controls)`]:{[`${t}-suffix`]:{marginInlineEnd:e.handleWidth}}}}]},ko=e=>{const{componentCls:t,antCls:n}=e;return{[`${t}-addon`]:{[`&:has(${n}-select)`]:{border:0,padding:0}}}},_o=ce("InputNumber",e=>{const t=ue(e,Rt(e));return[Co(t),ko(t),ct(t)]},e=>{const t=e.handleVisible??"auto",n=e.controlHeightSM-2*e.lineWidth;return{...Tt(e),controlWidth:90,handleWidth:n,handleFontSize:e.fontSize/2,handleVisible:t,handleActiveBg:e.colorFillAlter,handleBg:e.colorBgContainer,filledHandleBg:new $(e.colorFillSecondary).onBackground(e.colorBgContainer).toHexString(),handleHoverColor:e.colorPrimary,handleBorderColor:e.colorBorder,handleOpacity:!0===t?1:0,handleVisibleWidth:!0===t?n:0}},{unitless:{handleOpacity:!0},resetFont:!1}),Eo=i.forwardRef((e,t)=>{const n=i.useRef(null);i.useImperativeHandle(t,()=>n.current);const{rootClassName:r,size:o,disabled:s,prefixCls:l,addonBefore:c,addonAfter:d,prefix:h,suffix:f,bordered:g,readOnly:m,status:b,controls:y=!0,variant:v,className:x,style:S,classNames:w,styles:C,mode:k,..._}=e,{direction:E,className:P,style:$,styles:M,classNames:N}=u("inputNumber"),A=i.useMemo(()=>!(!y||e.disabled||e.readOnly)&&y,[y,e.disabled,e.readOnly]),{compactSize:T,compactItemClassnames:R}=Pe(l,E);let I="spinner"===k?i.createElement(jt,null):i.createElement(Zi,null),D="spinner"===k?i.createElement(Mi,null):i.createElement(xt,null);const L="boolean"==typeof A?A:void 0;"object"==typeof A&&(I=A.upIcon||I,D=A.downIcon||D);const{hasFeedback:z,isFormItemInput:W,feedbackIcon:O}=i.useContext(ge),B=be(e=>o??T??e),F=i.useContext(p),j=s??F,[H,G]=At("inputNumber",v,g),U=z&&i.createElement(i.Fragment,null,O),q={...e,size:B,disabled:j,controls:A},[X,V]=fe([N,w],[M,C],{props:q});return i.createElement(wo,{ref:n,mode:k,disabled:j,className:a(x,r,X.root,P,R,dt(l,b,z),{[`${l}-${H}`]:G,[`${l}-lg`]:"large"===B,[`${l}-sm`]:"small"===B,[`${l}-rtl`]:"rtl"===E,[`${l}-in-form-item`]:W,[`${l}-without-controls`]:!A}),style:{...V.root,...$,...S},upHandler:I,downHandler:D,prefixCls:l,readOnly:m,controls:L,prefix:h,suffix:U||f,classNames:X,styles:V,..._})}),Po=i.forwardRef((e,t)=>{const{addonBefore:n,addonAfter:r,prefixCls:o,className:s,status:l,rootClassName:c,...d}=e,{getPrefixCls:h}=u("inputNumber"),f=h("input-number",o),{status:p}=i.useContext(ge),g=ut(p,l),m=me(f),[b,y]=_o(f,m),v=n||r,x=i.createElement(Eo,{ref:t,...d,prefixCls:f,status:g,className:a(y,m,b,s),rootClassName:v?void 0:c});if(v){const t=t=>t?i.createElement(et,{className:a(`${f}-addon`,y,b),variant:e.variant,disabled:e.disabled,status:g},i.createElement($e,{form:!0},t)):null,o=t(n),s=t(r);return i.createElement(Ee,{rootClassName:c},o,x,s)}return x}),$o=Po;$o._InternalPanelDoNotUseOrYouWillBeFired=e=>i.createElement(N,{theme:{components:{InputNumber:{handleVisible:!0}}}},i.createElement(Po,{...e}));const Mo=({prefixCls:e,min:t=0,max:n=100,value:r,onChange:s,className:l,formatter:c})=>{const u=`${e}-steppers`,[d,h]=i.useState(0),f=Number.isNaN(r)?d:r;return o.createElement($o,{className:a(u,l),min:t,max:n,value:f,formatter:c,size:"small",onChange:e=>{h(e||0),s?.(e)}})},No=({prefixCls:e,value:t,onChange:n})=>{const r=`${e}-alpha-input`,[a,s]=i.useState(()=>Se(t||"#000")),l=t||a;return o.createElement(Mo,{value:Me(l),prefixCls:e,formatter:e=>`${e}%`,className:r,onChange:e=>{const t=l.toHsb();t.a=(e||0)/100;const r=Se(t);s(r),n?.(r)}})},Ao=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,To=({prefixCls:e,value:t,onChange:n})=>{const r=`${e}-hex-input`,[a,s]=i.useState(()=>t?Ne(t.toHexString()):void 0);i.useEffect(()=>{t&&s(Ne(t.toHexString()))},[t]);return o.createElement(_t,{className:r,value:a,prefix:"#",onChange:e=>{const t=e.target.value;var r;s(Ne(t)),r=Ne(t,!0),Ao.test(`#${r}`)&&n?.(Se(t))},size:"small"})},Ro=({prefixCls:e,value:t,onChange:n})=>{const r=`${e}-hsb-input`,[a,s]=i.useState(()=>Se(t||"#000")),l=t||a,c=(e,t)=>{const r=l.toHsb();r[t]="h"===t?e:(e||0)/100;const i=Se(r);s(i),n?.(i)};return o.createElement("div",{className:r},o.createElement(Mo,{max:360,min:0,value:Number(l.toHsb().h),prefixCls:e,className:r,formatter:e=>Ae(e||0).toString(),onChange:e=>c(Number(e),"h")}),o.createElement(Mo,{max:100,min:0,value:100*Number(l.toHsb().s),prefixCls:e,className:r,formatter:e=>`${Ae(e||0)}%`,onChange:e=>c(Number(e),"s")}),o.createElement(Mo,{max:100,min:0,value:100*Number(l.toHsb().b),prefixCls:e,className:r,formatter:e=>`${Ae(e||0)}%`,onChange:e=>c(Number(e),"b")}))},Io=({prefixCls:e,value:t,onChange:n})=>{const r=`${e}-rgb-input`,[a,s]=i.useState(()=>Se(t||"#000")),l=t||a,c=(e,t)=>{const r=l.toRgb();r[t]=e||0;const i=Se(r);s(i),n?.(i)};return o.createElement("div",{className:r},o.createElement(Mo,{max:255,min:0,value:Number(l.toRgb().r),prefixCls:e,className:r,onChange:e=>c(Number(e),"r")}),o.createElement(Mo,{max:255,min:0,value:Number(l.toRgb().g),prefixCls:e,className:r,onChange:e=>c(Number(e),"g")}),o.createElement(Mo,{max:255,min:0,value:Number(l.toRgb().b),prefixCls:e,className:r,onChange:e=>c(Number(e),"b")}))},Do=[fr,gr,pr].map(e=>({value:e,label:e.toUpperCase()})),Lo=e=>{const{prefixCls:t,format:n,value:r,disabledAlpha:a,onFormatChange:s,onChange:l,disabledFormat:c}=e,[u,d]=ne(fr,n),h=`${t}-input`,f=i.useMemo(()=>{const e={value:r,prefixCls:t,onChange:l};switch(u){case gr:return o.createElement(Ro,{...e});case pr:return o.createElement(Io,{...e});default:return o.createElement(To,{...e})}},[u,t,r,l]);return o.createElement("div",{className:`${h}-container`},!c&&o.createElement(St,{value:u,variant:"borderless",getPopupContainer:e=>e,popupMatchSelectWidth:68,placement:"bottomRight",onChange:e=>{d(e),s?.(e)},className:`${t}-format-select`,size:"small",options:Do}),o.createElement("div",{className:h},f),!a&&o.createElement(No,{prefixCls:t,value:r,onChange:l}))};function zo(e,t,n){return(e-t)/(n-t)}function Wo(e,t,n,r){const i=zo(t,n,r),o={};switch(e){case"rtl":o.right=100*i+"%",o.transform="translateX(50%)";break;case"btt":o.bottom=100*i+"%",o.transform="translateY(50%)";break;case"ttb":o.top=100*i+"%",o.transform="translateY(-50%)";break;default:o.left=100*i+"%",o.transform="translateX(-50%)"}return o}function Oo(e,t){return Array.isArray(e)?e[t]:e}const Bo=i.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),Fo=i.createContext({});function jo(){return jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jo.apply(this,arguments)}const Ho=i.forwardRef((e,t)=>{const{prefixCls:n,value:r,valueIndex:o,onStartMove:s,onDelete:l,style:c,render:u,dragging:d,draggingDelete:h,onOffsetChange:f,onChangeComplete:p,onFocus:g,onMouseEnter:m,...b}=e,{min:y,max:v,direction:x,disabled:S,keyboard:w,range:C,tabIndex:k,ariaLabelForHandle:_,ariaLabelledByForHandle:E,ariaRequired:P,ariaValueTextFormatterForHandle:$,styles:M,classNames:N}=i.useContext(Bo),A=`${n}-handle`,T=e=>{S||s(e,o)},R=e=>{g?.(e,o)},I=e=>{m(e,o)},D=e=>{if(!S&&w){let t=null;switch(e.which||e.keyCode){case Te.LEFT:t="ltr"===x||"btt"===x?-1:1;break;case Te.RIGHT:t="ltr"===x||"btt"===x?1:-1;break;case Te.UP:t="ttb"!==x?1:-1;break;case Te.DOWN:t="ttb"!==x?-1:1;break;case Te.HOME:t="min";break;case Te.END:t="max";break;case Te.PAGE_UP:t=2;break;case Te.PAGE_DOWN:t=-2;break;case Te.BACKSPACE:case Te.DELETE:l?.(o)}null!==t&&(e.preventDefault(),f(t,o))}},L=e=>{switch(e.which||e.keyCode){case Te.LEFT:case Te.RIGHT:case Te.UP:case Te.DOWN:case Te.HOME:case Te.END:case Te.PAGE_UP:case Te.PAGE_DOWN:p?.()}},z=Wo(x,r,y,v);let W={};null!==o&&(W={tabIndex:S?null:Oo(k,o),role:"slider","aria-valuemin":y,"aria-valuemax":v,"aria-valuenow":r,"aria-disabled":S,"aria-label":Oo(_,o),"aria-labelledby":Oo(E,o),"aria-required":Oo(P,o),"aria-valuetext":Oo($,o)?.(r),"aria-orientation":"ltr"===x||"rtl"===x?"horizontal":"vertical",onMouseDown:T,onTouchStart:T,onFocus:R,onMouseEnter:I,onKeyDown:D,onKeyUp:L});let O=i.createElement("div",jo({ref:t,className:a(A,{[`${A}-${o+1}`]:null!==o&&C,[`${A}-dragging`]:d,[`${A}-dragging-delete`]:h},N.handle),style:{...z,...c,...M.handle}},W,b));return u&&(O=u(O,{index:o,prefixCls:n,value:r,dragging:d,draggingDelete:h})),O});function Go(){return Go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Go.apply(this,arguments)}const Uo=i.forwardRef((e,t)=>{const{prefixCls:n,style:r,onStartMove:o,onOffsetChange:a,values:s,handleRender:l,activeHandleRender:c,draggingIndex:u,draggingDelete:d,onFocus:h,...f}=e,p=i.useRef({}),[g,m]=i.useState(!1),[b,y]=i.useState(-1),v=e=>{y(e),m(!0)};i.useImperativeHandle(t,()=>({focus:e=>{p.current[e]?.focus()},hideHelp:()=>{A.flushSync(()=>{m(!1)})}}));const x={prefixCls:n,onStartMove:o,onOffsetChange:a,render:l,onFocus:(e,t)=>{v(t),h?.(e)},onMouseEnter:(e,t)=>{v(t)},...f};return i.createElement(i.Fragment,null,s.map((e,t)=>{const n=u===t;return i.createElement(Ho,Go({ref:e=>{e?p.current[t]=e:delete p.current[t]},dragging:n,draggingDelete:n&&d,style:Oo(r,t),key:t,value:e,valueIndex:t},x))}),c&&g&&i.createElement(Ho,Go({key:"a11y"},x,{value:s[b],valueIndex:null,dragging:-1!==u,draggingDelete:d,render:c,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),qo=e=>{const{prefixCls:t,style:n,children:r,value:o,onClick:s}=e,{min:l,max:c,direction:u,includedStart:d,includedEnd:h,included:f}=i.useContext(Bo),p=`${t}-text`,g=Wo(u,o,l,c);return i.createElement("span",{className:a(p,{[`${p}-active`]:f&&d<=o&&o<=h}),style:{...g,...n},onMouseDown:e=>{e.stopPropagation()},onClick:()=>{s(o)}},r)},Xo=e=>{const{prefixCls:t,marks:n,onClick:r}=e,o=`${t}-mark`;return n.length?i.createElement("div",{className:o},n.map(({value:e,style:t,label:n})=>i.createElement(qo,{key:e,prefixCls:o,style:t,value:e,onClick:r},n))):null},Vo=e=>{const{prefixCls:t,value:n,style:r,activeStyle:o}=e,{min:s,max:l,direction:c,included:u,includedStart:d,includedEnd:h}=i.useContext(Bo),f=`${t}-dot`,p=u&&d<=n&&n<=h;let g={...Wo(c,n,s,l),..."function"==typeof r?r(n):r};return p&&(g={...g,..."function"==typeof o?o(n):o}),i.createElement("span",{className:a(f,{[`${f}-active`]:p}),style:g})},Yo=e=>{const{prefixCls:t,marks:n,dots:r,style:o,activeStyle:a}=e,{min:s,max:l,step:c}=i.useContext(Bo),u=i.useMemo(()=>{const e=new Set;if(n.forEach(t=>{e.add(t.value)}),r&&null!==c){let t=s;for(;t<=l;)e.add(t),t+=c}return Array.from(e)},[s,l,c,r,n]);return i.createElement("div",{className:`${t}-step`},u.map(e=>i.createElement(Vo,{prefixCls:t,key:e,value:e,style:o,activeStyle:a})))},Ko=e=>{const{prefixCls:t,style:n,start:r,end:o,index:s,onStartMove:l,replaceCls:c}=e,{direction:u,min:d,max:h,disabled:f,range:p,classNames:g}=i.useContext(Bo),m=`${t}-track`,b=zo(r,d,h),y=zo(o,d,h),v=e=>{!f&&l&&l(e,-1)},x={};switch(u){case"rtl":x.right=100*b+"%",x.width=100*y-100*b+"%";break;case"btt":x.bottom=100*b+"%",x.height=100*y-100*b+"%";break;case"ttb":x.top=100*b+"%",x.height=100*y-100*b+"%";break;default:x.left=100*b+"%",x.width=100*y-100*b+"%"}const S=c||a(m,{[`${m}-${s+1}`]:null!==s&&p,[`${t}-track-draggable`]:l},g.track);return i.createElement("div",{className:S,style:{...x,...n},onMouseDown:v,onTouchStart:v})},Qo=e=>{const{prefixCls:t,style:n,values:r,startPoint:o,onStartMove:s}=e,{included:l,range:c,min:u,styles:d,classNames:h}=i.useContext(Bo),f=i.useMemo(()=>{if(!c){if(0===r.length)return[];const e=o??u,t=r[0];return[{start:Math.min(e,t),end:Math.max(e,t)}]}const e=[];for(let t=0;t<r.length-1;t+=1)e.push({start:r[t],end:r[t+1]});return e},[r,c,o,u]);if(!l)return null;const p=f?.length&&(h.tracks||d.tracks)?i.createElement(Ko,{index:null,prefixCls:t,start:f[0].start,end:f[f.length-1].end,replaceCls:a(h.tracks,`${t}-tracks`),style:d.tracks}):null;return i.createElement(i.Fragment,null,p,f.map(({start:e,end:r},o)=>i.createElement(Ko,{index:o,prefixCls:t,style:{...Oo(n,o),...d.track},start:e,end:r,key:o,onStartMove:s})))};function Jo(e){const t="targetTouches"in e?e.targetTouches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}const Zo=i.forwardRef((e,n)=>{const{prefixCls:r="rc-slider",className:o,style:s,classNames:l,styles:c,id:u,disabled:d=!1,keyboard:h=!0,autoFocus:f,onFocus:p,onBlur:g,min:m=0,max:b=100,step:y=1,value:x,defaultValue:S,range:w,count:C,onChange:k,onBeforeChange:_,onAfterChange:E,onChangeComplete:$,allowCross:M=!0,pushable:N=!1,reverse:A,vertical:R,included:I=!0,startPoint:D,trackStyle:L,handleStyle:z,railStyle:W,dotStyle:O,activeDotStyle:B,marks:F,dots:j,handleRender:H,activeHandleRender:G,track:U,tabIndex:q=0,ariaLabelForHandle:X,ariaLabelledByForHandle:V,ariaRequired:Y,ariaValueTextFormatterForHandle:K}=e,Q=i.useRef(null),J=i.useRef(null),Z=i.useMemo(()=>R?A?"ttb":"btt":A?"rtl":"ltr",[A,R]),[ee,te,re,ie,oe]=function(e){return i.useMemo(()=>{if(!0===e||!e)return[!!e,!1,!1,0];const{editable:t,draggableTrack:n,minCount:r,maxCount:i}=e;return[!0,t,!t&&n,r||0,i]},[e])}(w),ae=i.useMemo(()=>isFinite(m)?m:0,[m]),se=i.useMemo(()=>isFinite(b)?b:100,[b]),le=i.useMemo(()=>null!==y&&y<=0?1:y,[y]),ce=i.useMemo(()=>"boolean"==typeof N?!!N&&le:N>=0&&N,[N,le]),ue=i.useMemo(()=>Object.keys(F||{}).map(e=>{const t=F[e],n={value:Number(e)};return t&&"object"==typeof t&&!i.isValidElement(t)&&("label"in t||"style"in t)?(n.style=t.style,n.label=t.label):n.label=t,n}).filter(({label:e})=>e||"number"==typeof e).sort((e,t)=>e.value-t.value),[F]),[de,he]=function(e,t,n,r,o,a){const s=i.useCallback(n=>Math.max(e,Math.min(t,n)),[e,t]),l=i.useCallback(r=>{if(null!==n){const i=e+Math.round((s(r)-e)/n)*n,o=e=>(String(e).split(".")[1]||"").length,a=Math.max(o(n),o(t),o(e)),l=Number(i.toFixed(a));return e<=l&&l<=t?l:null}return null},[n,e,t,s]),c=i.useCallback(i=>{const o=s(i),a=r.map(e=>e.value);null!==n&&a.push(l(i)),a.push(e,t);let c=a[0],u=t-e;return a.forEach(e=>{const t=Math.abs(o-e);t<=u&&(c=e,u=t)}),c},[e,t,r,n,s,l]),u=(i,o,a,s="unit")=>{if("number"==typeof o){let c;const d=i[a],h=d+o;let f=[];r.forEach(e=>{f.push(e.value)}),f.push(e,t),f.push(l(d));const p=o>0?1:-1;"unit"===s?f.push(l(d+p*n)):f.push(l(h)),f=f.filter(e=>null!==e).filter(e=>o<0?e<=d:e>=d),"unit"===s&&(f=f.filter(e=>e!==d));const g="unit"===s?d:h;c=f[0];let m=Math.abs(c-g);if(f.forEach(e=>{const t=Math.abs(e-g);t<m&&(c=e,m=t)}),void 0===c)return o<0?e:t;if("dist"===s)return c;if(Math.abs(o)>1){const e=[...i];return e[a]=c,u(e,o-p,a,s)}return c}return"min"===o?e:"max"===o?t:void 0},d=(e,t,n,r="unit")=>{const i=e[n],o=u(e,t,n,r);return{value:o,changed:o!==i}},h=e=>null===a&&0===e||"number"==typeof a&&e<a;return[c,(e,t,n,r="unit")=>{const i=e.map(c),s=i[n],l=u(i,t,n,r);if(i[n]=l,!1===o){const e=a||0;n>0&&i[n-1]!==s&&(i[n]=Math.max(i[n],i[n-1]+e)),n<i.length-1&&i[n+1]!==s&&(i[n]=Math.min(i[n],i[n+1]-e))}else if("number"==typeof a||null===a){for(let e=n+1;e<i.length;e+=1){let t=!0;for(;h(i[e]-i[e-1])&&t;)({value:i[e],changed:t}=d(i,1,e))}for(let e=n;e>0;e-=1){let t=!0;for(;h(i[e]-i[e-1])&&t;)({value:i[e-1],changed:t}=d(i,-1,e-1))}for(let e=i.length-1;e>0;e-=1){let t=!0;for(;h(i[e]-i[e-1])&&t;)({value:i[e-1],changed:t}=d(i,-1,e-1))}for(let e=0;e<i.length-1;e+=1){let t=!0;for(;h(i[e+1]-i[e])&&t;)({value:i[e+1],changed:t}=d(i,1,e+1))}}return{value:i[n],values:i}}]}(ae,se,le,ue,M,ce),[fe,pe]=ne(S,x),ge=i.useMemo(()=>{const e=null==fe?[]:Array.isArray(fe)?fe:[fe],[t=ae]=e;let n=null===fe?[]:[t];if(ee){if(n=[...e],C||void 0===fe){const e=C>=0?C+1:2;for(n=n.slice(0,e);n.length<e;)n.push(n[n.length-1]??ae)}n.sort((e,t)=>e-t)}return n.forEach((e,t)=>{n[t]=de(e)}),n},[fe,ee,ae,C,de]),me=e=>ee?e:e[0],be=t(e=>{const t=[...e].sort((e,t)=>e-t);k&&!T(t,ge,!0)&&k(me(t)),pe(t)}),ye=t(e=>{e&&Q.current.hideHelp();const t=me(ge);E?.(t),P(!E,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),$?.(t)}),[ve,xe,Se,we,Ce]=function(e,n,r,o,a,s,l,c,u,d,h){const[f,p]=i.useState(null),[g,m]=i.useState(-1),[b,y]=i.useState(!1),[x,S]=i.useState(r),[w,C]=i.useState(r),k=i.useRef(null),_=i.useRef(null),E=i.useRef(null),{onDragStart:P,onDragChange:$}=i.useContext(Fo);v(()=>{-1===g&&S(r)},[r,g]),i.useEffect(()=>()=>{document.removeEventListener("mousemove",k.current),document.removeEventListener("mouseup",_.current),E.current&&(E.current.removeEventListener("touchmove",k.current),E.current.removeEventListener("touchend",_.current))},[]);const M=(e,t,n)=>{void 0!==t&&p(t),S(e);let r=e;n&&(r=e.filter((e,t)=>t!==g)),l(r),$&&$({rawValues:e,deleteIndex:n?g:-1,draggingIndex:g,draggingValue:t})},N=t((e,t,n)=>{if(-1===e){const e=w[0],n=w[w.length-1],r=o-e,i=a-n;let l=t*(a-o);l=Math.max(l,r),l=Math.min(l,i);const c=s(e+l);l=c-e;const u=w.map(e=>e+l);M(u)}else{const r=(a-o)*t,i=[...x];i[e]=w[e];const s=u(i,r,e,"dist");M(s.values,s.value,n)}}),A=i.useMemo(()=>{const e=[...r].sort((e,t)=>e-t),t=[...x].sort((e,t)=>e-t),n={};t.forEach(e=>{n[e]=(n[e]||0)+1}),e.forEach(e=>{n[e]=(n[e]||0)-1});const i=d?1:0;return Object.values(n).reduce((e,t)=>e+Math.abs(t),0)<=i?x:r},[r,x,d]);return[g,f,b,A,(t,i,o)=>{t.stopPropagation();const a=o||r,s=a[i];m(i),p(s),C(a),S(a),y(!1);const{pageX:l,pageY:u}=Jo(t);let f=!1;P&&P({rawValues:a,draggingIndex:i,draggingValue:s});const g=t=>{t.preventDefault();const{pageX:r,pageY:o}=Jo(t),a=r-l,s=o-u,{width:c,height:p}=e.current.getBoundingClientRect();let g,m;switch(n){case"btt":g=-s/p,m=a;break;case"ttb":g=s/p,m=a;break;case"rtl":g=-a/c,m=s;break;default:g=a/c,m=s}f=!!d&&Math.abs(m)>130&&h<x.length,y(f),N(i,g,f)},b=e=>{e.preventDefault(),document.removeEventListener("mouseup",b),document.removeEventListener("mousemove",g),E.current&&(E.current.removeEventListener("touchmove",k.current),E.current.removeEventListener("touchend",_.current)),k.current=null,_.current=null,E.current=null,c(f),m(-1),y(!1)};document.addEventListener("mouseup",b),document.addEventListener("mousemove",g),t.currentTarget.addEventListener("touchend",b),t.currentTarget.addEventListener("touchmove",g),k.current=g,_.current=b,E.current=t.currentTarget}]}(J,Z,ge,ae,se,de,be,ye,he,te,ie),ke=(e,t)=>{if(!d){const n=[...ge];let r=0,i=0,o=se-ae;ge.forEach((t,n)=>{const a=Math.abs(e-t);a<=o&&(o=a,r=n),t<e&&(i=n)});let a=r;te&&0!==o&&(!oe||ge.length<oe)?(n.splice(i+1,0,e),a=i+1):n[r]=e,ee&&!ge.length&&void 0===C&&n.push(e);const s=me(n);_?.(s),be(n),t?(document.activeElement?.blur?.(),Q.current.focus(a),Ce(t,a,n)):(E?.(s),P(!E,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),$?.(s))}},[_e,Ee]=i.useState(null);i.useEffect(()=>{if(null!==_e){const e=ge.indexOf(_e);e>=0&&Q.current.focus(e)}Ee(null)},[_e]);const Pe=i.useMemo(()=>(!re||null!==le)&&re,[re,le]),$e=t((e,t)=>{Ce(e,t),_?.(me(ge))}),Me=-1!==ve;i.useEffect(()=>{if(!Me){const e=ge.lastIndexOf(xe);Q.current.focus(e)}},[Me]);const Ne=i.useMemo(()=>[...we].sort((e,t)=>e-t),[we]),[Ae,Te]=i.useMemo(()=>ee?[Ne[0],Ne[Ne.length-1]]:[ae,Ne[0]],[Ne,ee,ae]);i.useImperativeHandle(n,()=>({focus:()=>{Q.current.focus(0)},blur:()=>{const{activeElement:e}=document;J.current?.contains(e)&&e?.blur()}})),i.useEffect(()=>{f&&Q.current.focus(0)},[]);const Re=i.useMemo(()=>({min:ae,max:se,direction:Z,disabled:d,keyboard:h,step:le,included:I,includedStart:Ae,includedEnd:Te,range:ee,tabIndex:q,ariaLabelForHandle:X,ariaLabelledByForHandle:V,ariaRequired:Y,ariaValueTextFormatterForHandle:K,styles:c||{},classNames:l||{}}),[ae,se,Z,d,h,le,I,Ae,Te,ee,q,X,V,Y,K,c,l]);return i.createElement(Bo.Provider,{value:Re},i.createElement("div",{ref:J,className:a(r,o,{[`${r}-disabled`]:d,[`${r}-vertical`]:R,[`${r}-horizontal`]:!R,[`${r}-with-marks`]:ue.length}),style:s,onMouseDown:e=>{e.preventDefault();const{width:t,height:n,left:r,top:i,bottom:o,right:a}=J.current.getBoundingClientRect(),{clientX:s,clientY:l}=e;let c;switch(Z){case"btt":c=(o-l)/n;break;case"ttb":c=(l-i)/n;break;case"rtl":c=(a-s)/t;break;default:c=(s-r)/t}ke(de(ae+c*(se-ae)),e)},id:u},i.createElement("div",{className:a(`${r}-rail`,l?.rail),style:{...W,...c?.rail}}),!1!==U&&i.createElement(Qo,{prefixCls:r,style:L,values:ge,startPoint:D,onStartMove:Pe?$e:void 0}),i.createElement(Yo,{prefixCls:r,marks:ue,dots:j,style:O,activeStyle:B}),i.createElement(Uo,{ref:Q,prefixCls:r,style:z,values:we,draggingIndex:ve,draggingDelete:Se,onStartMove:$e,onOffsetChange:(e,t)=>{if(!d){const n=he(ge,e,t);_?.(me(ge)),be(n.values),Ee(n.value)}},onFocus:p,onBlur:g,handleRender:H,activeHandleRender:G,onChangeComplete:ye,onDelete:te?e=>{if(d||!te||ge.length<=ie)return;const t=[...ge];t.splice(e,1),_?.(me(t)),be(t);const n=Math.max(0,e-1);Q.current.hideHelp(),Q.current.focus(n)}:void 0}),i.createElement(Xo,{prefixCls:r,marks:ue,onClick:ke})))}),ea=i.createContext({}),ta=i.forwardRef((e,t)=>{const{open:n,draggingDelete:o,value:a}=e,s=i.useRef(null),l=n&&!o,c=i.useRef(null);function u(){r.cancel(c.current),c.current=null}return i.useEffect(()=>(l?c.current=r(()=>{s.current?.forceAlign(),c.current=null}):u(),u),[l,e.title,a]),i.createElement(xe,{ref:f(s,t),...e,open:l})}),na=e=>{const{componentCls:t,antCls:n,controlSize:r,dotSize:i,marginFull:o,marginPart:a,colorFillContentHover:s,handleColorDisabled:u,calc:d,handleSize:h,handleSizeHover:f,handleActiveColor:p,handleActiveOutlineColor:g,handleLineWidth:m,handleLineWidthHover:b,motionDurationMid:y}=e;return{[t]:{...c(e),position:"relative",height:r,margin:`${l(a)} ${l(o)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${l(o)} ${l(a)}`},[`${t}-rail`]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:`background-color ${y}`},[`${t}-track,${t}-tracks`]:{position:"absolute",transition:`background-color ${y}`},[`${t}-track`]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},[`${t}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${t}-rail`]:{backgroundColor:e.railHoverBg},[`${t}-track`]:{backgroundColor:e.trackHoverBg},[`${t}-dot`]:{borderColor:s},[`${t}-handle::after`]:{boxShadow:`0 0 0 ${l(m)} ${e.colorPrimaryBorderHover}`},[`${t}-dot-active`]:{borderColor:e.dotActiveBorderColor}},[`${t}-handle`]:{position:"absolute",width:h,height:h,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:d(m).mul(-1).equal(),insetBlockStart:d(m).mul(-1).equal(),width:d(h).add(d(m).mul(2)).equal(),height:d(h).add(d(m).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:h,height:h,backgroundColor:e.colorBgElevated,boxShadow:`0 0 0 ${l(m)} ${e.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`\n            inset-inline-start ${y},\n            inset-block-start ${y},\n            width ${y},\n            height ${y},\n            box-shadow ${y},\n            outline ${y}\n          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:d(f).sub(h).div(2).add(b).mul(-1).equal(),insetBlockStart:d(f).sub(h).div(2).add(b).mul(-1).equal(),width:d(f).add(d(b).mul(2)).equal(),height:d(f).add(d(b).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${l(b)} ${p}`,outline:`6px solid ${g}`,width:f,height:f,insetInlineStart:e.calc(h).sub(f).div(2).equal(),insetBlockStart:e.calc(h).sub(f).div(2).equal()}}},[`&-lock ${t}-handle`]:{"&::before, &::after":{transition:"none"}},[`${t}-mark`]:{position:"absolute",fontSize:e.fontSize},[`${t}-mark-text`]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},[`${t}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${t}-dot`]:{position:"absolute",width:i,height:i,backgroundColor:e.colorBgElevated,border:`${l(m)} solid ${e.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-rail`]:{backgroundColor:`${e.railBg} !important`},[`${t}-track`]:{backgroundColor:`${e.trackBgDisabled} !important`},[`\n          ${t}-dot\n        `]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${t}-handle::after`]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:h,height:h,boxShadow:`0 0 0 ${l(m)} ${u}`,insetInlineStart:0,insetBlockStart:0},[`\n          ${t}-mark-text,\n          ${t}-dot\n        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${n}-tooltip-container`]:{minWidth:"unset"}}}},ra=(e,t)=>{const{componentCls:n,railSize:r,handleSize:i,dotSize:o,marginFull:a,calc:s}=e,c=t?"paddingBlock":"paddingInline",u=t?"width":"height",d=t?"height":"width",h=t?"insetBlockStart":"insetInlineStart",f=t?"top":"insetInlineStart",p=s(r).mul(3).sub(i).div(2).equal(),g=s(i).sub(r).div(2).equal(),m=t?{borderWidth:`${l(g)} 0`,transform:`translateY(${l(s(g).mul(-1).equal())})`}:{borderWidth:`0 ${l(g)}`,transform:`translateX(${l(e.calc(g).mul(-1).equal())})`};return{[c]:r,[d]:s(r).mul(3).equal(),[`${n}-rail`]:{[u]:"100%",[d]:r},[`${n}-track,${n}-tracks`]:{[d]:r},[`${n}-track-draggable`]:{...m},[`${n}-handle`]:{[h]:p},[`${n}-mark`]:{insetInlineStart:0,top:0,[f]:s(r).mul(3).add(t?0:a).equal(),[u]:"100%"},[`${n}-step`]:{insetInlineStart:0,top:0,[f]:r,[u]:"100%",[d]:r},[`${n}-dot`]:{position:"absolute",[h]:s(r).sub(o).div(2).equal()}}},ia=e=>{const{componentCls:t,marginPartWithMark:n}=e;return{[`${t}-horizontal`]:{...ra(e,!0),[`&${t}-with-marks`]:{marginBottom:n}}}},oa=e=>{const{componentCls:t}=e;return{[`${t}-vertical`]:{...ra(e,!1),height:"100%"}}},aa=ce("Slider",e=>{const t=ue(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[na(t),ia(t),oa(t)]},e=>{const t=e.controlHeightLG/4,n=e.controlHeightSM/2,r=e.lineWidth+1,i=e.lineWidth+1.5,o=e.colorPrimary,a=new $(o).setA(.2).toRgbString();return{controlSize:t,railSize:4,handleSize:t,handleSizeHover:n,dotSize:8,handleLineWidth:r,handleLineWidthHover:i,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:o,handleActiveOutlineColor:a,handleColorDisabled:new $(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}});function sa(){const[e,t]=i.useState(!1),n=i.useRef(null),o=()=>{r.cancel(n.current)};return i.useEffect(()=>o,[]),[e,e=>{o(),e?t(e):n.current=r(()=>{t(e)})}]}const la=o.forwardRef((e,t)=>{const{prefixCls:n,range:i,className:s,rootClassName:l,style:c,disabled:d,tooltip:h={},onChangeComplete:f,classNames:g,styles:m,vertical:b,orientation:y,...v}=e,[,x]=ye(y,b),{getPrefixCls:S,direction:w,className:C,style:k,classNames:_,styles:E,getPopupContainer:P}=u("slider"),$=o.useContext(p),M=d??$,N={...e,disabled:M,vertical:x},[A,T]=fe([_,g],[E,m],{props:N}),{handleRender:R,direction:I}=o.useContext(ea),D="rtl"===(I||w),[L,z]=sa(),[W,O]=sa(),B={...h},{open:F,placement:j,getPopupContainer:H,prefixCls:G,formatter:U}=B,q=F,X=(L||W)&&!1!==q,V=function(e){return e||null===e?e:e=>"number"==typeof e?e.toString():""}(U),[Y,K]=sa(),Q=(e,t)=>e||(t?D?"left":"right":"top"),J=S("slider",n),[Z,ee]=aa(J),te=a(s,C,A.root,l,{[`${J}-rtl`]:D,[`${J}-lock`]:Y},Z,ee);D&&!x&&(v.reverse=!v.reverse),o.useEffect(()=>{const e=()=>{r(()=>{O(!1)},1)};return document.addEventListener("mouseup",e),()=>{document.removeEventListener("mouseup",e)}},[]);const ne=i&&!q,re=R||((e,t)=>{const{index:n}=t,r=e.props;function i(e,t,n){n&&v[e]?.(t),r[e]?.(t)}const a={...r,onMouseEnter:e=>{z(!0),i("onMouseEnter",e)},onMouseLeave:e=>{z(!1),i("onMouseLeave",e)},onMouseDown:e=>{O(!0),K(!0),i("onMouseDown",e)},onFocus:e=>{O(!0),v.onFocus?.(e),i("onFocus",e,!0)},onBlur:e=>{O(!1),v.onBlur?.(e),i("onBlur",e,!0)}},s=o.cloneElement(e,a),l=(!!q||X)&&null!==V;return ne?s:o.createElement(ta,{...B,prefixCls:S("tooltip",G),title:V?V(t.value):"",value:t.value,open:l,placement:Q(j,x),key:n,classNames:{root:`${J}-tooltip`},getPopupContainer:H||P},s)}),ie=ne?(e,t)=>{const n=o.cloneElement(e,{style:{...e.props.style,visibility:"hidden"}});return o.createElement(ta,{...B,prefixCls:S("tooltip",G),title:V?V(t.value):"",open:null!==V&&X,placement:Q(j,x),key:"tooltip",classNames:{root:`${J}-tooltip`},getPopupContainer:H||P,draggingDelete:t.draggingDelete},n)}:void 0,oe={...T.root,...k,...c};return o.createElement(Zo,{...v,classNames:A,styles:T,step:v.step,range:i,className:te,style:oe,disabled:M,vertical:x,ref:t,prefixCls:J,handleRender:re,activeHandleRender:ie,onChangeComplete:e=>{f?.(e),K(!1)}})}),ca=e=>{const{prefixCls:n,colors:r,type:o,color:s,range:l=!1,className:c,activeIndex:u,onActive:d,onDragStart:h,onDragChange:f,onKeyDelete:p,...g}=e,m={...g,track:!1},b=i.useMemo(()=>`linear-gradient(90deg, ${r.map(e=>`${e.color} ${e.percent}%`).join(", ")})`,[r]),y=i.useMemo(()=>s&&o?"alpha"===o?s.toRgbString():`hsl(${s.toHsb().h}, 100%, 50%)`:null,[s,o]),v=t(h),x=t(f),S=i.useMemo(()=>({onDragStart:v,onDragChange:x}),[]),w=t((e,t)=>{const{onFocus:s,style:l,className:c,onKeyDown:h}=e.props,f={...l};return"gradient"===o&&(f.background=Re(r,t.value)),i.cloneElement(e,{onFocus:e=>{d?.(t.index),s?.(e)},style:f,className:a(c,{[`${n}-slider-handle-active`]:u===t.index}),onKeyDown:e=>{"Delete"!==e.key&&"Backspace"!==e.key||!p||p(t.index),h?.(e)}})}),C=i.useMemo(()=>({direction:"ltr",handleRender:w}),[]);return i.createElement(ea.Provider,{value:C},i.createElement(Fo.Provider,{value:S},i.createElement(la,{...m,className:a(c,`${n}-slider`),tooltip:{open:!1},range:{editable:l,minCount:2},styles:{rail:{background:b},handle:y?{background:y}:{}},classNames:{rail:`${n}-slider-rail`,handle:`${n}-slider-handle`}})))};function ua(e){return J(e).sort((e,t)=>e.percent-t.percent)}const da=e=>{const{prefixCls:t,mode:n,onChange:r,onChangeComplete:o,onActive:a,activeIndex:s,onGradientDragging:l,colors:c}=e,u="gradient"===n,d=i.useMemo(()=>c.map(e=>({percent:e.percent,color:e.color.toRgbString()})),[c]),h=i.useMemo(()=>d.map(e=>e.percent),[d]),f=i.useRef(d);return u?i.createElement(ca,{min:0,max:100,prefixCls:t,className:`${t}-gradient-slider`,colors:d,color:null,value:h,range:!0,onChangeComplete:e=>{o(new Ie(d)),s>=e.length&&a(e.length-1),l(!1)},disabled:!1,type:"gradient",activeIndex:s,onActive:a,onDragStart:({rawValues:e,draggingIndex:t,draggingValue:n})=>{if(e.length>d.length){const e=Re(d,n),r=J(d);r.splice(t,0,{percent:n,color:e}),f.current=r}else f.current=d;l(!0),r(new Ie(ua(f.current)),!0)},onDragChange:({deleteIndex:e,draggingIndex:t,draggingValue:n})=>{let i=J(f.current);-1!==e?i.splice(e,1):(i[t]={...i[t],percent:n},i=ua(i)),r(new Ie(i),!0)},onKeyDelete:e=>{const t=J(d);t.splice(e,1);const n=new Ie(t);r(n),o(n)}}):null},ha=i.memo(da),fa={slider:e=>{const{value:t,onChange:n,onChangeComplete:r}=e;return i.createElement(ca,{...e,value:[t],onChange:e=>n(e[0]),onChangeComplete:e=>r(e[0])})}},pa=()=>{const e=i.useContext(ur),{mode:t,onModeChange:n,modeOptions:r,prefixCls:a,allowClear:s,value:l,disabledAlpha:c,onChange:u,onClear:d,onChangeComplete:h,activeIndex:f,gradientDragging:p,...g}=e,m=o.useMemo(()=>l.cleared?[{percent:0,color:new Ie("")},{percent:100,color:new Ie("")}]:l.getColors(),[l]),b=!l.isGradient(),[y,x]=o.useState(l);v(()=>{b||x(m[f]?.color)},[b,m,p,f]);const S=o.useMemo(()=>b?l:p?y:m[f]?.color,[m,l,f,b,y,p]),[w,C]=o.useState(S),[k,_]=Ht(),E=w?.equals(S)?S:w;v(()=>{C(S)},[k,S?.toHexString()]);const P=(e,n)=>{let r=Se(e);if(l.cleared){const e=r.toRgb();if(e.r||e.g||e.b||!n)r=De(r);else{const{type:e,value:t=0}=n;r=new Ie({h:"hue"===e?t:0,s:1,b:1,a:"alpha"===e?t/100:1})}}if("single"===t)return r;const i=J(m);return i[f]={...i[f],color:r},new Ie(i)};let $=null;const M=r.length>1;return(s||M)&&($=o.createElement("div",{className:`${a}-operation`},M&&o.createElement(cr,{size:"small",options:r,value:t,onChange:n}),o.createElement(hr,{prefixCls:a,value:l,onChange:e=>{u(e),d?.()},...g}))),o.createElement(o.Fragment,null,$,o.createElement(ha,{...e,colors:m}),o.createElement(rn,{prefixCls:a,value:E?.toHsb(),disabledAlpha:c,onChange:(e,t)=>{((e,t,n)=>{const r=P(e,n);C(r.isGradient()?r.getColors()[f].color:r),u(r,t)})(e,!0,t)},onChangeComplete:(e,t)=>{((e,t)=>{h(P(e,t)),_()})(e,t)},components:fa}),o.createElement(Lo,{value:S,onChange:e=>{u(P(e))},prefixCls:a,disabledAlpha:c,...g}))},ga=()=>{const{prefixCls:e,value:t,presets:n,onChange:r}=i.useContext(dr);return Array.isArray(n)?o.createElement(qe,{value:t,presets:n,prefixCls:e,onChange:r}):null},ma=e=>{const{prefixCls:t,presets:n,panelRender:r,value:i,onChange:a,onClear:s,allowClear:l,disabledAlpha:c,mode:u,onModeChange:d,modeOptions:h,onChangeComplete:f,activeIndex:p,onActive:g,format:m,onFormatChange:b,gradientDragging:y,onGradientDragging:v,disabledFormat:x}=e,S=`${t}-inner`,w=o.useMemo(()=>({prefixCls:t,value:i,onChange:a,onClear:s,allowClear:l,disabledAlpha:c,mode:u,onModeChange:d,modeOptions:h,onChangeComplete:f,activeIndex:p,onActive:g,format:m,onFormatChange:b,gradientDragging:y,onGradientDragging:v,disabledFormat:x}),[t,i,a,s,l,c,u,d,h,f,p,g,m,b,y,v,x]),C=o.useMemo(()=>({prefixCls:t,value:i,presets:n,onChange:a}),[t,i,n,a]),k=o.createElement("div",{className:`${S}-content`},o.createElement(pa,null),Array.isArray(n)&&o.createElement(at,null),o.createElement(ga,null));return o.createElement(ur.Provider,{value:w},o.createElement(dr.Provider,{value:C},o.createElement("div",{className:S},"function"==typeof r?r(k,{components:{Picker:pa,Presets:ga}}):k)))},ba=i.forwardRef((e,t)=>{const{color:n,prefixCls:r,open:s,disabled:l,format:c,className:u,showText:d,activeIndex:h,...f}=e,p=`${r}-trigger`,g=`${p}-text`,m=`${g}-cell`,[b]=ht("ColorPicker"),y=o.useMemo(()=>{if(!d)return"";if("function"==typeof d)return d(n);if(n.cleared)return b.transparent;if(n.isGradient())return n.getColors().map((e,t)=>{const n=-1!==h&&h!==t;return o.createElement("span",{key:t,className:a(m,n&&`${m}-inactive`)},e.color.toRgbString()," ",e.percent,"%")});const e=n.toHexString().toUpperCase(),t=Me(n);switch(c){case"rgb":return n.toRgbString();case"hsb":return n.toHsbString();default:return t<100?`${e.slice(0,7)},${t}%`:e}},[n,c,d,h,b.transparent,m]),v=i.useMemo(()=>n.cleared?o.createElement(hr,{prefixCls:r}):o.createElement(Ue,{prefixCls:r,color:n.toCssString()}),[n,r]);return o.createElement("div",{ref:t,className:a(p,u,{[`${p}-active`]:s,[`${p}-disabled`]:l}),...ot(f)},v,d&&o.createElement("div",{className:g},y))});const ya=(e,t)=>({backgroundImage:`conic-gradient(${t} 25%, transparent 25% 50%, ${t} 50% 75%, transparent 75% 100%)`,backgroundSize:`${e} ${e}`}),va=(e,t)=>{const{componentCls:n,borderRadiusSM:r,colorPickerInsetShadow:i,lineWidth:o,colorFillSecondary:a}=e;return{[`${n}-color-block`]:{position:"relative",borderRadius:r,width:t,height:t,boxShadow:i,flex:"none",...ya("50%",e.colorFillSecondary),[`${n}-color-block-inner`]:{width:"100%",height:"100%",boxShadow:`inset 0 0 0 ${l(o)} ${a}`,borderRadius:"inherit"}}}},xa=e=>{const{componentCls:t,antCls:n,fontSizeSM:r,lineHeightSM:i,colorPickerAlphaInputWidth:o,marginXXS:a,paddingXXS:s,controlHeightSM:c,marginXS:u,fontSizeIcon:d,paddingXS:h,colorTextPlaceholder:f,colorPickerInputNumberHandleWidth:p,lineWidth:g}=e;return{[`${t}-input-container`]:{display:"flex",[`${t}-steppers${n}-input-number`]:{fontSize:r,lineHeight:i,padding:0,[`${n}-input-number-input`]:{paddingInlineStart:s,paddingInlineEnd:0},[`${n}-input-number-handler-wrap`]:{width:p}},[`${t}-steppers${t}-alpha-input`]:{flex:`0 0 ${l(o)}`,marginInlineStart:a},[`${t}-format-select${n}-select`]:{marginInlineEnd:u,width:"auto","&-single":{[`${n}-select-selector`]:{padding:0,border:0},[`${n}-select-arrow`]:{insetInlineEnd:0},[`${n}-select-selection-item`]:{paddingInlineEnd:e.calc(d).add(a).equal(),fontSize:r,lineHeight:l(c)},[`${n}-select-item-option-content`]:{fontSize:r,lineHeight:i},[`${n}-select-dropdown`]:{[`${n}-select-item`]:{minHeight:"auto"}}}},[`${t}-input`]:{gap:a,alignItems:"center",flex:1,width:0,[`${t}-hsb-input,${t}-rgb-input`]:{height:c,display:"flex",gap:a,alignItems:"center"},[`${t}-steppers`]:{flex:1},[`${t}-hex-input${n}-input-affix-wrapper`]:{flex:1,padding:`0 ${l(h)}`,[`${n}-input`]:{fontSize:r,textTransform:"uppercase",lineHeight:l(e.calc(c).sub(e.calc(g).mul(2)).equal())},[`${n}-input-prefix`]:{color:f}}}}}},Sa=e=>{const{componentCls:t,controlHeightLG:n,borderRadiusSM:r,colorPickerInsetShadow:i,marginSM:o,colorBgElevated:a,colorFillSecondary:s,lineWidthBold:c,colorPickerHandlerSize:u}=e;return{userSelect:"none",[`${t}-select`]:{[`${t}-palette`]:{minHeight:e.calc(n).mul(4).equal(),overflow:"hidden",borderRadius:r},[`${t}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:i,inset:0},marginBottom:o},[`${t}-handler`]:{width:u,height:u,border:`${l(c)} solid ${a}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${i}, 0 0 0 1px ${s}`}}},wa=e=>{const{componentCls:t,antCls:n,colorTextQuaternary:r,paddingXXS:i,colorPickerPresetColorSize:o,fontSizeSM:a,colorText:s,lineHeightSM:c,lineWidth:u,borderRadius:d,colorFill:h,colorWhite:f,marginXXS:p,paddingXS:g,fontHeightSM:m}=e;return{[`${t}-presets`]:{[`${n}-collapse-item > ${n}-collapse-header`]:{padding:0,[`${n}-collapse-expand-icon`]:{height:m,color:r,paddingInlineEnd:i}},[`${n}-collapse`]:{display:"flex",flexDirection:"column",gap:p},[`${n}-collapse-item > ${n}-collapse-panel > ${n}-collapse-body`]:{padding:`${l(g)} 0`},"&-label":{fontSize:a,color:s,lineHeight:c},"&-items":{display:"flex",flexWrap:"wrap",gap:e.calc(p).mul(1.5).equal(),[`${t}-presets-color`]:{position:"relative",cursor:"pointer",width:o,height:o,"&::before":{content:'""',pointerEvents:"none",width:e.calc(o).add(e.calc(u).mul(4)).equal(),height:e.calc(o).add(e.calc(u).mul(4)).equal(),position:"absolute",top:e.calc(u).mul(-2).equal(),insetInlineStart:e.calc(u).mul(-2).equal(),borderRadius:d,border:`${l(u)} solid transparent`,transition:`border-color ${e.motionDurationMid} ${e.motionEaseInBack}`},"&:hover::before":{borderColor:h},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:e.calc(o).div(13).mul(5).equal(),height:e.calc(o).div(13).mul(8).equal(),border:`${l(e.lineWidthBold)} solid ${e.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${e.motionDurationFast} ${e.motionEaseInBack}, opacity ${e.motionDurationFast}`},[`&${t}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:f,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${e.motionDurationMid} ${e.motionEaseOutBack} ${e.motionDurationFast}`},[`&${t}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:a,color:r}}}},Ca=e=>{const{componentCls:t,colorPickerInsetShadow:n,colorBgElevated:r,colorFillSecondary:i,lineWidthBold:o,colorPickerHandlerSizeSM:a,colorPickerSliderHeight:s,marginSM:c,marginXS:u}=e,d=e.calc(a).sub(e.calc(o).mul(2).equal()).equal(),h=e.calc(a).add(e.calc(o).mul(2).equal()).equal(),f={"&:after":{transform:"scale(1)",boxShadow:`${n}, 0 0 0 1px ${e.colorPrimaryActive}`}};return{[`${t}-slider`]:[ya(l(s),e.colorFillSecondary),{margin:0,padding:0,height:s,borderRadius:e.calc(s).div(2).equal(),"&-rail":{height:s,borderRadius:e.calc(s).div(2).equal(),boxShadow:n},[`& ${t}-slider-handle`]:{width:d,height:d,top:0,borderRadius:"100%","&:before":{display:"block",position:"absolute",background:"transparent",left:{_skip_check_:!0,value:"50%"},top:"50%",transform:"translate(-50%, -50%)",width:h,height:h,borderRadius:"100%"},"&:after":{width:a,height:a,border:`${l(o)} solid ${r}`,boxShadow:`${n}, 0 0 0 1px ${i}`,outline:"none",insetInlineStart:e.calc(o).mul(-1).equal(),top:e.calc(o).mul(-1).equal(),background:"transparent",transition:"none"},"&:focus":f}}],[`${t}-slider-container`]:{display:"flex",gap:c,marginBottom:c,[`${t}-slider-group`]:{flex:1,flexDirection:"column",justifyContent:"space-between",display:"flex","&-disabled-alpha":{justifyContent:"center"}}},[`${t}-gradient-slider`]:{marginBottom:u,[`& ${t}-slider-handle`]:{"&:after":{transform:"scale(0.8)"},"&-active, &:focus":f}}}},ka=(e,t,n)=>({borderInlineEndWidth:e.lineWidth,borderColor:t,boxShadow:`0 0 0 ${l(e.controlOutlineWidth)} ${n}`,outline:0}),_a=e=>{const{componentCls:t}=e;return{"&-rtl":{[`${t}-presets-color`]:{"&::after":{direction:"ltr"}},[`${t}-clear`]:{"&::after":{direction:"ltr"}}}}},Ea=(e,t,n)=>{const{componentCls:r,borderRadiusSM:i,lineWidth:o,colorSplit:a,colorBorder:s,red6:c}=e;return{[`${r}-clear`]:{width:t,height:t,borderRadius:i,border:`${l(o)} solid ${a}`,position:"relative",overflow:"hidden",cursor:"inherit",transition:`all ${e.motionDurationFast}`,...n,"&::after":{content:'""',position:"absolute",insetInlineEnd:e.calc(o).mul(-1).equal(),top:e.calc(o).mul(-1).equal(),display:"block",width:40,height:2,transformOrigin:"calc(100% - 1px) 1px",transform:"rotate(-45deg)",backgroundColor:c},"&:hover":{borderColor:s}}}},Pa=e=>{const{componentCls:t,colorError:n,colorWarning:r,colorErrorHover:i,colorWarningHover:o,colorErrorOutline:a,colorWarningOutline:s}=e;return{[`&${t}-status-error`]:{borderColor:n,"&:hover":{borderColor:i},[`&${t}-trigger-active`]:{...ka(e,n,a)}},[`&${t}-status-warning`]:{borderColor:r,"&:hover":{borderColor:o},[`&${t}-trigger-active`]:{...ka(e,r,s)}}}},$a=e=>{const{componentCls:t,controlHeightLG:n,controlHeightSM:r,controlHeight:i,controlHeightXS:o,borderRadius:a,borderRadiusSM:s,borderRadiusXS:c,borderRadiusLG:u,fontSizeLG:d}=e;return{[`&${t}-lg`]:{minWidth:n,minHeight:n,borderRadius:u,[`${t}-color-block, ${t}-clear`]:{width:i,height:i,borderRadius:a},[`${t}-trigger-text`]:{fontSize:d}},[`&${t}-sm`]:{minWidth:r,minHeight:r,borderRadius:s,[`${t}-color-block, ${t}-clear`]:{width:o,height:o,borderRadius:c},[`${t}-trigger-text`]:{lineHeight:l(o)}}}},Ma=ce("ColorPicker",e=>{const{colorTextQuaternary:t,marginSM:n}=e;return(e=>{const{antCls:t,componentCls:n,colorPickerWidth:r,colorPrimary:i,motionDurationMid:o,colorBgElevated:a,colorTextDisabled:s,colorText:c,colorBgContainerDisabled:u,borderRadius:d,marginXS:h,marginSM:f,controlHeight:p,controlHeightSM:g,colorBgTextActive:m,colorPickerPresetColorSize:b,colorPickerPreviewSize:y,lineWidth:v,colorBorder:x,paddingXXS:S,fontSize:w,colorPrimaryHover:C,controlOutline:k}=e;return[{[n]:{[`${n}-inner`]:{"&-content":{display:"flex",flexDirection:"column",width:r,[`& > ${t}-divider`]:{margin:`${l(f)} 0 ${l(h)}`}},[`${n}-panel`]:{...Sa(e)},...Ca(e),...va(e,y),...xa(e),...wa(e),...Ea(e,b,{marginInlineStart:"auto"}),[`${n}-operation`]:{display:"flex",justifyContent:"space-between",marginBottom:h}},"&-trigger":{minWidth:p,minHeight:p,borderRadius:d,border:`${l(v)} solid ${x}`,cursor:"pointer",display:"inline-flex",alignItems:"flex-start",justifyContent:"center",transition:`all ${o}`,background:a,padding:e.calc(S).sub(v).equal(),[`${n}-trigger-text`]:{marginInlineStart:h,marginInlineEnd:e.calc(h).sub(e.calc(S).sub(v)).equal(),fontSize:w,color:c,alignSelf:"center","&-cell":{"&:not(:last-child):after":{content:'", "'},"&-inactive":{color:s}}},"&:hover":{borderColor:C},[`&${n}-trigger-active`]:{...ka(e,i,k)},"&-disabled":{color:s,background:u,cursor:"not-allowed","&:hover":{borderColor:m},[`${n}-trigger-text`]:{color:s}},...Ea(e,g),...va(e,g),...Pa(e),...$a(e)},..._a(e)}},ct(e,{focusElCls:`${n}-trigger-active`})]})(ue(e,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:24,colorPickerInsetShadow:`inset 0 0 1px 0 ${t}`,colorPickerSliderHeight:8,colorPickerPreviewSize:e.calc(8).mul(2).add(n).equal()}))}),Na=e=>{const{mode:n,value:r,defaultValue:s,format:l,defaultFormat:c,allowClear:d=!1,presets:h,children:f,trigger:g="click",open:m,disabled:b,placement:y="bottomLeft",arrow:v=!0,panelRender:x,showText:S,style:w,className:C,size:k,rootClassName:_,prefixCls:E,styles:P,classNames:$,disabledAlpha:M=!1,onFormatChange:N,onChange:A,onClear:T,onOpenChange:R,onChangeComplete:I,getPopupContainer:D,autoAdjustOverflow:L=!0,destroyTooltipOnHide:z,destroyOnHidden:W,disabledFormat:O,...B}=e,{getPrefixCls:F,direction:j,className:H,style:G,classNames:U,styles:q}=u("colorPicker"),X=i.useContext(p),V=b??X,Y=F("color-picker",E),{compactSize:K,compactItemClassnames:Q}=Pe(Y,j),J=be(e=>k??K??e),Z={...e,trigger:g,allowClear:d,autoAdjustOverflow:L,disabledAlpha:M,arrow:v,placement:y,disabled:V,size:J},[ee,te]=fe([U,$],[q,P],{props:Z},{popup:{_default:"root"}}),[re,ie]=ne(!1,m),oe=!V&&re,[ae,se]=ne(c,l),[le,ce,ue,de,he]=function(e,n,r){const[o]=ht("ColorPicker"),[a,s]=ne(e,n),[l,c]=i.useState("single"),[u,d]=i.useMemo(()=>{const e=(Array.isArray(r)?r:[r]).filter(e=>e);e.length||e.push("single");const t=new Set(e),n=[],i=(e,r)=>{t.has(e)&&n.push({label:r,value:e})};return i("single",o.singleColor),i("gradient",o.gradientColor),[n,t]},[r,o.singleColor,o.gradientColor]),[h,f]=i.useState(null),p=t(e=>{f(e),s(e)}),g=i.useMemo(()=>{const e=Se(a||"");return e.equals(h)?h:e},[a,h]),m=i.useMemo(()=>d.has(l)?l:u[0]?.value,[d,l,u]);return i.useEffect(()=>{c(g.isGradient()?"gradient":"single")},[g]),[g,p,m,c,u]}(s,r,n),pe=i.useMemo(()=>Me(le)<100,[le]),[ye,ve]=o.useState(null),xe=e=>{if(I){let t=Se(e);M&&pe&&(t=De(e)),I(t)}},we=(e,t)=>{let n=Se(e);M&&pe&&(n=De(n)),ce(n),ve(null),A&&A(n,n.toCssString()),t||xe(n)},[Ce,ke]=o.useState(0),[_e,Ee]=o.useState(!1),{status:Ne}=o.useContext(ge),Ae=me(Y),[Te,Re]=Ma(Y,Ae),Le={[`${Y}-rtl`]:j},ze=a(ee.root,_,Re,Ae,Le),We=a(dt(Y,Ne),{[`${Y}-sm`]:"small"===J,[`${Y}-lg`]:"large"===J},Q,H,ze,C,Te),Oe=a(Y,ze,ee.popup?.root),Be={open:oe,trigger:g,placement:y,arrow:v,rootClassName:_,getPopupContainer:D,autoAdjustOverflow:L,destroyOnHidden:W??!!z},Fe={...te.root,...G,...w};return o.createElement(st,{classNames:{root:Oe},styles:{root:te.popup?.root,container:P?.popupOverlayInner},onOpenChange:e=>{e&&V||(ie(e),R?.(e))},content:o.createElement($e,{form:!0},o.createElement(ma,{mode:ue,onModeChange:e=>{if(de(e),"single"===e&&le.isGradient())ke(0),we(new Ie(le.getColors()[0].color)),ve(le);else if("gradient"===e&&!le.isGradient()){const e=pe?De(le):le;we(new Ie(ye||[{percent:0,color:e},{percent:100,color:e}]))}},modeOptions:he,prefixCls:Y,value:le,allowClear:d,disabled:V,disabledAlpha:M,presets:h,panelRender:x,format:ae,onFormatChange:e=>{se(e),ae!==e&&N?.(e)},onChange:we,onChangeComplete:xe,onClear:T,activeIndex:Ce,onActive:ke,gradientDragging:_e,onGradientDragging:Ee,disabledFormat:O})),...Be},f||o.createElement(ba,{activeIndex:oe?Ce:-1,open:oe,className:We,style:Fe,prefixCls:Y,disabled:V,showText:S,format:ae,...B,color:le}))},Aa=Ct(Na,void 0,e=>({...e,placement:"bottom",autoAdjustOverflow:!1}),"color-picker",e=>e);Na._InternalPanelDoNotUseOrYouWillBeFired=Aa;const Ta=["wrap","nowrap","wrap-reverse"],Ra=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],Ia=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],Da=(e,t)=>{const n=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${n}`]:n&&Ta.includes(n)}},La=(e,t)=>{const n={};return Ia.forEach(r=>{n[`${e}-align-${r}`]=t.align===r}),n[`${e}-align-stretch`]=!t.align&&!!t.vertical,n},za=(e,t)=>{const n={};return Ra.forEach(r=>{n[`${e}-justify-${r}`]=t.justify===r}),n},Wa=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},Oa=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},Ba=e=>{const{componentCls:t}=e,n={};return Ta.forEach(e=>{n[`${t}-wrap-${e}`]={flexWrap:e}}),n},Fa=e=>{const{componentCls:t}=e,n={};return Ia.forEach(e=>{n[`${t}-align-${e}`]={alignItems:e}}),n},ja=e=>{const{componentCls:t}=e,n={};return Ra.forEach(e=>{n[`${t}-justify-${e}`]={justifyContent:e}}),n},Ha=ce("Flex",e=>{const{paddingXS:t,padding:n,paddingLG:r}=e,i=ue(e,{flexGapSM:t,flexGap:n,flexGapLG:r});return[Wa(i),Oa(i),Ba(i),Fa(i),ja(i)]},()=>({}),{resetStyle:!1}),Ga=o.forwardRef((e,t)=>{const{prefixCls:n,rootClassName:r,className:i,style:l,flex:c,gap:u,vertical:d,orientation:h,component:f="div",children:p,...g}=e,{flex:m,direction:b,getPrefixCls:y}=o.useContext(s),v=y("flex",n),[x,S]=Ha(v),[,w]=ye(h,d??m?.vertical),C=a(i,r,m?.className,v,x,S,((e,t)=>a({...Da(e,t),...La(e,t),...za(e,t)}))(v,e),{[`${v}-rtl`]:"rtl"===b,[`${v}-gap-${u}`]:tt(u),[`${v}-vertical`]:w}),k={...m?.style,...l};return Z(c)&&(k.flex=c),Z(u)&&!tt(u)&&(k.gap=u),o.createElement(f,{ref:t,className:C,style:k,...ve(g,["justify","wrap","align"])},p)}),Ua=o.createContext(null),qa=e=>{const{componentCls:t,floatButtonSize:n,iconCls:r,antCls:i,floatButtonIconSize:o}=e,a=Le(i,"float-btn"),s=`${t}-badge`,c=Math.SQRT2,u=(c-1)/c,d=e.calc(e.borderRadius).mul(u).equal(),h=e.calc(e.controlHeight).div(2).mul(u).equal();return{[t]:[{[a("size")]:l(n)},{flexDirection:"column",margin:0,padding:`${l(e.paddingXXS)} 0`,width:`var(${a("size")})`,minHeight:`var(${a("size")})`,height:"auto",wordBreak:"break-word",whiteSpace:"normal",gap:e.calc(e.paddingXXS).div(2).equal(),"&-rtl":{direction:"rtl"},[`&${t}-individual`]:{position:"fixed",zIndex:e.zIndexPopupBase,insetInlineEnd:e.floatButtonInsetInlineEnd,bottom:e.floatButtonInsetBlockEnd,boxShadow:e.boxShadowSecondary},[`&${t}-pure`]:{position:"relative",inset:"auto"},"&:empty":{display:"none"},[`${t}-icon`]:{lineHeight:1},[`&${t}-icon-only`]:{[r]:{fontSize:o}},[`${t}-content`]:{fontSize:e.fontSizeSM},[s]:{position:"absolute",top:0,insetInlineEnd:0,[`&:not(${s}-dot)`]:{transform:"translate(50%, -50%)"}},[`&-rtl ${s}:not(${s}-dot)`]:{transform:"translate(-50%, -50%)"},"&-square":{[`${s}-dot`]:{marginTop:d,marginInlineEnd:d}},"&-circle":{[s]:{marginTop:h,marginInlineEnd:h}}}]}},Xa=e=>{const{componentCls:t,antCls:n,floatButtonSize:r,padding:i}=e,o=`${t}-group`,a=`${o}-list`,s=Le(n,"float-btn");return{[o]:[{[s("list-transform-start")]:`translate(0,${l(r)})`,[s("list-trigger-offset")]:`calc(${l(r)} + ${l(i)})`},{...c(e),position:"fixed",zIndex:e.zIndexPopupBase,insetInlineEnd:e.floatButtonInsetInlineEnd,bottom:e.floatButtonInsetBlockEnd,gap:i,"&-rtl":{direction:"rtl"},[`&${t}-pure`]:{position:"relative",inset:"auto"},[t]:{position:"relative",inset:"auto"}},{[`&:not(${o}-individual) ${a}`]:{boxShadow:e.boxShadowSecondary},[`&${o}-individual ${a}`]:{gap:i},[`&-menu-mode ${a}`]:{position:"absolute"},[a]:{borderRadius:e.borderRadiusLG,"&-motion":{transition:`all ${e.motionDurationSlow}`,"&-enter, &-appear":{opacity:0,transform:s("list-transform-start",!0),"&-active":{opacity:1,transform:"translate(0, 0)"}},"&-leave":{"&-active":{opacity:0,transform:s("list-transform-start",!0)}}}},"&-top":{[a]:{bottom:s("list-trigger-offset",!0)}},"&-bottom":{[a]:{[s("list-transform-start")]:`translate(0, calc(${l(r)} * -1))`,top:s("list-trigger-offset",!0)}},"&-left":{[a]:{[s("list-transform-start")]:`translate(${l(r)}, 0)`,right:s("list-trigger-offset",!0)}},"&-right":{[a]:{[s("list-transform-start")]:`translate(calc(${l(r)} * -1), 0)`,left:s("list-trigger-offset",!0)}}}]}},Va=ce("FloatButton",e=>{const{controlHeightLG:t,marginXXL:n,marginLG:r,fontSizeIcon:i,calc:o}=e,a=ue(e,{floatButtonIconSize:o(i).mul(1.5).equal(),floatButtonSize:t,floatButtonInsetBlockEnd:n,floatButtonInsetInlineEnd:r});return[qa(a),Xa(a),ze(e)]},()=>({}),{order:-998}),Ya="float-btn",Ka=o.forwardRef((e,t)=>{const{prefixCls:n,className:r,rootClassName:i,style:l,type:c="default",shape:u="circle",icon:d,description:h,content:f,tooltip:p,badge:g={},classNames:m,styles:b,...y}=e,{getPrefixCls:v,direction:x}=o.useContext(s),S=o.useContext(Ua),w=v(Ya,n),C=me(w),{shape:k,individual:_,classNames:E,styles:P}=S||{},$=k||u,M=_??!0,N=f??h,A={...e,type:c,shape:$},[T,R]=Va(w,C),I=o.useMemo(()=>({icon:`${w}-icon`,content:`${w}-content`}),[w]),[D,L]=fe([I,E,m],[P,b],{props:A}),z=N||d?d:o.createElement(fi,null),[W]=We("FloatButton",l?.zIndex),O={...l,zIndex:W},B=ve(g,["title","children","status","text"]),F="badge"in e&&o.createElement(kn,{...B,className:a(B.className,`${w}-badge`,{[`${w}-badge-dot`]:B.dot})}),j=$t(p);let H=o.createElement(Xe,{...y,ref:t,className:a(T,R,C,w,r,i,`${w}-${c}`,`${w}-${$}`,{[`${w}-rtl`]:"rtl"===x,[`${w}-individual`]:M,[`${w}-icon-only`]:!N}),classNames:D,styles:L,style:O,shape:$,type:c,size:"large",icon:z,_skipSemantic:!0},N,F);return j&&(H=o.createElement(xe,{...j},H)),H}),Qa=o.createElement(ln,null),Ja=o.forwardRef((e,t)=>{const{backTopIcon:n}=u("floatButton"),{prefixCls:l,className:c,type:h="default",shape:p="circle",visibilityHeight:g=400,icon:m,target:b,onClick:y,duration:v=450,...x}=e,S=m??n??Qa,[w,C]=i.useState(0===g),k=o.useRef(null);o.useImperativeHandle(t,()=>({nativeElement:k.current}));const _=()=>k.current?.ownerDocument||window,E=Ut(e=>{const t=Xt(e.target);C(t>=g)});i.useEffect(()=>{const e=(b||_)();return E({target:e}),e?.addEventListener("scroll",E),()=>{E.cancel(),e?.removeEventListener("scroll",E)}},[b]);const P=e=>{!function(e,t={}){const{getContainer:n=()=>window,callback:i,duration:o=450}=t,a=n(),s=Xt(a),l=Date.now();let c;const u=()=>{const t=Date.now()-l,n=function(e,t,n,r){const i=n-t;return(e/=r/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t}(t>o?o:t,s,e,o);qt(a)?a.scrollTo(window.pageXOffset,n):a instanceof Document||"HTMLDocument"===a.constructor.name?a.documentElement.scrollTop=n:a.scrollTop=n,t<o?c=r(u):"function"==typeof i&&i()};c=r(u)}(0,{getContainer:b||_,duration:v}),y?.(e)},{getPrefixCls:$}=i.useContext(s),M=$(Ya,l),N=$(),A=i.useContext(Ua)?.shape,T={prefixCls:M,icon:S,type:h,shape:A||p,...x};return o.createElement(d,{visible:w,motionName:`${N}-fade`},({className:e},t)=>o.createElement(Ka,{ref:f(k,t),...T,onClick:P,className:a(c,e)}))}),Za=e=>{const{prefixCls:n,className:r,style:i,classNames:s,styles:l,rootClassName:c,shape:h="circle",type:f="default",placement:p,icon:g=o.createElement(fi,null),closeIcon:m,trigger:b,children:y,onOpenChange:v,open:x,onClick:S,...w}=e,{direction:C,getPrefixCls:k,closeIcon:_,classNames:E,styles:P,className:$,style:M}=u("floatButtonGroup"),N=m??_??o.createElement(kt,null),A=k(Ya,n),T=me(A),[R,I]=Va(A,T),D=`${A}-group`,L=b&&["click","hover"].includes(b),[z]=We("FloatButton",i?.zIndex),W=o.useRef(null),O=["top","left","right","bottom"].includes(p)?p:"top",[B,F]=ne(!1,x),j="hover"===b,H="click"===b,G=t(e=>{B!==e&&(F(e),v?.(e))});o.useEffect(()=>{if(H){const e=e=>{W.current?.contains(e.target)||G(!1)};return document.addEventListener("click",e,{capture:!0}),()=>document.removeEventListener("click",e,{capture:!0})}},[H]);const U="circle"===h,q={...e,shape:h,type:f,placement:O},[X,V]=fe([E,s],[P,l],{props:q}),Y=o.useMemo(()=>({shape:h,individual:U,classNames:{root:X.item,icon:X.itemIcon,content:X.itemContent},styles:{root:V.item,icon:V.itemIcon,content:V.itemContent}}),[h,U,X,V]),K=o.useMemo(()=>({...Y,individual:!0,classNames:{root:X.trigger,icon:X.triggerIcon,content:X.triggerContent},styles:{root:V.trigger,icon:V.triggerIcon,content:V.triggerContent}}),[Y,X,V]);let Q;const J=`${D}-list`,Z=e=>{const t="top"===O||"bottom"===O,n={className:a(J,X.list,e),style:V.list};return Q=U?o.createElement(Ga,{vertical:t,...n},y):o.createElement(nt.Compact,{vertical:t,...n},y),Q};return o.createElement(Ua.Provider,{value:Y},o.createElement("div",{className:a(D,R,I,T,$,X.root,r,c,{[`${D}-rtl`]:"rtl"===C,[`${D}-individual`]:U,[`${D}-${O}`]:L,[`${D}-menu-mode`]:L}),style:{...M,zIndex:z,...V.root,...i},ref:W,onMouseEnter:()=>{j&&G(!0)},onMouseLeave:()=>{j&&G(!1)}},L?o.createElement(d,{visible:B,motionName:`${J}-motion`},({className:e})=>Z(e)):Z(),L&&o.createElement(Ua.Provider,{value:K},o.createElement(Ka,{type:f,icon:B?N:g,"aria-label":e["aria-label"],className:`${D}-trigger`,onClick:e=>{H&&G(!B),S?.(e)},...w}))))},es=({backTop:e,...t})=>e?i.createElement(Ja,{...t,visibilityHeight:0}):i.createElement(Ka,{...t});function ts(e){let t,n,r,i=!1;return function(o){void 0===t?(t=o,n=0,r=-1):t=function(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(t,o);const a=t.length;let s=0;for(;n<a;){i&&(10===t[n]&&(s=++n),i=!1);let o=-1;for(;n<a&&-1===o;++n)switch(t[n]){case 58:-1===r&&(r=n-s);break;case 13:i=!0;case 10:o=n}if(-1===o)break;e(t.subarray(s,o),r),s=n,r=-1}s===a?t=void 0:0!==s&&(t=t.subarray(s),n-=s)}}Ka.BackTop=Ja,Ka.Group=Za,Ka._InternalPanelDoNotUseOrYouWillBeFired=({className:e,items:t,classNames:n,styles:r,prefixCls:o,...l})=>{const{getPrefixCls:c}=i.useContext(s),u=`${c(Ya,o)}-pure`;return t?i.createElement(Za,{className:a(e,u),classNames:n,styles:r,...l},t.map((e,t)=>i.createElement(es,{key:t,...e}))):i.createElement(es,{className:a(e,u),classNames:n,styles:r,...l})};const ns="text/event-stream",rs="last-event-id";function is(e,t){var{signal:n,headers:r,onopen:i,onmessage:o,onclose:a,onerror:s,openWhenHidden:l,fetch:c}=t,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((t,d)=>{const h=Object.assign({},r);let f;function p(){f.abort(),document.hidden||x()}h.accept||(h.accept=ns),l||document.addEventListener("visibilitychange",p);let g=1e3,m=0;function b(){document.removeEventListener("visibilitychange",p),window.clearTimeout(m),f.abort()}null==n||n.addEventListener("abort",()=>{b(),t()});const y=null!=c?c:window.fetch,v=null!=i?i:os;async function x(){var n;f=new AbortController;try{const n=await y(e,Object.assign(Object.assign({},u),{headers:h,signal:f.signal}));await v(n),await async function(e,t){const n=e.getReader();let r;for(;!(r=await n.read()).done;)t(r.value)}(n.body,ts(function(e,t,n){let r={data:"",event:"",id:"",retry:void 0};const i=new TextDecoder;return function(o,a){if(0===o.length)null==n||n(r),r={data:"",event:"",id:"",retry:void 0};else if(a>0){const n=i.decode(o.subarray(0,a)),s=a+(32===o[a+1]?2:1),l=i.decode(o.subarray(s));switch(n){case"data":r.data=r.data?r.data+"\n"+l:l;break;case"event":r.event=l;break;case"id":e(r.id=l);break;case"retry":const n=parseInt(l,10);isNaN(n)||t(r.retry=n)}}}}(e=>{e?h[rs]=e:delete h[rs]},e=>{g=e},o))),null==a||a(),b(),t()}catch(r){if(!f.signal.aborted)try{const e=null!==(n=null==s?void 0:s(r))&&void 0!==n?n:g;window.clearTimeout(m),m=window.setTimeout(x,e)}catch(i){b(),d(i)}}}x()})}function os(e){const t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(ns)))throw new Error(`Expected content-type to be ${ns}, Actual: ${t}`)}const as="/chat/history",ss="/chat/createChat",ls="/chat/chatStream",cs="/chat/stop",us="/chat/retry",ds="/chat/history",hs={getChatHistory:async(e=19)=>{try{return(await Ve.get(`${as}?chatId=${e}`)).data.map(e=>({...e,timestamp:new Date(e.timestamp),isStreaming:!1,isError:!1}))}catch(t){return console.error(":",t),[]}},sendMessage:async function*(e,t={}){try{const n=await Ve.post(ss,{chatId:19,messages:[{role:"user",content:e}]});if(200!==n.code)throw new Error(`: ${n.code}`);const r={bufferSize:t.bufferSize||10,bufferTimeout:t.bufferTimeout||100,...t},i=new AbortController,o=[],a=[];let s,l=Promise.resolve(),c=!1,u=null,d=null;const h=()=>{if(0===a.length)return;const e=a.reduce((e,t)=>({...t,content:(e.content||"")+t.content,reasoningContent:(e.reasoningContent||"")+(t.reasoningContent||"")}));o.push(e),a.length=0,d&&(clearTimeout(d),d=null),s&&s()},f=new URLSearchParams({model:"deepseek-r1",chatId:"19"}),p=localStorage.getItem("userToken");for(is(`http://localhost:3000${ls}?${f}`,{method:"GET",headers:{Accept:"text/event-stream",Authorization:`Bearer ${p}`},signal:i.signal,onopen:e=>{200!==e.status&&(u=new Error(`: ${e.status}`),c=!0,s&&s())},onmessage:e=>{try{if(console.log(":",e.data),"complete"===e.data?.type){const e=a.length>0?a[a.length-1]:{};return h(),o.push({type:"complete",role:"assistant",content:e.content||"",reasoningContent:e.reasoningContent||"",isStreaming:!1,isError:!1}),c=!0,void(s&&s())}const t=JSON.parse(e.data);a.push({type:t.type,role:t.role,content:t.content,reasoningContent:t.reasoning_content,isStreaming:!0,isError:!1}),a.length>=r.bufferSize?h():d||(d=setTimeout(h,r.bufferTimeout))}catch(t){console.warn(":",t,":",e.data),h()}},onerror:e=>{console.error("SSE :",e),h(),u=e,c=!0,s&&s()},onclose:()=>{const e=a.length>0?a[a.length-1]:{};h(),console.log("onclose :",e),c||o.push({type:"complete",role:"assistant",content:e?.content??"",reasoningContent:e?.reasoningContent??"",isStreaming:!1,isError:!1}),c=!0,s&&s()}});!c||o.length>0;)if(o.length>0?yield o.shift():c||(l=new Promise(e=>{s=e}),await l),u)throw u}catch(n){console.error(":",n),yield{type:"stream",role:"assistant",content:"",reasoningContent:"",isStreaming:!1,isError:!0}}},stopStreaming:async(e=19)=>{try{return(await Ve.post(cs,{chatId:e})).data}catch(t){return console.error(":",t),{success:!1}}},retryMessage:async(e,t=19)=>{try{return(await Ve.post(us,{messageId:e,chatId:t})).data}catch(n){return console.error(":",n),{success:!1}}},clearChatHistory:async(e=19)=>{try{return(await Ve.delete(`${ds}?chatId=${e}`)).data}catch(t){return console.error(":",t),{success:!1}}}};async function fs(e){const{message:t}=e;return hs.sendMessage(t)}const ps=()=>new Map,gs=e=>{const t=ps();return e.forEach((e,n)=>{t.set(n,e)}),t},ms=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},bs=()=>new Set,ys=e=>e[e.length-1],vs=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},xs=Array.from,Ss=(e,t)=>{for(let n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0},ws=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},Cs=Array.isArray;class ks{constructor(){this._observers=ps()}on(e,t){return ms(this._observers,e,bs).add(t),t}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return xs((this._observers.get(e)||ps()).values()).forEach(e=>e(...t))}destroy(){this._observers=ps()}}const _s=Math.floor,Es=Math.abs,Ps=(e,t)=>e<t?e:t,$s=(e,t)=>e>t?e:t,Ms=128,Ns=127,As=Number.MAX_SAFE_INTEGER,Ts=Number.MIN_SAFE_INTEGER,Rs=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&_s(e)===e),Is=String.fromCharCode,Ds=/^\s*/g,Ls=/([A-Z])/g,zs=(e,t)=>(e=>e.replace(Ds,""))(e.replace(Ls,e=>`${t}${(e=>e.toLowerCase())(e)}`)),Ws="undefined"!=typeof TextEncoder?new TextEncoder:null,Os=Ws?e=>Ws.encode(e):e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.codePointAt(i);return r};let Bs="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Bs&&1===Bs.decode(new Uint8Array).length&&(Bs=null);const Fs=(e,t)=>((e,t)=>{const n=new Array(e);for(let r=0;r<e;r++)n[r]=t(r,n);return n})(t,()=>e).join("");class js{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Hs=()=>new js,Gs=e=>{const t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},Us=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},qs=Us,Xs=(e,t)=>{for(;t>Ns;)Us(e,Ms|Ns&t),t=_s(t/128);Us(e,Ns&t)},Vs=(e,t)=>{const n=0!==(r=t)?r<0:1/r<0;var r;for(n&&(t=-t),Us(e,(t>63?Ms:0)|(n?64:0)|63&t),t=_s(t/64);t>0;)Us(e,(t>Ns?Ms:0)|Ns&t),t=_s(t/128)},Ys=new Uint8Array(3e4),Ks=Ys.length/3,Qs=Ws&&Ws.encodeInto?(e,t)=>{if(t.length<Ks){const n=Ws.encodeInto(t,Ys).written||0;Xs(e,n);for(let t=0;t<n;t++)Us(e,Ys[t])}else Zs(e,Os(t))}:(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;Xs(e,r);for(let i=0;i<r;i++)Us(e,n.codePointAt(i))},Js=(e,t)=>{const n=e.cbuf.length,r=e.cpos,i=Ps(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array($s(2*n,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},Zs=(e,t)=>{Xs(e,t.byteLength),Js(e,t)},el=(e,t)=>{((e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*$s(n,t)),e.cpos=0)})(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},tl=new DataView(new ArrayBuffer(4)),nl=(e,t)=>{switch(typeof t){case"string":Us(e,119),Qs(e,t);break;case"number":Rs(t)&&Es(t)<=2147483647?(Us(e,125),Vs(e,t)):(n=t,tl.setFloat32(0,n),tl.getFloat32(0)===n?(Us(e,124),((e,t)=>{el(e,4).setFloat32(0,t,!1)})(e,t)):(Us(e,123),((e,t)=>{el(e,8).setFloat64(0,t,!1)})(e,t)));break;case"bigint":Us(e,122),((e,t)=>{el(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)Us(e,126);else if(Cs(t)){Us(e,117),Xs(e,t.length);for(let n=0;n<t.length;n++)nl(e,t[n])}else if(t instanceof Uint8Array)Us(e,116),Zs(e,t);else{Us(e,118);const n=Object.keys(t);Xs(e,n.length);for(let r=0;r<n.length;r++){const i=n[r];Qs(e,i),nl(e,t[i])}}break;case"boolean":Us(e,t?120:121);break;default:Us(e,127)}var n};class rl extends js{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Xs(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const il=e=>{e.count>0&&(Vs(e.encoder,1===e.count?e.s:-e.s),e.count>1&&Xs(e.encoder,e.count-2))};class ol{constructor(){this.encoder=new js,this.s=0,this.count=0}write(e){this.s===e?this.count++:(il(this),this.count=1,this.s=e)}toUint8Array(){return il(this),Gs(this.encoder)}}const al=e=>{if(e.count>0){const t=2*e.diff+(1===e.count?0:1);Vs(e.encoder,t),e.count>1&&Xs(e.encoder,e.count-2)}};class sl{constructor(){this.encoder=new js,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(al(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return al(this),Gs(this.encoder)}}class ll{constructor(){this.sarr=[],this.s="",this.lensE=new ol}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new js;return this.sarr.push(this.s),this.s="",Qs(e,this.sarr.join("")),Js(e,this.lensE.toUint8Array()),Gs(e)}}const cl=e=>new Error(e),ul=()=>{throw cl("Method unimplemented")},dl=()=>{throw cl("Unexpected case")},hl=crypto.getRandomValues.bind(crypto),fl=()=>hl(new Uint32Array(1))[0],pl="10000000-1000-4000-8000-100000000000",gl=()=>pl.replace(/[018]/g,e=>(e^fl()&15>>e/4).toString(16)),ml=Date.now,bl=e=>new Promise(e);Promise.all.bind(Promise);const yl=e=>void 0===e?null:e;let vl=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},xl=!0;try{"undefined"!=typeof localStorage&&localStorage&&(vl=localStorage,xl=!1)}catch(uS){}const Sl=vl,wl=Symbol("Equality"),Cl=(e,t)=>e===t||!!e?.[wl]?.(t)||!1,kl=Object.assign,_l=Object.keys,El=e=>_l(e).length,Pl=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},$l=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Ml=Object.freeze,Nl=e=>{for(const t in e){const n=e[t];"object"!=typeof n&&"function"!=typeof n||Nl(e[t])}return Ml(e)},Al=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Al(e,t,n+1)}},Tl=(e,t)=>{if(e===t)return!0;if(null==e||null==t||e.constructor!==t.constructor&&(e.constructor||Object)!==(t.constructor||Object))return!1;if(null!=e[wl])return e[wl](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break;case Map:if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!Tl(e.get(n),t.get(n)))return!1;break;case void 0:case Object:if(El(e)!==El(t))return!1;for(const n in e)if(!$l(e,n)||!Tl(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Tl(e[n],t[n]))return!1;break;default:return!1}return!0};var Rl={};const Il="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);let Dl;const Ll=e=>(()=>{if(void 0===Dl)if(Il){Dl=ps();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];"-"===r[0]?(null!==t&&Dl.set(t,""),t=r):null!==t&&(Dl.set(t,r),t=null)}null!==t&&Dl.set(t,"")}else"object"==typeof location?(Dl=ps(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){const[t,n]=e.split("=");Dl.set(`--${zs(t,"-")}`,n),Dl.set(`-${zs(t,"-")}`,n)}})):Dl=ps();return Dl})().has(e),zl=e=>yl(Il?Rl[e.toUpperCase().replaceAll("-","_")]:Sl.getItem(e)),Wl=e=>Ll("--"+e)||null!==zl(e),Ol=Wl("production");const Bl=Il&&["true","1","2"].includes(Rl.FORCE_COLOR)||!Ll("--no-colors")&&!Wl("no-color")&&(!Il||process.stdout.isTTY)&&(!Il||Ll("--color")||null!==zl("COLORTERM")||(zl("TERM")||"").includes("color"));class Fl{constructor(e,t){this.left=e,this.right=t}}const jl=(e,t)=>new Fl(e,t),Hl=e=>e.next()>=.5,Gl=(e,t,n)=>_s(e.next()*(n+1-t)+t),Ul=(e,t,n)=>_s(e.next()*(n+1-t)+t),ql=(e,t,n)=>Ul(e,t,n),Xl=e=>Is(ql(e,97,122)),Vl=(e,t)=>t[ql(e,0,t.length-1)],Yl=Symbol("0schema");class Kl{constructor(){this._rerrs=[]}extend(e,t,n,r=null){this._rerrs.push({path:e,expected:t,has:n,message:r})}toString(){const e=[];for(let t=this._rerrs.length-1;t>0;t--){const n=this._rerrs[t];e.push(Fs(" ",2*(this._rerrs.length-t))+`${null!=n.path?`[${n.path}] `:""}${n.has} doesn't match ${n.expected}. ${n.message}`)}return e.join("\n")}}const Ql=(e,t)=>e===t||null!=e&&null!=t&&e.constructor===t.constructor&&(e[wl]?Cl(e,t):Cs(e)?Ss(e,e=>ws(t,t=>Ql(e,t))):"object"==typeof e&&Pl(e,(e,n)=>Ql(e,t[n])));class Jl{static _dilutes=!1;extends(e){let[t,n]=[this.shape,e.shape];return this.constructor._dilutes&&([n,t]=[t,n]),Ql(t,n)}equals(e){return this.constructor===e.constructor&&Tl(this.shape,e.shape)}[Yl](){return!0}[wl](e){return this.equals(e)}validate(e){return this.check(e)}check(e,t){ul()}get nullable(){return Pc(this,jc)}get optional(){return new cc(this)}cast(e){return qc(e,this),e}expect(e){return qc(e,this),e}}class Zl extends Jl{constructor(e,t){super(),this.shape=e,this._c=t}check(e,t=void 0){const n=e?.constructor===this.shape&&(null==this._c||this._c(e));return!n&&t?.extend(null,this.shape.name,e?.constructor.name,e?.constructor!==this.shape?"Constructor match failed":"Check failed"),n}}const ec=(e,t=null)=>new Zl(e,t);ec(Zl);class tc extends Jl{constructor(e){super(),this.shape=e}check(e,t){const n=this.shape(e);return!n&&t?.extend(null,"custom prop",e?.constructor.name,"failed to check custom prop"),n}}const nc=e=>new tc(e);ec(tc);class rc extends Jl{constructor(e){super(),this.shape=e}check(e,t){const n=this.shape.some(t=>t===e);return!n&&t?.extend(null,this.shape.join(" | "),e.toString()),n}}const ic=(...e)=>new rc(e),oc=ec(rc),ac=RegExp.escape||(e=>e.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),sc=e=>zc.check(e)?[ac(e)]:oc.check(e)?e.shape.map(e=>e+""):Lc.check(e)?["[+-]?\\d+.?\\d*"]:Wc.check(e)?[".*"]:$c.check(e)?e.shape.map(sc).flat(1):void dl();ec(class extends Jl{constructor(e){super(),this.shape=e,this._r=new RegExp("^"+e.map(sc).map(e=>`(${e.join("|")})`).join("")+"$")}check(e,t){const n=null!=this._r.exec(e);return!n&&t?.extend(null,this._r.toString(),e.toString(),"String doesn't match string template."),n}});const lc=Symbol("optional");class cc extends Jl{constructor(e){super(),this.shape=e}check(e,t){const n=void 0===e||this.shape.check(e);return!n&&t?.extend(null,"undefined (optional)","()"),n}get[lc](){return!0}}const uc=ec(cc);ec(class extends Jl{check(e,t){return t?.extend(null,"never",typeof e),!1}});class dc extends Jl{constructor(e,t=!1){super(),this.shape=e,this._isPartial=t}static _dilutes=!0;get partial(){return new dc(this.shape,!0)}check(e,t){return null==e?(t?.extend(null,"object","null"),!1):Pl(this.shape,(n,r)=>{const i=this._isPartial&&!$l(e,r)||n.check(e[r],t);return!i&&t?.extend(r.toString(),n.toString(),typeof e[r],"Object property does not match"),i})}}const hc=ec(dc),fc=nc(e=>null!=e&&(e.constructor===Object||null==e.constructor));class pc extends Jl{constructor(e,t){super(),this.shape={keys:e,values:t}}check(e,t){return null!=e&&Pl(e,(n,r)=>{const i=this.shape.keys.check(r,t);return!i&&t?.extend(r+"","Record",typeof e,i?"Key doesn't match schema":"Value doesn't match value"),i&&this.shape.values.check(n,t)})}}const gc=(e,t)=>new pc(e,t),mc=ec(pc);class bc extends Jl{constructor(e){super(),this.shape=e}check(e,t){return null!=e&&Pl(this.shape,(n,r)=>{const i=n.check(e[r],t);return!i&&t?.extend(r.toString(),"Tuple",typeof n),i})}}ec(bc);class yc extends Jl{constructor(e){super(),this.shape=1===e.length?e[0]:new Ec(e)}check(e,t){const n=Cs(e)&&Ss(e,e=>this.shape.check(e));return!n&&t?.extend(null,"Array",""),n}}const vc=(...e)=>new yc(e),xc=ec(yc),Sc=nc(e=>Cs(e));class wc extends Jl{constructor(e,t){super(),this.shape=e,this._c=t}check(e,t){const n=e instanceof this.shape&&(null==this._c||this._c(e));return!n&&t?.extend(null,this.shape.name,e?.constructor.name),n}}ec(wc);const Cc=((e,t=null)=>new wc(e,t))(Jl);const kc=ec(class extends Jl{constructor(e){super(),this.len=e.length-1,this.args=((...e)=>new bc(e))(...e.slice(-1)),this.res=e[this.len]}check(e,t){const n=e.constructor===Function&&e.length<=this.len;return!n&&t?.extend(null,"function",typeof e),n}}),_c=nc(e=>"function"==typeof e);ec(class extends Jl{constructor(e){super(),this.shape=e}check(e,t){const n=Ss(this.shape,n=>n.check(e,t));return!n&&t?.extend(null,"Intersectinon",typeof e),n}},e=>e.shape.length>0);class Ec extends Jl{static _dilutes=!0;constructor(e){super(),this.shape=e}check(e,t){const n=ws(this.shape,n=>n.check(e,t));return t?.extend(null,"Union",typeof e),n}}const Pc=(...e)=>e.findIndex(e=>$c.check(e))>=0?Pc(...e.map(e=>Uc(e)).map(e=>$c.check(e)?e.shape:[e]).flat(1)):1===e.length?e[0]:new Ec(e),$c=ec(Ec),Mc=()=>!0,Nc=nc(Mc),Ac=ec(tc,e=>e.shape===Mc),Tc=nc(e=>"bigint"==typeof e),Rc=nc(e=>e===Tc),Ic=nc(e=>"symbol"==typeof e);nc(e=>e===Ic);const Dc=nc(e=>"number"==typeof e),Lc=nc(e=>e===Dc),zc=nc(e=>"string"==typeof e),Wc=nc(e=>e===zc),Oc=nc(e=>"boolean"==typeof e),Bc=nc(e=>e===Oc),Fc=ic(void 0);ec(rc,e=>1===e.shape.length&&void 0===e.shape[0]),ic(void 0);const jc=ic(null),Hc=ec(rc,e=>1===e.shape.length&&null===e.shape[0]);ec(Uint8Array),ec(Zl,e=>e.shape===Uint8Array);const Gc=Pc(Dc,zc,jc,Fc,Tc,Oc,Ic);(()=>{const e=vc(Nc),t=gc(zc,Nc),n=Pc(Dc,zc,jc,Oc,e,t);e.shape=n,t.shape.values=n})();const Uc=e=>{if(Cc.check(e))return e;if(fc.check(e)){const t={};for(const n in e)t[n]=Uc(e[n]);return new dc(t)}return Sc.check(e)?Pc(...e.map(Uc)):Gc.check(e)?ic(e):_c.check(e)?ec(e):void dl()},qc=Ol?()=>{}:(e,t)=>{const n=new Kl;if(!t.check(e,n))throw cl(`Expected value to be of type ${t.constructor.name}.\n${n.toString()}`)};class Xc{constructor(e){this.patterns=[],this.$state=e}if(e,t){return this.patterns.push({if:Uc(e),h:t}),this}else(e){return this.if(Nc,e)}done(){return(e,t)=>{for(let n=0;n<this.patterns.length;n++){const r=this.patterns[n];if(r.if.check(e))return r.h(e,t)}throw cl("Unhandled pattern")}}}const Vc=(Yc=Nc,new Xc(Yc)).if(Lc,(e,t)=>Gl(t,Ts,As)).if(Wc,(e,t)=>((e,t=0,n=20)=>{const r=ql(e,t,n);let i="";for(let o=0;o<r;o++)i+=Xl(e);return i})(t)).if(Bc,(e,t)=>Hl(t)).if(Rc,(e,t)=>BigInt(Gl(t,Ts,As))).if($c,(e,t)=>Kc(t,Vl(t,e.shape))).if(hc,(e,t)=>{const n={};for(const r in e.shape){let i=e.shape[r];if(uc.check(i)){if(Hl(t))continue;i=i.shape}n[r]=Vc(i,t)}return n}).if(xc,(e,t)=>{const n=[],r=Ul(t,0,42);for(let i=0;i<r;i++)n.push(Kc(t,e.shape));return n}).if(oc,(e,t)=>Vl(t,e.shape)).if(Hc,(e,t)=>null).if(kc,(e,t)=>{const n=Kc(t,e.res);return()=>n}).if(Ac,(e,t)=>Kc(t,Vl(t,[Dc,zc,jc,Fc,Tc,Oc,vc(Dc),gc(Pc("a","b","c"),Dc)]))).if(mc,(e,t)=>{const n={},r=Gl(t,0,3);for(let i=0;i<r;i++){const r=Kc(t,e.shape.keys),i=Kc(t,e.shape.values);n[r]=i}return n}).done();var Yc;const Kc=(e,t)=>Vc(Uc(t),e),Qc="undefined"!=typeof document?document:{};nc(e=>e.nodeType===nu),"undefined"!=typeof DOMParser&&new DOMParser,nc(e=>e.nodeType===Zc),nc(e=>e.nodeType===eu);const Jc=e=>((e,t)=>{const n=[];for(const[r,i]of e)n.push(t(i,r));return n})(e,(e,t)=>`${t}:${e};`).join(""),Zc=Qc.ELEMENT_NODE,eu=Qc.TEXT_NODE,tu=Qc.DOCUMENT_NODE,nu=Qc.DOCUMENT_FRAGMENT_NODE;nc(e=>e.nodeType===tu);const ru=Symbol,iu=ru(),ou=ru(),au=ru(),su=ru(),lu=ru(),cu=ru(),uu=ru(),du=ru(),hu=ru(),fu={[iu]:jl("font-weight","bold"),[ou]:jl("font-weight","normal"),[au]:jl("color","blue"),[lu]:jl("color","green"),[su]:jl("color","grey"),[cu]:jl("color","red"),[uu]:jl("color","purple"),[du]:jl("color","orange"),[hu]:jl("color","black")},pu=Bl?e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());const t=[],n=[],r=ps();let i=[],o=0;for(;o<e.length;o++){const i=e[o],a=fu[i];if(void 0!==a)r.set(a.left,a.right);else{if(void 0===i)break;if(i.constructor!==String&&i.constructor!==Number)break;{const e=Jc(r);o>0||e.length>0?(t.push("%c"+i),n.push(e)):t.push(i)}}}for(o>0&&(i=n,i.unshift(t.join("")));o<e.length;o++){const t=e[o];t instanceof Symbol||i.push(t)}return i}:e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const n=e[r];if(void 0===n)break;if(n.constructor===String||n.constructor===Number)t.push(n);else if(n.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){const t=e[r];t instanceof Symbol||n.push(t)}return n},gu=(...e)=>{console.warn(...pu(e)),e.unshift(du),mu.forEach(t=>t.print(e))},mu=bs(),bu=e=>({[Symbol.iterator](){return this},next:e}),yu=(e,t)=>bu(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class vu{constructor(e,t){this.clock=e,this.len=t}}class xu{constructor(){this.clients=new Map}}const Su=(e,t,n)=>t.clients.forEach((t,r)=>{const i=e.doc.store.clients.get(r);if(null!=i){const r=i[i.length-1],o=r.id.clock+r.length;for(let a=0,s=t[a];a<t.length&&s.clock<o;s=t[++a])Zu(e,i,s.clock,s.len,n)}}),wu=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const i=_s((n+r)/2),o=e[i],a=o.clock;if(a<=t){if(t<a+o.len)return i;n=i+1}else r=i-1}return null})(n,t.clock)},Cu=e=>{e.clients.forEach(e=>{let t,n;for(e.sort((e,t)=>e.clock-t.clock),t=1,n=1;t<e.length;t++){const r=e[n-1],i=e[t];r.clock+r.len>=i.clock?r.len=$s(r.len,i.clock+i.len-r.clock):(n<t&&(e[n]=i),n++)}e.length=n})},ku=e=>{const t=new xu;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,i)=>{if(!t.clients.has(i)){const o=r.slice();for(let t=n+1;t<e.length;t++)vs(o,e[t].clients.get(i)||[]);t.clients.set(i,o)}});return Cu(t),t},_u=(e,t,n,r)=>{ms(e.clients,t,()=>[]).push(new vu(n,r))},Eu=fl;class Pu extends ks{constructor({guid:e=gl(),collectionid:t=null,gc:n=!0,gcFilter:r=()=>!0,meta:i=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=Eu(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new Gu,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=bl(e=>{this.on("load",()=>{this.isLoaded=!0,e(this)})});const s=()=>bl(e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)});this.on("sync",e=>{!1===e&&this.isSynced&&(this.whenSynced=s()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=s()}load(){const e=this._item;null===e||this.shouldLoad||od(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(xs(this.subdocs).map(e=>e.guid))}transact(e,t=null){return od(this,e,t)}get(e,t=xd){const n=ms(this.share,e,()=>{const e=new t;return e._integrate(this,null),e}),r=n.constructor;if(t!==xd&&r!==t){if(r===xd){const r=new t;r._map=n._map,n._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=r}),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,Wd)}getText(e=""){return this.get(e,nh)}getMap(e=""){return this.get(e,Bd)}getXmlElement(e=""){return this.get(e,oh)}getXmlFragment(e=""){return this.get(e,ih)}toJSON(){const e={};return this.share.forEach((t,n)=>{e[n]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,xs(this.subdocs).forEach(e=>e.destroy());const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new Pu({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,od(e.parent.doc,n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class $u{constructor(){this.restEncoder=Hs()}toUint8Array(){return Gs(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Xs(this.restEncoder,e)}writeDsLen(e){Xs(this.restEncoder,e)}}class Mu extends $u{writeLeftID(e){Xs(this.restEncoder,e.client),Xs(this.restEncoder,e.clock)}writeRightID(e){Xs(this.restEncoder,e.client),Xs(this.restEncoder,e.clock)}writeClient(e){Xs(this.restEncoder,e)}writeInfo(e){qs(this.restEncoder,e)}writeString(e){Qs(this.restEncoder,e)}writeParentInfo(e){Xs(this.restEncoder,e?1:0)}writeTypeRef(e){Xs(this.restEncoder,e)}writeLen(e){Xs(this.restEncoder,e)}writeAny(e){nl(this.restEncoder,e)}writeBuf(e){Zs(this.restEncoder,e)}writeJSON(e){Qs(this.restEncoder,JSON.stringify(e))}writeKey(e){Qs(this.restEncoder,e)}}class Nu{constructor(){this.restEncoder=Hs(),this.dsCurrVal=0}toUint8Array(){return Gs(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,Xs(this.restEncoder,t)}writeDsLen(e){0===e&&dl(),Xs(this.restEncoder,e-1),this.dsCurrVal+=e}}class Au extends Nu{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new sl,this.clientEncoder=new ol,this.leftClockEncoder=new sl,this.rightClockEncoder=new sl,this.infoEncoder=new rl(qs),this.stringEncoder=new ll,this.parentInfoEncoder=new rl(qs),this.typeRefEncoder=new ol,this.lenEncoder=new ol}toUint8Array(){const e=Hs();return Xs(e,0),Zs(e,this.keyClockEncoder.toUint8Array()),Zs(e,this.clientEncoder.toUint8Array()),Zs(e,this.leftClockEncoder.toUint8Array()),Zs(e,this.rightClockEncoder.toUint8Array()),Zs(e,Gs(this.infoEncoder)),Zs(e,this.stringEncoder.toUint8Array()),Zs(e,Gs(this.parentInfoEncoder)),Zs(e,this.typeRefEncoder.toUint8Array()),Zs(e,this.lenEncoder.toUint8Array()),Js(e,Gs(this.restEncoder)),Gs(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){nl(this.restEncoder,e)}writeBuf(e){Zs(this.restEncoder,e)}writeJSON(e){nl(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const Tu=(e,t,n)=>{const r=new Map;n.forEach((e,n)=>{qu(t,n)>e&&r.set(n,e)}),Uu(t).forEach((e,t)=>{n.has(t)||r.set(t,0)}),Xs(e.restEncoder,r.size),xs(r.entries()).sort((e,t)=>t[0]-e[0]).forEach(([n,r])=>{((e,t,n,r)=>{r=$s(r,t[0].id.clock);const i=Vu(t,r);Xs(e.restEncoder,t.length-i),e.writeClient(n),Xs(e.restEncoder,r);const o=t[i];o.write(e,r-o.id.clock);for(let a=i+1;a<t.length;a++)t[a].write(e,0)})(e,t.clients.get(n),n,r)})};class Ru{constructor(){this.l=[]}}const Iu=()=>new Ru,Du=(e,t)=>e.l.push(t),Lu=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(e=>t!==e),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},zu=(e,t,n)=>Al(e.l,[t,n]);class Wu{constructor(e,t){this.client=e,this.clock=t}}const Ou=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,Bu=(e,t)=>new Wu(e,t),Fu=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1},ju=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!wu(t.ds,e.id),Hu=(e,t)=>{const n=ms(e.meta,Hu,bs),r=e.doc.store;n.has(t)||(t.sv.forEach((t,n)=>{t<qu(r,n)&&Qu(e,Bu(n,t))}),Su(e,t.ds,e=>{}),n.add(t))};class Gu{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Uu=e=>{const t=new Map;return e.clients.forEach((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)}),t},qu=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},Xu=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw dl()}n.push(t)},Vu=(e,t)=>{let n=0,r=e.length-1,i=e[r],o=i.id.clock;if(o===t)return r;let a=_s(t/(o+i.length-1)*r);for(;n<=r;){if(i=e[a],o=i.id.clock,o<=t){if(t<o+i.length)return a;n=a+1}else r=a-1;a=_s((n+r)/2)}throw dl()},Yu=(e,t)=>{const n=e.clients.get(t.client);return n[Vu(n,t.clock)]},Ku=(e,t,n)=>{const r=Vu(t,n),i=t[r];return i.id.clock<n&&i instanceof $h?(t.splice(r+1,0,_h(e,i,n-i.id.clock)),r+1):r},Qu=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Ku(e,n,t.clock)]},Ju=(e,t,n)=>{const r=t.clients.get(n.client),i=Vu(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==lh&&r.splice(i+1,0,_h(e,o,n.clock-o.id.clock+1)),o},Zu=(e,t,n,r,i)=>{if(0===r)return;const o=n+r;let a,s=Ku(e,t,n);do{a=t[s++],o<a.id.clock+a.length&&Ku(e,t,o),i(a)}while(s<t.length&&t[s].id.clock<o)};class ed{constructor(e,t,n){this.doc=e,this.deleteSet=new xu,this.beforeState=Uu(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const td=(e,t)=>!(0===t.deleteSet.clients.size&&!((e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1})(t.afterState,(e,n)=>t.beforeState.get(n)!==e))&&(Cu(t.deleteSet),((e,t)=>{Tu(e,t.doc.store,t.beforeState)})(e,t),((e,t)=>{Xs(e.restEncoder,t.clients.size),xs(t.clients.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,n])=>{e.resetDsCurVal(),Xs(e.restEncoder,t);const r=n.length;Xs(e.restEncoder,r);for(let i=0;i<r;i++){const t=n[i];e.writeDsClock(t.clock),e.writeDsLen(t.len)}})})(e,t.deleteSet),!0),nd=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&ms(e.changed,t,bs).add(n)},rd=(e,t)=>{let n=e[t],r=e[t-1],i=t;for(;i>0&&(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n));n=r,r=e[--i-1])n instanceof $h&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const o=t-i;return o&&e.splice(t+1-o,o),o},id=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,i=r.store,o=n.deleteSet,a=n._mergeStructs;try{Cu(o),n.afterState=Uu(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach((t,r)=>e.push(()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})),e.push(()=>{n.changedParentTypes.forEach((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=t,e._path=null}),e.sort((e,t)=>e.path.length-t.path.length),zu(t._dEH,e,n))})}),e.push(()=>r.emit("afterTransaction",[n,r])),Al(e,[]),n._needFormattingCleanup&&Zd(n)}finally{r.gc&&((e,t,n)=>{for(const[r,i]of e.clients.entries()){const e=t.clients.get(r);for(let r=i.length-1;r>=0;r--){const o=i[r],a=o.clock+o.len;for(let r=Vu(e,o.clock),i=e[r];r<e.length&&i.id.clock<a;i=e[++r]){const i=e[r];if(o.clock+o.len<=i.id.clock)break;i instanceof $h&&i.deleted&&!i.keep&&n(i)&&i.gc(t,!1)}}}})(o,i,r.gcFilter),((e,t)=>{e.clients.forEach((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=Ps(r.length-1,1+Vu(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+rd(r,e)}})})(o,i),n.afterState.forEach((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=i.clients.get(t),n=$s(Vu(e,r),1);for(let t=e.length-1;t>=n;)t-=1+rd(e,t)}});for(let e=a.length-1;e>=0;e--){const{client:t,clock:n}=a[e].id,r=i.clients.get(t),o=Vu(r,n);o+1<r.length&&rd(r,o+1)>1||o>0&&rd(r,o)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(((...e)=>{console.log(...pu(e)),mu.forEach(t=>t.print(e))})(du,iu,"[yjs] ",ou,cu,"Changed the client-id because another client seems to be using it."),r.clientID=Eu()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new Mu;td(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new Au;td(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:s,subdocsLoaded:l,subdocsRemoved:c}=n;(s.size>0||c.size>0||l.size>0)&&(s.forEach(e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)}),c.forEach(e=>r.subdocs.delete(e)),r.emit("subdocs",[{loaded:l,added:s,removed:c},r,n]),c.forEach(e=>e.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):id(e,t+1)}}},od=(e,t,n=null,r=!0)=>{const i=e._transactionCleanups;let o=!1,a=null;null===e._transaction&&(o=!0,e._transaction=new ed(e,n,r),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{a=t(e._transaction)}finally{if(o){const t=e._transaction===i[0];e._transaction=null,t&&id(i,0)}}return a};class ad{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const sd=(e,t,n)=>{Su(e,n.deletions,n=>{n instanceof $h&&t.scope.some(t=>t===e.doc||Fu(t,n))&&kh(n,!1)})},ld=(e,t,n)=>{let r=null;const i=e.doc,o=e.scope;od(i,n=>{for(;t.length>0&&null===e.currStackItem;){const r=i.store,a=t.pop(),s=new Set,l=[];let c=!1;Su(n,a.insertions,e=>{if(e instanceof $h){if(null!==e.redone){let{item:t,diff:i}=Ch(r,e.id);i>0&&(t=Qu(n,Bu(t.id.client,t.id.clock+i))),e=t}!e.deleted&&o.some(t=>t===n.doc||Fu(t,e))&&l.push(e)}}),Su(n,a.deletions,e=>{e instanceof $h&&o.some(t=>t===n.doc||Fu(t,e))&&!wu(a.insertions,e.id)&&s.add(e)}),s.forEach(t=>{c=null!==Ph(n,t,s,a.insertions,e.ignoreRemoteMapChanges,e)||c});for(let t=l.length-1;t>=0;t--){const r=l[t];e.deleteFilter(r)&&(r.delete(n),c=!0)}e.currStackItem=c?a:null}n.changed.forEach((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)}),r=n},e);const a=e.currStackItem;if(null!=a){const t=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:a,type:n,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return a};class cd extends ks{constructor(e,{captureTimeout:t=500,captureTransaction:n=e=>!0,deleteFilter:r=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:a=(Cs(e)?e[0].doc:e instanceof Pu?e:e.doc)}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=r,i.add(this),this.trackedOrigins=i,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!(this.captureTransaction(e)&&this.scope.some(t=>e.changedParentTypes.has(t)||t===this.doc)&&(this.trackedOrigins.has(e.origin)||e.origin&&this.trackedOrigins.has(e.origin.constructor))))return;const t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);const i=new xu;e.afterState.forEach((t,n)=>{const r=e.beforeState.get(n)||0,o=t-r;o>0&&_u(i,n,r,o)});const o=ml();let a=!1;if(this.lastChange>0&&o-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){const t=r[r.length-1];t.deletions=ku([t.deletions,e.deleteSet]),t.insertions=ku([t.insertions,i])}else r.push(new ad(e.deleteSet,i)),a=!0;t||n||(this.lastChange=o),Su(e,e.deleteSet,t=>{t instanceof $h&&this.scope.some(n=>n===e.doc||Fu(n,t))&&kh(t,!0)});const s=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];a?this.emit("stack-item-added",s):this.emit("stack-item-updated",s)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const t=new Set(this.scope);(e=Cs(e)?e:[e]).forEach(e=>{t.has(e)||(t.add(e),(e instanceof xd?e.doc!==this.doc:e!==this.doc)&&gu("[yjs#509] Not same Y.Doc"),this.scope.push(e))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(n=>{e&&(this.undoStack.forEach(e=>sd(n,this,e)),this.undoStack=[]),t&&(this.redoStack.forEach(e=>sd(n,this,e)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=ld(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=ld(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}const ud="You must not compute changes after the event-handler fired.";class dd{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=hd(this.currentTarget,this.target))}deletes(e){return wu(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw cl(ud);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(n=>{if(null!==n){const r=t._map.get(n);let i,o;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;i="delete",o=ys(e.content.getContent())}else null!==e&&this.deletes(e)?(i="update",o=ys(e.content.getContent())):(i="add",o=void 0)}else{if(!this.deletes(r))return;i="delete",o=ys(r.content.getContent())}e.set(n,{action:i,oldValue:o})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw cl(ud);const t=this.target,n=bs(),r=bs(),i=[];e={added:n,deleted:r,delta:i,keys:this.keys};if(this.transaction.changed.get(t).has(null)){let e=null;const o=()=>{e&&i.push(e)};for(let i=t._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&(null!==e&&void 0!==e.delete||(o(),e={delete:0}),e.delete+=i.length,r.add(i)):this.adds(i)?(null!==e&&void 0!==e.insert||(o(),e={insert:[]}),e.insert=e.insert.concat(i.content.getContent()),n.add(i)):(null!==e&&void 0!==e.retain||(o(),e={retain:0}),e.retain+=i.length);null!==e&&void 0===e.retain&&o()}this._changes=e}return e}}const hd=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)!r.deleted&&r.countable&&(e+=r.length),r=r.right;n.unshift(e)}t=t._item.parent}return n},fd=()=>{gu("Invalid access: Add Yjs type to a document before reading data.")};let pd=0;class gd{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=pd++}}const md=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=pd++},bd=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce((e,n)=>Es(t-e.index)<Es(t-n.index)?e:n);let r=e._start,i=0;for(null!==n&&(r=n.p,i=n.index,(e=>{e.timestamp=pd++})(n));null!==r.right&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;null!==r.left&&i>t;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==n&&Es(n.index-i)<r.parent.length/80?(md(n,r,i),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return md(r,t,n),r}{const r=new gd(t,n);return e.push(r),r}})(e._searchMarker,r,i)},yd=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const i=e[r];if(n>0){let t=i.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(i.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}i.p=t,t.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=$s(t,i.index+n))}},vd=(e,t,n)=>{const r=e,i=t.changedParentTypes;for(;ms(i,e,()=>[]).push(n),null!==e._item;)e=e._item.parent;zu(r._eH,n,t)};class xd{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Iu(),this._dEH=Iu(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw ul()}clone(){throw ul()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Du(this._eH,e)}observeDeep(e){Du(this._dEH,e)}unobserve(e){Lu(this._eH,e)}unobserveDeep(e){Lu(this._dEH,e)}toJSON(){}}const Sd=(e,t,n)=>{e.doc??fd(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const i=[];let o=e._start;for(;null!==o&&r>0;){if(o.countable&&!o.deleted){const e=o.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)i.push(e[n]),r--;t=0}}o=o.right}return i},wd=e=>{e.doc??fd();const t=[];let n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},Cd=(e,t)=>{let n=0,r=e._start;for(e.doc??fd();null!==r;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let r=0;r<i.length;r++)t(i[r],n++,e)}r=r.right}},kd=(e,t)=>{const n=[];return Cd(e,(r,i)=>{n.push(t(r,i,e))}),n},_d=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},Ed=(e,t)=>{e.doc??fd();const n=bd(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},Pd=(e,t,n,r)=>{let i=n;const o=e.doc,a=o.clientID,s=o.store,l=null===n?t._start:n.right;let c=[];const u=()=>{c.length>0&&(i=new $h(Bu(a,qu(s,a)),i,i&&i.lastId,l,l&&l.id,t,null,new gh(c)),i.integrate(e,0),c=[])};r.forEach(n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:i=new $h(Bu(a,qu(s,a)),i,i&&i.lastId,l,l&&l.id,t,null,new ch(new Uint8Array(n))),i.integrate(e,0);break;case Pu:i=new $h(Bu(a,qu(s,a)),i,i&&i.lastId,l,l&&l.id,t,null,new dh(n)),i.integrate(e,0);break;default:if(!(n instanceof xd))throw new Error("Unexpected content type in insert operation");i=new $h(Bu(a,qu(s,a)),i,i&&i.lastId,l,l&&l.id,t,null,new wh(n)),i.integrate(e,0)}}}),u()},$d=()=>cl("Length exceeded!"),Md=(e,t,n,r)=>{if(n>t._length)throw $d();if(0===n)return t._searchMarker&&yd(t._searchMarker,n,r.length),Pd(e,t,null,r);const i=n,o=bd(t,n);let a=t._start;for(null!==o&&(a=o.p,0===(n-=o.index)&&(a=a.prev,n+=a&&a.countable&&!a.deleted?a.length:0));null!==a;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&Qu(e,Bu(a.id.client,a.id.clock+n));break}n-=a.length}return t._searchMarker&&yd(t._searchMarker,i,r.length),Pd(e,t,a,r)},Nd=(e,t,n,r)=>{if(0===r)return;const i=n,o=r,a=bd(t,n);let s=t._start;for(null!==a&&(s=a.p,n-=a.index);null!==s&&n>0;s=s.right)!s.deleted&&s.countable&&(n<s.length&&Qu(e,Bu(s.id.client,s.id.clock+n)),n-=s.length);for(;r>0&&null!==s;)s.deleted||(r<s.length&&Qu(e,Bu(s.id.client,s.id.clock+r)),s.delete(e),r-=s.length),s=s.right;if(r>0)throw $d();t._searchMarker&&yd(t._searchMarker,i,-o+r)},Ad=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},Td=(e,t,n,r)=>{const i=t._map.get(n)||null,o=e.doc,a=o.clientID;let s;if(null==r)s=new gh([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:s=new gh([r]);break;case Uint8Array:s=new ch(r);break;case Pu:s=new dh(r);break;default:if(!(r instanceof xd))throw new Error("Unexpected content type");s=new wh(r)}new $h(Bu(a,qu(o.store,a)),i,i&&i.lastId,null,null,t,n,s).integrate(e,0)},Rd=(e,t)=>{e.doc??fd();const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},Id=e=>{const t={};return e.doc??fd(),e._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},Dd=(e,t)=>{e.doc??fd();const n=e._map.get(t);return void 0!==n&&!n.deleted},Ld=e=>{return e.doc??fd(),t=e._map.entries(),n=e=>!e[1].deleted,bu(()=>{let e;do{e=t.next()}while(!e.done&&!n(e.value));return e});var t,n};class zd extends dd{}class Wd extends xd{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Wd;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Wd}clone(){const e=new Wd;return e.insert(0,this.toArray().map(e=>e instanceof xd?e.clone():e)),e}get length(){return this.doc??fd(),this._length}_callObserver(e,t){super._callObserver(e,t),vd(this,e,new zd(this,e))}insert(e,t){null!==this.doc?od(this.doc,n=>{Md(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?od(this.doc,t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce((e,t)=>t.index>e.index?t:e,{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;Pd(e,t,r,n)})(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?od(this.doc,n=>{Nd(n,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return Ed(this,e)}toArray(){return wd(this)}slice(e=0,t=this.length){return Sd(this,e,t)}toJSON(){return this.map(e=>e instanceof xd?e.toJSON():e)}map(e){return kd(this,e)}forEach(e){Cd(this,e)}[Symbol.iterator](){return _d(this)}_write(e){e.writeTypeRef(bh)}}class Od extends dd{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Bd extends xd{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new Bd}clone(){const e=new Bd;return this.forEach((t,n)=>{e.set(n,t instanceof xd?t.clone():t)}),e}_callObserver(e,t){vd(this,e,new Od(this,e,t))}toJSON(){this.doc??fd();const e={};return this._map.forEach((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof xd?r.toJSON():r}}),e}get size(){return[...Ld(this)].length}keys(){return yu(Ld(this),e=>e[0])}values(){return yu(Ld(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return yu(Ld(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??fd(),this._map.forEach((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?od(this.doc,t=>{Ad(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?od(this.doc,n=>{Td(n,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return Rd(this,e)}has(e){return Dd(this,e)}clear(){null!==this.doc?od(this.doc,e=>{this.forEach(function(t,n,r){Ad(e,r,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(yh)}}const Fd=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&((e,t)=>e===t||El(e)===El(t)&&Pl(e,(e,n)=>(void 0!==e||$l(t,n))&&Cl(t[n],e)))(e,t);class jd{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){if(null===this.right&&dl(),this.right.content.constructor===fh)this.right.deleted||qd(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}const Hd=(e,t,n)=>{for(;null!==t.right&&n>0;){if(t.right.content.constructor===fh)t.right.deleted||qd(t.currentAttributes,t.right.content);else t.right.deleted||(n<t.right.length&&Qu(e,Bu(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);t.left=t.right,t.right=t.right.right}return t},Gd=(e,t,n,r)=>{const i=new Map,o=r?bd(t,n):null;if(o){const t=new jd(o.p.left,o.p,o.index,i);return Hd(e,t,n-o.index)}{const r=new jd(null,t._start,0,i);return Hd(e,r,n)}},Ud=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===fh&&Fd(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=e.doc,o=i.clientID;r.forEach((r,a)=>{const s=n.left,l=n.right,c=new $h(Bu(o,qu(i.store,o)),s,s&&s.lastId,l,l&&l.id,t,null,new fh(a,r));c.integrate(e,0),n.right=c,n.forward()})},qd=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},Xd=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===fh&&Fd(t[e.right.content.key]??null,e.right.content.value));)e.forward()},Vd=(e,t,n,r)=>{const i=e.doc,o=i.clientID,a=new Map;for(const s in r){const l=r[s],c=n.currentAttributes.get(s)??null;if(!Fd(c,l)){a.set(s,c);const{left:r,right:u}=n;n.right=new $h(Bu(o,qu(i.store,o)),r,r&&r.lastId,u,u&&u.id,t,null,new fh(s,l)),n.right.integrate(e,0),n.forward()}}return a},Yd=(e,t,n,r,i)=>{n.currentAttributes.forEach((e,t)=>{void 0===i[t]&&(i[t]=null)});const o=e.doc,a=o.clientID;Xd(n,i);const s=Vd(e,t,n,i),l=r.constructor===String?new mh(r):r instanceof xd?new wh(r):new hh(r);let{left:c,right:u,index:d}=n;t._searchMarker&&yd(t._searchMarker,n.index,l.getLength()),u=new $h(Bu(a,qu(o.store,a)),c,c&&c.lastId,u,u&&u.id,t,null,l),u.integrate(e,0),n.right=u,n.index=d,n.forward(),Ud(e,t,n,s)},Kd=(e,t,n,r,i)=>{const o=e.doc,a=o.clientID;Xd(n,i);const s=Vd(e,t,n,i);e:for(;null!==n.right&&(r>0||s.size>0&&(n.right.deleted||n.right.content.constructor===fh));){if(!n.right.deleted)switch(n.right.content.constructor){case fh:{const{key:t,value:o}=n.right.content,a=i[t];if(void 0!==a){if(Fd(a,o))s.delete(t);else{if(0===r)break e;s.set(t,o)}n.right.delete(e)}else n.currentAttributes.set(t,o);break}default:r<n.right.length&&Qu(e,Bu(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new $h(Bu(a,qu(o.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new mh(i)),n.right.integrate(e,0),n.forward()}Ud(e,t,n,s)},Qd=(e,t,n,r,i)=>{let o=t;const a=ps();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===fh){const e=o.content;a.set(e.key,e)}o=o.right}let s=0,l=!1;for(;t!==o;){if(n===t&&(l=!0),!t.deleted){const n=t.content;switch(n.constructor){case fh:{const{key:o,value:c}=n,u=r.get(o)??null;a.get(o)===n&&u!==c||(t.delete(e),s++,l||(i.get(o)??null)!==c||u===c||(null===u?i.delete(o):i.set(o,u))),l||t.deleted||qd(i,n);break}}}t=t.right}return s},Jd=e=>{let t=0;return od(e.doc,n=>{let r=e._start,i=e._start,o=ps();const a=gs(o);for(;i;){if(!1===i.deleted)if(i.content.constructor===fh)qd(a,i.content);else t+=Qd(n,r,i,o,a),o=gs(a),r=i;i=i.right}}),t},Zd=e=>{const t=new Set,n=e.doc;for(const[r,i]of e.afterState.entries()){const o=e.beforeState.get(r)||0;i!==o&&Zu(e,n.store.clients.get(r),o,i,e=>{e.deleted||e.content.constructor!==fh||e.constructor===lh||t.add(e.parent)})}od(n,n=>{Su(e,e.deleteSet,e=>{if(e instanceof lh||!e.parent._hasFormatting||t.has(e.parent))return;const r=e.parent;e.content.constructor===fh?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===fh){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)});for(const e of t)Jd(e)})},eh=(e,t,n)=>{const r=n,i=gs(t.currentAttributes),o=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case wh:case hh:case mh:n<t.right.length&&Qu(e,Bu(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}o&&Qd(e,o,t.right,i,t.currentAttributes);const a=(t.left||t.right).parent;return a._searchMarker&&yd(a._searchMarker,t.index,-r+n),t};class th extends dd{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];od(e,e=>{const n=new Map,r=new Map;let i=this.target._start,o=null;const a={};let s="",l=0,c=0;const u=()=>{if(null!==o){let e=null;switch(o){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof s||s.length>0)&&(e={insert:s},n.size>0&&(e.attributes={},n.forEach((t,n)=>{null!==t&&(e.attributes[n]=t)}))),s="";break;case"retain":l>0&&(e={retain:l},(e=>{for(const t in e)return!1;return!0})(a)||(e.attributes=kl({},a))),l=0}e&&t.push(e),o=null}};for(;null!==i;){switch(i.content.constructor){case wh:case hh:this.adds(i)?this.deletes(i)||(u(),o="insert",s=i.content.getContent()[0],u()):this.deletes(i)?("delete"!==o&&(u(),o="delete"),c+=1):i.deleted||("retain"!==o&&(u(),o="retain"),l+=1);break;case mh:this.adds(i)?this.deletes(i)||("insert"!==o&&(u(),o="insert"),s+=i.content.str):this.deletes(i)?("delete"!==o&&(u(),o="delete"),c+=i.length):i.deleted||("retain"!==o&&(u(),o="retain"),l+=i.length);break;case fh:{const{key:t,value:s}=i.content;if(this.adds(i)){if(!this.deletes(i)){const l=n.get(t)??null;Fd(l,s)?null!==s&&i.delete(e):("retain"===o&&u(),Fd(s,r.get(t)??null)?delete a[t]:a[t]=s)}}else if(this.deletes(i)){r.set(t,s);const e=n.get(t)??null;Fd(e,s)||("retain"===o&&u(),a[t]=e)}else if(!i.deleted){r.set(t,s);const n=a[t];void 0!==n&&(Fd(n,s)?null!==n&&i.delete(e):("retain"===o&&u(),null===s?delete a[t]:a[t]=s))}i.deleted||("insert"===o&&u(),qd(n,i.content));break}}i=i.right}for(u();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}}),this._delta=t}return this._delta}}class nh extends xd{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??fd(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(uS){console.error(uS)}this._pending=null}_copy(){return new nh}clone(){const e=new nh;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new th(this,e,t);vd(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??fd();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===mh&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?od(this.doc,n=>{const r=new jd(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const o=e[i];if(void 0!==o.insert){const a=t||"string"!=typeof o.insert||i!==e.length-1||null!==r.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!=typeof a||a.length>0)&&Yd(n,this,r,a,o.attributes||{})}else void 0!==o.retain?Kd(n,this,r,o.retain,o.attributes||{}):void 0!==o.delete&&eh(n,r,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,n){this.doc??fd();const r=[],i=new Map,o=this.doc;let a="",s=this._start;function l(){if(a.length>0){const e={};let t=!1;i.forEach((n,r)=>{t=!0,e[r]=n});const n={insert:a};t&&(n.attributes=e),r.push(n),a=""}}const c=()=>{for(;null!==s;){if(ju(s,e)||void 0!==t&&ju(s,t))switch(s.content.constructor){case mh:{const r=i.get("ychange");void 0===e||ju(s,e)?void 0===t||ju(s,t)?void 0!==r&&(l(),i.delete("ychange")):void 0!==r&&r.user===s.id.client&&"added"===r.type||(l(),i.set("ychange",n?n("added",s.id):{type:"added"})):void 0!==r&&r.user===s.id.client&&"removed"===r.type||(l(),i.set("ychange",n?n("removed",s.id):{type:"removed"})),a+=s.content.str;break}case wh:case hh:{l();const e={insert:s.content.getContent()[0]};if(i.size>0){const t={};e.attributes=t,i.forEach((e,n)=>{t[n]=e})}r.push(e);break}case fh:ju(s,e)&&(l(),qd(i,s.content))}s=s.right}l()};return e||t?od(o,n=>{e&&Hu(n,e),t&&Hu(n,t),c()},"cleanup"):c(),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?od(r,r=>{const i=Gd(r,this,e,!n);n||(n={},i.currentAttributes.forEach((e,t)=>{n[t]=e})),Yd(r,this,i,t,n)}):this._pending.push(()=>this.insert(e,t,n))}insertEmbed(e,t,n){const r=this.doc;null!==r?od(r,r=>{const i=Gd(r,this,e,!n);Yd(r,this,i,t,n||{})}):this._pending.push(()=>this.insertEmbed(e,t,n||{}))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?od(n,n=>{eh(n,Gd(n,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?od(r,r=>{const i=Gd(r,this,e,!1);null!==i.right&&Kd(r,this,i,t,n)}):this._pending.push(()=>this.format(e,t,n))}removeAttribute(e){null!==this.doc?od(this.doc,t=>{Ad(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?od(this.doc,n=>{Td(n,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return Rd(this,e)}getAttributes(){return Id(this)}_write(e){e.writeTypeRef(vh)}}class rh{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??fd()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==oh&&t.constructor!==ih||null===t._start)for(;null!==e;){const t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class ih extends xd{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ih}clone(){const e=new ih;return e.insert(0,this.toArray().map(e=>e instanceof xd?e.clone():e)),e}get length(){return this.doc??fd(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new rh(this,e)}querySelector(e){e=e.toUpperCase();const t=new rh(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),xs(new rh(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){vd(this,e,new ah(this,t,e))}toString(){return kd(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),Cd(this,i=>{r.insertBefore(i.toDOM(e,t,n),null)}),r}insert(e,t){null!==this.doc?od(this.doc,n=>{Md(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)od(this.doc,n=>{const r=e&&e instanceof xd?e._item:e;Pd(n,this,r,t)});else{const n=this._prelimContent,r=null===e?0:n.findIndex(t=>t===e)+1;if(0===r&&null!==e)throw cl("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?od(this.doc,n=>{Nd(n,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return wd(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Ed(this,e)}slice(e=0,t=this.length){return Sd(this,e,t)}forEach(e){Cd(this,e)}_write(e){e.writeTypeRef(Sh)}}class oh extends ih{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new oh(this.nodeName)}clone(){const e=new oh(this.nodeName);return((e,t)=>{for(const n in e)t(e[n],n)})(this.getAttributes(),(t,n)=>{e.setAttribute(n,t)}),e.insert(0,this.toArray().map(e=>e instanceof xd?e.clone():e)),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const o in e)n.push(o);n.sort();const r=n.length;for(let o=0;o<r;o++){const r=n[o];t.push(r+'="'+e[r]+'"')}const i=this.nodeName.toLocaleLowerCase();return`<${i}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${i}>`}removeAttribute(e){null!==this.doc?od(this.doc,t=>{Ad(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?od(this.doc,n=>{Td(n,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return Rd(this,e)}hasAttribute(e){return Dd(this,e)}getAttributes(e){return e?((e,t)=>{const n={};return e._map.forEach((e,r)=>{let i=e;for(;null!==i&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;null!==i&&ju(i,t)&&(n[r]=i.content.getContent()[i.length-1])}),n})(this,e):Id(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),i=this.getAttributes();for(const o in i){const e=i[o];"string"==typeof e&&r.setAttribute(o,e)}return Cd(this,i=>{r.appendChild(i.toDOM(e,t,n))}),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(xh),e.writeKey(this.nodeName)}}class ah extends dd{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class sh{constructor(e,t){this.id=e,this.length=t}get deleted(){throw ul()}mergeWith(e){return!1}write(e,t,n){throw ul()}integrate(e,t){throw ul()}}class lh extends sh{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Xu(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class ch{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ch(this.content)}splice(e){throw ul()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class uh{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new uh(this.len)}splice(e){const t=new uh(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){_u(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}class dh{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new dh((e=this.doc.guid,t=this.opts,new Pu({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1})));var e,t}splice(e){throw ul()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class hh{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new hh(this.embed)}splice(e){throw ul()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class fh{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new fh(this.key,this.value)}splice(e){throw ul()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const ph="development"===zl("node_env");class gh{constructor(e){this.arr=e,ph&&Nl(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new gh(this.arr)}splice(e){const t=new gh(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class mh{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new mh(this.str)}splice(e){const t=new mh(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"",t.str=""+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const bh=0,yh=1,vh=2,xh=3,Sh=4;class wh{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new wh(this.type._copy())}splice(e){throw ul()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const Ch=(e,t)=>{let n,r=t,i=0;do{i>0&&(r=Bu(r.client,r.clock+i)),n=Yu(e,r),i=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof $h);return{item:n,diff:i}},kh=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},_h=(e,t,n)=>{const{client:r,clock:i}=t.id,o=new $h(Bu(r,i+n),t,Bu(r,i+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),null!==t.redone&&(o.redone=Bu(t.redone.client,t.redone.clock+n)),t.right=o,null!==o.right&&(o.right.left=o),e._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),t.length=n,o},Eh=(e,t)=>ws(e,e=>wu(e.deletions,t)),Ph=(e,t,n,r,i,o)=>{const a=e.doc,s=a.store,l=a.clientID,c=t.redone;if(null!==c)return Qu(e,c);let u,d=t.parent._item,h=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===Ph(e,d,n,r,i,o)))return null;for(;null!==d.redone;)d=Qu(e,d.redone)}const f=null===d?t.parent:d.content.type;if(null===t.parentSub){for(h=t.left,u=t;null!==h;){let t=h;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:Qu(e,t.redone);if(null!==t&&t.parent._item===d){h=t;break}h=h.left}for(;null!==u;){let t=u;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:Qu(e,t.redone);if(null!==t&&t.parent._item===d){u=t;break}u=u.right}}else if(u=null,t.right&&!i){for(h=t;null!==h&&null!==h.right&&(h.right.redone||wu(r,h.right.id)||Eh(o.undoStack,h.right.id)||Eh(o.redoStack,h.right.id));)for(h=h.right;h.redone;)h=Qu(e,h.redone);if(h&&null!==h.right)return null}else h=f._map.get(t.parentSub)||null;const p=qu(s,l),g=Bu(l,p),m=new $h(g,h,h&&h.lastId,u,u&&u.id,f,t.parentSub,t.content.copy());return t.redone=g,kh(m,!0),m.integrate(e,0),m};let $h=class e extends sh{constructor(e,t,n,r,i,o,a,s){super(e,s.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=i,this.parent=o,this.parentSub=a,this.redone=null,this.content=s,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=qu(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=qu(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Wu&&this.id.client!==this.parent.client&&this.parent.clock>=qu(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Ju(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Qu(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===lh||this.right&&this.right.constructor===lh)this.parent=null;else if(this.parent){if(this.parent.constructor===Wu){const e=Yu(n,this.parent);e.constructor===lh?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===e?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===e&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Ju(e,e.doc.store,Bu(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,i=new Set;for(;null!==t&&t!==this.right;){if(i.add(t),r.add(t),Ou(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(Ou(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!i.has(Yu(e.doc.store,t.origin)))break;r.has(Yu(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Xu(e.doc.store,this),this.content.integrate(e,this),nd(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new lh(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:Bu(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Ou(e.origin,this.lastId)&&this.right===e&&Ou(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),_u(e.deleteSet,this.id.client,this.id.clock,this.length),nd(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw dl();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[Vu(r,t.id.clock)]=n})(e,this,new lh(this.id,this.length)):this.content=new uh(this.length)}write(e,t){const n=t>0?Bu(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=31&this.content.getRef()|(null===n?0:Ms)|(null===r?0:64)|(null===i?0:32);if(e.writeInfo(o),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=(e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw dl()})(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===Wu?(e.writeParentInfo(!1),e.writeLeftID(t)):dl();null!==i&&e.writeString(i)}this.content.write(e,t)}};const Mh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},Nh="__ $YJS$ __";!0===Mh[Nh]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Mh[Nh]=!0;class Ah{roomId;ydoc;provider;yTodoItems;todoUndoManager;awareness;constructor(e,t){this.roomId=e,this.ydoc=new Pu,this.yTodoItems=this.ydoc.getArray("todoItems"),this.todoUndoManager=new cd(this.yTodoItems)}undo(){this.todoUndoManager.undo()}redo(){this.todoUndoManager.redo()}destroy(){this.provider?.disconnect()}}class Th{static applyPhotoshopSmoothing(e,t=.5){if(e.length<4||0===t)return e;const n=[],r=.6*t,i=[];for(let l=0;l<e.length-2;l+=2)if(i.push(e[l],e[l+1]),l<e.length-2){const t=e[l+2],n=e[l+3],r=e[l],o=e[l+1],a=Math.sqrt(Math.pow(t-r,2)+Math.pow(n-o,2)),s=Math.min(Math.max(Math.floor(a/5),1),3);for(let e=1;e<=s;e++){const a=e/(s+1),l=r+(t-r)*a,c=o+(n-o)*a;i.push(l,c)}}i.push(e[e.length-2],e[e.length-1]);const o=[];for(let l=2;l<i.length;l+=2){const e=i[l]-i[l-2],t=i[l+1]-i[l-1];o.push(Math.sqrt(e*e+t*t))}const a=o.reduce((e,t)=>e+t,0)/o.length;for(let l=0;l<i.length;l+=2)if(0===l||l===i.length-2)n.push(i[l],i[l+1]);else{const e=o[l/2-1],t=Math.min(e/(1.5*a),2),s=r*Math.max(.1,2-t),c=Math.min(5,Math.floor(3+4*s)),u=Math.floor(c/2);let d=0,h=0,f=0;for(let n=-u;n<=u;n++){const e=l+2*n;if(e>=0&&e<i.length-1){const t=Math.abs(n),r=Math.exp(-t*t/(2*Math.pow(u/2,2)))*(1-.5*s);d+=i[e]*r,h+=i[e+1]*r,f+=r}}f>0?n.push(d/f,h/f):n.push(i[l],i[l+1])}const s=[];for(let l=0;l<n.length;l+=2)if(0===l||l===n.length-2)s.push(n[l],n[l+1]);else{const e=s[s.length-2],t=s[s.length-1],r=n[l],i=n[l+1];Math.sqrt(Math.pow(r-e,2)+Math.pow(i-t,2))>=2&&s.push(r,i)}return s.length>=4?s:e}static calculateCurvePoints(e,t,n,r){const i=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2)),o=Math.atan2(r-t,n-e),a=n-e,s=r-t,l=Math.abs(s*Math.cos(o)-a*Math.sin(o)),c=i*Math.min(Math.max(l/i,.2),.8),u=(e+n)/2,d=(t+r)/2;let h=1;if(Math.abs(a)>Math.abs(s))h=s>0?1:-1;else{const e=(o%(2*Math.PI)+2*Math.PI)%(2*Math.PI);h=e>Math.PI/2&&e<3*Math.PI/2?a>0?-1:1:a>0?1:-1}const f=u-Math.sin(o)*c*h,p=d+Math.cos(o)*c*h,g=[];for(let m=0;m<=1;m+=.02){const i=Math.pow(1-m,2)*e+2*(1-m)*m*f+Math.pow(m,2)*n,o=Math.pow(1-m,2)*t+2*(1-m)*m*p+Math.pow(m,2)*r;g.push(i,o)}return g}static calculateDistance(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}static calculateAverageDistance(e){if(e.length<4)return 0;const t=[];for(let n=2;n<e.length;n+=2){const r=this.calculateDistance(e[n-2],e[n-1],e[n],e[n+1]);t.push(r)}return t.reduce((e,t)=>e+t,0)/t.length}static simplifyPoints(e,t=2){if(e.length<4)return e;const n=[];for(let r=0;r<e.length;r+=2)if(0===r||r===e.length-2)n.push(e[r],e[r+1]);else{const i=n[n.length-2],o=n[n.length-1],a=e[r],s=e[r+1];this.calculateDistance(i,o,a,s)>=t&&n.push(a,s)}return n}}const Rh=[{key:"2",icon:D(Qr,{}),label:"Option 2"},{key:"sub2",icon:D(Cr,{})}],Ih=()=>{const e=Oe.c(5),t=I();let n;e[0]!==t?(n=e=>{const{key:n}=e;console.log(n),"sub1"===n?t("/image-generator"):"2"===n&&t("/")},e[0]=t,e[1]=n):n=e[1];const r=n;let i,o;return e[2]===Symbol.for("react.memo_cache_sentinel")?(i={backgroundColor:"transparent",position:"absolute",top:"calc(50vh - 112px)",left:0,zIndex:1e3},e[2]=i):i=e[2],e[3]!==r?(o=D("div",{className:"left-menu",style:i,children:D(Fe,{onClick:r,items:Rh})}),e[3]=r,e[4]=o):o=e[4],o},Dh="normal",Lh="reasoning",zh=L(z((e,t)=>({chatMessages:[],isChatLoading:!1,currentStreamingMessage:null,chatInput:"",setChatMessages:t=>e(e=>{e.chatMessages=t}),setChatLoading:t=>e(e=>{e.isChatLoading=t}),setCurrentStreamingMessage:t=>e(e=>{e.currentStreamingMessage=t}),setChatInput:t=>e(e=>{e.chatInput=t}),addChatMessage:t=>e(e=>{const n={...t,timestamp:t.timestamp||new Date,id:t.id||Date.now()+Math.random(),type:t.type||Dh};e.chatMessages.push(n)}),handleMessageEvent:t=>e(e=>{if(!e.currentStreamingMessage)return;["content","reasoningContent"].forEach(n=>{t[n]&&e.currentStreamingMessage[n]?e.currentStreamingMessage[n]+=t[n]:t[n]&&(e.currentStreamingMessage[n]=t[n])}),t.type&&(e.currentStreamingMessage.type=t.type);const{content:n,reasoningContent:r,type:i,...o}=t;Object.assign(e.currentStreamingMessage,o)}),completeStreamingMessage:(t={})=>e(e=>{if(!e.currentStreamingMessage)return;const n={...e.currentStreamingMessage,isStreaming:!1},r=e=>{t[e]&&(n[e]=(n[e]||"")+t[e])};r("content"),r("reasoningContent"),t.type&&(n.type=t.type);const{content:i,reasoningContent:o,isStreaming:a,type:s,...l}=t;Object.assign(n,l),e.chatMessages.push(n),e.currentStreamingMessage=null,e.isChatLoading=!1}),startStreamingMessage:t=>e(e=>{e.currentStreamingMessage={...t,timestamp:t.timestamp||new Date,id:t.id||Date.now()+Math.random(),isStreaming:!0,type:t.type||Dh},e.isChatLoading=!0}),stopStreamingMessage:()=>e(e=>{e.currentStreamingMessage&&(e.currentStreamingMessage.isStreaming=!1,e.currentStreamingMessage.type||(e.currentStreamingMessage.type=Dh),e.chatMessages.push(e.currentStreamingMessage),e.currentStreamingMessage=null),e.isChatLoading=!1}),clearChatMessages:()=>e(e=>{e.chatMessages=[],e.currentStreamingMessage=null,e.isChatLoading=!1}),deleteChatMessage:t=>e(e=>{e.chatMessages=e.chatMessages.filter(e=>e.id!==t)}),retryMessage:t=>e(e=>{const n=e.chatMessages.findIndex(e=>e.id===t);if(n>0){const t=e.chatMessages[n-1];t&&"user"===t.role&&(e.chatMessages=e.chatMessages.slice(0,n),e.chatInput=t.content)}}),getChatMessages:()=>t().chatMessages,getStreamingMessage:()=>t().currentStreamingMessage,getChatLoading:()=>t().isChatLoading}))),Wh=Qe`
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
`;Qe`
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
`,Qe`
  0%, 80%, 100% {
    transform: scale(0.8);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
`;const Oh={name:"15mij16",styles:"position:fixed;z-index:10000;display:flex;align-items:center;justify-content:flex-end;top:0;bottom:0;right:0"},Bh=Je("width:480px;height:100vh;background-color:white;display:flex;flex-direction:column;box-shadow:0 10px 15px -3px rgba(0, 0, 0, 0.1),0 4px 6px -2px rgba(0, 0, 0, 0.05);overflow:hidden;animation:",Wh," 0.3s ease-out;",""),Fh={name:"6z7mld",styles:"display:flex;justify-content:space-between;align-items:center;padding:0 20px;height:60px;border-bottom:1px solid #f3f4f6;background-color:white;color:#1f2937;box-shadow:0 1px 3px 0 rgba(0, 0, 0, 0.1),0 1px 2px 0 rgba(0, 0, 0, 0.06);border-top-left-radius:0.5rem;border-top-right-radius:0.5rem"},jh={name:"cdx1qa",styles:"font-size:1rem;font-weight:600;color:#1f2937;span{font-weight:500;color:#4b5563;}"},Hh={name:"1yydxi7",styles:"display:flex;align-items:center;gap:8px"},Gh={name:"1zvmeo",styles:"background-color:#f3f4f6;border:1px solid #e5e7eb;border-radius:0.375rem;padding:0.375rem 0.75rem;cursor:pointer;transition:all 0.2s ease-in-out;color:#4b5563;font-size:0.75rem;&:hover{background-color:#e5e7eb;transform:scale(1.05);}"},Uh={name:"zb35ks",styles:"background-color:transparent;border:none;color:#4b5563;cursor:pointer;padding:0.375rem;border-radius:0.375rem;transition:all 0.2s ease-in-out;display:flex;align-items:center;justify-content:center;width:28px;height:28px;&:hover{background-color:#f3f4f6;transform:scale(1.05);}"},qh={name:"1sqac1z",styles:"flex:1;overflow-y:auto;padding:0 4px;display:flex;flex-direction:column;gap:16px;background-color:white;border-bottom:1px solid #f3f4f6"},Xh={name:"e9za1e",styles:"display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 16px;text-align:center;color:#4b5563"},Vh={name:"11gn4ua",styles:"padding:0 16px;color:#4b5563"},Yh={name:"s8xbc2",styles:"padding:16px;background-color:#f9fafb;border-top:1px solid #f3f4f6"},Kh=e=>{const t=Oe.c(14),{title:n,isChatLoading:r,onClose:i,onStopStreaming:o}=e;let a,s,l,c,u,d;return t[0]!==n?(a=D("div",{css:jh,children:D("span",{children:n})}),t[0]=n,t[1]=a):a=t[1],t[2]!==r||t[3]!==o?(s=r&&D("button",{css:Gh,onClick:o,title:"",children:D("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:D("rect",{x:"6",y:"6",width:"12",height:"12",fill:"currentColor"})})}),t[2]=r,t[3]=o,t[4]=s):s=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(l=D("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:D("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),t[5]=l):l=t[5],t[6]!==i?(c=D("button",{css:Uh,onClick:i,children:l}),t[6]=i,t[7]=c):c=t[7],t[8]!==s||t[9]!==c?(u=W("div",{css:Hh,children:[s,c]}),t[8]=s,t[9]=c,t[10]=u):u=t[10],t[11]!==a||t[12]!==u?(d=W("div",{css:Fh,children:[a,u]}),t[11]=a,t[12]=u,t[13]=d):d=t[13],d};var Qh,Jh={};const Zh=O(function(){if(Qh)return Jh;Qh=1,Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.default=function(i,o=!1){let a;a=!1===o?{aria:!0,data:!0,attr:!0}:!0===o?{aria:!0}:{...o};const s={};return Object.keys(i).forEach(o=>{(a.aria&&("role"===o||r(o,t))||a.data&&r(o,n)||a.attr&&e.includes(o))&&(s[o]=i[o])}),s};const e="accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError".split(/[\s\n]+/),t="aria-",n="data-";function r(e,t){return 0===e.indexOf(t)}return Jh}());var ef,tf={},nf={};var rf,of,af={};var sf=function(){if(of)return tf;of=1,Object.defineProperty(tf,"__esModule",{value:!0}),tf.useComposeRef=tf.supportRef=tf.supportNodeRef=tf.getNodeRef=tf.fillRef=tf.composeRef=void 0;var e=B(),t=F(),n=i(function(){if(ef)return nf;ef=1,Object.defineProperty(nf,"__esModule",{value:!0}),nf.default=function(t,n,r){const i=e.useRef({});return"value"in i.current&&!r(i.current.condition,n)||(i.current.value=t(),i.current.condition=n),i.current.value};var e=function(e,n){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(n);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(B());function t(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:n})(e)}return nf}()),r=i(function(){if(rf)return af;rf=1,Object.defineProperty(af,"__esModule",{value:!0}),af.default=function(r){return r&&"object"==typeof r&&(r.$$typeof===e||r.$$typeof===t)&&r.type===n};const e=Symbol.for("react.element"),t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");return af}());function i(e){return e&&e.__esModule?e:{default:e}}const o=Number(e.version.split(".")[0]),a=(e,t)=>{"function"==typeof e?e(t):"object"==typeof e&&e&&"current"in e&&(e.current=t)};tf.fillRef=a;const s=(...e)=>{const t=e.filter(Boolean);return t.length<=1?t[0]:t=>{e.forEach(e=>{a(e,t)})}};tf.composeRef=s,tf.useComposeRef=(...e)=>(0,n.default)(()=>s(...e),e,(e,t)=>e.length!==t.length||e.every((e,n)=>e!==t[n]));const l=e=>{if(!e)return!1;if(c(e)&&o>=19)return!0;const n=(0,t.isMemo)(e)?e.type.type:e.type;return!("function"==typeof n&&!n.prototype?.render&&n.$$typeof!==t.ForwardRef)&&!("function"==typeof e&&!e.prototype?.render&&e.$$typeof!==t.ForwardRef)};function c(t){return(0,e.isValidElement)(t)&&!(0,r.default)(t)}return tf.supportRef=l,tf.supportNodeRef=e=>c(e)&&l(e),tf.getNodeRef=e=>{if(e&&c(e)){const t=e;return t.props.propertyIsEnumerable("ref")?t.props.ref:t.ref}return null},tf}();function lf(e,t){return i.useImperativeHandle(e,()=>{const e=t(),{nativeElement:n}=e;return new Proxy(n,{get:(t,n)=>e[n]?e[n]:Reflect.get(t,n)})})}const cf=o.createContext({}),uf={classNames:{},styles:{},className:"",style:{},shortcutKeys:{}},df=e=>{const t=o.useContext(cf);return o.useMemo(()=>({...uf,...t[e]}),[t[e]])},hf=i.createContext(void 0);var ff,pf={},gf={exports:{}};function mf(){return ff||(ff=1,(e=gf).exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports),gf.exports;var e}var bf,yf={};var vf,xf,Sf={},wf={},Cf={},kf={};function _f(){if(xf)return Cf;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach(function(t){r(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function r(t,n,r){var i;return i=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n);if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(n,"string"),(n="symbol"==e(i)?i:String(i))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}xf=1,Object.defineProperty(Cf,"__esModule",{value:!0}),Cf.default=void 0;var i=n(n({},(vf||(vf=1,Object.defineProperty(kf,"__esModule",{value:!0}),kf.commonLocale=void 0,kf.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),kf).commonLocale),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});return Cf.default=i,Cf}var Ef,Pf,$f,Mf,Nf,Af,Tf={};function Rf(){if(Ef)return Tf;Ef=1,Object.defineProperty(Tf,"__esModule",{value:!0}),Tf.default=void 0;return Tf.default={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Tf}function If(){if(Pf)return wf;Pf=1;var e=mf().default;Object.defineProperty(wf,"__esModule",{value:!0}),wf.default=void 0;var t=e(_f()),n=e(Rf());const r={lang:{placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"],...t.default},timePickerLocale:{...n.default}};return wf.default=r,wf}function Df(){if($f)return Sf;$f=1;var e=mf().default;Object.defineProperty(Sf,"__esModule",{value:!0}),Sf.default=void 0;var t=e(If());return Sf.default=t.default,Sf}function Lf(){if(Mf)return pf;Mf=1;var e=mf().default;Object.defineProperty(pf,"__esModule",{value:!0}),pf.default=void 0;var t=e((bf||(bf=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.default=void 0,yf.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}),yf)),n=e(Df()),r=e(If()),i=e(Rf());const o="${label} is not a valid ${type}",a={locale:"en",Pagination:t.default,DatePicker:r.default,TimePicker:i.default,Calendar:n.default,global:{placeholder:"Please select",close:"Close",sortable:"sortable"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:o,method:o,array:o,object:o,number:o,date:o,boolean:o,integer:o,float:o,regexp:o,email:o,url:o,hex:o},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};return pf.default=a,pf}function zf(){return Af?Nf:(Af=1,Nf=Lf())}const Wf=O(zf()),Of={locale:"en",Conversations:{create:"New chat"},Sender:{stopLoading:"Stop loading",speechRecording:"Speech recording"},Actions:{feedbackLike:"Like",feedbackDislike:"Dislike",audio:"Play audio",audioRunning:"Audio playing",audioError:"Playback error",audioLoading:"Loading audio"},Bubble:{editableOk:"OK",editableCancel:"Cancel"},Mermaid:{zoomIn:"Zoom in",zoomOut:"Zoom out",zoomReset:"Reset",download:"Download",code:"Code",image:"Image"}},Bf=(e,t)=>{const n=i.useContext(hf);return[i.useMemo(()=>{const r=t||Of?.[e]||Wf?.[e],i=n?.[e]??{};return{..."function"==typeof r?r():r,...i||{}}},[e,t,n]),i.useMemo(()=>{const e=n?.locale;return n?.exist&&!e?Of.locale:e},[n])]};function Ff(){const{getPrefixCls:e,direction:t,csp:n,iconPrefixCls:r,theme:i}=o.useContext(N.ConfigContext);return{theme:i,getPrefixCls:e,direction:t,csp:n,iconPrefixCls:r}}const jf=140,Hf=250;function Gf({className:e}){const[t]=Bf("Sender",Of.Sender);return o.createElement("svg",{color:"currentColor",viewBox:"0 0 1000 1000",xmlns:"http://www.w3.org/2000/svg",className:e},o.createElement("title",null,t.speechRecording),Array.from({length:4}).map((e,t)=>{const n=t*(440/3+jf);return o.createElement("rect",{fill:"currentColor",rx:70,ry:70,height:Hf,width:jf,x:n,y:375,key:t},o.createElement("animate",{attributeName:"height",values:"250; 500; 250",keyTimes:"0; 0.5; 1",dur:"0.8s",begin:.2*t+"s",repeatCount:"indefinite"}),o.createElement("animate",{attributeName:"y",values:"375; 250; 375",keyTimes:"0; 0.5; 1",dur:"0.8s",begin:.2*t+"s",repeatCount:"indefinite"}))}))}const Uf=e=>({animationDuration:e,animationFillMode:"both"}),qf=e=>({animationDuration:e,animationFillMode:"both"}),Xf=(e,t,n,r,i=!1)=>{const o=i?"&":"";return{[`\n      ${o}${e}-enter,\n      ${o}${e}-appear\n    `]:{...Uf(r),animationPlayState:"paused"},[`${o}${e}-leave`]:{...qf(r),animationPlayState:"paused"},[`\n      ${o}${e}-enter${e}-enter-active,\n      ${o}${e}-appear${e}-appear-active\n    `]:{animationName:t,animationPlayState:"running"},[`${o}${e}-leave${e}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},Vf=new he("antXFadeInLeft",{"0%":{maskPosition:"100% 0"},"100%":{maskPosition:"0% 0%"}}),Yf=new he("antXFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),Kf=new he("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),Qf=(e,t=!1)=>{const{antCls:n}=e,r=`${n}-x-fade-left`,i=t?"&":"";return[{[e.componentCls]:{...Xf(r,Vf,Kf,"1s",t),[`${i}${r}-enter,${i}${r}-appear`]:{transitionProperty:"mask-position",animationTimingFunction:"linear",maskImage:`linear-gradient(90deg, ${e.colorTextBase} 33%, ${new $(e.colorTextBase).setA(0)} 66%)`,maskSize:"300% 100%",maskPosition:"100% 0%"},[`${i}${r}-leave`]:{animationTimingFunction:"linear"}}}]},Jf=(e,t=!1)=>{const{antCls:n}=e,r=`${n}-x-fade`,i=t?"&":"";return[{[e.componentCls]:{...Xf(r,Yf,Kf,"1.2s",t),[`${i}${r}-enter,${i}${r}-appear`]:{opacity:0},[`${i}${r}-leave`]:{animationTimingFunction:"linear"}}}]},Zf=q(j.defaultAlgorithm),ep={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},tp=(e,t,n)=>{const r=n.getDerivativeToken(e),{override:i,...o}=t;let a={...r,override:i};return a=X(a),o&&Object.entries(o).forEach(([e,t])=>{const{theme:n,...r}=t;let i=r;n&&(i=tp({...a,...r},{override:r},n)),a[e]=i}),a};function np(){const{token:e,hashed:t,theme:n,override:r,cssVar:i}=o.useContext(j._internalContext),a={prefix:i?.prefix||"ant",key:i?.key||"css-var-root"},s=n||Zf,[l,c,u]=H(s,[j.defaultSeed,e],{salt:`2.1.2-${t||""}`,override:r,getComputedToken:tp,cssVar:{...a,unitless:U,ignore:G,preserve:ep}});return[s,u,t?c:"",l,a]}const{genStyleHooks:rp}=Be({usePrefix:()=>{const{getPrefixCls:e,iconPrefixCls:t}=Ff();return{iconPrefixCls:t,rootPrefixCls:e()}},useToken:()=>{const[e,t,n,r,i]=np();return{theme:e,realToken:t,hashId:n,token:r,cssVar:i}},useCSP:()=>{const{csp:e}=Ff();return e??{}},layer:{name:"antdx",dependencies:["antd"]}}),ip=e=>{const{componentCls:t}=e,n=`${t}-audio`;return{[n]:{[`&${n}-rtl`]:{direction:"rtl"},[`${n}-recording-icon`]:{width:e.fontSize,height:e.fontSize}}}},op=e=>{const{componentCls:t}=e,n=`${t}-copy`;return{[t]:{[`&${n}-rtl`]:{direction:"rtl"},[`${n}-copy`]:{fontSize:"inherit",[`&:not(${t}-copy-success)`]:{color:"inherit!important"}}}}},ap=e=>{const{componentCls:t}=e,n=`${t}-feedback`;return{[t]:{[`&${n}-rtl`]:{direction:"rtl"}}}},sp=e=>{const{componentCls:t,antCls:n,calc:r}=e;return{[t]:{[`&${t}-rtl`]:{direction:"rtl"},[`${n}-pagination-item-link`]:{width:e.controlHeightSM},[`${t}-variant-outlined`]:{paddingInline:l(r(e.paddingXXS).add(1).equal()),paddingBlock:e.paddingXXS,borderRadius:e.borderRadius,border:`${l(e.lineWidth)} ${e.lineType}, ${e.colorBorderSecondary}`},[`${t}-variant-filled`]:{paddingInline:l(r(e.paddingXXS).add(1).equal()),paddingBlock:e.paddingXXS,borderRadius:e.borderRadius,backgroundColor:e.colorBorderSecondary,[`${t}-item`]:{paddingInline:l(r(e.paddingXXS).add(1).equal()),paddingBlock:e.paddingXXS,"&:hover":{color:e.colorTextSecondary,background:"transparent"}}},[`${t}-list-danger`]:{color:e.colorError},[`&${t}-item,${t}-item`]:{cursor:"pointer",fontSize:e.fontSize,paddingInline:l(r(e.paddingXXS).add(1).equal()),paddingBlock:e.paddingXXS,borderRadius:e.borderRadiusSM,height:e.controlHeightSM,boxSizing:"border-box",display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:e.lineHeight,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,[`${t}-icon`]:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:e.fontSize},"&:hover":{background:e.colorBgTextHover}},[`&${t}-list,${t}-list`]:{display:"inline-flex",flexDirection:"row",alignItems:"center",color:e.colorText,gap:e.paddingXS}}}},lp=rp("Actions",e=>{const t=ue(e,{});return[sp(t),op(t),ap(t),ip(t),Qf(t),Jf(t)]},()=>({}));let cp=function(e){return e.LOADING="loading",e.ERROR="error",e.RUNNING="running",e.DEFAULT="default",e}({});const up=e=>{const{status:t="default",defaultIcon:n,runningIcon:r,label:i,className:s,classNames:l={},styles:c={},style:u,prefixCls:d,rootClassName:h,...f}=e,p=Zh(f,{attr:!0,aria:!0,data:!0}),{direction:g,getPrefixCls:m}=Ff(),b=m("actions",d),[y,v]=lp(b),x=`${b}-button-item`,S=a(x,y,v,h,s,l.root,b,`${b}-item`,{[`${x}-rtl`]:"rtl"===g,[`${l[t]}`]:l[t]}),w={[cp.LOADING]:o.createElement(ft,null),[cp.ERROR]:o.createElement(Xr,null),[cp.RUNNING]:r,[cp.DEFAULT]:n},C=t&&w[t]?w[t]:n;return o.createElement(xe,{title:i},o.createElement("div",Ze({},p,{className:S,style:{...u,...c.root,...c?.[t]}}),C))},{Text:dp}=pt;var hp=function(e){return e.like="like",e.dislike="dislike",e.default="default",e}(hp||{});const fp=o.createContext(null),pp=(e,t)=>{const n=e[0];for(const r of t){if(!r)return null;if(r.key===n){if(1===e.length)return r;if(r.subItems)return pp(e.slice(1),r?.subItems)}}return null},gp=e=>{const{onClick:t,item:n,dropdownProps:r={}}=e,{prefixCls:i,classNames:s={},styles:l={}}=o.useContext(fp)||{},{subItems:c=[],triggerSubMenuAction:u="hover"}=n,d=n?.icon??o.createElement(mt,null),h={items:c,onClick:({key:e,keyPath:r,domEvent:i})=>{pp(r,c)?.onItemClick?pp(r,c)?.onItemClick?.(pp(r,c)):t?.({key:e,keyPath:[...r,n?.key||""],domEvent:i,item:pp(r,c)})}};return o.createElement(bt,Ze({menu:h,trigger:[u]},r,{className:a(`${i}-dropdown`,s.itemDropdown,r?.className),styles:{root:l.itemDropdown,...r?.styles}}),o.createElement("div",{className:a(`${i}-item`,`${i}-sub-item`,s?.item),style:l?.item},o.createElement("div",{className:`${i}-icon`},d)))},mp=e=>{const{item:t,onClick:n,dropdownProps:r={}}=e,{prefixCls:i,classNames:s={},styles:l={}}=o.useContext(fp)||{},c=o.useId(),u=t?.key||c;return t?t.actionRender?"function"==typeof t.actionRender?t.actionRender(t):t.actionRender:t.subItems?o.createElement(gp,{key:u,item:t,onClick:n,dropdownProps:r}):o.createElement("div",{className:a(`${i}-item`,s.item,{[`${i}-list-danger`]:t?.danger}),style:l.item,onClick:e=>{t?.onItemClick?t.onItemClick(t):n?.({key:u,item:t,keyPath:[u],domEvent:e})},key:u},o.createElement(xe,{title:t.label},o.createElement("div",{className:`${i}-icon`},t?.icon))):null},bp=o.forwardRef((e,t)=>{const{items:n=[],onClick:r,dropdownProps:i={},fadeIn:s,fadeInLeft:l,variant:c="borderless",prefixCls:u,classNames:d={},rootClassName:h="",className:f="",styles:p={},style:g={},...m}=e,b=Zh(m,{attr:!0,aria:!0,data:!0}),{getPrefixCls:y,direction:v}=Ff(),S=y("actions",u),w=df("actions"),[C,k]=lp(S),_=y(),E=s||l?`${_}-x-fade${l?"-left":""}`:"",P=a(S,w.className,w.classNames.root,h,f,d.root,k,C,{[`${S}-rtl`]:"rtl"===v}),$={...w.style,...p.root,...g},M=o.useRef(null);return lf(t,()=>({nativeElement:M.current})),o.createElement(x,{motionName:E},({className:e},t)=>o.createElement("div",Ze({ref:sf.composeRef(M,t)},b,{className:P,style:$}),o.createElement(fp.Provider,{value:{prefixCls:S,classNames:{item:a(w.classNames.item,d.item),itemDropdown:a(w.classNames.itemDropdown,d.itemDropdown)},styles:{item:{...w.styles.item,...p.item},itemDropdown:{...w.styles.itemDropdown,...p.itemDropdown}}}},o.createElement("div",{className:a(`${S}-list`,`${S}-variant-${c}`,e)},n.map((e,t)=>o.createElement(mp,{item:e,onClick:r,dropdownProps:i,key:e.key||t}))))))});bp.Feedback=e=>{const{value:t="default",onChange:n,className:r,style:i,classNames:s={},styles:l={},prefixCls:c,rootClassName:u,...d}=e,h=Zh(d,{attr:!0,aria:!0,data:!0}),[f]=Bf("Actions",Of.Actions),{direction:p,getPrefixCls:g}=Ff(),m=g("actions",c),[b,y]=lp(m),v=`${m}-feedback`,x=a(m,v,b,y,u,s.root,`${m}-list`,r,{[`${v}-rtl`]:"rtl"===p});return o.createElement("div",Ze({},h,{className:x,style:{...i,...l.root}}),[hp.default,hp.like].includes(t)&&o.createElement(xe,{key:`like_${t}`,title:f.feedbackLike},o.createElement("span",{onClick:()=>n?.(t===hp.like?hp.default:hp.like),style:{...l.like,..."like"===t?l.liked:{}},className:a(`${v}-item`,`${m}-item`,`${v}-item-like`,s.like,{[`${s.liked}`]:s.liked&&"like"===t,[`${v}-item-like-active`]:"like"===t})},t===hp.like?o.createElement(bi,null):o.createElement(Si,null))),[hp.default,hp.dislike].includes(t)&&o.createElement(xe,{key:`dislike_${t}`,title:f.feedbackDislike},o.createElement("span",{onClick:()=>n?.(t===hp.dislike?hp.default:hp.dislike),style:{...l.dislike,..."dislike"===t?l.disliked:{}},className:a(`${v}-item`,`${m}-item`,`${v}-item-dislike`,s.dislike,{[`${s.disliked}`]:s.disliked&&"dislike"===t,[`${v}-item-dislike-active`]:"dislike"===t})},t===hp.dislike?o.createElement(ti,null):o.createElement(oi,null))))},bp.Copy=e=>{const{text:t="",icon:n,className:r,style:i,prefixCls:s,rootClassName:l,classNames:c={},styles:u={},...d}=e,h=Zh(d,{attr:!0,aria:!0,data:!0}),{direction:f,getPrefixCls:p}=Ff(),g=p("actions",s),[m,b]=lp(g),y=`${g}-copy`,v=a(g,`${g}-item`,m,b,l,r,c.root,{[`${y}-rtl`]:"rtl"===f});return o.createElement(dp,Ze({},h,{className:v,style:{...i,...u.root},prefixCls:y,copyable:{text:t,icon:n}}))},bp.Item=up,bp.Audio=e=>{const{status:t=cp.DEFAULT,className:n,style:r,prefixCls:i,rootClassName:s,classNames:l={},styles:c={},...u}=e,{direction:d,getPrefixCls:h}=Ff(),f=h("actions",i),[p,g]=lp(f),m=`${f}-audio`,b=a(f,m,p,g,s,n,l.root,{[`${m}-rtl`]:"rtl"===d,[`${m}-${t}`]:t}),[y]=Bf("Actions",Of.Actions),v={[cp.LOADING]:y.audioLoading,[cp.ERROR]:y.audioError,[cp.RUNNING]:y.audioRunning,[cp.DEFAULT]:y.audio};return o.createElement(up,Ze({label:t?v[t]:"",style:r,styles:c,classNames:{...l,root:b},status:t,defaultIcon:o.createElement(Ri,null),runningIcon:o.createElement(Gf,{className:`${m}-recording-icon`})},u))};const yp=o.createContext({});function vp(e){const t=getComputedStyle(e).display;return"block"===t||"flex"===t||"list-item"===t||"table"===t}const xp=({content:e,prefixCls:n,okText:r,cancelText:i,onEditConfirm:a,onEditCancel:s})=>{const l=o.useRef(null),[c]=Bf("Bubble",Of.Bubble),u=t(()=>{a?.(function(e){const t=[""],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);for(;n.nextNode();){const e=n.currentNode;e.nodeType!==Node.TEXT_NODE?"BR"===e.tagName&&1===e.parentNode?.childElementCount||("BR"===e.tagName||vp(e))&&t.push(""):t[t.length-1]+=e.textContent}return t.join("\n")}(l.current))}),d=t(()=>s?.());if(o.useEffect(()=>{l.current.textContent=e,l.current.focus();const t=window.getSelection(),n=document.createRange();n.selectNodeContents(l.current),n.collapse(!1),t.removeAllRanges(),t.addRange(n)},[]),"string"!=typeof e)throw new Error("Content of editable Bubble should be string");const h=o.useMemo(()=>o.createElement("div",{ref:l,contentEditable:!0}),[]);return o.createElement(o.Fragment,null,h,o.createElement(Ga,{rootClassName:`${n}-editing-opts`,gap:8},o.createElement(Xe,{type:"primary",shape:"round",size:"small",onClick:u},r||c.editableOk),o.createElement(Xe,{type:"text",shape:"round",size:"small",onClick:d},i||c.editableCancel)))},Sp=({prefixCls:e})=>o.createElement("span",{className:`${e}-dot`},o.createElement("i",{className:`${e}-dot-item`,key:"item-1"}),o.createElement("i",{className:`${e}-dot-item`,key:"item-2"}),o.createElement("i",{className:`${e}-dot-item`,key:"item-3"})),wp=new he("loadingMove",{"0%":{transform:"translateY(0)"},"10%":{transform:"translateY(4px)"},"20%":{transform:"translateY(0)"},"30%":{transform:"translateY(-4px)"},"40%":{transform:"translateY(0)"}}),Cp=new he("cursorBlink",{"0%":{opacity:1},"50%":{opacity:0},"100%":{opacity:1}}),kp=new he("fadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),_p=e=>{const{componentCls:t,fontSize:n,typingContent:r,typingAnimationDuration:i,typingAnimationName:o,lineHeight:a,paddingSM:s,colorText:c,calc:u}=e;return[{[t]:{display:"flex",columnGap:s,[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-loading`]:{alignItems:"center"},[`${t}-body`]:{display:"flex",flexDirection:"column",maxWidth:"100%"},[`${t}-content`]:{position:"relative",boxSizing:"border-box",minWidth:0,maxWidth:"100%",minHeight:u(s).mul(2).add(u(a).mul(n)).equal(),paddingInline:`${l(e.padding)}`,paddingBlock:`${l(s)}`,color:c,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word","&-string":{whiteSpace:"pre-wrap"}},[`${t}-typing:last-child::after`]:{content:r,fontWeight:900,userSelect:"none",opacity:1,marginInlineStart:"0.1em",animationName:o,animationDuration:l(i),animationIterationCount:"infinite",animationTimingFunction:"linear"},[`${t}-fade-in .fade-in`]:{display:"inline",animationName:kp,animationDuration:"1s",animationTimingFunction:"linear"},[`${t}-dot`]:{position:"relative",height:e.controlHeight,display:"flex",alignItems:"center",columnGap:e.marginXS,padding:`0 ${l(e.paddingXXS)}`,alignSelf:"center","&-item":{backgroundColor:e.colorPrimary,borderRadius:"100%",width:4,height:4,animationName:wp,animationDuration:"2s",animationIterationCount:"infinite",animationTimingFunction:"linear","&:nth-child(1)":{animationDelay:"0s"},"&:nth-child(2)":{animationDelay:"0.2s"},"&:nth-child(3)":{animationDelay:"0.4s"}}},[`&${t}-start`]:{flexDirection:"row",[`& ${t}-header`]:{flexDirection:"row"}},[`&${t}-end`]:{flexDirection:"row-reverse",justifySelf:"flex-end",[`& ${t}-header`]:{flexDirection:"row-reverse"},[`& ${t}-editing-opts`]:{flexDirection:"row-reverse"}}}},Cp]},Ep=e=>{const{componentCls:t}=e;return{[t]:{[`${t}-content`]:{"&-filled":{backgroundColor:e.colorFillContent},"&-outlined":{border:`1px solid ${e.colorBorderSecondary}`},"&-shadow":{boxShadow:e.boxShadowTertiary},"&-borderless":{backgroundColor:"transparent",padding:0,minHeight:0}}}}},Pp=e=>{const{componentCls:t,fontSize:n,lineHeight:r,paddingSM:i,borderRadius:o,calc:a}=e,s=a(n).mul(r).div(2).add(i).equal(),l=a(o).mul(2).equal(),c=`${t}-content`;return{[t]:{[c]:{"&-default":{borderRadius:{_skip_check_:!0,value:l}},"&-round":{borderRadius:{_skip_check_:!0,value:s}},"&-corner":{borderRadius:{_skip_check_:!0,value:l}},"&-editing":{"div:first-child":{outline:"none"},[`${t}-editing-opts`]:{marginBlockStart:e.marginSM,"button:last-child":{backgroundColor:e.colorBgContainer,"&:hover":{backgroundColor:e.colorBgLayout}}}}},[`&${t}-start ${t}-content-corner`]:{borderStartStartRadius:e.borderRadiusXS},[`&${t}-end ${t}-content-corner`]:{borderStartEndRadius:e.borderRadiusXS}}}},$p=e=>{const{componentCls:t}=e;return{[t]:{"&-divider":{width:"100%",justifyContent:"center",[`& ${t}-body`]:{width:"100%"}}}}},Mp=e=>{const{componentCls:t,padding:n}=e;return{[`${t}-list`]:{gap:n,maxHeight:"100%",width:"100%",boxSizing:"border-box",[`& ${t}`]:{width:"100%",boxSizing:"border-box",paddingBlock:e.padding},[`& ${t}-start:not(${t}-divider):not(${t}-system)`]:{paddingInlineEnd:"15%"},[`& ${t}-end:not(${t}-divider):not(${t}-system)`]:{paddingInlineStart:"15%"},[`${t}-list-scroll-box`]:{overflowY:"auto",display:"flex",alignItems:"center",width:"100%",scrollbarWidth:"thin",maxHeight:"100%",flexDirection:"column",boxSizing:"border-box",paddingInline:e.paddingXS,scrollbarColor:`${e.colorTextTertiary} transparent`,"&::-webkit-scrollbar":{width:8,backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:e.colorTextTertiary,borderRadius:e.borderRadiusSM}},[`${t}-list-autoscroll`]:{flexDirection:"column-reverse"}}}},Np=e=>{const{componentCls:t,fontSize:n,lineHeight:r,paddingXXS:i,margin:o,colorText:a,fontSizeLG:s,calc:l}=e;return{[t]:{[`${t}-header`]:{display:"flex",marginBottom:i,fontSize:n,lineHeight:r,color:a},[`${t}-footer`]:{display:"flex",marginBlockStart:o,fontSize:n,lineHeight:r,color:a,"&-start":{flexDirection:"row"},"&-end":{flexDirection:"row-reverse"}},[`${t}-avatar`]:{minWidth:l(s).mul(2).equal()}}}},Ap=e=>{const{componentCls:t,paddingSM:n,paddingXS:r,lineHeight:i,fontSize:o,fontSizeSM:a,calc:s}=e;return{[t]:{[`&${t}-system`]:{width:"100%",justifyContent:"center",[`${t}-content`]:{display:"flex",gap:`${l(a)}`,alignItems:"center",minHeight:s(r).mul(2).add(s(i).mul(o)).equal(),fontSize:`${l(o)}`,paddingInline:`${l(n)}`,paddingBlock:`${l(r)}`},[`${t}-system-content`]:{},[`${t}-system-extra`]:{}}}}},Tp=rp("Bubble",e=>{const t=ue(e,{});return[_p(t),Ep(t),Pp(t),Np(t),Mp(t),Ap(t),$p(t)]},()=>({typingContent:'"|"',typingAnimationName:"cursorBlink",typingAnimationDuration:"0.8s"}));const Rp=({prefixCls:e,streaming:t,content:n,typing:r,onTyping:i,onTypingComplete:s})=>{const{renderedData:l,animating:c,memoedAnimationCfg:u}=function({streaming:e,content:t,typing:n,onTyping:r,onTypingComplete:i}){const[a,s]=o.useState([]),l=o.useRef(!1),c=o.useRef(""),u=o.useRef(1),d=o.useRef(-1),h=o.useRef(e);h.current=e;const f=o.useMemo(()=>{const e={effect:"fade-in",interval:100,step:6,keepPrefix:!0};if(!0===n)return e;const{step:t=6,interval:r=100}=n,i=e=>"number"==typeof e;if(!i(r)||r<=0)throw"[Bubble] invalid prop typing.interval, expect positive number.";if(!i(t)&&!Array.isArray(t))throw"[Bubble] invalid prop typing.step, expect positive number or positive number array";if(i(t)&&t<=0)throw"[Bubble] invalid prop typing.step, expect positive number";if(Array.isArray(t)){if(!i(t[0])||t[0]<=0)throw"[Bubble] invalid prop typing.step[0], expect positive number";if(!i(t[1])||t[1]<=0)throw"[Bubble] invalid prop typing.step[1], expect positive number";if(t[0]>t[1])throw"[Bubble] invalid prop typing.step, step[0] should less than step[1]"}return{...e,...n}},[n]),p=o.useRef({content:t,interval:f.interval,step:f.step});p.current={content:t,interval:f.interval,step:f.step};const g=()=>Math.random().toString().slice(2),m=o.useCallback(e=>{let t=0;var n;c.current=f.keepPrefix&&(n=[p.current.content,c.current])&&0!==n.length?n.reduce((e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;return e.slice(0,n)}):"",s(c.current?[{text:c.current,id:g(),taskId:e,done:!0}]:[]);const o=()=>{if(e!==u.current)return;const n=performance.now(),{content:a,interval:f,step:m}=p.current;if(n-t<f)return void(d.current=requestAnimationFrame(o));const b=c.current.length,y="number"==typeof m?m:Math.floor(Math.random()*(m[1]-m[0]))+m[0],v=a.slice(b,b+y);if(!v)return h.current?void(d.current=requestAnimationFrame(o)):(s(t=>[{text:t.map(({text:e})=>e).join(""),id:g(),taskId:e,done:!0}]),i?.(a),l.current=!1,void u.current++);c.current+=v;const x={id:g(),text:v,taskId:e,done:!1};s(e=>e.concat(x)),l.current||(l.current=!0),t=n,d.current=requestAnimationFrame(o),r?.(c.current,a)};o()},[f.keepPrefix,r,i]),b=o.useCallback(()=>{cancelAnimationFrame(d.current),s([]),c.current="",l.current=!1},[]);return v(()=>{if(!t)return b();t!==c.current&&(l.current&&!t.startsWith(c.current)?(cancelAnimationFrame(d.current),l.current=!1,requestAnimationFrame(()=>m(++u.current))):!1===l.current&&m(u.current))},[t,m]),{renderedData:a,animating:l.current,memoedAnimationCfg:f}}({streaming:t,content:n,typing:r,onTyping:i,onTypingComplete:s}),{effect:d}=u,h=l.map(e=>"fade-in"!==d||e.done?e.text:o.createElement("span",{key:e.id,className:"fade-in"},e.text)),f=!0!==r&&"typing"===d;return o.createElement("div",{className:a({[`${e}-typing`]:f&&c,[`${e}-fade-in`]:!f})},h)},Ip=({prefixCls:e,rootClassName:t,style:n,className:r,styles:i={},classNames:s={},placement:l="start",content:c,contentRender:u,editable:d=!1,typing:h,streaming:f=!1,variant:p="filled",shape:g="default",header:m,footer:b,avatar:y,extra:v,footerPlacement:x,loading:S,loadingRender:w,onTyping:C,onTypingComplete:k,onEditConfirm:_,onEditCancel:E,...P},$)=>{const M=o.useRef(null);o.useImperativeHandle($,()=>({nativeElement:M.current}));const N=df("bubble"),{direction:A,getPrefixCls:T}=Ff(),R=T("bubble",e),I=o.useContext(yp),[D,L]=Tp(R),z={...N.style,...N.styles.root,...i.root,...n},W=a(R,N.className,N.classNames.root,s.root,t,r,D,L,`${R}-${l}`,{[`${R}-${I.status}`]:I.status,[`${R}-rtl`]:"rtl"===A,[`${R}-loading`]:S}),O=Zh(P,{attr:!0,aria:!0,data:!0}),B={key:I?.key,status:I?.status,extraInfo:I?.extraInfo},F=o.useMemo(()=>u?u(c,B):c,[c,u,B.key,B.status,B.extraInfo]),j="function"==typeof h?h(c,B):h,H=!!j&&"string"==typeof F;o.useEffect(()=>{H||f||c&&k?.(c)},[F,H,f]);const G=x||("start"===l?"outer-start":"outer-end"),U="boolean"==typeof d?d:d.editing,q=e=>a(`${R}-${e}`,N.classNames[e],s[e]),X=e=>({...N.styles[e],...i[e]}),V=e=>"function"==typeof e?e(c,B):e,Y=()=>m?o.createElement("div",{className:q("header"),style:X("header")},V(m)):null,K=()=>{if(!b)return null;const e=a(q("footer"),{[`${R}-footer-start`]:G.includes("start"),[`${R}-footer-end`]:G.includes("end")});return o.createElement("div",{className:e,style:X("footer")},V(b))};return o.createElement("div",Ze({className:W,style:z},P,O,{ref:M}),y?o.createElement("div",{className:q("avatar"),style:X("avatar")},V(y)):null,(()=>{if(S)return w?w():o.createElement(Sp,{prefixCls:R});const e=o.createElement(o.Fragment,null,H?o.createElement(Rp,{prefixCls:R,streaming:f,typing:j,content:F,onTyping:C,onTypingComplete:k}):F),t=G.includes("inner");return o.createElement("div",{className:q("body"),style:X("body")},Y(),o.createElement("div",{style:{...N.styles.content,...i.content},className:a(`${R}-content`,`${R}-content-${p}`,N.classNames.content,s.content,{[`${R}-content-${I?.status}`]:I?.status,[`${R}-content-${g}`]:"borderless"!==p,[`${R}-content-editing`]:U,[`${R}-content-string`]:"string"==typeof F})},U?o.createElement(xp,{prefixCls:R,content:c,okText:d?.okText,cancelText:d?.cancelText,onEditConfirm:_,onEditCancel:E}):o.createElement(o.Fragment,null,t?o.createElement("div",{className:a(`${R}-content-with-footer`)},e):e,t&&K())),!U&&!t&&K())})(),!U&&!S&&(v?o.createElement("div",{className:q("extra"),style:X("extra")},V(v)):null))},Dp=o.forwardRef(Ip),Lp=({prefixCls:e,content:t="",rootClassName:n,style:r,className:i,styles:s={},classNames:l={},dividerProps:c,...u},d)=>{const{getPrefixCls:h}=Ff(),f=df("bubble"),p=h("bubble",e),[g,m]=Tp(p),b=a(g,m,p,`${p}-divider`,f.className,f.classNames.root,i,l.root,n);return o.createElement(Dp,Ze({ref:d,style:r,styles:s,className:b,classNames:l,prefixCls:p,variant:"borderless",content:t,contentRender:e=>o.createElement(at,c,e)},u))},zp=o.forwardRef(Lp);function Wp(e){return"column-reverse"===getComputedStyle(e).flexDirection}const Op=({prefixCls:e,content:t,variant:n="shadow",shape:r,style:i,className:s,styles:l={},classNames:c={},rootClassName:u,...d},h)=>{const f=df("bubble"),{getPrefixCls:p}=Ff(),g=p("bubble",e),[m,b]=Tp(g),y=a(m,b,`${g}-system`,g,f.className,f.classNames.root,c.root,s,u);return o.createElement(Dp,Ze({ref:h,style:i,className:y,styles:l,classNames:c,variant:n,shape:r,content:t},d))},Bp=o.forwardRef(Op);const Fp=i.memo(Dp),jp=i.memo(zp),Hp=i.memo(Bp),Gp=e=>{const{_key:t,bubblesRef:n,extraInfo:r,status:o,role:a,classNames:s={},styles:l={},...c}=e,u=i.useCallback(e=>{e?n.current[t]=e:delete n.current[t]},[t]),{bubble:d,divider:h,system:f,...p}=s,{bubble:g,divider:m,system:b,...y}=l;let v=i.createElement(Fp,Ze({ref:u,style:g,className:d,classNames:p,styles:y},c));return"divider"===a?v=i.createElement(jp,Ze({ref:u,style:m,className:h,classNames:p,styles:y},c)):"system"===a&&(v=i.createElement(Hp,Ze({ref:u,style:b,className:f,classNames:p,styles:y},c))),i.createElement(yp.Provider,{value:{key:t,status:o,extraInfo:r}},v)},Up=(e,t)=>{const{prefixCls:n,rootClassName:r,className:o,styles:s={},classNames:l={},style:c,items:u,autoScroll:d=!0,role:h,onScroll:f,...p}=e,g=ot(p,{attr:!0,aria:!0}),m=i.useRef(null),b=i.useRef({}),[y,v]=i.useState(),{scrollTo:x}=function(e){const t=i.useRef(null),n=i.useRef(!0),r=i.useRef(!1),o=i.useRef(0),a=i.useRef(void 0),s=i.useRef(!1),l=i.useRef(!1);i.useLayoutEffect(()=>{if(!e)return;if(!t.current){const n=document.createElement("div");n.style.bottom="0",n.style.flexShrink="0",n.style.pointerEvents="none",n.style.height="10px",n.style.visibility="hidden",e.insertBefore(n,e.firstChild),t.current=n}const i=new IntersectionObserver(([e])=>{n.current=e.isIntersecting,r.current=!e.isIntersecting},{root:e,threshold:0});i.observe(t.current);const o=new MutationObserver(()=>{e&&(a.current?l.current&&requestAnimationFrame(()=>e.scrollTo({top:Wp(e)?0:e.scrollHeight,behavior:"instant"})):Wp(e)&&r.current&&d())});return o.observe(e,{childList:!0,subtree:!0,attributes:!1}),()=>{i.disconnect(),o.disconnect(),clearTimeout(a.current),t.current?.parentNode&&(t.current.parentNode.removeChild(t.current),t.current=null)}},[e]);const c=i.useCallback(()=>{a.current=setTimeout(()=>{clearTimeout(a.current),a.current=void 0,l.current=!1},50)},[]),u=i.useCallback(e=>{const t=e.target;if(!Wp(t))return;const{scrollTop:n,scrollHeight:r}=t;o.current=r+n,s.current?s.current=!1:(a.current&&clearTimeout(a.current),c())},[e]);i.useLayoutEffect(()=>{if(e)return e.addEventListener("scroll",u,{capture:!0}),()=>e?.removeEventListener("scroll",u,{capture:!0})},[e,u]);const d=i.useCallback(()=>{const t=o.current-e.scrollHeight;e.scrollTop=t,s.current=!0},[e]);return{reset:i.useCallback(()=>{n.current=!0,r.current=!1,o.current=e?.scrollHeight||0},[e]),scrollTo:i.useCallback(t=>{if(!e)return;const{top:n,intoView:r,intoViewDom:i}=t||{};i?i.scrollIntoView(r):e.scrollTo(t),Wp(e)?l.current=void 0!==n&&n>=-10||!(!i||"end"!==r?.block)&&e.childNodes[1]===i:void 0!==n&&n>=e.scrollHeight-e.clientHeight-10?l.current=!0:l.current=!(!i||"end"!==r?.block)&&e.lastElementChild===i,a.current||c()},[e])}}(y),{getPrefixCls:S}=Ff(),w=S("bubble",n),C=`${w}-list`,[k,_]=Tp(w),E=a(C,r,o,l.root,k,_),P={...s.root,...c};lf(t,()=>({nativeElement:m.current,scrollBoxNativeElement:y,scrollTo:({key:e,top:t,behavior:n="smooth",block:r})=>{const{scrollHeight:i,clientHeight:o}=y;if("number"==typeof t)x({top:d?-i+o+t:t,behavior:n});else if("bottom"===t){x({top:d?0:i,behavior:n})}else if("top"===t){x({top:d?-i:0,behavior:n})}else e&&b.current[e]&&x({intoView:{behavior:n,block:r},intoViewDom:b.current[e].nativeElement})}}));const $=d?[...u].reverse():u;return i.createElement("div",Ze({},g,{className:E,style:P,ref:m}),i.createElement("div",{className:a(`${C}-scroll-box`,l.scroll,{[`${C}-autoscroll`]:d}),style:s.scroll,ref:e=>v(e),onScroll:f},$.map(e=>{let t;if(e.role&&h){const r=h[e.role];t={...(n=r,"function"==typeof n&&n instanceof Function?r(e):r),...e}}else t=e;var n;return i.createElement(Gp,Ze({classNames:l,styles:s},ve(t,["key"]),{key:e.key,_key:e.key,bubblesRef:b}))})))},qp=i.forwardRef(Up);Dp.List=qp,Dp.System=Bp,Dp.Divider=zp;var Xp,Vp={},Yp={};var Kp,Qp,Jp={},Zp={};function eg(){if(Qp)return Jp;Qp=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.useLayoutUpdateEffect=Jp.default=void 0;var e,t=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(B());function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}const r=(0,(Kp||(Kp=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.default=function(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}),(e=Zp)&&e.__esModule?e:{default:e}).default)()?t.useLayoutEffect:t.useEffect,i=(e,n)=>{const i=t.useRef(!0);r(()=>e(i.current),n),r(()=>(i.current=!1,()=>{i.current=!0}),[])};return Jp.useLayoutUpdateEffect=(e,t)=>{i(t=>{if(!t)return e()},t)},Jp.default=i,Jp}var tg,ng,rg={};var ig=function(){if(ng)return Vp;ng=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.default=function(r,o){const{defaultValue:a,value:s,onChange:l,postState:c}=o||{},[u,d]=(0,n.default)(()=>i(s)?s:i(a)?"function"==typeof a?a():a:"function"==typeof r?r():r),h=void 0!==s?s:u,f=c?c(h):h,p=(0,e.default)(l),[g,m]=(0,n.default)([h]);(0,t.useLayoutUpdateEffect)(()=>{const e=g[0];u!==e&&p(u,e)},[g]),(0,t.useLayoutUpdateEffect)(()=>{i(s)||d(s)},[s]);const b=(0,e.default)((e,t)=>{d(e,t),m([h],t)});return[f,b]};var e=r(function(){if(Xp)return Yp;Xp=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.default=void 0;var e=function(e,n){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(n);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(B());function t(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:n})(e)}return Yp.default=function(t){const n=e.useRef(t);return n.current=t,e.useCallback((...e)=>n.current?.(...e),[])},Yp}()),t=eg(),n=r(function(){if(tg)return rg;tg=1,Object.defineProperty(rg,"__esModule",{value:!0}),rg.default=function(t){const n=e.useRef(!1),[r,i]=e.useState(t);return e.useEffect(()=>(n.current=!1,()=>{n.current=!0}),[]),[r,function(e,t){t&&n.current||i(e)}]};var e=function(e,n){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(n);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(B());function t(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:n})(e)}return rg}());function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return void 0!==e}return Vp}();const og=O(ig),ag=e=>{const{componentCls:t}=e;return{[t]:{"&, & *":{boxSizing:"border-box"},maxWidth:"100%",[`&${t}-rtl`]:{direction:"rtl"},[`& ${t}-title`]:{marginBlockStart:0,fontWeight:"normal",color:e.colorTextTertiary},[`& ${t}-list`]:{display:"flex",gap:e.paddingSM,overflowX:"auto",scrollbarWidth:"none","-ms-overflow-style":"none","&::-webkit-scrollbar":{display:"none"},listStyle:"none",paddingInlineStart:0,marginBlock:0,alignItems:"stretch","&-wrap":{flexWrap:"wrap"},"&-vertical":{flexDirection:"column",alignItems:"flex-start"}},[`${t}-item`]:{flex:"none",display:"flex",gap:e.paddingXS,height:"auto",paddingBlock:e.paddingSM,paddingInline:e.padding,alignItems:"flex-start",justifyContent:"flex-start",background:e.colorBgContainer,borderRadius:e.borderRadiusLG,transition:["border","background"].map(t=>`${t} ${e.motionDurationSlow}`).join(","),border:`${l(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`,[`&:not(${t}-item-has-nest)`]:{"&:hover":{cursor:"pointer",background:e.colorFillTertiary},"&:active":{background:e.colorFill}},[`${t}-content`]:{flex:"auto",minWidth:0,display:"flex",gap:e.paddingXXS,flexDirection:"column",alignItems:"flex-start"},[`${t}-icon, ${t}-label, ${t}-desc`]:{margin:0,padding:0,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start",whiteSpace:"normal"},[`${t}-label`]:{color:e.colorTextHeading,fontWeight:500},[`${t}-label + ${t}-desc`]:{color:e.colorTextTertiary},[`&${t}-item-disabled`]:{pointerEvents:"none",background:e.colorBgContainerDisabled,[`${t}-label, ${t}-desc`]:{color:e.colorTextTertiary}}}}}},sg=e=>{const{componentCls:t}=e;return{[t]:{[`${t}-item-has-nest`]:{[`> ${t}-content`]:{[`> ${t}-label`]:{fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}}},[`&${t}-nested`]:{marginTop:e.paddingXS,alignSelf:"stretch",[`${t}-list`]:{alignItems:"stretch"},[`${t}-item`]:{border:0,background:e.colorFillQuaternary}}}}},lg=rp("Prompts",e=>{const t=ue(e,{});return[ag(t),sg(t),Qf(t,!0),Jf(t,!0)]},()=>({})),cg=o.forwardRef((e,t)=>{const{prefixCls:n,title:r,className:i,items:s,onItemClick:l,vertical:c,wrap:u,rootClassName:d,styles:h={},classNames:f={},style:p,fadeIn:g,fadeInLeft:m,...b}=e,{getPrefixCls:y,direction:v}=Ff(),S=y("prompts",n),w=df("prompts"),[C,k]=lg(S),_=a(S,w.className,i,d,f.root,C,k,{[`${S}-rtl`]:"rtl"===v}),E=a(`${S}-list`,w.classNames.list,f.list,{[`${S}-list-wrap`]:u},{[`${S}-list-vertical`]:c}),P=o.useRef(null);lf(t,()=>({nativeElement:P.current}));const $=y(),M=m||g?`${$}-x-fade${m?"-left":""}`:"";return o.createElement(x,{motionName:M},({className:e},t)=>o.createElement("div",Ze({},b,{ref:sf.composeRef(P,t),className:a(_,e),style:{...p,...w.style,...h.root}}),r&&o.createElement(pt.Title,{level:5,className:a(`${S}-title`,w.classNames.title,f.title),style:{...w.styles.title,...h.title}},r),o.createElement("div",{className:E,style:{...w.styles.list,...h.list}},s?.map((e,t)=>{const n=e.children&&e.children.length>0;return o.createElement("div",{key:e.key||`key_${t}`,style:{...w.styles.item,...h.item},className:a(`${S}-item`,w.classNames.item,f.item,{[`${S}-item-disabled`]:e.disabled,[`${S}-item-has-nest`]:n}),onClick:()=>{n||e.disabled||!l||l({data:e})}},e.icon&&o.createElement("div",{className:`${S}-icon`},e.icon),o.createElement("div",{className:a(`${S}-content`,w.classNames.itemContent,f.itemContent),style:{...w.styles.itemContent,...h.itemContent}},e.label&&o.createElement("h6",{className:`${S}-label`},e.label),e.description&&o.createElement("p",{className:`${S}-desc`},e.description),n&&o.createElement(cg,{className:`${S}-nested`,items:e.children,vertical:!0,onItemClick:l,classNames:{list:f.subList,item:f.subItem},styles:{list:h.subList,item:h.subItem}})))}))))}),ug=o.createContext(null);function dg(e,t){const{className:n,action:r,onClick:s,...l}=e,c=i.useContext(ug),{prefixCls:u,disabled:d,setSubmitDisabled:h}=c,f=l.disabled??d??c[`${r}Disabled`];return i.useEffect(()=>{"onSend"===r&&h?.(f)},[f,r,h]),o.createElement(Xe,Ze({type:"text"},l,{ref:t,onClick:e=>{f||(c[r]?.(),s?.(e))},disabled:f,className:a(u,n,{[`${u}-disabled`]:f})}))}const hg=o.forwardRef(dg);function fg(e,t){return i.createElement(hg,Ze({icon:i.createElement(Hr,null)},e,{action:"onClear",ref:t}))}const pg=i.forwardRef(fg),gg=i.memo(e=>{const{className:t}=e,[n]=Bf("Sender",Of.Sender);return o.createElement("svg",{color:"currentColor",viewBox:"0 0 1000 1000",xmlns:"http://www.w3.org/2000/svg",className:t},o.createElement("title",null,n.stopLoading),o.createElement("rect",{fill:"currentColor",height:"250",rx:"24",ry:"24",width:"250",x:"375",y:"375"}),o.createElement("circle",{cx:"500",cy:"500",fill:"none",r:"450",stroke:"currentColor",strokeWidth:"100",opacity:"0.45"}),o.createElement("circle",{cx:"500",cy:"500",fill:"none",r:"450",stroke:"currentColor",strokeWidth:"100",strokeDasharray:"600 9999999"},o.createElement("animateTransform",{attributeName:"transform",dur:"1s",from:"0 500 500",repeatCount:"indefinite",to:"360 500 500",type:"rotate"})))});function mg(e,t){const{prefixCls:n}=i.useContext(ug),{className:r}=e;return i.createElement(hg,Ze({icon:i.createElement(gg,{className:`${n}-loading-icon`}),color:"primary",variant:"text",shape:"circle"},e,{className:a(r,`${n}-loading-button`),action:"onCancel",ref:t}))}const bg=i.forwardRef(mg);function yg(e,t){return i.createElement(hg,Ze({icon:i.createElement(Pr,null),type:"primary",shape:"circle"},e,{action:"onSend",ref:t}))}const vg=i.forwardRef(yg),xg=o.createContext({}),Sg=(e,t,n)=>{const{token:r}=function(){const[e,t,n]=np();return{theme:e,token:t,hashId:n}}(),i=n.current?window.getComputedStyle(n.current):{},o=parseFloat(`${e.lineHeight||r.lineHeight}`),a=parseFloat(`${i?.fontSize||e.fontSize||r.fontSize}`),s=i?.lineHeight?parseFloat(`${i?.lineHeight}`):o*a;return!1!==t&&t?!0===t?{height:"auto"}:{minHeight:t.minRows?(s+4.35)*t.minRows:"auto",maxHeight:t.maxRows?(s+4.35)*t.maxRows:"auto",overflowY:"auto"}:{}};var wg,Cg={exports:{}};var kg,_g=(wg||(wg=1,kg=Cg,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=r(e,n(i)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var i="";for(var o in n)e.call(n,o)&&n[o]&&(i=r(i,o));return i}function r(e,t){return t?e?e+" "+t:e+t:e}kg.exports?(t.default=t,kg.exports=t):window.classNames=t}()),Cg.exports);const Eg=O(_g),Pg=new Set(["input","select","custom","content"]),$g=e=>e?.reduce((e,t)=>{const{key:n,type:r}=t;if(!n)return e;const i=t.props||{},o=Pg.has(r)?i.defaultValue:i.value??i.label;return e[n]=o??"",e},{})??{},Mg=({removeSkill:e,prefixCls:t,toolTip:n,closable:r,title:s,value:l})=>{const c=`${t}-skill`,u=i.useMemo(()=>{if(!r)return[null];const t="boolean"==typeof r?{}:r,n=t.closeIcon||o.createElement(kt,{className:`${c}-close-icon`});return o.createElement("div",{className:a(`${c}-close`,{[`${c}-close-disabled`]:t.disabled}),onClick:n=>{t.disabled||(n.stopPropagation(),e(),t.onClose?.(n))},role:"button","aria-label":"Close skill",tabIndex:0},n)},[r,e]),d=s||l,h=n?o.createElement(xe,n,d):d;return o.createElement("div",{className:`${c}-wrapper`,contentEditable:!1},o.createElement("div",{className:`${c}-tag`,contentEditable:!1,role:"button",tabIndex:0},o.createElement("span",{className:`${c}-tag-text`},h),u),o.createElement("div",{className:`${c}-holder`}))};Mg.displayName="Skill";const Ng=o.forwardRef((e,t)=>{const{onChange:n,onKeyUp:r,onKeyDown:s,onPaste:l,onPasteFile:c,disabled:u,readOnly:d,submitType:h="enter",prefixCls:f,styles:p={},classNames:g={},autoSize:m,triggerSend:b,placeholder:y,onFocus:v,onBlur:x,slotConfig:S,skill:w,...C}=o.useContext(xg),{direction:k,getPrefixCls:_}=Ff(),E=`${_("sender",f)}`,P=df("sender"),$=`${E}-input`,M=i.useRef(null),N=i.useRef(new Map),T=i.useRef(!1),R=i.useRef(!1),I=i.useRef(null),D=i.useRef(null),L=i.useRef(null),z={...P.styles?.input,...p.input},W=Sg(z,m,M),O={...Zh(C,{attr:!0,aria:!0,data:!0}),ref:M},[B,{getSlotValues:F,setSlotValues:j,getNodeInfo:H,mergeSlotConfig:G,getNodeTextValue:U}]=(e=>{const[t,n]=i.useState({}),r=i.useRef(t),o=i.useRef(new Map);i.useEffect(()=>{if(!e)return;o.current.clear(),((e,t)=>{e?.forEach(e=>{e.key&&t.set(e.key,e)})})(e,o.current);const t=$g(e);n(t),r.current=t},[e]);const a=i.useCallback(e=>{const t="function"==typeof e?e(r.current):e;n(t),r.current=t},[]),s=i.useCallback(e=>{const t=$g(e);e.forEach(e=>{e.key&&o.current.set(e.key,e)}),n(e=>({...e,...t})),r.current={...r.current,...t}},[]),l=i.useCallback(e=>((e,t)=>{if(!e?.dataset)return null;const{dataset:n}=e;return{slotKey:n.slotKey,placeholder:n.placeholder,nodeType:n.nodeType,skillKey:n.skillKey,slotConfig:n.slotKey?t.get(n.slotKey):void 0,targetNode:e}})(e,o.current),[]);return[o.current,{getSlotValues:()=>r.current,setSlotValues:a,mergeSlotConfig:s,getNodeInfo:l,getNodeTextValue:e=>{const t=e.nodeType;if(t===Node.TEXT_NODE)return e.textContent||"";if(t!==Node.ELEMENT_NODE)return"";const n=e,i=l(n);if(!i)return n.innerText||"";const{slotKey:o,skillKey:a,nodeType:s,slotConfig:c}=i;if(a)return"";const u=n.innerText||"";if(o){if("nbsp"===s)return" ";if(!c||"content"===c.type)return u;const e=r.current[o]??"";return c.formatResult?.(e)??e}return u}}]})(S),[q,X]=i.useState(new Map),[V,Y]=i.useState(null),{setEndCursor:K,setStartCursor:Q,setAllSelectCursor:J,setCursorPosition:Z,setSlotFocus:ee,setAfterNodeFocus:te,getTextBeforeCursor:ne,removeAllRanges:re,getRange:ie,getInsertPosition:oe,getEndRange:ae,getStartRange:se,getSelection:le,copySelectionString:ce,getCleanedText:ue}=(e=>{const t=i.useCallback(()=>"undefined"==typeof window?null:window.getSelection(),[]),n=i.useCallback(()=>{const e=t();if(!e)return{range:null,selection:e};try{return{range:e.getRangeAt(0)||document.createRange(),selection:e}}catch(n){return{range:document.createRange(),selection:e}}},[t]),r=i.useCallback((e,t)=>{if(e&&t)try{t.removeAllRanges(),t.addRange(e)}catch(n){}},[]),o=i.useCallback(()=>{const e=t();if(e)try{e.removeAllRanges()}catch(n){}},[t]),a=i.useCallback((e,t=!1)=>{if(e&&"function"==typeof e.focus)try{e.focus({preventScroll:t})}catch(n){}},[]),s=i.useCallback((e,t)=>{if(!e)return;a(e,t);const{range:i,selection:o}=n();if(i&&o)try{i.selectNodeContents(e),i.collapse(!1),r(i,o)}catch(s){}},[a,n,r]),l=i.useCallback((e,t)=>{if(!e)return;a(e,t);const{range:i,selection:o}=n();if(i&&o)try{i.selectNodeContents(e),i.collapse(!0),r(i,o)}catch(s){}},[a,n,r]),c=i.useCallback((e,t,i)=>{if(!e)return;a(e,i);const{range:o,selection:s}=n();if(o&&s)try{o.selectNodeContents(e),t&&o.setStart(e,1),r(o,s)}catch(l){}},[a,n,r]),u=i.useCallback((e,t,i,o)=>{if(!e||"number"!=typeof i||i<0||!t)return{range:null,selection:null};a(t,o);const{range:s,selection:l}=n();if(s&&l)try{const t=Math.min(i,e.childNodes.length);s.setStart(e,t),s.setEnd(e,t),s.collapse(!1),r(s,l)}catch(c){}return{range:s,selection:l}},[a,n,r]),d=i.useCallback((t,n,r=!1)=>{if(!e||!t?.current)return;const{getSlotDom:i,slotConfigMap:o}=e,a=e=>{const t=i(e);if(!t)return null;const n=o.get(e);if(!n)return null;if("input"===n.type)return t.querySelector("input");const r=t?.getAttribute?.("data-node-type")||"";return"content"===n.type&&"nbsp"!==r?t:null},s=(e=>{const n=t.current;if(!n)return null;if(e)return a(e);for(const t of Array.from(n.childNodes)){const e=t?.getAttribute?.("data-slot-key");if(e){const t=a(e);if(t)return t}}return null})(n);s&&("INPUT"===s.nodeName?s.focus({preventScroll:r}):u(s,t.current,0,r))},[e,u]),h=i.useCallback((e,t,n,r,i)=>{n&&r&&(a(t,i),n?.setStartAfter(e),n.collapse(!1),r.removeAllRanges(),r.addRange(n))},[a]),f=i.useCallback(e=>{if(!e)return{value:"",startContainer:null,startOffset:0};const n=t();if(!n||0===n.rangeCount)return{value:"",startContainer:null,startOffset:0};try{const t=n.getRangeAt(0);if(!e.contains(t.startContainer))return{value:"",startContainer:null,startOffset:0};const r=t.cloneRange();return r.selectNodeContents(e),r.setEnd(t.startContainer,t.startOffset),{value:r.toString().replace(/\u200B/g,""),startContainer:t.startContainer,startOffset:t.startOffset}}catch(r){return{value:"",startContainer:null,startOffset:0}}},[t]),p=i.useCallback((r,i,o)=>{if("start"===r||"end"===r)return{type:r,selection:t()};let a=null,s=null;if(o?.current)a=o.current,s=t();else{const e=n();a=e.range,s=e.selection}if(!a||!s)return{type:"end",selection:s};const l=i?.current;if(!l)return{type:"end",selection:s};const c=a.endContainer.nodeType===Node.TEXT_NODE?a.endContainer.parentElement:a.endContainer;if(!c)return{type:"end",selection:s};if(e?.getNodeInfo){const{slotKey:t,slotConfig:n}=e.getNodeInfo(c)||{};if(t)return{type:"slot",slotKey:n?.key,slotType:n?.type,range:a,selection:s}}return l.contains(a.endContainer)?{type:"box",range:a,selection:s}:{type:"end",selection:s}},[e,n,t]),g=i.useCallback(e=>{const t=e.childNodes[e.childNodes.length-1],n=t?.nodeType===Node.TEXT_NODE&&"\n"===t.textContent?e.childNodes.length-1:e.childNodes.length;return u(e,e,n).range||document.createRange()},[u]),m=i.useCallback(t=>{const n=e?.getEditorValue?.().skill?1:0;return u(t,t,n).range||document.createRange()},[u,e]),b=i.useCallback(e=>e.replace(/\u200B/g,"").replace(/\n/g,"").replace(/^\n+|\n+$/g,""),[]),y=i.useCallback(async()=>{try{const e=t();if(!e)return!1;const n=e.toString();if(!n)return!1;const r=b(n);return await navigator.clipboard.writeText(r),!0}catch(e){return!1}},[t,b]);return{setEndCursor:s,setStartCursor:l,setAllSelectCursor:c,setCursorPosition:u,setAfterNodeFocus:h,setSlotFocus:d,getTextBeforeCursor:f,getSelection:t,removeAllRanges:o,getRange:n,getInsertPosition:p,getEndRange:g,getStartRange:m,copySelectionString:y,getCleanedText:b}})({prefixCls:E,getSlotDom:e=>N.current.get(e),slotConfigMap:B,getNodeInfo:H,getEditorValue:()=>we()}),{buildSkillSpan:de,buildEditSlotSpan:he,buildSlotSpan:fe,buildSpaceSpan:pe,getSlotDom:ge,saveSlotDom:me,getSlotLastDom:be}=(e=>{const{prefixCls:t,placeholder:n,slotDomMap:r,slotConfigMap:o}=e,a=i.useCallback(e=>{const r=document.createElement("span");return r.setAttribute("contenteditable","false"),r.dataset.skillKey=e,r.dataset.placeholder=n||"",r.className=`${t}-skill`,r},[t,n]),s=i.useCallback(e=>{const n=document.createElement("span");return n.setAttribute("contenteditable","true"),n.dataset.slotKey=e.key,n.className=Eg(`${t}-slot`,`${t}-slot-content`),n},[t]),l=i.useCallback(e=>{const n=document.createElement("span");return n.setAttribute("contenteditable","false"),n.dataset.slotKey=e,n.className=`${t}-slot`,n},[t]),c=i.useCallback((e,n)=>{const r=document.createElement("span");return r.setAttribute("contenteditable","false"),r.dataset.slotKey=e,r.dataset.nodeType="nbsp",r.className=Eg(`${t}-slot-${n}`,`${t}-slot-no-width`),r.textContent="",r},[t]),u=e=>r.current.get(e);return{buildSkillSpan:a,buildEditSlotSpan:s,buildSlotSpan:l,buildSpaceSpan:c,saveSlotDom:(e,t)=>{r.current.set(e,t)},getSlotDom:u,getSlotLastDom:(e,t)=>{const n=t??o.get(e)?.type;return u("content"===n?`${e}_after`:e)}}})({prefixCls:E,placeholder:y,slotDomMap:N,slotConfigMap:B}),ye=e=>{const t=we();D.current&&(!t?.value&&0===t.slotConfig.length&&y?(D.current.setAttribute("contenteditable","true"),D.current.classList.add(`${E}-skill-empty`)):(D.current.setAttribute("contenteditable","false"),D.current.classList.remove(`${E}-skill-empty`))),n?.(t.value,e,t.slotConfig,t.skill)},ve=(e,t,n)=>{const r=ge(e),i=B.get(e);if(j(n=>({...n,[e]:t})),r&&i){const t=xe(i,r);X(n=>{const r=new Map(n);return r.set(e,t),r}),ye(n)}},xe=(e,t)=>{if(!e.key)return null;const n=F()[e.key];return A.createPortal((()=>{switch(e.type){case"content":return t.innerHTML=n||"",t.setAttribute("data-placeholder",e.props?.placeholder||""),null;case"input":return o.createElement(Et,{readOnly:d,className:`${E}-slot-input`,placeholder:e.props?.placeholder||"","data-slot-input":e.key,size:"small",variant:"borderless",value:n||"",tabIndex:0,onKeyDown:Pe,onChange:t=>{ve(e.key,t.target.value,t)},spellCheck:!1});case"select":return o.createElement(bt,{disabled:d,menu:{items:e.props?.options?.map(e=>({label:e,key:e})),defaultSelectedKeys:e.props?.defaultValue?[e.props.defaultValue]:[],selectable:!0,onSelect:({key:t,domEvent:n})=>{ve(e.key,t,n)}},trigger:["click"]},o.createElement("span",{className:a(`${E}-slot-select`,{placeholder:!n,[`${E}-slot-select-selector-value`]:n})},o.createElement("span",{"data-placeholder":e.props?.placeholder,className:`${E}-slot-select-value`},n||""),o.createElement("span",{className:`${E}-slot-select-arrow`},o.createElement(Or,null))));case"tag":return o.createElement("span",{className:`${E}-slot-tag`},e.props?.label||e.props?.value||"");case"custom":return e.customRender?.(n,t=>{ve(e.key,t)},{disabled:u,readOnly:d},e);default:return null}})(),t)},Se=e=>e.reduce((e,t)=>{if("text"===t.type)return e.push(document.createTextNode(t.value||"")),e;const n=t.key;if(n){let r,i;if("content"===t.type){i=he(t);const e=pe(n,"before"),o=pe(n,"after");r=[e,i,o],me(`${n}_before`,e),me(n,i),me(`${n}_after`,o)}else i=fe(n),r=[i],me(n,i);if(i){const o=xe(t,i);o&&(X(e=>{const t=new Map(e);return t.set(n,o),t}),e.push(...r))}}return e},[]),we=()=>{const e=M.current,t={value:"",slotConfig:[],skill:void 0};if(!e)return t;const n=e.childNodes;if(0===n.length)return t;const r=!!w,i=new Array(n.length),o=[];let a,s=0;for(let c=0;c<n.length;c++){const e=n[c],t=U(e);if(i[s++]=t,e.nodeType===Node.TEXT_NODE)t&&o.push({type:"text",value:t});else if(e.nodeType===Node.ELEMENT_NODE){const n=H(e);if(n){const{skillKey:e,slotKey:i,nodeType:s}=n;if(e&&r&&(a=w),i&&"nbsp"!==s){const e=B.get(i);e&&o.push({...e,value:t})}}}}if(0===s)return e.innerHTML="",D.current=null,t;const l=i.slice(0,s).join("");return a||(D.current=null),{value:l,slotConfig:o,skill:a}},Ce=()=>{if(w&&L.current!==w){ke(!1),L.current=w;const e=de(w.value),t=A.createPortal(o.createElement(Mg,Ze({removeSkill:ke},w,{prefixCls:E})),e);Y(t);const n=document.createRange(),r=M.current;if(!r)return;n.setStart(r,0),n.insertNode(e),D.current=e,ye()}},ke=(e=!0)=>{M.current&&D.current&&(D.current?.remove(),D.current=null,L.current=null,e&&ye())},_e=()=>{S&&S.length>0&&M.current&&((()=>{const e=M.current;e&&(e.innerHTML="",D.current=null,L.current=null,I.current=null,re(),N?.current?.clear())})(),Se(S).forEach(e=>{M.current?.appendChild(e)}))},Ee=(e,t)=>{if(!M.current)return!1;const{range:n,selection:r}=ie();if(!r||0===r.rangeCount)return!1;const{focusOffset:i,anchorNode:o}=r;if(!o||!M.current.contains(o))return!1;if(o.nodeType===Node.TEXT_NODE&&n){const r=o.parentNode,a=H(r),s=n.toString(),l=o.textContent?.length===s.length,c=1===o.textContent?.length&&1===i;if("content"===a?.slotConfig?.type&&(l||c))return e.preventDefault(),"cut"===t&&ce(),o.parentNode.innerHTML="",!0}if("backspace"===t&&0===i){const t=o.previousSibling;if(t){const n=H(t);if(n){const{slotKey:t,skillKey:r}=n;if(t)return e.preventDefault(),((e,t)=>{const n=M.current;n&&(n.querySelectorAll(`[data-slot-key="${e}"]`).forEach(e=>{e.remove()}),N.current.delete(e),j(t=>{const{[e]:n,...r}=t;return r}),X(t=>{const n=new Map(t);return n.delete(e),n}),ye(t))})(t,e),!0;if(r)return e.preventDefault(),ke(),!0}}}return!1},Pe=e=>{if((e=>{const t=s?.(e);return R.current||T.current||!1===t})(e))s?.(e);else if((e.target===M.current||M.current?.contains(e.target))&&("Backspace"!==e.key||!Ee(e,"backspace")))return(e=>{const{key:t,shiftKey:n,ctrlKey:r,altKey:i,metaKey:o}=e;if("Enter"!==t)return!1;const a=r||i||o;return"enter"===h&&!n&&!a||"shiftEnter"===h&&n&&!a})(e)?(e.preventDefault(),R.current=!0,void b?.()):"a"!==e.key||!e.ctrlKey&&!e.metaKey||e.shiftKey||e.altKey?void(()=>{if(!D.current||!M.current||"false"===D.current.getAttribute("contenteditable"))return;const e=le();e?.anchorNode&&D.current.contains(e.anchorNode)&&M.current.contains(e.anchorNode)&&(D.current.setAttribute("contenteditable","false"),D.current.classList.remove(`${E}-skill-empty`),Ie({cursor:"end"}))})():(J(M.current,D.current),void e.preventDefault())},$e=e=>{var t;t=M?.current,"enter"===h&&t&&t.querySelectorAll("br").forEach(e=>{e.remove()}),ye(e)},Me=(e,t,n,r)=>{const i=M.current;if(i)try{G(e);const o=Se(e);if(0===o.length)return;const a=Ne(t,i);if(!a.range||!a.selection)return;const{range:s,selection:l}=a;n?.length&&Ae(s,n,i),Te(o,s,a),Re(o,s,l,r)}catch(o){}},Ne=(e,t)=>{const{type:n,slotKey:r,slotType:i,range:o,selection:a}=oe(e,M,I);if(!a)return{range:null,selection:null,type:n};let s=null;switch(n){case"end":default:s=ae(t);break;case"start":s=se(t);break;case"slot":s=ie().range;break;case"box":s=o||null,s&&D.current&&s.collapsed&&0===s.startOffset&&s.setStartAfter(D.current)}return{range:s,selection:a,type:n,slotKey:r,slotType:i}},Ae=(e,t,n)=>{const{value:r,startContainer:i,startOffset:o}=ne(n);r.length>=t.length&&r.endsWith(t)&&i&&o>=0&&(e.setStart(i,o-t.length),e.setEnd(i,o),e.deleteContents())},Te=(e,t,n)=>{const{type:r,slotKey:i,slotType:o}=n;let a=!0;e.forEach(e=>{if(a&&"slot"===r&&("content"!==o||e.nodeType!==Node.TEXT_NODE)&&i){a=!1;const e=be(i);e&&t.setStartAfter(e)}t.insertNode(e),t.setStartAfter(e)})},Re=(e,t,n,r)=>{n.deleteFromDocument();const i=e[e.length-1];te(i,M.current,t,n,r),setTimeout(()=>{$e(null)},0)},Ie=e=>{const t={preventScroll:e?.preventScroll??!1,cursor:e?.cursor??"end",key:e?.key};switch(t.cursor){case"slot":ee(M,e?.key,t.preventScroll);break;case"start":Q(M.current,t.preventScroll);break;case"all":J(M.current,D.current,t.preventScroll);break;case"end":K(M.current,t.preventScroll)}},De=()=>{const e=M.current;e&&(e.innerHTML="",L.current=null,D.current=null,B.clear(),Ce(),j({}),I.current=null,N?.current?.clear(),$e(null))};return i.useEffect(()=>{_e(),w?Ce():ye()},[S]),i.useEffect(()=>{Ce()},[w]),i.useImperativeHandle(t,()=>({nativeElement:M.current,focus:Ie,blur:()=>M.current?.blur(),insert:Me,clear:De,getValue:we})),o.createElement(o.Fragment,null,o.createElement("div",Ze({},O,{role:"textbox",tabIndex:0,style:{...z,...W},className:a($,`${$}-slot`,P.classNames.input,g.input,{[`${E}-rtl`]:"rtl"===k}),"data-placeholder":y,contentEditable:!d,suppressContentEditableWarning:!0,spellCheck:!1,onCut:e=>{Ee(e,"cut")},onKeyDown:Pe,onKeyUp:e=>{"Enter"===e.key&&(R.current=!1),r?.(e)},onPaste:e=>{e.preventDefault();const t=e.clipboardData?.files,n=e.clipboardData?.getData("text/plain");if(!n&&t?.length&&c)c(t);else{if(n){let e=!1;const t=ue(n);try{e=document.execCommand("insertText",!1,t)}catch(r){}e||Me([{type:"text",value:t}])}l?.(e)}},onCompositionStart:()=>{T.current=!0},onCompositionEnd:()=>{T.current=!1,R.current=!1},onFocus:e=>{v?.(e)},onBlur:e=>{R.current&&(R.current=!1);const{range:t}=ie();I.current=t;const n=setTimeout(()=>{I.current=null,clearTimeout(n)},200);x?.(e)},onSelect:()=>{const e=M.current,t=le();e&&t?.focusNode===e&&0===t.focusOffset&&we().skill&&Z(e,M.current,1)},onInput:$e},C)),o.createElement("div",{style:{display:"none"},id:`${E}-slot-placeholders`},Array.from(q.values()),V))});function Ag(e,t){const{speechRecording:n,disabled:r,onSpeechDisabled:o,prefixCls:a}=i.useContext(ug),s=e.disabled??r??o;let l=null;return l=n?i.createElement(Gf,{className:`${a}-recording-icon`}):s?i.createElement(Ar,null):i.createElement(Dr,null),i.createElement(hg,Ze({icon:l,variant:"text",color:"primary"},e,{action:"onSpeech",ref:t}))}const Tg=i.forwardRef(Ag);var Rg,Ig={};const Dg=O((Rg||(Rg=1,Object.defineProperty(Ig,"__esModule",{value:!0}),Ig.default=function(e,t){let n=e;for(let r=0;r<t.length;r+=1){if(null==n)return;n=n[t[r]]}return n}),Ig));const Lg=o.forwardRef((e,t)=>{const{value:n,onChange:r,onKeyUp:i,onKeyDown:s,onPaste:l,onPasteFile:c,disabled:u,readOnly:d,submitType:h="enter",prefixCls:f,styles:p={},classNames:g={},autoSize:m,components:b,triggerSend:y,placeholder:v,onFocus:x,onBlur:S,...w}=o.useContext(xg),C=o.useRef(null),k=(e,t="cursor")=>{const n=C.current?.resizableTextArea?.textArea,i=n.value;let o=i.length,a=i.length;"cursor"===t&&(o=n?.selectionStart,a=n?.selectionEnd),"start"===t&&(o=0,a=0),n.value=i.substring(0,o)+e+i.substring(a,i.length),n.selectionStart=o+e.length,n.selectionEnd=o+e.length,n.focus(),r?.(n.value)},_=()=>{r?.("")},E=()=>({value:n||"",slotConfig:[]});o.useImperativeHandle(t,()=>({nativeElement:C.current?.resizableTextArea?.textArea,focus:C.current?.focus,blur:C.current?.blur,insert:k,clear:_,getValue:E}));const P=o.useRef(!1),$=function(e,t,n){return Dg(e,t)||n}(b,["input"],Et.TextArea),M={...Zh(w,{attr:!0,aria:!0,data:!0}),ref:C};return o.createElement($,Ze({},M,{disabled:u,style:p.input,className:a(`${f}-input`,g.input),autoSize:m,value:n,onChange:e=>{r?.(e.target.value,e)},onKeyUp:i,onCompositionStart:()=>{P.current=!0},onCompositionEnd:()=>{P.current=!1},onKeyDown:e=>{const t=s?.(e),{key:n,shiftKey:r,ctrlKey:i,altKey:o,metaKey:a}=e;if(!P.current&&"Enter"===n&&!1!==t&&"Enter"===n){const t=i||o||a;if("enter"===h&&!r&&!t||"shiftEnter"===h&&r&&!t)return e.preventDefault(),void y?.()}},onPaste:e=>{const t=e.clipboardData?.files,n=e.clipboardData?.getData("text/plain");!n&&t?.length&&c&&(c(t),e.preventDefault()),l?.(e)},variant:"borderless",readOnly:d,placeholder:v,onFocus:x,onBlur:S}))});function zg(r,i){const a=t(r),[s,l,c]=o.useMemo(()=>"object"==typeof i?[i.recording,i.onRecordingChange,"boolean"==typeof i.recording]:[void 0,void 0,!1],[i]),[u,d]=o.useState(null);let h;o.useEffect(()=>{if(!c&&"permissions"in navigator){let e=null;return navigator.permissions.query({name:"microphone"}).then(t=>{d(t.state),t.onchange=function(){d(this.state)},e=t}).catch(e=>{e instanceof Error?e.message:String(e)}),()=>{e&&(e.onchange=null)}}},[c]),h||"undefined"==typeof window||(h=window.SpeechRecognition||window.webkitSpeechRecognition);const f=!!(c||h&&"denied"!==u),p=o.useRef(null),[g,m]=function(r,i){const{defaultValue:o,value:a,onChange:s,postState:l}=i||{},[c,u]=e(()=>Gt(a)?a:Gt(o)?"function"==typeof o?o():o:r),d=void 0!==a?a:c,h=l?l(d):d,f=t(s),[p,g]=e([d]);return n(()=>{const e=p[0];c!==e&&f(c,e)},[p]),n(()=>{Gt(a)||u(a)},[a]),[h,t((e,t)=>{u(e,t),g([d],t)})]}(!1,{value:s}),b=o.useRef(!1),y=t(e=>{e&&!g||(b.current=e,c?l?.(!g):((()=>{if(f&&!p.current){const e=new h;e.onstart=()=>{m(!0)},e.onend=()=>{m(!1)},e.onresult=e=>{if(!b.current){const t=e.results?.[0]?.[0]?.transcript;a(t)}b.current=!1},p.current=e}})(),p.current&&(g?(p.current.stop(),l?.(!1)):(p.current.start(),l?.(!0)))))});return[f,y,g]}const Wg=i.createContext({}),Og=()=>({height:0}),Bg=e=>({height:e.scrollHeight});const Fg=e=>{const{componentCls:t,calc:n}=e,r=`${t}-header`;return{[t]:{[`&${r}-rtl`]:{direction:"rtl"},[`${r}`]:{borderBottomWidth:e.lineWidth,borderBottomStyle:"solid",borderBottomColor:e.colorBorderInput,[`${r}-header`]:{background:e.colorFillAlter,fontSize:e.fontSize,lineHeight:e.lineHeight,paddingBlock:n(e.paddingSM).sub(e.lineWidthBold).equal(),paddingInlineStart:e.padding,paddingInlineEnd:e.paddingXS,display:"flex",borderRadius:{_skip_check_:!0,value:n(e.borderRadius).mul(2).equal()},borderEndStartRadius:0,borderEndEndRadius:0,[`${r}-title`]:{flex:"auto"}},[`${r}-content`]:{padding:e.padding}},[`${r}-motion`]:{transition:["height","border"].map(t=>`${t} ${e.motionDurationSlow}`).join(","),overflow:"hidden","&-enter-start, &-leave-active":{borderBottomColor:"transparent"},"&-hidden":{display:"none"}}}}},jg=e=>{const{componentCls:t,antCls:n,calc:r}=e,i=`${t}-slot`,o=`${n}-input`,a=`${n}-dropdown-trigger`,s=`${t}-slot-input`,c=`${t}-slot-select`,u=`${t}-slot-tag`,d=`${t}-slot-content`,h=`${t}-skill`;return{[t]:{[`${t}-input-slot`]:{outline:"none",cursor:"text",whiteSpace:"pre-wrap",width:"100%",caretColor:e.colorPrimary,fontSize:e.fontSize,lineHeight:e.lineHeight,"&:empty::before":{content:"attr(data-placeholder)",color:e.colorTextPlaceholder}},[`${i}:not(${d})`]:{display:"inline-block",verticalAlign:"middle",alignItems:"center",marginBlock:1,height:r(e.fontSize).mul(e.lineHeight).add(2).equal(),wordBreak:"break-all",marginInline:e.marginXXS},[`${o}${s}`]:{height:"100%",background:e.colorBgSlot,outline:"none",color:e.colorTextSlot,borderRadius:e.borderRadius,paddingInline:e.paddingXXS,fontSize:"inherit",lineHeight:"inherit",position:"relative","&::placeholder":{color:e.colorTextSlotPlaceholder,fontSize:"inherit",lineHeight:"inherit"},[i]:{display:"inline-flex",margin:`0 ${l(e.marginXXS)}`,verticalAlign:"bottom",alignItems:"center",marginBlock:l(r(e.marginXXS).div(2).equal()),minHeight:e.controlHeightSM,wordBreak:"break-all"}},[c]:{fontSize:e.fontSize,lineHeight:e.lineHeight,paddingInline:e.paddingXXS,transition:`border-color  ${e.motionDurationMid}`,position:"relative",display:"inline-flex",alignItems:"center",cursor:"pointer",background:e.colorBgSlot,height:"100%",boxSizing:"border-box",borderRadius:e.borderRadius,color:e.colorTextSlot,border:`1px solid ${e.colorBorderSlot}`,"&.placeholder":{color:e.colorTextSlotPlaceholder},[`${c}`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,padding:`0 ${l(e.paddingXXS)}`,transition:`border-color  ${e.motionDurationMid}`,position:"relative",display:"inline",cursor:"pointer",background:e.colorBgSlot,alignItems:"center",justifyContent:"center",borderRadius:e.borderRadius,color:e.colorTextSlot,border:`1px solid ${e.colorBorderSlot}`,"&.placeholder":{color:e.colorTextSlotPlaceholder},[`&${a}-open`]:{borderColor:e.colorBorderSlotHover}},[`${c}-value`]:{flex:1,fontSize:e.fontSize,lineHeight:e.lineHeight,"&:empty::before":{content:"attr(data-placeholder)"}},[`${c}-arrow`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSize,lineHeight:e.lineHeight,display:"inline-flex",alignItems:"center",justifyContent:"center"},[`${u}`]:{background:e.colorBgSlot,border:`1px solid ${e.colorBorderSlot}`,outline:"none",color:e.colorTextSlot,borderRadius:e.borderRadius,padding:`0 ${l(e.paddingXXS)}`,fontSize:e.fontSize,lineHeight:e.lineHeight,position:"relative",cursor:"default"}},[`${c}-arrow`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSize,lineHeight:e.lineHeight,display:"inline-flex",alignItems:"center",justifyContent:"center"},[u]:{background:e.colorBgSlot,border:`1px solid ${e.colorBorderSlot}`,outline:"none",color:e.colorTextSlot,borderRadius:e.borderRadius,padding:`0 ${l(e.paddingXXS)}`,fontSize:e.fontSize,lineHeight:e.lineHeight,height:"100%",boxSizing:"border-box",position:"relative",cursor:"default"},[d]:{height:r(e.fontSize).mul(e.lineHeight).add(2).equal(),caretColor:e.colorPrimary,background:e.colorBgSlot,outline:"none",color:e.colorTextSlot,borderRadius:e.borderRadius,paddingInline:e.paddingXXS,boxSizing:"border-box",verticalAlign:"middle",fontSize:e.fontSize,marginBlock:1,lineHeight:e.lineHeight,display:"inline-block",position:"relative",cursor:"text","&:empty":{width:"fit-content","&::after":{display:"inline-block",height:"inherit",content:"attr(data-placeholder)",color:e.colorTextSlotPlaceholder}}},[`${i}-no-width`]:{userSelect:"none",width:"3px",display:"inline-block",lineHeight:"inherit"},[h]:{display:"inline-block",verticalAlign:"baseline",alignItems:"center",marginBlock:1,height:r(e.fontSize).mul(e.lineHeight).add(2).equal(),wordBreak:"break-all",paddingInlineEnd:0,paddingInlineStart:0,marginInlineEnd:0,marginInlineStart:-1,[`&${h}-empty`]:{"&::after":{display:"inline-block",pointerEvents:"none",height:"inherit",content:"attr(data-placeholder)",color:e.colorTextPlaceholder}}},[`${h}-wrapper`]:{height:"100%",display:"inline-flex"},[`${h}-tag`]:{paddingInline:e.paddingXS,height:"100%",backgroundColor:e.colorBgSkill,borderRadius:e.borderRadius,color:e.colorPrimary,alignItems:"center",fontWeight:500,display:"inline-flex",cursor:"pointer",gap:e.marginXXS,transition:`background-color ${e.motionDurationMid}`,"&:hover":{backgroundColor:e.colorBgSkillHover,[`${h}-tag-close:not(${h}-tag-close-disabled)`]:{color:e.colorPrimaryHover}},"&-close":{fontSize:e.fontSizeSM,display:"inline-flex",transition:`color ${e.motionDurationMid}`,color:e.colorPrimary},"&-close-disabled":{cursor:"not-allowed",color:e.colorTextDisabled}},[`${h}-holder`]:{width:e.marginXS,height:"100%"}}}},Hg=e=>{const{componentCls:t,antCls:n}=e,r=`${t}-switch`;return{[t]:{[`&${r}-rtl`]:{direction:"rtl"},[`&${r}`]:{display:"inline-block",[`${n}-btn:not(:disabled):not(${n}-btn-disabled):hover`]:{background:e.switchUncheckedHoverBg,borderColor:e.colorBorder,color:e.colorText},[`&${r}-checked`]:{[`${n}-btn:not(:disabled):not(${n}-btn-disabled):hover`]:{background:e.switchCheckedHoverBg,borderColor:e.colorPrimary,color:e.colorPrimaryText},[`${r}-content`]:{background:e.switchCheckedBg}}}}}},Gg=e=>{const{antCls:t,componentCls:n,paddingSM:r,paddingXS:i,paddingXXS:o,lineWidth:a,calc:s}=e;return{[n]:{[`&${n}-main`]:{position:"relative",width:"100%",boxSizing:"border-box",boxShadow:`${e.boxShadowTertiary}`,borderRadius:{_skip_check_:!0,value:s(e.borderRadius).mul(2).equal()},borderColor:e.colorBorderInput,borderWidth:a,borderStyle:"solid"},[`&${n}-disabled`]:{background:e.colorBgContainerDisabled},[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{display:"flex",gap:i,width:"100%",paddingBlock:r,paddingInlineStart:r,paddingInlineEnd:r,boxSizing:"border-box",alignItems:"flex-end"},[`${n}-prefix`]:{flex:"none"},[`${n}-input`]:{paddingInline:0,borderRadius:0,flex:"auto",alignSelf:"center",caretColor:e.colorPrimary,fontSize:e.fontSize},[`${n}-actions-list`]:{flex:"none",display:"flex","&-presets":{gap:e.paddingXS}},[`${n}-actions-btn`]:{[`&-disabled:where(${t}-btn-variant-text)`]:{color:e.colorTextActionsDisabled},[`&-disabled:not(${t}-btn-variant-text)`]:{background:e.colorBgActionsDisabled,color:e.colorTextLightSolid},"&-loading-button":{padding:0,border:0},"&-loading-icon":{height:e.controlHeight,width:e.controlHeight,verticalAlign:"top"},"&-recording-icon":{height:"1.2em",width:"1.2em",verticalAlign:"top"}},[`${n}-footer`]:{paddingInlineStart:r,paddingInlineEnd:r,paddingBlockEnd:r,paddingBlockStart:o,boxSizing:"border-box"}}}},Ug=rp("Sender",e=>{const{paddingXS:t,calc:n}=e,r=ue(e,{SenderContentMaxWidth:`calc(100% - ${l(n(t).add(32).equal())})`});return[Gg(r),Fg(r),Hg(r),jg(r)]},e=>{const{colorPrimary:t,colorFillTertiary:n}=e,r=new $(t).setA(.06).toRgbString(),i=new $(t).setA(.08).toRgbString(),o=new $(t).setA(.15).toRgbString(),a=t,s=new $(t).setA(.25).toRgbString(),l=new $(t).setA(.1).toRgbString(),c=r,u=new $(t).setA(.08).toRgbString(),d=new $(n).setA(.04).toRgbString(),h=new $(t).setA(.1).toRgbString(),f=new $(n).setA(.1).toRgbString(),p=`0 4px 12px 0 ${new $(t).setA(.1).toRgbString()}`,g=new $(t).setA(.45).toRgbString();return{colorBgSlot:r,colorBgSkill:i,colorBgSkillHover:o,colorTextSlot:a,colorTextSlotPlaceholder:s,colorBorderSlotHover:l,colorBorderSlot:c,switchCheckedBg:u,switchCheckedHoverBg:h,switchUncheckedHoverBg:d,colorBorderInput:f,boxShadowInput:p,colorBgActionsDisabled:g,colorTextActionsDisabled:g}}),qg={SendButton:vg,ClearButton:pg,LoadingButton:bg,SpeechButton:Tg},Xg=o.forwardRef((e,t)=>{const{prefixCls:n,styles:r={},classNames:s={},className:l,rootClassName:c,style:u,defaultValue:d,value:h,slotConfig:f,readOnly:p,submitType:g="enter",onSubmit:m,loading:b,components:y,onCancel:v,onChange:x,suffix:S,onKeyUp:w,onKeyDown:C,disabled:k,allowSpeech:_,prefix:E,footer:P,header:$,onPaste:M,onPasteFile:N,autoSize:A={maxRows:8},placeholder:T,onFocus:R,onBlur:I,skill:D,...L}=e,z=Zh(L,{attr:!0,aria:!0,data:!0}),W=o.useId(),O=Array.isArray(f)||D?.value,{direction:B,getPrefixCls:F}=Ff(),j=F("sender",n),H=o.useRef(null),G=o.useRef(null);lf(t,()=>({nativeElement:H.current,inputElement:G.current?.nativeElement,focus:e=>G.current?.focus(e),blur:()=>G.current?.blur(),insert:(...e)=>G.current?.insert?.(...e),clear:()=>G.current?.clear(),getValue:()=>G.current?.getValue()??{value:"",slotConfig:[],skill:void 0}}));const U=df("sender"),q=`${j}-input`,[X,V]=Ug(j),Y=a(j,U.className,l,c,U.classNames.root,s.root,X,V,`${j}-main`,{[`${j}-rtl`]:"rtl"===B,[`${j}-disabled`]:k}),K=`${j}-actions-btn`,Q=`${j}-actions-list`,[J,Z]=ne(d||"",h),ee=(e,t,n,r)=>{Z(e),x?.(e,t,n??[],r)},[te,re,ie]=zg(e=>{O?G.current?.insert?.([{type:"text",value:e}]):ee(`${J} ${e}`)},_),oe=()=>{if(G?.current&&m&&!b&&!de){const e=G.current.getValue();m(e.value,e.slotConfig,e.skill)}},ae=o.createElement(Ga,{className:`${Q}-presets`},_&&o.createElement(Tg,null),b?o.createElement(bg,null):o.createElement(vg,null));let se=ae;"function"==typeof S?se=S(ae,{components:qg}):(S||!1===S)&&(se=S);const le="function"==typeof E?E(ae,{components:qg}):E||null,ce="function"==typeof $?$(ae,{components:qg}):$||null,ue="function"==typeof P?P(ae,{components:qg}):P||null,[de,he]=i.useState(!J),fe={prefixCls:K,onSend:oe,onSendDisabled:!J,onClear:()=>{ee(""),O&&G.current?.clear?.()},onClearDisabled:!J,onCancel:v,onCancelDisabled:!b,onSpeech:()=>re(!1),onSpeechDisabled:!te,speechRecording:ie,disabled:k,setSubmitDisabled:he},pe=o.useMemo(()=>({value:J,onChange:ee,slotConfig:f,onKeyUp:w,onKeyDown:C,onPaste:M,onPasteFile:N,disabled:k,readOnly:p,submitType:g,prefixCls:j,styles:r,classNames:s,autoSize:A,components:y,triggerSend:oe,placeholder:T,onFocus:R,onBlur:I,skill:D,...L}),[J,ee,f,w,C,M,N,k,p,g,j,r,s,A,y,oe,T,R,I,D,L]);return o.createElement("div",Ze({key:W,ref:H,className:Y,style:{...U.style,...u,...U.styles.root,...r.root}},z),o.createElement(xg.Provider,{value:pe},o.createElement(ug.Provider,{value:fe},ce&&o.createElement(Wg.Provider,{value:{prefixCls:j}},ce),o.createElement("div",{className:a(`${j}-content`,s.content),style:r.content,onMouseDown:e=>{O||e.target===H.current?.querySelector(`.${q}`)||e.preventDefault(),e.target===H.current?.querySelector(`.${q}`)&&G.current?.focus()}},le&&o.createElement("div",{className:a(`${j}-prefix`,U.classNames.prefix,s.prefix),style:{...U.styles.prefix,...r.prefix}},le),O?o.createElement(Ng,{ref:G}):o.createElement(Lg,{ref:G}),se&&o.createElement("div",{className:a(Q,U.classNames.suffix,s.suffix),style:{...U.styles.suffix,...r.suffix}},se)),ue&&o.createElement("div",{className:a(`${j}-footer`,U.classNames.footer,s.footer),style:{...U.styles.footer,...r.footer}},ue))))}),Vg=Xg,Yg=i.forwardRef((e,t)=>{const{children:n,className:r,classNames:o={},styles:s={},icon:l,style:c,onChange:u,rootClassName:d,loading:h,defaultValue:f,value:p,checkedChildren:g,unCheckedChildren:m,disabled:b,prefixCls:y,...v}=e,{styles:x={},classNames:S={},prefixCls:w}=i.useContext(xg),C=Zh(v,{attr:!0,aria:!0,data:!0}),k=i.useId(),{direction:_,getPrefixCls:E}=Ff(),P=E("sender",y||w),$=`${P}-switch`,[M,N]=Ug(P),A=i.useRef(null);lf(t,()=>({nativeElement:A.current}));const[T,R]=og(f,{value:p,onChange:e=>{u?.(e)}}),I=df("sender"),D=a(P,$,r,d,I.classNames.switch,S.switch,o.root,M,N,{[`${$}-checked`]:T,[`${$}-rtl`]:"rtl"===_});return i.createElement("div",Ze({ref:A,className:D,key:k,style:{...c,...I.styles.switch,...x.switch,...s.root}},C),i.createElement(Xe,{disabled:b,loading:h,className:a(`${$}-content`,o.content),style:s.content,styles:{icon:s.icon,content:s.title},classNames:{icon:o.icon,content:o.title},variant:"outlined",color:T?"primary":"default",icon:l,onClick:()=>{R(!T)}},T?g:m,n))}),Kg=Vg;Kg.Header=function(e){const{title:t,onOpenChange:n,open:r,children:o,className:s,style:l,classNames:c={},styles:u={},prefixCls:d,closable:h,forceRender:f}=e,{prefixCls:p}=i.useContext(Wg),{direction:g,getPrefixCls:m}=Ff(),b=m("sender",d||p),y=`${b}-header`,v=()=>{n?.(!r)};return i.createElement(x,{motionEnter:!0,motionLeave:!0,motionName:`${y}-motion`,leavedClassName:`${y}-motion-hidden`,onEnterStart:Og,onEnterActive:Bg,onLeaveStart:Bg,onLeaveActive:Og,visible:r,forceRender:f},({className:e,style:n})=>i.createElement("div",{className:a(b,y,e,s,{[`${y}-rtl`]:"rtl"===g}),style:{...n,...l}},(!1!==h||t)&&i.createElement("div",{className:a(`${y}-header`,c.header),style:{...u.header}},i.createElement("div",{className:`${y}-title`},t),!1!==h&&i.createElement("div",{className:`${y}-close`},i.createElement(Xe,{type:"text",icon:i.createElement(kt,null),size:"small",onClick:v}))),o&&i.createElement("div",{className:a(`${y}-content`,c.content),style:{...u.content}},o)))},Kg.Switch=Yg;const Qg=e=>{const{componentCls:t,calc:n}=e,r=n(e.fontSizeHeading3).mul(e.lineHeightHeading3).equal(),i=n(e.fontSize).mul(e.lineHeight).equal();return{[t]:{gap:e.padding,[`${t}-icon`]:{height:n(r).add(i).add(e.paddingXXS).equal(),display:"flex",img:{height:"100%"}},[`${t}-content-wrapper`]:{gap:e.paddingXS,flex:"auto",minWidth:0,[`${t}-title-wrapper`]:{gap:e.paddingXS},[`${t}-title`]:{margin:0},[`${t}-extra`]:{marginInlineStart:"auto"}}}}},Jg=e=>{const{componentCls:t}=e;return{[t]:{"&-filled":{paddingInline:e.padding,paddingBlock:e.paddingSM,background:e.colorFillContent,borderRadius:e.borderRadiusLG},"&-borderless":{[`${t}-title`]:{fontSize:e.fontSizeHeading3,lineHeight:e.lineHeightHeading3}}}}},Zg=rp("Welcome",e=>{const t=ue(e,{});return[Qg(t),Jg(t)]},()=>({}));function em(e,t){const{prefixCls:n,rootClassName:r,className:i,style:s,variant:l="filled",classNames:c={},styles:u={},icon:d,title:h,description:f,extra:p}=e,{direction:g,getPrefixCls:m}=Ff(),b=m("welcome",n),y=df("welcome"),[v,x]=Zg(b),S=o.useMemo(()=>{if(!d)return null;let e=d;return"string"==typeof d&&d.startsWith("http")&&(e=o.createElement("img",{src:d,alt:"icon"})),o.createElement("div",{className:a(`${b}-icon`,y.classNames.icon,c.icon),style:u.icon},e)},[d]),w=o.useMemo(()=>h?o.createElement(pt.Title,{level:4,className:a(`${b}-title`,y.classNames.title,c.title),style:u.title},h):null,[h]),C=o.useMemo(()=>p?o.createElement("div",{className:a(`${b}-extra`,y.classNames.extra,c.extra),style:u.extra},p):null,[p]);return o.createElement(Ga,{ref:t,className:a(b,y.className,i,r,c.root,v,x,`${b}-${l}`,{[`${b}-rtl`]:"rtl"===g}),style:{...s,...u.root}},S,o.createElement(Ga,{vertical:!0,className:`${b}-content-wrapper`},p?o.createElement(Ga,{align:"flex-start",className:`${b}-title-wrapper`},w,C):w,f&&o.createElement(pt.Text,{className:a(`${b}-description`,y.classNames.description,c.description),style:u.description},f)))}const tm=o.forwardRef(em),nm=[{key:"retry",icon:D(Yi,{}),label:"Retry"},{key:"copy",icon:D(gt,{}),label:"Copy"}],rm=e=>{const t=Oe.c(4),{messages:n,currentStreamingMessage:r}=e,o=i.useRef(null);let a;if(t[0]!==r||t[1]!==n){const e=[...n];r&&e.push(r);const i=im,s=()=>e.map(e=>{const t=e.content;let n="";return e.type===Lh&&(n="reasoning-message"),{id:e.id,position:"user"===e.role?"right":"left",type:"text",title:"user"===e.role?"You":"AI Assistant",text:t,date:i(e.timestamp),status:e.isStreaming?"streaming":e.isError?"error":"sent",className:`${e.isStreaming?"streaming-message":e.isError?"error-message":""} ${n}`.trim(),role:e.role,isStreaming:e.isStreaming,isError:e.isError,originalType:e.type||"normal",reasoningContent:e.reasoningContent,content:t}});let l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l={assistant:{header:"AI",avatar:om,footer:am},user:{placement:"end",typing:!1,header:"User",avatar:sm}},t[3]=l):l=t[3];const c=l;a=D("div",{css:qh,children:0===e.length?D(V,{}):D(Dp.List,{ref:o,items:s(),role:c})}),t[0]=r,t[1]=n,t[2]=a}else a=t[2];return a};function im(e){return(e instanceof Date?e:new Date(e)).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}function om(){return D(lt,{icon:D(vr,{})})}function am(e){return D(bp,{items:nm,onClick:()=>console.log(e)})}function sm(){return D(lt,{icon:D(yt,{})})}const lm=e=>{const t=Oe.c(18),{chatInput:n,onSendMessage:r,isChatLoading:o}=e,[a,s]=i.useState(!0),l=i.useRef(null);let c,u,d;if(t[0]!==o||t[1]!==r?(c=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u())},u=e=>{const t=e||l?.current?.getText();t&&!o&&(r(t),l.current?.clear?.())},t[0]=o,t[1]=r,t[2]=c,t[3]=u):(c=t[2],u=t[3]),t[4]===Symbol.for("react.memo_cache_sentinel")){const e={file_image:{icon:D(ci,{}),label:"x-image"}};d=Object.keys(e).map(t=>{const{icon:n,label:r}=e[t];return{key:t,icon:n,label:r}}),t[4]=d}else d=t[4];const h=d;let f;t[5]===Symbol.for("react.memo_cache_sentinel")?(f={fontSize:16},t[5]=f):f=t[5];const p=f;let g;t[6]===Symbol.for("react.memo_cache_sentinel")?(g={display:"inline-flex",width:28,justifyContent:"center",alignItems:"center"},t[6]=g):g=t[6];const m=g;let b,y,v,x;return t[7]===Symbol.for("react.memo_cache_sentinel")?(b={minRows:2,maxRows:4},t[7]=b):b=t[7],t[8]!==u?(y=e=>{u(e)},t[8]=u,t[9]=y):y=t[9],t[10]!==a?(v=e=>D(Ga,{justify:"space-between",align:"center",children:W(Ga,{gap:"small",align:"center",children:[D(Xe,{style:p,type:"text",icon:D(Fi,{})}),D(wt,{value:a,checkedChildren:W(V,{children:["Deep Think:",D("span",{style:m,children:"on"})]}),unCheckedChildren:W(V,{children:["Deep Think:",D("span",{style:m,children:"off"})]}),onChange:e=>{s(e)},icon:D(zi,{})}),h.length?D(bt,{menu:{items:h},children:D(wt,{value:!1,icon:D(Ui,{}),children:"Files"})}):null]})}),t[10]=a,t[11]=v):v=t[11],t[12]!==n||t[13]!==c||t[14]!==o||t[15]!==y||t[16]!==v?(x=D("div",{css:Yh,children:D(Kg,{placeholder:"...",multiline:!0,ref:l,defaultValue:n,autoSize:b,onKeyPress:c,loading:o,disabled:o,onSubmit:y,className:"rce-custom-input",footer:v})}),t[12]=n,t[13]=c,t[14]=o,t[15]=y,t[16]=v,t[17]=x):x=t[17],x},cm=({onOptionClick:e})=>{const[t,n]=i.useState([]);return i.useEffect(()=>{const e=["AI","AI","","AI","AI","AI","AI","AI"].sort(()=>.5-Math.random());n(e.slice(0,3))},[]),W(V,{children:[D(tm,{variant:"borderless",title:"AI",description:"",css:Xh}),D(cg,{vertical:!0,title:"",items:t.map((e,t)=>({key:t,description:e})),css:Vh,onItemClick:t=>{var n;return e(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.description)}})]})},um=({isOpen:e,onClose:t,title:n="AI Assistant"})=>{const{chatMessages:r,isChatLoading:o,currentStreamingMessage:a,chatInput:s,setChatInput:l,addChatMessage:c,startStreamingMessage:u,handleMessageEvent:d,completeStreamingMessage:h,stopStreamingMessage:f}=zh(),p=i.useRef(null),g=(()=>{const e=Oe.c(2),t=R();let n;return e[0]!==t?(n={mutationFn:fs,onSuccess:()=>{t.invalidateQueries(["chatHistory"])}},e[0]=t,e[1]=n):n=e[1],Ge(n)})(),m=(()=>{const e=Oe.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t={mutationFn:hs.stopStreaming},e[0]=t):t=e[0],Ge(t)})();if(!e)return null;const b=[...r];return a&&b.push(a),D("div",{css:Oh,children:W("div",{css:Bh,children:[D(Kh,{title:n,isChatLoading:o,onClose:t,onStopStreaming:async()=>{try{await m.mutateAsync(),f()}catch(e){console.error(":",e)}}}),D("div",{css:qh,children:0===b.length?D(cm,{onOptionClick:e=>{p?.current?.insert?.(e)}}):D(rm,{messages:r,currentStreamingMessage:a})}),D(lm,{chatInput:s,setChatInput:l,onSendMessage:async e=>{if(!e.trim()||o)return;const t=e.trim(),n={id:Date.now(),role:"user",content:t,timestamp:Date.now(),isStreaming:!1,isError:!1,type:"normal"};c(n),l("");const r=Date.now()+1;u({id:r,role:"assistant",content:"",reasoningContent:"",timestamp:new Date,isStreaming:!0,isError:!1,type:"normal"});try{const e=await g.mutateAsync({message:t}),n=Ye(e=>{d(e)},40),r={content:"",reasoningContent:"",isStreaming:!0,isError:!1};for await(const t of e){if(console.log(":",t),t&&"complete"===t.type){(r.content||r.reasoningContent)&&d(r),h({content:t.content,reasoningContent:t.reasoningContent,isStreaming:!1,isError:t.isError,type:t.type});break}if(!t||t.type&&"stream"!==t.type)r.content=t?.content||"",r.reasoningContent=t?.reasoningContent||"",r.isStreaming=t?.isStreaming||!1,r.isError=t?.isError||!1,n({...r});else{if(r.content=t.content,r.reasoningContent=t.reasoningContent,r.isStreaming=t.isStreaming,r.isError=t.isError,!t.isStreaming){d(r),h({reasoningContent:t.reasoningContent,isStreaming:!1,isError:t.isError,type:a?.type||"normal"});break}n({...r})}}}catch(i){console.error(":",i),h({content:"",reasoningContent:"",isStreaming:!1,isError:!0,type:a?.type||"normal"})}},isChatLoading:o})]})})},dm={HB:{name:"HB",description:"HB",color:"#222222",params:{width:2,opacity:.85,flow:.7,pressure:.5,jitterAmount:.2,textureStrength:.3,minWidth:.8,maxWidth:4.5},usage:"",compatibility:""},"2B":{name:"2B",description:"2B",color:"#1A1A1A",params:{width:3,opacity:.9,flow:.8,pressure:.6,jitterAmount:.25,textureStrength:.4,minWidth:1.2,maxWidth:6},usage:"",compatibility:""},"3B":{name:"3B",description:"3B",color:"#111111",params:{width:4,opacity:.92,flow:.85,pressure:.7,jitterAmount:.3,textureStrength:.5,minWidth:1.5,maxWidth:8},usage:"",compatibility:"2048"},"4B":{name:"4B",description:"4B",color:"#0A0A0A",params:{width:5,opacity:.94,flow:.9,pressure:.75,jitterAmount:.35,textureStrength:.6,minWidth:2,maxWidth:10},usage:"",compatibility:""},"5B":{name:"5B",description:"5B",color:"#050505",params:{width:6,opacity:.96,flow:.95,pressure:.8,jitterAmount:.4,textureStrength:.65,minWidth:2.5,maxWidth:13},usage:"",compatibility:""},"6B":{name:"6B",description:"6B",color:"#000000",params:{width:7,opacity:.98,flow:.98,pressure:.85,jitterAmount:.45,textureStrength:.7,minWidth:3,maxWidth:16},usage:"",compatibility:""},"7B":{name:"7B",description:"7B",color:"#000000",params:{width:8,opacity:1,flow:1,pressure:.9,jitterAmount:.5,textureStrength:.75,minWidth:3.5,maxWidth:19},usage:"",compatibility:""},"8B":{name:"8B",description:"8B",color:"#000000",params:{width:9,opacity:1,flow:1,pressure:.95,jitterAmount:.55,textureStrength:.8,minWidth:4,maxWidth:22},usage:"",compatibility:""},MarcoBlack:{name:"",description:"24-",color:"#000000",params:{width:3,opacity:.9,flow:.95,pressure:.8,jitterAmount:.2,textureStrength:.3,minWidth:1,maxWidth:8},usage:"",compatibility:""},MarcoDarkGray:{name:"",description:"24-",color:"#444444",params:{width:3,opacity:.8,flow:.85,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},MarcoMediumGray:{name:"",description:"24-",color:"#888888",params:{width:3,opacity:.7,flow:.8,pressure:.6,jitterAmount:.3,textureStrength:.4,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoLightGray:{name:"",description:"24-",color:"#CCCCCC",params:{width:3,opacity:.6,flow:.75,pressure:.5,jitterAmount:.35,textureStrength:.45,minWidth:1,maxWidth:5},usage:"",compatibility:""},MarcoBrown:{name:"",description:"24-",color:"#8B4513",params:{width:3,opacity:.8,flow:.85,pressure:.7,jitterAmount:.25,textureStrength:.4,minWidth:1,maxWidth:7},usage:"",compatibility:""},MarcoDarkBrown:{name:"",description:"24-",color:"#654321",params:{width:3,opacity:.85,flow:.9,pressure:.75,jitterAmount:.25,textureStrength:.4,minWidth:1,maxWidth:7},usage:"",compatibility:""},MarcoRed:{name:"",description:"24-",color:"#FF0000",params:{width:3,opacity:.8,flow:.85,pressure:.7,jitterAmount:.25,textureStrength:.4,minWidth:1,maxWidth:7},usage:"",compatibility:""},MarcoDarkRed:{name:"",description:"24-",color:"#8B0000",params:{width:3,opacity:.85,flow:.9,pressure:.75,jitterAmount:.25,textureStrength:.4,minWidth:1,maxWidth:7},usage:"",compatibility:""},MarcoOrange:{name:"",description:"24-",color:"#FFA500",params:{width:3,opacity:.8,flow:.85,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoDarkOrange:{name:"",description:"24-",color:"#FF8C00",params:{width:3,opacity:.85,flow:.9,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoYellow:{name:"",description:"24-",color:"#FFFF00",params:{width:3,opacity:.75,flow:.8,pressure:.65,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoDarkYellow:{name:"",description:"24-",color:"#FFD700",params:{width:3,opacity:.8,flow:.85,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoGreen:{name:"",description:"24-",color:"#008000",params:{width:3,opacity:.75,flow:.8,pressure:.65,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoDarkGreen:{name:"",description:"24-",color:"#006400",params:{width:3,opacity:.8,flow:.85,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoCyan:{name:"",description:"24-",color:"#00FFFF",params:{width:3,opacity:.7,flow:.75,pressure:.6,jitterAmount:.25,textureStrength:.3,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoBlue:{name:"",description:"24-",color:"#0000FF",params:{width:3,opacity:.75,flow:.8,pressure:.65,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoNavyBlue:{name:"",description:"24-",color:"#000080",params:{width:3,opacity:.8,flow:.85,pressure:.7,jitterAmount:.25,textureStrength:.4,minWidth:1,maxWidth:7},usage:"",compatibility:""},MarcoPurple:{name:"",description:"24-",color:"#800080",params:{width:3,opacity:.75,flow:.8,pressure:.65,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoDarkPurple:{name:"",description:"24-",color:"#4B0082",params:{width:3,opacity:.8,flow:.85,pressure:.7,jitterAmount:.25,textureStrength:.4,minWidth:1,maxWidth:7},usage:"",compatibility:""},MarcoPink:{name:"",description:"24-",color:"#FFC0CB",params:{width:3,opacity:.7,flow:.75,pressure:.6,jitterAmount:.25,textureStrength:.3,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoDarkPink:{name:"",description:"24-",color:"#FF1493",params:{width:3,opacity:.75,flow:.8,pressure:.65,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoRose:{name:"",description:"24-",color:"#FF69B4",params:{width:3,opacity:.75,flow:.8,pressure:.65,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoFlesh:{name:"",description:"24-",color:"#FFDAB9",params:{width:3,opacity:.7,flow:.75,pressure:.6,jitterAmount:.2,textureStrength:.3,minWidth:1,maxWidth:6},usage:"",compatibility:""},MarcoWhite:{name:"",description:"24-",color:"#FFFFFF",params:{width:3,opacity:.6,flow:.7,pressure:.5,jitterAmount:.2,textureStrength:.3,minWidth:1,maxWidth:6},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#8B0000",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#d84d4d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#3f0000",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#6e0c0c",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FF0000",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ff4d4d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b30000",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#c91717",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FF007F",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ff4dcc",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b30033",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#ce1b74",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFC0CB",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffd9e0",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b3747f",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#f2c6ce",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FF7F50",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffcc9d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b33304",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#e28968",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FF6347",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffb094",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b31700",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#dd705c",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#B22222",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ff6f6f",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#660000",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#942f2f",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#800020",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#cd4d6d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#340000",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#660d23",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFB6C1",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffe6ec",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b36a75",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#f0bdc5",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FF1493",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ff61e0",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b30047",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#d22d86",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFA500",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#fff24d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b35900",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#e6a734",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FF8C00",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffd94d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b34000",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#e29230",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFD700",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffff4d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b38b00",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#efd33d",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFB347",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffff94",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b36700",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#ebb66b",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFBF00",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffff4d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b37300",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#ebbe39",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FF7F00",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffcc4d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b33300",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#e0862d",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFE5B4",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#fff0d9",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b39968",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#f8e6c3",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFFF00",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffff4d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b3b300",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#f6f644",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFFF99",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffffe6",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b3b34d",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#fcfcb4",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFD700",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffff4d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b38b00",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#efd33d",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#F5DEB3",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#fff5e6",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#a99267",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#efdfc0",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFFFCC",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#fff8d9",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b3b380",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#fdfdda",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFFFE0",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffffe6",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b3b394",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#fefee8",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#FFCC00",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ffff4d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#b38000",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#edca3b",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#008000",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#4dcd4d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#003400",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#177017",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#006400",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#4db14d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#001800",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#125812",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#90EE90",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#ddffdd",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#44a244",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#a1e2a1",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#7CFC00",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#c9ff4d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#30b000",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#8ee837",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#00FF00",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#4dff4d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#00b300",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#2ddf2d",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#808000",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#cdcd4d",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#343400",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#7c7c22",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#98FB98",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#e5ffe5",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#4caf4c",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#a9efa9",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#228B22",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#6fd86f",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#003f00",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#347e34",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#32CD32",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#7fff7f",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#008100",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#4dba4d",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#20B2AA",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#6dfff7",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#00665e",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#3ea59f",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#9ACD32",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#e7ff7f",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#4e8100",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#9fc357",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#0000FF",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#4d4dff",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#0000b3",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#0909bb",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#00008B",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#4d4dd8",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"PrismacolorDark":{name:"",description:"-",color:"#00003f",params:{width:3,opacity:.9,flow:.9,pressure:.8,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:8},usage:"",compatibility:""},"PrismacolorDesaturated":{name:"",description:"-",color:"#050566",params:{width:3,opacity:.8,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#87CEEB",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"PrismacolorLight":{name:"",description:"-",color:"#d4ffff",params:{width:3,opacity:.75,flow:.8,pressure:.7,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:6},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#87CEFA",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#00BFFF",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#000080",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#4B0082",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#4682B4",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#B0E0E6",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#4169E1",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""},"Prismacolor":{name:"",description:"-",color:"#1E90FF",params:{width:3,opacity:.85,flow:.85,pressure:.75,jitterAmount:.25,textureStrength:.35,minWidth:1,maxWidth:7},usage:"",compatibility:""}},hm=L(z((e,t)=>({tool:"pen",scale:1,color:"#222222",lines:[],layers:[],shapeType:"line",isMultiPointDrawing:!1,multiPointShape:null,vanishingPoint:null,showVanishingLines:!0,brushFlow:.7,brushSmoothness:0,brushWidth:2,brushType:"pencil",pencilConfig:{jitterAmount:1.5,textureStrength:.3},brushConfig:{brushSoftness:.8,inkSpread:.2},brushPreset:"HB",pencilPresets:dm,setTool:t=>e(e=>{e.tool=t}),setScale:t=>e(e=>{e.scale=t}),setColor:t=>e(e=>{e.color=t}),setLines:t=>e(e=>{e.lines=t}),setLayers:t=>e(e=>{e.layers=t}),setShapeType:t=>e(e=>{e.shapeType=t}),setBrushFlow:t=>e(e=>{e.brushFlow=Math.max(.1,Math.min(1,t))}),setBrushSmoothness:t=>e(e=>{e.brushSmoothness=Math.max(0,Math.min(1,t))}),setBrushWidth:t=>e(e=>{e.brushWidth=Math.max(1,Math.min(20,t))}),setBrushType:t=>e(e=>{e.brushType=t}),setBrushPreset:t=>e(e=>{if(e.brushPreset=t,"pencil"===e.brushType&&e.pencilPresets[t]){const n=e.pencilPresets[t],r=n.params;void 0!==n.color&&(e.color=n.color),void 0!==r.flow&&(e.brushFlow=r.flow),void 0!==r.width&&(e.brushWidth=r.width),void 0!==r.jitterAmount&&(e.pencilConfig.jitterAmount=r.jitterAmount),void 0!==r.textureStrength&&(e.pencilConfig.textureStrength=r.textureStrength)}}),applyPresetToBrush:(e,n)=>{const r=t();if("pencil"===r.brushType&&r.pencilPresets[e]){const t=r.pencilPresets[e];n.loadPreset(e),n.set("color",t.color)}},addLine:t=>e(e=>{e.lines.push(t)}),updateLastLine:t=>e(e=>{e.lines.length>0&&(e.lines[e.lines.length-1].points=t)}),startMultiPointDrawing:(t,n,r)=>e(e=>{e.isMultiPointDrawing=!0,e.multiPointShape={type:t,points:[n.x,n.y],color:r}}),addPointToMultiPointDrawing:t=>e(e=>{e.isMultiPointDrawing&&e.multiPointShape&&(Array.isArray(e.multiPointShape.points)||(e.multiPointShape.points=[]),e.multiPointShape.points.push(t.x,t.y))}),finishMultiPointDrawing:()=>e(e=>{e.isMultiPointDrawing&&e.multiPointShape&&(e.multiPointShape.points&&e.multiPointShape.points.length>=4&&e.lines.push({tool:"shape",shapeType:"multiLine",points:e.multiPointShape.points,color:e.multiPointShape.color}),e.isMultiPointDrawing=!1,e.multiPointShape=null)}),cancelMultiPointDrawing:()=>e(e=>{e.isMultiPointDrawing=!1,e.multiPointShape=null}),setVanishingPoint:t=>e(e=>{e.vanishingPoint=t}),clearVanishingPoint:()=>e(e=>{e.vanishingPoint=null}),toggleVanishingLines:()=>e(e=>{e.showVanishingLines=!e.showVanishingLines}),resetScale:()=>e(e=>{e.scale=1}),clearLines:()=>e(e=>{e.lines=[]}),getCurrentTool:()=>t().tool,getCurrentColor:()=>t().color,getCurrentLines:()=>t().lines}))),{Group:fm}=On,{Text:pm}=pt,gm={position:"absolute",top:20,left:20,zIndex:1e3,minWidth:180,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(4px)"},mm={fontSize:"11px"},bm={header:{fontSize:"12px",padding:"8px 12px"},body:{padding:"8px 12px"}},ym=e=>{const t=Oe.c(28),{tool:n,shape:r,color:i,scale:o,style:a}=e;let s;t[0]!==a?(s=void 0===a?{}:a,t[0]=a,t[1]=s):s=t[1];const l=s;let c,u,d;if("pen"===n)c="",u="";else if("eraser"===n)c="",u="";else if("shape"===n){c="";e:switch(r){case"line":u="";break e;case"curve":u="";break e;case"rectangle":u="";break e;case"circle":u="";break e;case"triangle":u="";break e;case"custom":u="";break e;case"multiLine":u="";break e;default:u=""}}else c="",u="";t[2]!==i||t[3]!==o||t[4]!==u||t[5]!==c?(d={tool:c,shape:u,color:i,scale:o},t[2]=i,t[3]=o,t[4]=u,t[5]=c,t[6]=d):d=t[6];const h=d;let f;t[7]!==l?(f={...gm,...l},t[7]=l,t[8]=f):f=t[8];const p=f;let g,m,b,y,v,x,S,w,C,k;return t[9]===Symbol.for("react.memo_cache_sentinel")?(g={display:"flex",flexDirection:"column",gap:"6px"},m=D(pm,{strong:!0,style:mm,children:""}),t[9]=g,t[10]=m):(g=t[9],m=t[10]),t[11]!==h.tool?(b=W("div",{children:[m,D(pm,{style:mm,children:h.tool})]}),t[11]=h.tool,t[12]=b):b=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(y=D(pm,{strong:!0,style:mm,children:""}),t[13]=y):y=t[13],t[14]!==h.shape?(v=W("div",{children:[y,D(pm,{style:mm,children:h.shape})]}),t[14]=h.shape,t[15]=v):v=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(x=D(pm,{strong:!0,style:mm,children:""}),t[16]=x):x=t[16],t[17]!==h.scale?(S=Math.round(100*h.scale),t[17]=h.scale,t[18]=S):S=t[18],t[19]!==S?(w=W("div",{children:[x,W(pm,{style:mm,children:[S,"%"]})]}),t[19]=S,t[20]=w):w=t[20],t[21]!==w||t[22]!==b||t[23]!==v?(C=W("div",{style:g,children:[b,v,w]}),t[21]=w,t[22]=b,t[23]=v,t[24]=C):C=t[24],t[25]!==p||t[26]!==C?(k=D(Qn,{style:p,size:"small",title:"",styles:bm,children:C}),t[25]=p,t[26]=C,t[27]=k):k=t[27],k},vm=function(e={}){const{scriptUrl:t,extraCommonProps:n={}}=e;t&&"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(t)?io(t.reverse()):io([t]));const r=i.forwardRef((e,t)=>{const{type:r,children:o,...a}=e;let s=null;return e.type&&(s=i.createElement("use",{xlinkHref:`#${r}`})),o&&(s=o),i.createElement(to,no({},n,a,{ref:t}),s)});return r.displayName="Iconfont",r}({scriptUrl:["//at.alicdn.com/t/c/font_5066527_8ud9wch0zv4.js"]}),xm=Math.PI/180;const Sm="undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},wm={_global:Sm,version:"10.0.12",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle:e=>wm.angleDeg?e*xm:e,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>wm.DD.isDragging,isTransforming(){var e,t;return null!==(t=null===(e=wm.Transformer)||void 0===e?void 0:e.isTransforming())&&void 0!==t&&t},isDragReady:()=>!!wm.DD.node,releaseCanvasOnDestroy:!0,document:Sm.document,_injectGlobal(e){void 0!==Sm.Konva&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Sm.Konva=e}},Cm=e=>{wm[e.prototype.getClassName()]=e};wm._injectGlobal(wm);const km=()=>{if("undefined"==typeof document)throw new Error('Konva.js unsupported environment.\n\nLooks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.\n\nTo use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.\n\nbash: npm install canvas\njs: import "konva/canvas-backend";\n\nor\n\nbash: npm install skia-canvas\njs: import "konva/skia-backend";\n')};class _m{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new _m(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.m[0]*t+this.m[2]*n,i=this.m[1]*t+this.m[3]*n,o=this.m[0]*-n+this.m[2]*t,a=this.m[1]*-n+this.m[3]*t;return this.m[0]=r,this.m[1]=i,this.m[2]=o,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){const n=this.m[0]+this.m[2]*t,r=this.m[1]+this.m[3]*t,i=this.m[2]+this.m[0]*e,o=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=o,this}multiply(e){const t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],i=this.m[1]*e.m[2]+this.m[3]*e.m[3],o=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],a=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=o,this.m[5]=a,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,r=-this.m[2]*e,i=this.m[0]*e,o=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=o,this.m[5]=a,this}getMatrix(){return this.m}decompose(){const e=this.m[0],t=this.m[1],n=this.m[2],r=this.m[3],i=e*r-t*n,o={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=e||0!=t){const a=Math.sqrt(e*e+t*t);o.rotation=t>0?Math.acos(e/a):-Math.acos(e/a),o.scaleX=a,o.scaleY=i/a,o.skewX=(e*n+t*r)/i,o.skewY=0}else if(0!=n||0!=r){const a=Math.sqrt(n*n+r*r);o.rotation=Math.PI/2-(r>0?Math.acos(-n/a):-Math.acos(n/a)),o.scaleX=i/a,o.scaleY=a,o.skewX=0,o.skewY=(e*n+t*r)/i}return o.rotation=Dm._getRotation(o.rotation),o}}const Em=Math.PI/180,Pm=180/Math.PI,$m="#",Mm="Konva error: ",Nm={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Am=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let Tm=[],Rm=null;const Im="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(e){setTimeout(e,60)},Dm={_isElement:e=>!(!e||1!=e.nodeType),_isFunction:e=>!!(e&&e.constructor&&e.call&&e.apply),_isPlainObject:e=>!!e&&e.constructor===Object,_isArray:e=>"[object Array]"===Object.prototype.toString.call(e),_isNumber:e=>"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)&&isFinite(e),_isString:e=>"[object String]"===Object.prototype.toString.call(e),_isBoolean:e=>"[object Boolean]"===Object.prototype.toString.call(e),isObject:e=>e instanceof Object,isValidSelector(e){if("string"!=typeof e)return!1;const t=e[0];return"#"===t||"."===t||t===t.toUpperCase()},_sign:e=>0===e||e>0?1:-1,requestAnimFrame(e){Tm.push(e),1===Tm.length&&Im(function(){const e=Tm;Tm=[],e.forEach(function(e){e()})})},createCanvasElement(){km();const e=document.createElement("canvas");try{e.style=e.style||{}}catch(uS){}return e},createImageElement:()=>(km(),document.createElement("img")),_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){const n=Dm.createImageElement();n.onload=function(){t(n)},n.src=e},_rgbToHex:(e,t,n)=>((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1),_hexToRgb(e){e=e.replace($m,"");const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor(){let e=(16777215*Math.random()|0).toString(16);for(;e.length<6;)e="0"+e;return $m+e},isCanvasFarblingActive(){if(null!==Rm)return Rm;if("undefined"==typeof document)return Rm=!1,!1;const e=this.createCanvasElement();e.width=10,e.height=10;const t=e.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const n=t.getImageData(0,0,10,10).data;let r=!1;for(let i=0;i<100;i++)if(40!==n[4*i]||40!==n[4*i+1]||40!==n[4*i+2]||255!==n[4*i+3]){r=!0;break}return Rm=r,this.releaseCanvas(e),Rm},getHitColor(){const e=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(e):e},getHitColorKey(e,t,n){return this.isCanvasFarblingActive()&&(e=5*Math.round(e/5),t=5*Math.round(t/5),n=5*Math.round(n/5)),$m+this._rgbToHex(e,t,n)},getSnappedHexColor(e){const t=this._hexToRgb(e);return $m+this._rgbToHex(5*Math.round(t.r/5),5*Math.round(t.g/5),5*Math.round(t.b/5))},getRGB(e){let t;return e in Nm?(t=Nm[e],{r:t[0],g:t[1],b:t[2]}):e[0]===$m?this._hexToRgb(e.substring(1)):"rgb("===e.substr(0,4)?(t=Am.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA:e=>(e=e||"black",Dm._namedColorToRBA(e)||Dm._hex3ColorToRGBA(e)||Dm._hex4ColorToRGBA(e)||Dm._hex6ColorToRGBA(e)||Dm._hex8ColorToRGBA(e)||Dm._rgbColorToRGBA(e)||Dm._rgbaColorToRGBA(e)||Dm._hslColorToRGBA(e)),_namedColorToRBA(e){const t=Nm[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(0===e.indexOf("rgb(")){const t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(0===e.indexOf("rgba(")){const t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((e,t)=>"%"===e.slice(-1)?3===t?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if("#"===e[0]&&9===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if("#"===e[0]&&5===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),r=Number(n[0])/360,i=Number(n[1])/100,o=Number(n[2])/100;let a,s,l;if(0===i)return l=255*o,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};a=o<.5?o*(1+i):o+i-o*i;const c=2*o-a,u=[0,0,0];for(let e=0;e<3;e++)s=r+1/3*-(e-1),s<0&&s++,s>1&&s--,l=6*s<1?c+6*(a-c)*s:2*s<1?a:3*s<2?c+(a-c)*(2/3-s)*6:c,u[e]=255*l;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection:(e,t)=>!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y),cloneObject(e){const t={};for(const n in e)this._isPlainObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray:e=>e.slice(0),degToRad:e=>e*Em,radToDeg:e=>e*Pm,_degToRad:e=>(Dm.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),Dm.degToRad(e)),_radToDeg:e=>(Dm.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),Dm.radToDeg(e)),_getRotation:e=>wm.angleDeg?Dm.radToDeg(e):e,_capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),throw(e){throw new Error(Mm+e)},error(e){console.error(Mm+e)},warn(e){wm.showWarnings&&console.warn("Konva warning: "+e)},each(e,t){for(const n in e)t(n,e[n])},_inRange:(e,t,n)=>t<=e&&e<n,_getProjectionToSegment(e,t,n,r,i,o){let a,s,l;const c=(e-n)*(e-n)+(t-r)*(t-r);if(0==c)a=e,s=t,l=(i-n)*(i-n)+(o-r)*(o-r);else{const u=((i-e)*(n-e)+(o-t)*(r-t))/c;u<0?(a=e,s=t,l=(e-i)*(e-i)+(t-o)*(t-o)):u>1?(a=n,s=r,l=(n-i)*(n-i)+(r-o)*(r-o)):(a=e+u*(n-e),s=t+u*(r-t),l=(a-i)*(a-i)+(s-o)*(s-o))}return[a,s,l]},_getProjectionToLine(e,t,n){const r=Dm.cloneObject(e);let i=Number.MAX_VALUE;return t.forEach(function(o,a){if(!n&&a===t.length-1)return;const s=t[(a+1)%t.length],l=Dm._getProjectionToSegment(o.x,o.y,s.x,s.y,e.x,e.y),c=l[0],u=l[1],d=l[2];d<i&&(r.x=c,r.y=u,i=d)}),r},_prepareArrayForTween(e,t,n){const r=[],i=[];if(e.length>t.length){const n=t;t=e,e=n}for(let a=0;a<e.length;a+=2)r.push({x:e[a],y:e[a+1]});for(let a=0;a<t.length;a+=2)i.push({x:t[a],y:t[a+1]});const o=[];return i.forEach(function(e){const t=Dm._getProjectionToLine(e,r,n);o.push(t.x),o.push(t.y)}),o},_prepareToStringify(e){let t;e.visitedByCircularReferenceRemoval=!0;for(const n in e)if(e.hasOwnProperty(n)&&e[n]&&"object"==typeof e[n])if(t=Object.getOwnPropertyDescriptor(e,n),e[n].visitedByCircularReferenceRemoval||Dm._isElement(e[n])){if(!t.configurable)return null;delete e[n]}else if(null===Dm._prepareToStringify(e[n])){if(!t.configurable)return null;delete e[n]}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(const n in t)e[n]=t[n];return e},_getFirstPointerId:e=>e.touches?e.changedTouches[0].identifier:e.pointerId||999,releaseCanvas(...e){wm.releaseCanvasOnDestroy&&e.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(e,t,n,r){let i=t<0?t:0,o=n<0?n:0;t=Math.abs(t),n=Math.abs(n);let a=0,s=0,l=0,c=0;"number"==typeof r?a=s=l=c=Math.min(r,t/2,n/2):(a=Math.min(r[0]||0,t/2,n/2),s=Math.min(r[1]||0,t/2,n/2),c=Math.min(r[2]||0,t/2,n/2),l=Math.min(r[3]||0,t/2,n/2)),e.moveTo(i+a,o),e.lineTo(i+t-s,o),e.arc(i+t-s,o+s,s,3*Math.PI/2,0,!1),e.lineTo(i+t,o+n-c),e.arc(i+t-c,o+n-c,c,0,Math.PI/2,!1),e.lineTo(i+l,o+n),e.arc(i+l,o+n-l,l,Math.PI/2,Math.PI,!1),e.lineTo(i,o+a),e.arc(i+a,o+a,a,Math.PI,3*Math.PI/2,!1)},drawRoundedPolygonPath(e,t,n,r,i){r=Math.abs(r);for(let o=0;o<n;o++){const a=t[(o-1+n)%n],s=t[o],l=t[(o+1)%n],c={x:s.x-a.x,y:s.y-a.y},u={x:l.x-s.x,y:l.y-s.y},d=Math.hypot(c.x,c.y),h=Math.hypot(u.x,u.y);let f;f="number"==typeof i?i:o<i.length?i[o]:0;f=r*Math.cos(Math.PI/n)*Math.min(1,f/r*2);const p={x:c.x/d,y:c.y/d},g={x:u.x/h,y:u.y/h},m={x:s.x-p.x*f,y:s.y-p.y*f},b={x:s.x+g.x*f,y:s.y+g.y*f};0===o?e.moveTo(m.x,m.y):e.lineTo(m.x,m.y),e.arcTo(s.x,s.y,b.x,b.y,f)}}};const Lm=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];let zm,Wm=null;function Om(){if(null!==Wm)return Wm;try{const e=Dm.createCanvasElement().getContext("2d");return e?!!e&&"filter"in e:(Wm=!1,!1)}catch(uS){return Wm=!1,!1}}class Bm{constructor(e){this.canvas=e,wm.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){let n,r,i,o,a=this.traceArr,s=a.length,l="";for(n=0;n<s;n++)r=a[n],i=r.method,i?(o=r.args,l+=i,e?l+="()":Dm._isArray(o[0])?l+="(["+o.join(",")+"])":(t&&(o=o.map(e=>"number"==typeof e?Math.floor(e):e)),l+="("+o.join(",")+")")):(l+=r.property,e||(l+="="+r.val)),l+=";";return l}clearTrace(){this.traceArr=[]}_trace(e){let t,n=this.traceArr;n.push(e),t=n.length,t>=100&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){const t=e.getAbsoluteOpacity();1!==t&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}_applyMiterLimit(e){const t=e.attrs.miterLimit;null!=t&&this.setAttr("miterLimit",t)}setAttr(e,t){this._context[e]=t}arc(e,t,n,r,i,o){this._context.arc(e,t,n,r,i,o)}arcTo(e,t,n,r,i){this._context.arcTo(e,t,n,r,i)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,n,r,i,o){this._context.bezierCurveTo(e,t,n,r,i,o)}clearRect(e,t,n,r){this._context.clearRect(e,t,n,r)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){const n=arguments;return 2===n.length?this._context.createImageData(e,t):1===n.length?this._context.createImageData(e):void 0}createLinearGradient(e,t,n,r){return this._context.createLinearGradient(e,t,n,r)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,n,r,i,o){return this._context.createRadialGradient(e,t,n,r,i,o)}drawImage(e,t,n,r,i,o,a,s,l){const c=arguments,u=this._context;3===c.length?u.drawImage(e,t,n):5===c.length?u.drawImage(e,t,n,r,i):9===c.length&&u.drawImage(e,t,n,r,i,o,a,s,l)}ellipse(e,t,n,r,i,o,a,s){this._context.ellipse(e,t,n,r,i,o,a,s)}isPointInPath(e,t,n,r){return n?this._context.isPointInPath(n,e,t,r):this._context.isPointInPath(e,t,r)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,n,r){this._context.fillRect(e,t,n,r)}strokeRect(e,t,n,r){this._context.strokeRect(e,t,n,r)}fillText(e,t,n,r){r?this._context.fillText(e,t,n,r):this._context.fillText(e,t,n)}measureText(e){return this._context.measureText(e)}getImageData(e,t,n,r){return this._context.getImageData(e,t,n,r)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,n,r){this._context.rect(e,t,n,r)}roundRect(e,t,n,r,i){this._context.roundRect(e,t,n,r,i)}putImageData(e,t,n){this._context.putImageData(e,t,n)}quadraticCurveTo(e,t,n,r){this._context.quadraticCurveTo(e,t,n,r)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,n,r,i,o){this._context.setTransform(e,t,n,r,i,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,n,r){this._context.strokeText(e,t,n,r)}transform(e,t,n,r,i,o){this._context.transform(e,t,n,r,i,o)}translate(e,t){this._context.translate(e,t)}_enableTrace(){let e,t,n=this,r=Lm.length,i=this.setAttr;const o=function(e){let r,i=n[e];n[e]=function(){return t=function(e){const t=[],n=e.length,r=Dm;for(let i=0;i<n;i++){let n=e[i];r._isNumber(n)?n=Math.round(1e3*n)/1e3:r._isString(n)||(n+=""),t.push(n)}return t}(Array.prototype.slice.call(arguments,0)),r=i.apply(n,arguments),n._trace({method:e,args:t}),r}};for(e=0;e<r;e++)o(Lm[e]);n.setAttr=function(){i.apply(n,arguments);const e=arguments[0];let t=arguments[1];"shadowOffsetX"!==e&&"shadowOffsetY"!==e&&"shadowBlur"!==e||(t/=this.canvas.getPixelRatio()),n._trace({property:e,val:t})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||"source-over"===t||this.setAttr("globalCompositeOperation",t)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"].forEach(function(e){Object.defineProperty(Bm.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class Fm extends Bm{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){const t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),n=e.getFillPriority();if(t&&"color"===n)return void this._fillColor(e);const r=e.getFillPatternImage();if(r&&"pattern"===n)return void this._fillPattern(e);const i=e.getFillLinearGradientColorStops();if(i&&"linear-gradient"===n)return void this._fillLinearGradient(e);const o=e.getFillRadialGradientColorStops();o&&"radial-gradient"===n?this._fillRadialGradient(e):t?this._fillColor(e):r?this._fillPattern(e):i?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),r=e.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(t.x,t.y,n.x,n.y);if(r){for(let e=0;e<r.length;e+=2)i.addColorStop(r[e],r[e+1]);this.setAttr("strokeStyle",i)}}_stroke(e){const t=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();const e=this.getCanvas().getPixelRatio();this.setTransform(e,0,0,e,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var t,n,r;const i=null!==(t=e.getShadowRGBA())&&void 0!==t?t:"black",o=null!==(n=e.getShadowBlur())&&void 0!==n?n:5,a=null!==(r=e.getShadowOffset())&&void 0!==r?r:{x:0,y:0},s=e.getAbsoluteScale(),l=this.canvas.getPixelRatio(),c=s.x*l,u=s.y*l;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(u))),this.setAttr("shadowOffsetX",a.x*c),this.setAttr("shadowOffsetY",a.y*u)}}class jm extends Bm{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const t=e.getStrokeScaleEnabled();if(!t){this.save();const e=this.getCanvas().getPixelRatio();this.setTransform(e,0,0,e,0,0)}this._applyLineCap(e);const n=e.hitStrokeWidth(),r="auto"===n?e.strokeWidth():n;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}}let Hm=class{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const t=(e||{}).pixelRatio||wm.pixelRatio||function(){if(zm)return zm;const e=Dm.createCanvasElement(),t=e.getContext("2d");return zm=(wm._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),Dm.releaseCanvas(e),zm}();this.pixelRatio=t,this._canvas=Dm.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch(uS){try{return this._canvas.toDataURL()}catch(n){return Dm.error("Unable to get data URL. "+n.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};class Gm extends Hm{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new Fm(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}class Um extends Hm{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new jm(this),this.setSize(e.width,e.height)}}const qm={get isDragging(){let e=!1;return qm._dragElements.forEach(t=>{"dragging"===t.dragStatus&&(e=!0)}),e},justDragged:!1,get node(){let e;return qm._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const t=[];qm._dragElements.forEach((n,r)=>{const{node:i}=n,o=i.getStage();o.setPointersPositions(e),void 0===n.pointerId&&(n.pointerId=Dm._getFirstPointerId(e));const a=o._changedPointerPositions.find(e=>e.id===n.pointerId);if(a){if("dragging"!==n.dragStatus){const t=i.dragDistance();if(Math.max(Math.abs(a.x-n.startPointerPos.x),Math.abs(a.y-n.startPointerPos.y))<t)return;if(i.startDrag({evt:e}),!i.isDragging())return}i._setDragPosition(e,n),t.push(i)}}),t.forEach(t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:e},!0)})},_endDragBefore(e){const t=[];qm._dragElements.forEach(n=>{const{node:r}=n,i=r.getStage();e&&i.setPointersPositions(e);if(!i._changedPointerPositions.find(e=>e.id===n.pointerId))return;"dragging"!==n.dragStatus&&"stopped"!==n.dragStatus||(qm.justDragged=!0,wm._mouseListenClick=!1,wm._touchListenClick=!1,wm._pointerListenClick=!1,n.dragStatus="stopped");const o=n.node.getLayer()||n.node instanceof wm.Stage&&n.node;o&&-1===t.indexOf(o)&&t.push(o)}),t.forEach(e=>{e.draw()})},_endDragAfter(e){qm._dragElements.forEach((t,n)=>{"stopped"===t.dragStatus&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),"dragging"!==t.dragStatus&&qm._dragElements.delete(n)})}};function Xm(e){return Dm._isString(e)?'"'+e+'"':"[object Number]"===Object.prototype.toString.call(e)||Dm._isBoolean(e)?e:Object.prototype.toString.call(e)}function Vm(e){return e>255?255:e<0?0:Math.round(e)}function Ym(){if(wm.isUnminified)return function(e,t){return Dm._isNumber(e)||Dm.warn(Xm(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function Km(e){if(wm.isUnminified)return function(t,n){let r=Dm._isNumber(t),i=Dm._isArray(t)&&t.length==e;return r||i||Dm.warn(Xm(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function Qm(){if(wm.isUnminified)return function(e,t){return Dm._isNumber(e)||"auto"===e||Dm.warn(Xm(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function Jm(){if(wm.isUnminified)return function(e,t){return Dm._isString(e)||Dm.warn(Xm(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function Zm(){if(wm.isUnminified)return function(e,t){const n=Dm._isString(e),r="[object CanvasGradient]"===Object.prototype.toString.call(e)||e&&e.addColorStop;return n||r||Dm.warn(Xm(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function eb(){if(wm.isUnminified)return function(e,t){return!0===e||!1===e||Dm.warn(Xm(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}wm.isBrowser&&(window.addEventListener("mouseup",qm._endDragBefore,!0),window.addEventListener("touchend",qm._endDragBefore,!0),window.addEventListener("touchcancel",qm._endDragBefore,!0),window.addEventListener("mousemove",qm._drag),window.addEventListener("touchmove",qm._drag),window.addEventListener("mouseup",qm._endDragAfter,!1),window.addEventListener("touchend",qm._endDragAfter,!1),window.addEventListener("touchcancel",qm._endDragAfter,!1));const tb="get",nb="set",rb={addGetterSetter(e,t,n,r,i){rb.addGetter(e,t,n),rb.addSetter(e,t,r,i),rb.addOverloadedGetterSetter(e,t)},addGetter(e,t,n){const r=tb+Dm._capitalize(t);e.prototype[r]=e.prototype[r]||function(){const e=this.attrs[t];return void 0===e?n:e}},addSetter(e,t,n,r){const i=nb+Dm._capitalize(t);e.prototype[i]||rb.overWriteSetter(e,t,n,r)},overWriteSetter(e,t,n,r){const i=nb+Dm._capitalize(t);e.prototype[i]=function(e){return n&&null!=e&&(e=n.call(this,e,t)),this._setAttr(t,e),r&&r.call(this),this}},addComponentsGetterSetter(e,t,n,r,i){const o=n.length,a=Dm._capitalize,s=tb+a(t),l=nb+a(t);e.prototype[s]=function(){const e={};for(let r=0;r<o;r++){const i=n[r];e[i]=this.getAttr(t+a(i))}return e};const c=function(e){if(wm.isUnminified)return function(t,n){return null==t||Dm.isObject(t)||Dm.warn(Xm(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}}(n);e.prototype[l]=function(e){const o=this.attrs[t];r&&(e=r.call(this,e,t)),c&&c.call(this,e,t);for(const n in e)e.hasOwnProperty(n)&&this._setAttr(t+a(n),e[n]);return e||n.forEach(e=>{this._setAttr(t+a(e),void 0)}),this._fireChangeEvent(t,o,e),i&&i.call(this),this},rb.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){const n=Dm._capitalize(t),r=nb+n,i=tb+n;e.prototype[t]=function(){return arguments.length?(this[r](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter(e,t,n,r){Dm.error("Adding deprecated "+t);const i=tb+Dm._capitalize(t),o=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[i]=function(){Dm.error(o);const e=this.attrs[t];return void 0===e?n:e},rb.addSetter(e,t,r,function(){Dm.error(o)}),rb.addOverloadedGetterSetter(e,t)},backCompat(e,t){Dm.each(t,function(t,n){const r=e.prototype[n],i=tb+Dm._capitalize(t),o=nb+Dm._capitalize(t);function a(){r.apply(this,arguments),Dm.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}e.prototype[t]=a,e.prototype[i]=a,e.prototype[o]=a})},afterSetFilter(){this._filterUpToDate=!1}};function ib(e){const t=/(\w+)\(([^)]+)\)/g;let n;for(;null!==(n=t.exec(e));){const[,e,t]=n;switch(e){case"blur":{const e=parseFloat(t.replace("px",""));return function(t){this.blurRadius(.5*e);const n=wm.Filters;n&&n.Blur&&n.Blur.call(this,t)}}case"brightness":{const e=t.includes("%")?parseFloat(t)/100:parseFloat(t);return function(t){this.brightness(e);const n=wm.Filters;n&&n.Brightness&&n.Brightness.call(this,t)}}case"contrast":{const e=parseFloat(t);return function(t){const n=100*(Math.sqrt(e)-1);this.contrast(n);const r=wm.Filters;r&&r.Contrast&&r.Contrast.call(this,t)}}case"grayscale":return function(e){const t=wm.Filters;t&&t.Grayscale&&t.Grayscale.call(this,e)};case"sepia":return function(e){const t=wm.Filters;t&&t.Sepia&&t.Sepia.call(this,e)};case"invert":return function(e){const t=wm.Filters;t&&t.Invert&&t.Invert.call(this,e)};default:Dm.warn(`CSS filter "${e}" is not supported in fallback mode. Consider using function filters for better compatibility.`)}}return()=>{}}const ob="absoluteOpacity",ab="allEventListeners",sb="absoluteTransform",lb="absoluteScale",cb="canvas",ub="listening",db="Shape",hb=" ",fb="stage",pb="transform",gb="visible",mb=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(hb);let bb=1,yb=class e{constructor(e){this._id=bb++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){e!==pb&&e!==sb||!this._cache.get(e)?e?this._cache.delete(e):this._cache.clear():this._cache.get(e).dirty=!0}_getCache(e,t){let n=this._cache.get(e);return(void 0===n||(e===pb||e===sb)&&!0===n.dirty)&&(n=t.call(this),this._cache.set(e,n)),n}_calculate(e,t,n){if(!this._attachedDepsListeners.get(e)){const n=t.map(e=>e+"Change.konva").join(hb);this.on(n,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(cb)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===sb&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(cb)){const{scene:e,filter:t,hit:n,buffer:r}=this._cache.get(cb);Dm.releaseCanvas(e,t,n,r),this._cache.delete(cb)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const t=e||{};let n={};void 0!==t.x&&void 0!==t.y&&void 0!==t.width&&void 0!==t.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let r=Math.ceil(t.width||n.width),i=Math.ceil(t.height||n.height),o=t.pixelRatio,a=void 0===t.x?Math.floor(n.x):t.x,s=void 0===t.y?Math.floor(n.y):t.y,l=t.offset||0,c=t.drawBorder||!1,u=t.hitCanvasPixelRatio||1;if(!r||!i)return void Dm.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");r+=2*l+(Math.abs(Math.round(n.x)-a)>.5?1:0),i+=2*l+(Math.abs(Math.round(n.y)-s)>.5?1:0),a-=l,s-=l;const d=new Gm({pixelRatio:o,width:r,height:i}),h=new Gm({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),f=new Um({pixelRatio:u,width:r,height:i}),p=d.getContext(),g=f.getContext(),m=new Gm({width:d.width/d.pixelRatio+Math.abs(a),height:d.height/d.pixelRatio+Math.abs(s),pixelRatio:d.pixelRatio}),b=m.getContext();return f.isCache=!0,d.isCache=!0,this._cache.delete(cb),this._filterUpToDate=!1,!1===t.imageSmoothingEnabled&&(d.getContext()._context.imageSmoothingEnabled=!1,h.getContext()._context.imageSmoothingEnabled=!1),p.save(),g.save(),b.save(),p.translate(-a,-s),g.translate(-a,-s),b.translate(-a,-s),m.x=a,m.y=s,this._isUnderCache=!0,this._clearSelfAndDescendantCache(ob),this._clearSelfAndDescendantCache(lb),this.drawScene(d,this,m),this.drawHit(f,this),this._isUnderCache=!1,p.restore(),g.restore(),c&&(p.save(),p.beginPath(),p.rect(0,0,r,i),p.closePath(),p.setAttr("strokeStyle","red"),p.setAttr("lineWidth",5),p.stroke(),p.restore()),this._cache.set(cb,{scene:d,filter:h,hit:f,buffer:m,x:a,y:s}),this._requestDraw(),this}isCached(){return this._cache.has(cb)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){const n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let r=1/0,i=1/0,o=-1/0,a=-1/0;const s=this.getAbsoluteTransform(t);return n.forEach(function(e){const t=s.point(e);void 0===r&&(r=o=t.x,i=a=t.y),r=Math.min(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y)}),{x:r,y:i,width:o-r,height:a-i}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);const n=this._getCachedSceneCanvas(),r=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/r,n.height/r),e.restore()}_drawCachedHitCanvas(e){const t=this._getCanvasCache(),n=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e,t,n,r,i=this.filters(),o=this._getCanvasCache(),a=o.scene,s=o.filter,l=s.getContext();if(!i||0===i.length)return a;if(this._filterUpToDate)return s;let c=!0;for(let d=0;d<i.length;d++)if("string"==typeof i[d]&&Om(),"string"!=typeof i[d]||!Om()){c=!1;break}const u=a.pixelRatio;if(s.setSize(a.width/a.pixelRatio,a.height/a.pixelRatio),c){const e=i.join(" ");return l.save(),l.setAttr("filter",e),l.drawImage(a._canvas,0,0,a.getWidth()/u,a.getHeight()/u),l.restore(),this._filterUpToDate=!0,s}try{for(e=i.length,l.clear(),l.drawImage(a._canvas,0,0,a.getWidth()/u,a.getHeight()/u),t=l.getImageData(0,0,s.getWidth(),s.getHeight()),n=0;n<e;n++)r=i[n],"string"==typeof r&&(r=ib(r)),r.call(this,t),l.putImageData(t,0,0)}catch(uS){Dm.error("Unable to apply filter. "+uS.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,s}on(e,t){if(this._cache&&this._cache.delete(ab),3===arguments.length)return this._delegate.apply(this,arguments);const n=e.split(hb);for(let r=0;r<n.length;r++){const e=n[r].split("."),i=e[0],o=e[1]||"";this.eventListeners[i]||(this.eventListeners[i]=[]),this.eventListeners[i].push({name:o,handler:t})}return this}off(e,t){let n,r,i,o,a,s,l=(e||"").split(hb),c=l.length;if(this._cache&&this._cache.delete(ab),!e)for(r in this.eventListeners)this._off(r);for(n=0;n<c;n++)if(i=l[n],o=i.split("."),a=o[0],s=o[1],a)this.eventListeners[a]&&this._off(a,s,t);else for(r in this.eventListeners)this._off(r,s,t);return this}dispatchEvent(e){const t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(e){t.call(this,e.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,n){const r=this;this.on(e,function(e){const i=e.target.findAncestors(t,!0,r);for(let t=0;t<i.length;t++)(e=Dm.cloneObject(e)).currentTarget=i[t],n.call(i[t],e)})}remove(){return this.isDragging()&&this.stopDrag(),qm._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(sb),this._clearSelfAndDescendantCache(ob),this._clearSelfAndDescendantCache(lb),this._clearSelfAndDescendantCache(fb),this._clearSelfAndDescendantCache(gb),this._clearSelfAndDescendantCache(ub)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const t="get"+Dm._capitalize(e);return Dm._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){let e=this.getParent(),t=[];for(;e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let t,n;if(!e)return this;for(t in e)"children"!==t&&(n="set"+Dm._capitalize(t),Dm._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(ub,this._isListening)}_isListening(e){if(!this.listening())return!1;const t=this.getParent();return!t||t===e||this===e||t._isListening(e)}isVisible(){return this._getCache(gb,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const t=this.getParent();return!t||t===e||this===e||t._isVisible(e)}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);const n=this.getLayer();let r=!1;qm._dragElements.forEach(e=>{"dragging"===e.dragStatus&&("Stage"===e.node.nodeType||e.node.getLayer()===n)&&(r=!0)});const i=!t&&!wm.hitOnDragEnabled&&(r||wm.isTransforming());return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e,t,n,r,i=this.getDepth(),o=this,a=0;const s=this.getStage();return"Stage"!==o.nodeType&&s&&function s(l){for(e=[],t=l.length,n=0;n<t;n++)r=l[n],a++,r.nodeType!==db&&(e=e.concat(r.getChildren().slice())),r._id===o._id&&(n=t);e.length>0&&e[0].getDepth()<=i&&s(e)}(s.getChildren()),a}getDepth(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(pb),this._clearSelfAndDescendantCache(sb)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const t=e.getPointerPosition();if(!t)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(t)}getAbsolutePosition(e){let t=!1,n=this.parent;for(;n;){if(n.isCached()){t=!0;break}n=n.parent}t&&!e&&(e=!0);const r=this.getAbsoluteTransform(e).getMatrix(),i=new _m,o=this.offset();return i.m=r.slice(),i.translate(o.x,o.y),i.getTranslation()}setAbsolutePosition(e){const{x:t,y:n,...r}=this._clearTransform();this.attrs.x=t,this.attrs.y=n,this._clearCache(pb);const i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(e.x,e.y),e={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(r),this.setPosition({x:e.x,y:e.y}),this._clearCache(pb),this._clearSelfAndDescendantCache(sb),this}_setTransform(e){let t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let t=e.x,n=e.y,r=this.x(),i=this.y();return void 0!==t&&(r+=t),void 0!==n&&(i+=n),this.setPosition({x:r,y:i}),this}_eachAncestorReverse(e,t){let n,r,i=[],o=this.getParent();if(!t||t._id!==this._id){for(i.unshift(this);o&&(!t||o._id!==t._id);)i.unshift(o),o=o.parent;for(n=i.length,r=0;r<n;r++)e(i[r])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Dm.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return Dm.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return Dm.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return Dm.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(e){if(!this.parent)return Dm.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Dm.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ob,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e,t,n,r,i,o=this.getAttrs();const a={attrs:{},className:this.getClassName()};for(e in o)t=o[e],i=Dm.isObject(t)&&!Dm._isPlainObject(t)&&!Dm._isArray(t),i||(n="function"==typeof this[e]&&this[e],delete o[e],r=n?n.call(this):null,o[e]=t,r!==t&&(a.attrs[e]=t));return Dm._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,n){const r=[];t&&this._isMatch(e)&&r.push(this);let i=this.parent;for(;i;){if(i===n)return r;i._isMatch(e)&&r.push(i),i=i.parent}return r}isAncestorOf(e){return!1}findAncestor(e,t,n){return this.findAncestors(e,t,n)[0]}_isMatch(e){if(!e)return!1;if("function"==typeof e)return e(this);let t,n,r=e.replace(/ /g,"").split(","),i=r.length;for(t=0;t<i;t++)if(n=r[t],Dm.isValidSelector(n)||(Dm.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Dm.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Dm.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(fb,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,t={},n){return t.target=t.target||this,n?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(sb,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let t;if(e)return t=new _m,this._eachAncestorReverse(function(e){const n=e.transformsEnabled();"all"===n?t.multiply(e.getTransform()):"position"===n&&t.translate(e.x()-e.offsetX(),e.y()-e.offsetY())},e),t;{t=this._cache.get(sb)||new _m,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();const e=this.transformsEnabled();if("all"===e)t.multiply(this.getTransform());else if("position"===e){const e=this.attrs.x||0,n=this.attrs.y||0,r=this.attrs.offsetX||0,i=this.attrs.offsetY||0;t.translate(e-r,n-i)}return t.dirty=!1,t}}getAbsoluteScale(e){let t=this;for(;t;)t._isUnderCache&&(e=t),t=t.getParent();const n=this.getAbsoluteTransform(e).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(pb,this._getTransform)}_getTransform(){var e,t;const n=this._cache.get(pb)||new _m;n.reset();const r=this.x(),i=this.y(),o=wm.getAngle(this.rotation()),a=null!==(e=this.attrs.scaleX)&&void 0!==e?e:1,s=null!==(t=this.attrs.scaleY)&&void 0!==t?t:1,l=this.attrs.skewX||0,c=this.attrs.skewY||0,u=this.attrs.offsetX||0,d=this.attrs.offsetY||0;return 0===r&&0===i||n.translate(r,i),0!==o&&n.rotate(o),0===l&&0===c||n.skew(l,c),1===a&&1===s||n.scale(a,s),0===u&&0===d||n.translate(-1*u,-1*d),n.dirty=!1,n}clone(e){let t,n,r,i,o,a=Dm.cloneObject(this.attrs);for(t in e)a[t]=e[t];const s=new this.constructor(a);for(t in this.eventListeners)for(n=this.eventListeners[t],r=n.length,i=0;i<r;i++)o=n[i],o.name.indexOf("konva")<0&&(s.eventListeners[t]||(s.eventListeners[t]=[]),s.eventListeners[t].push(o));return s}_toKonvaCanvas(e){e=e||{};const t=this.getClientRect(),n=this.getStage(),r=void 0!==e.x?e.x:Math.floor(t.x),i=void 0!==e.y?e.y:Math.floor(t.y),o=e.pixelRatio||1,a=new Gm({width:e.width||Math.ceil(t.width)||(n?n.width():0),height:e.height||Math.ceil(t.height)||(n?n.height():0),pixelRatio:o}),s=a.getContext(),l=new Gm({width:a.width/a.pixelRatio+Math.abs(r),height:a.height/a.pixelRatio+Math.abs(i),pixelRatio:a.pixelRatio});return!1===e.imageSmoothingEnabled&&(s._context.imageSmoothingEnabled=!1),s.save(),(r||i)&&s.translate(-1*r,-1*i),this.drawScene(a,void 0,l),s.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){const t=(e=e||{}).mimeType||null,n=e.quality||null,r=this._toKonvaCanvas(e).toDataURL(t,n);return e.callback&&e.callback(r),r}toImage(e){return new Promise((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,Dm._urlToImage(this.toDataURL(e),function(e){t(e),null==n||n(e)})}catch(r){n(r)}})}toBlob(e){return new Promise((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,this.toCanvas(e).toBlob(e=>{t(e),null==n||n(e)},null==e?void 0:e.mimeType,null==e?void 0:e.quality)}catch(r){n(r)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():wm.dragDistance}_off(e,t,n){let r,i,o,a=this.eventListeners[e];for(r=0;r<a.length;r++)if(i=a[r].name,o=a[r].handler,!("konva"===i&&"konva"!==t||t&&i!==t||n&&n!==o)){if(a.splice(r,1),0===a.length){delete this.eventListeners[e];break}r--}}_fireChangeEvent(e,t,n){this._fire(e+"Change",{oldVal:t,newVal:n})}addName(e){if(!this.hasName(e)){const t=this.name(),n=t?t+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const t=this.name();if(!t)return!1;return-1!==(t||"").split(/\s/g).indexOf(e)}removeName(e){const t=(this.name()||"").split(/\s/g),n=t.indexOf(e);return-1!==n&&(t.splice(n,1),this.name(t.join(" "))),this}setAttr(e,t){const n=this["set"+Dm._capitalize(e)];return Dm._isFunction(n)?n.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(wm.autoDrawEnabled){const e=this.getLayer()||this.getStage();null==e||e.batchDraw()}}_setAttr(e,t){const n=this.attrs[e];(n!==t||Dm.isObject(t))&&(null==t?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,t),this._requestDraw())}_setComponentAttr(e,t,n){let r;void 0!==n&&(r=this.attrs[e],r||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,r,n))}_fireAndBubble(e,t,n){t&&this.nodeType===db&&(t.target=this);const r=["mouseenter","mouseleave","pointerenter","pointerleave","touchenter","touchleave"];if(!(-1!==r.indexOf(e)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n))){this._fire(e,t);const i=-1!==r.indexOf(e)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!i&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,n,r;const i=null!==(t=this._cache.get(ab))&&void 0!==t?t:{};let o=null==i?void 0:i[e];if(void 0===o){o=[];let t=Object.getPrototypeOf(this);for(;t;){const i=null!==(r=null===(n=t.eventListeners)||void 0===n?void 0:n[e])&&void 0!==r?r:[];o.push(...i),t=Object.getPrototypeOf(t)}i[e]=o,this._cache.set(ab,i)}return o}_fire(e,t){(t=t||{}).currentTarget=this,t.type=e;const n=this._getProtoListeners(e);if(n)for(let i=0;i<n.length;i++)n[i].handler.call(this,t);const r=this.eventListeners[e];if(r)for(let i=0;i<r.length;i++)r[i].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const t=e?e.pointerId:void 0,n=this.getStage(),r=this.getAbsolutePosition();if(!n)return;const i=n._getPointerById(t)||n._changedPointerPositions[0]||r;qm._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-r.x,y:i.y-r.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){qm._dragElements.has(this._id)||this._createDragElement(e);qm._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const n=this.getStage()._getPointerById(t.pointerId);if(!n)return;let r={x:n.x-t.offset.x,y:n.y-t.offset.y};const i=this.dragBoundFunc();if(void 0!==i){const t=i.call(this,r,e);t?r=t:Dm.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}stopDrag(e){const t=qm._dragElements.get(this._id);t&&(t.dragStatus="stopped"),qm._endDragBefore(e),qm._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=qm._dragElements.get(this._id);return!!e&&"dragging"===e.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(void 0!==e.evt.button)||wm.dragButtons.indexOf(e.evt.button)>=0))return;if(this.isDragging())return;let t=!1;qm._dragElements.forEach(e=>{this.isAncestorOf(e.node)&&(t=!0)}),t||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();if(!this.getStage())return;const e=qm._dragElements.get(this._id),t=e&&"dragging"===e.dragStatus,n=e&&"ready"===e.dragStatus;t?this.stopDrag():n&&qm._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const n={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return Dm.haveIntersection(n,this.getClientRect())}static create(e,t){return Dm._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(t,n){let r,i,o,a=e.prototype.getClassName.call(t),s=t.children;n&&(t.attrs.container=n),wm[a]||(Dm.warn('Can not find a node with class name "'+a+'". Fallback to "Shape".'),a="Shape");if(r=new(0,wm[a])(t.attrs),s)for(i=s.length,o=0;o<i;o++)r.add(e._createNode(s[o]));return r}};yb.prototype.nodeType="Node",yb.prototype._attrsAffectingSize=[],yb.prototype.eventListeners={},yb.prototype.on.call(yb.prototype,mb,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(pb),this._clearSelfAndDescendantCache(sb))}),yb.prototype.on.call(yb.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(gb)}),yb.prototype.on.call(yb.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(ub)}),yb.prototype.on.call(yb.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ob)});const vb=rb.addGetterSetter;vb(yb,"zIndex"),vb(yb,"absolutePosition"),vb(yb,"position"),vb(yb,"x",0,Ym()),vb(yb,"y",0,Ym()),vb(yb,"globalCompositeOperation","source-over",Jm()),vb(yb,"opacity",1,Ym()),vb(yb,"name","",Jm()),vb(yb,"id","",Jm()),vb(yb,"rotation",0,Ym()),rb.addComponentsGetterSetter(yb,"scale",["x","y"]),vb(yb,"scaleX",1,Ym()),vb(yb,"scaleY",1,Ym()),rb.addComponentsGetterSetter(yb,"skew",["x","y"]),vb(yb,"skewX",0,Ym()),vb(yb,"skewY",0,Ym()),rb.addComponentsGetterSetter(yb,"offset",["x","y"]),vb(yb,"offsetX",0,Ym()),vb(yb,"offsetY",0,Ym()),vb(yb,"dragDistance",void 0,Ym()),vb(yb,"width",0,Ym()),vb(yb,"height",0,Ym()),vb(yb,"listening",!0,eb()),vb(yb,"preventDefault",!0,eb()),vb(yb,"filters",void 0,function(e){return this._filterUpToDate=!1,e}),vb(yb,"visible",!0,eb()),vb(yb,"transformsEnabled","all",Jm()),vb(yb,"size"),vb(yb,"dragBoundFunc"),vb(yb,"draggable",!1,eb()),rb.backCompat(yb,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class xb extends yb{constructor(){super(...arguments),this.children=[]}getChildren(e){const t=this.children||[];return e?t.filter(e):t}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(0===e.length)return this;if(e.length>1){for(let t=0;t<e.length;t++)this.add(e[t]);return this}const t=e[0];return t.getParent()?(t.moveTo(this),this):(this._validateAdd(t),t.index=this.getChildren().length,t.parent=this,t._clearCaches(),this.getChildren().push(t),this._fire("add",{child:t}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){const n=[];return this._descendants(r=>{const i=r._isMatch(e);return i&&n.push(r),!(!i||!t)}),n}_descendants(e){let t=!1;const n=this.getChildren();for(const r of n){if(t=e(r),t)return!0;if(r.hasChildren()&&(t=r._descendants(e),t))return!0}return!1}toObject(){const e=yb.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){let t=e.getParent();for(;t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){const t=yb.prototype.clone.call(this,e);return this.getChildren().forEach(function(e){t.add(e.clone())}),t}getAllIntersections(e){const t=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(e)&&t.push(n)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),this.isCached()||null===(t=this.children)||void 0===t||t.forEach(function(t){t._clearSelfAndDescendantCache(e)})}_setChildrenIndices(){var e;null===(e=this.children)||void 0===e||e.forEach(function(e,t){e.index=t}),this._requestDraw()}drawScene(e,t,n){const r=this.getLayer(),i=e||r&&r.getCanvas(),o=i&&i.getContext(),a=this._getCanvasCache(),s=a&&a.scene,l=i&&i.isCache;if(!this.isVisible()&&!l)return this;if(s){o.save();const e=this.getAbsoluteTransform(t).getMatrix();o.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,t,n);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;const n=this.getLayer(),r=e||n&&n.hitCanvas,i=r&&r.getContext(),o=this._getCanvasCache();if(o&&o.hit){i.save();const e=this.getAbsoluteTransform(t).getMatrix();i.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",r,t);return this}_drawChildren(e,t,n,r){var i;const o=t&&t.getContext(),a=this.clipWidth(),s=this.clipHeight(),l=this.clipFunc(),c="number"==typeof a&&"number"==typeof s||l,u=n===this;if(c){o.save();const e=this.getAbsoluteTransform(n);let t,r=e.getMatrix();if(o.transform(r[0],r[1],r[2],r[3],r[4],r[5]),o.beginPath(),l)t=l.call(this,o,this);else{const e=this.clipX(),t=this.clipY();o.rect(e||0,t||0,a,s)}o.clip.apply(o,t),r=e.copy().invert().getMatrix(),o.transform(r[0],r[1],r[2],r[3],r[4],r[5])}const d=!u&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===e;d&&(o.save(),o._applyGlobalCompositeOperation(this)),null===(i=this.children)||void 0===i||i.forEach(function(i){i[e](t,n,r)}),d&&o.restore(),c&&o.restore()}getClientRect(e={}){var t;const n=e.skipTransform,r=e.relativeTo;let i,o,a,s,l={x:1/0,y:1/0,width:0,height:0};const c=this;null===(t=this.children)||void 0===t||t.forEach(function(t){if(!t.visible())return;const n=t.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});0===n.width&&0===n.height||(void 0===i?(i=n.x,o=n.y,a=n.x+n.width,s=n.y+n.height):(i=Math.min(i,n.x),o=Math.min(o,n.y),a=Math.max(a,n.x+n.width),s=Math.max(s,n.y+n.height)))});const u=this.find("Shape");let d=!1;for(let h=0;h<u.length;h++){if(u[h]._isVisible(this)){d=!0;break}}return l=d&&void 0!==i?{x:i,y:o,width:a-i,height:s-o}:{x:0,y:0,width:0,height:0},n?l:this._transformedRect(l,r)}}rb.addComponentsGetterSetter(xb,"clip",["x","y","width","height"]),rb.addGetterSetter(xb,"clipX",void 0,Ym()),rb.addGetterSetter(xb,"clipY",void 0,Ym()),rb.addGetterSetter(xb,"clipWidth",void 0,Ym()),rb.addGetterSetter(xb,"clipHeight",void 0,Ym()),rb.addGetterSetter(xb,"clipFunc");const Sb=new Map,wb=void 0!==wm._global.PointerEvent;function Cb(e){return Sb.get(e)}function kb(e){return{evt:e,pointerId:e.pointerId}}function _b(e,t){return Sb.get(e)===t}function Eb(e,t){Pb(e);t.getStage()&&(Sb.set(e,t),wb&&t._fire("gotpointercapture",kb(new PointerEvent("gotpointercapture"))))}function Pb(e,t){const n=Sb.get(e);if(!n)return;const r=n.getStage();r&&r.content,Sb.delete(e),wb&&n._fire("lostpointercapture",kb(new PointerEvent("lostpointercapture")))}const $b="mouseleave",Mb="mouseover",Nb="mouseenter",Ab="mousemove",Tb="mousedown",Rb="mouseup",Ib="pointermove",Db="pointerdown",Lb="pointerup",zb="pointercancel",Wb="pointerout",Ob="pointerleave",Bb="pointerover",Fb="pointerenter",jb="contextmenu",Hb="touchstart",Gb="touchend",Ub="touchmove",qb="touchcancel",Xb="wheel",Vb=[[Nb,"_pointerenter"],[Tb,"_pointerdown"],[Ab,"_pointermove"],[Rb,"_pointerup"],[$b,"_pointerleave"],[Hb,"_pointerdown"],[Ub,"_pointermove"],[Gb,"_pointerup"],[qb,"_pointercancel"],[Mb,"_pointerover"],[Xb,"_wheel"],[jb,"_contextmenu"],[Db,"_pointerdown"],[Ib,"_pointermove"],[Lb,"_pointerup"],[zb,"_pointercancel"],[Ob,"_pointerleave"],["lostpointercapture","_lostpointercapture"]],Yb={mouse:{[Wb]:"mouseout",[Ob]:$b,[Bb]:Mb,[Fb]:Nb,[Ib]:Ab,[Db]:Tb,[Lb]:Rb,[zb]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Wb]:"touchout",[Ob]:"touchleave",[Bb]:"touchover",[Fb]:"touchenter",[Ib]:Ub,[Db]:Hb,[Lb]:Gb,[zb]:qb,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Wb]:Wb,[Ob]:Ob,[Bb]:Bb,[Fb]:Fb,[Ib]:Ib,[Db]:Db,[Lb]:Lb,[zb]:zb,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Kb=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",Qb=e=>{const t=Kb(e);return"pointer"===t?wm.pointerEventsEnabled&&Yb.pointer:"touch"===t?Yb.touch:"mouse"===t?Yb.mouse:void 0};function Jb(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&Dm.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const Zb=[];let ey=class extends xb{constructor(e){super(Jb(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Zb.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Jb(this.attrs)}),this._checkVisibility()}_validateAdd(e){const t="Layer"===e.getType(),n="FastLayer"===e.getType();t||n||Dm.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if("string"==typeof e){let t;if("."===e.charAt(0)){const t=e.slice(1);e=document.getElementsByClassName(t)[0]}else t="#"!==e.charAt(0)?e:e.slice(1),e=document.getElementById(t);if(!e)throw"Can not find container in document with id "+t}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,t=e.length;for(let n=0;n<t;n++)e[n].clear();return this}clone(e){return e||(e={}),e.container="undefined"!=typeof document&&document.createElement("div"),xb.prototype.clone.call(this,e)}destroy(){super.destroy();const e=this.content;e&&Dm._isInDocument(e)&&this.container().removeChild(e);const t=Zb.indexOf(this);return t>-1&&Zb.splice(t,1),Dm.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(Dm.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){(e={...e}).x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const t=new Gm({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=t.getContext()._context,r=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),r.forEach(function(t){if(!t.isVisible())return;const r=t._toKonvaCanvas(e);n.drawImage(r._canvas,e.x,e.y,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}),t}getIntersection(e){if(!e)return null;const t=this.children;for(let n=t.length-1;n>=0;n--){const r=t[n].getIntersection(e);if(r)return r}return null}_resizeDOM(){const e=this.width(),t=this.height();this.content&&(this.content.style.width=e+"px",this.content.style.height=t+"px"),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(n=>{n.setSize({width:e,height:t}),n.draw()})}add(e,...t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}super.add(e);const n=this.children.length;return n>5&&Dm.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),wm.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return _b(e,this)}setPointerCapture(e){Eb(e,this)}releaseCapture(e){Pb(e)}getLayers(){return this.children}_bindContentEvents(){wm.isBrowser&&Vb.forEach(([e,t])=>{this.content.addEventListener(e,e=>{this[t](e)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const t=Qb(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=Qb(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=Qb(e.type),n=Kb(e.type);if(!t)return;this.setPointersPositions(e);const r=this._getTargetShape(n),i=!(wm.isDragging()||wm.isTransforming())||wm.hitOnDragEnabled;r&&i?(r._fireAndBubble(t.pointerout,{evt:e}),r._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):i&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const t=Qb(e.type),n=Kb(e.type);if(!t)return;this.setPointersPositions(e);let r=!1;this._changedPointerPositions.forEach(i=>{const o=this.getIntersection(i);if(qm.justDragged=!1,wm["_"+n+"ListenClick"]=!0,!o||!o.isListening())return void(this[n+"ClickStartShape"]=void 0);wm.capturePointerEventsEnabled&&o.setPointerCapture(i.id),this[n+"ClickStartShape"]=o,o._fireAndBubble(t.pointerdown,{evt:e,pointerId:i.id}),r=!0;const a=e.type.indexOf("touch")>=0;o.preventDefault()&&e.cancelable&&a&&e.preventDefault()}),r||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const t=Qb(e.type),n=Kb(e.type);if(!t)return;const r=e.type.indexOf("touch")>=0||"touch"===e.pointerType;wm.isDragging()&&qm.node.preventDefault()&&e.cancelable&&r&&e.preventDefault(),this.setPointersPositions(e);if(!(!(wm.isDragging()||wm.isTransforming())||wm.hitOnDragEnabled))return;const i={};let o=!1;const a=this._getTargetShape(n);this._changedPointerPositions.forEach(r=>{const s=Cb(r.id)||this.getIntersection(r),l=r.id,c={evt:e,pointerId:l},u=a!==s;if(u&&a&&(a._fireAndBubble(t.pointerout,{...c},s),a._fireAndBubble(t.pointerleave,{...c},s)),s){if(i[s._id])return;i[s._id]=!0}s&&s.isListening()?(o=!0,u&&(s._fireAndBubble(t.pointerover,{...c},a),s._fireAndBubble(t.pointerenter,{...c},a),this[n+"targetShape"]=s),s._fireAndBubble(t.pointermove,{...c})):a&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:l}),this[n+"targetShape"]=null)}),o||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=Qb(e.type),n=Kb(e.type);if(!t)return;this.setPointersPositions(e);const r=this[n+"ClickStartShape"],i=this[n+"ClickEndShape"],o={};let a=!1;this._changedPointerPositions.forEach(s=>{const l=Cb(s.id)||this.getIntersection(s);if(l){if(l.releaseCapture(s.id),o[l._id])return;o[l._id]=!0}const c=s.id,u={evt:e,pointerId:c};let d=!1;wm["_"+n+"InDblClickWindow"]?(d=!0,clearTimeout(this[n+"DblTimeout"])):qm.justDragged||(wm["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){wm["_"+n+"InDblClickWindow"]=!1},wm.dblClickWindow),l&&l.isListening()?(a=!0,this[n+"ClickEndShape"]=l,l._fireAndBubble(t.pointerup,{...u}),wm["_"+n+"ListenClick"]&&r&&r===l&&(l._fireAndBubble(t.pointerclick,{...u}),d&&i&&i===l&&l._fireAndBubble(t.pointerdblclick,{...u}))):(this[n+"ClickEndShape"]=null,a||(this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a=!0),wm["_"+n+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:c}),d&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:c}))}),a||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),wm["_"+n+"ListenClick"]=!1,e.cancelable&&"touch"!==n&&"pointer"!==n&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(jb,{evt:e}):this._fire(jb,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(Xb,{evt:e}):this._fire(Xb,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=Cb(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(Lb,kb(e)),Pb(e.pointerId)}_lostpointercapture(e){Pb(e.pointerId)}setPointersPositions(e){const t=this._getContentPosition();let n=null,r=null;void 0!==(e=e||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,e=>{this._pointerPositions.push({id:e.identifier,x:(e.clientX-t.left)/t.scaleX,y:(e.clientY-t.top)/t.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,e=>{this._changedPointerPositions.push({id:e.identifier,x:(e.clientX-t.left)/t.scaleX,y:(e.clientY-t.top)/t.scaleY})})):(n=(e.clientX-t.left)/t.scaleX,r=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:n,y:r},this._pointerPositions=[{x:n,y:r,id:Dm._getFirstPointerId(e)}],this._changedPointerPositions=[{x:n,y:r,id:Dm._getFirstPointerId(e)}])}_setPointerPosition(e){Dm.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Gm({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Um({pixelRatio:1,width:this.width(),height:this.height()}),!wm.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return Dm.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};ey.prototype.nodeType="Stage",Cm(ey),rb.addGetterSetter(ey,"container"),wm.isBrowser&&document.addEventListener("visibilitychange",()=>{Zb.forEach(e=>{e.batchDraw()})});const ty="hasShadow",ny="shadowRGBA",ry="patternImage",iy="linearGradient",oy="radialGradient";let ay;function sy(){return ay||(ay=Dm.createCanvasElement().getContext("2d"),ay)}const ly={};class cy extends yb{constructor(e){let t;super(e);let n=0;for(;t=Dm.getHitColor(),!t||t in ly;)if(n++,n>=1e4){Dm.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),t=Dm.getRandomColor();break}this.colorKey=t,ly[t]=this}getContext(){return Dm.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Dm.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(ty,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(ry,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=sy().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const t=new _m;t.translate(this.fillPatternX(),this.fillPatternY()),t.rotate(wm.getAngle(this.fillPatternRotation())),t.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),t.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=t.getMatrix(),r="undefined"==typeof DOMMatrix?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);e.setTransform(r)}return e}}_getLinearGradient(){return this._getCache(iy,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const t=sy(),n=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),i=t.createLinearGradient(n.x,n.y,r.x,r.y);for(let o=0;o<e.length;o+=2)i.addColorStop(e[o],e[o+1]);return i}}_getRadialGradient(){return this._getCache(oy,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const t=sy(),n=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),i=t.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius());for(let o=0;o<e.length;o+=2)i.addColorStop(e[o],e[o+1]);return i}}getShadowRGBA(){return this._getCache(ny,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=Dm.colorToRGBA(this.shadowColor());return e?"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")":void 0}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return"auto"===e?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const t=this.getStage();if(!t)return!1;const n=t.bufferHitCanvas;n.getContext().clear(),this.drawHit(n,void 0,!0);return n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return yb.prototype.destroy.call(this),delete ly[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!(null===(t=this.attrs.perfectDrawEnabled)||void 0===t||t))return!1;const n=e||this.hasFill(),r=this.hasStroke(),i=1!==this.getAbsoluteOpacity();if(n&&r&&i)return!0;const o=this.hasShadow(),a=this.shadowForStrokeEnabled();return!!(n&&r&&o&&a)}setStrokeHitEnabled(e){Dm.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let t=!1,n=this.getParent();for(;n;){if(n.isCached()){t=!0;break}n=n.getParent()}const r=e.skipTransform,i=e.relativeTo||t&&this.getStage()||void 0,o=this.getSelfRect(),a=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,s=o.width+a,l=o.height+a,c=!e.skipShadow&&this.hasShadow(),u=c?this.shadowOffsetX():0,d=c?this.shadowOffsetY():0,h=s+Math.abs(u),f=l+Math.abs(d),p=c&&this.shadowBlur()||0,g={width:h+2*p,height:f+2*p,x:-(a/2+p)+Math.min(u,0)+o.x,y:-(a/2+p)+Math.min(d,0)+o.y};return r?g:this._transformedRect(g,i)}drawScene(e,t,n){const r=this.getLayer(),i=(e||r.getCanvas()).getContext(),o=this._getCanvasCache(),a=this.getSceneFunc(),s=this.hasShadow();let l;const c=t===this;if(!this.isVisible()&&!c)return this;if(o){i.save();const e=this.getAbsoluteTransform(t).getMatrix();return i.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedSceneCanvas(i),i.restore(),this}if(!a)return this;if(i.save(),this._useBufferCanvas()){l=this.getStage();const e=n||l.bufferCanvas,r=e.getContext();r.clear(),r.save(),r._applyLineJoin(this),r._applyMiterLimit(this);const o=this.getAbsoluteTransform(t).getMatrix();r.transform(o[0],o[1],o[2],o[3],o[4],o[5]),a.call(this,r,this),r.restore();const u=e.pixelRatio;s&&i._applyShadow(this),c||(i._applyOpacity(this),i._applyGlobalCompositeOperation(this)),i.drawImage(e._canvas,e.x||0,e.y||0,e.width/u,e.height/u)}else{if(i._applyLineJoin(this),i._applyMiterLimit(this),!c){const e=this.getAbsoluteTransform(t).getMatrix();i.transform(e[0],e[1],e[2],e[3],e[4],e[5]),i._applyOpacity(this),i._applyGlobalCompositeOperation(this)}s&&i._applyShadow(this),a.call(this,i,this)}return i.restore(),this}drawHit(e,t,n=!1){if(!this.shouldDrawHit(t,n))return this;const r=this.getLayer(),i=e||r.hitCanvas,o=i&&i.getContext(),a=this.hitFunc()||this.sceneFunc(),s=this._getCanvasCache(),l=s&&s.hit;if(this.colorKey||Dm.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),l){o.save();const e=this.getAbsoluteTransform(t).getMatrix();return o.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedHitCanvas(o),o.restore(),this}if(!a)return this;o.save(),o._applyLineJoin(this),o._applyMiterLimit(this);if(!(this===t)){const e=this.getAbsoluteTransform(t).getMatrix();o.transform(e[0],e[1],e[2],e[3],e[4],e[5])}return a.call(this,o,this),o.restore(),this}drawHitFromCache(e=0){const t=this._getCanvasCache(),n=this._getCachedSceneCanvas(),r=t.hit,i=r.getContext(),o=r.getWidth(),a=r.getHeight();i.clear(),i.drawImage(n._canvas,0,0,o,a);try{const t=i.getImageData(0,0,o,a),n=t.data,r=n.length,s=Dm._hexToRgb(this.colorKey);for(let i=0;i<r;i+=4){n[i+3]>e?(n[i]=s.r,n[i+1]=s.g,n[i+2]=s.b,n[i+3]=255):n[i+3]=0}i.putImageData(t,0,0)}catch(uS){Dm.error("Unable to draw hit graph from cached scene canvas. "+uS.message)}return this}hasPointerCapture(e){return _b(e,this)}setPointerCapture(e){Eb(e,this)}releaseCapture(e){Pb(e)}}cy.prototype._fillFunc=function(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()},cy.prototype._strokeFunc=function(e){e.stroke()},cy.prototype._fillFuncHit=function(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()},cy.prototype._strokeFuncHit=function(e){e.stroke()},cy.prototype._centroid=!1,cy.prototype.nodeType="Shape",Cm(cy),cy.prototype.eventListeners={},cy.prototype.on.call(cy.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(ty)}),cy.prototype.on.call(cy.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(ny)}),cy.prototype.on.call(cy.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(ry)}),cy.prototype.on.call(cy.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(iy)}),cy.prototype.on.call(cy.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(oy)}),rb.addGetterSetter(cy,"stroke",void 0,Zm()),rb.addGetterSetter(cy,"strokeWidth",2,Ym()),rb.addGetterSetter(cy,"fillAfterStrokeEnabled",!1),rb.addGetterSetter(cy,"hitStrokeWidth","auto",Qm()),rb.addGetterSetter(cy,"strokeHitEnabled",!0,eb()),rb.addGetterSetter(cy,"perfectDrawEnabled",!0,eb()),rb.addGetterSetter(cy,"shadowForStrokeEnabled",!0,eb()),rb.addGetterSetter(cy,"lineJoin"),rb.addGetterSetter(cy,"lineCap"),rb.addGetterSetter(cy,"miterLimit"),rb.addGetterSetter(cy,"sceneFunc"),rb.addGetterSetter(cy,"hitFunc"),rb.addGetterSetter(cy,"dash"),rb.addGetterSetter(cy,"dashOffset",0,Ym()),rb.addGetterSetter(cy,"shadowColor",void 0,Jm()),rb.addGetterSetter(cy,"shadowBlur",0,Ym()),rb.addGetterSetter(cy,"shadowOpacity",1,Ym()),rb.addComponentsGetterSetter(cy,"shadowOffset",["x","y"]),rb.addGetterSetter(cy,"shadowOffsetX",0,Ym()),rb.addGetterSetter(cy,"shadowOffsetY",0,Ym()),rb.addGetterSetter(cy,"fillPatternImage"),rb.addGetterSetter(cy,"fill",void 0,Zm()),rb.addGetterSetter(cy,"fillPatternX",0,Ym()),rb.addGetterSetter(cy,"fillPatternY",0,Ym()),rb.addGetterSetter(cy,"fillLinearGradientColorStops"),rb.addGetterSetter(cy,"strokeLinearGradientColorStops"),rb.addGetterSetter(cy,"fillRadialGradientStartRadius",0),rb.addGetterSetter(cy,"fillRadialGradientEndRadius",0),rb.addGetterSetter(cy,"fillRadialGradientColorStops"),rb.addGetterSetter(cy,"fillPatternRepeat","repeat"),rb.addGetterSetter(cy,"fillEnabled",!0),rb.addGetterSetter(cy,"strokeEnabled",!0),rb.addGetterSetter(cy,"shadowEnabled",!0),rb.addGetterSetter(cy,"dashEnabled",!0),rb.addGetterSetter(cy,"strokeScaleEnabled",!0),rb.addGetterSetter(cy,"fillPriority","color"),rb.addComponentsGetterSetter(cy,"fillPatternOffset",["x","y"]),rb.addGetterSetter(cy,"fillPatternOffsetX",0,Ym()),rb.addGetterSetter(cy,"fillPatternOffsetY",0,Ym()),rb.addComponentsGetterSetter(cy,"fillPatternScale",["x","y"]),rb.addGetterSetter(cy,"fillPatternScaleX",1,Ym()),rb.addGetterSetter(cy,"fillPatternScaleY",1,Ym()),rb.addComponentsGetterSetter(cy,"fillLinearGradientStartPoint",["x","y"]),rb.addComponentsGetterSetter(cy,"strokeLinearGradientStartPoint",["x","y"]),rb.addGetterSetter(cy,"fillLinearGradientStartPointX",0),rb.addGetterSetter(cy,"strokeLinearGradientStartPointX",0),rb.addGetterSetter(cy,"fillLinearGradientStartPointY",0),rb.addGetterSetter(cy,"strokeLinearGradientStartPointY",0),rb.addComponentsGetterSetter(cy,"fillLinearGradientEndPoint",["x","y"]),rb.addComponentsGetterSetter(cy,"strokeLinearGradientEndPoint",["x","y"]),rb.addGetterSetter(cy,"fillLinearGradientEndPointX",0),rb.addGetterSetter(cy,"strokeLinearGradientEndPointX",0),rb.addGetterSetter(cy,"fillLinearGradientEndPointY",0),rb.addGetterSetter(cy,"strokeLinearGradientEndPointY",0),rb.addComponentsGetterSetter(cy,"fillRadialGradientStartPoint",["x","y"]),rb.addGetterSetter(cy,"fillRadialGradientStartPointX",0),rb.addGetterSetter(cy,"fillRadialGradientStartPointY",0),rb.addComponentsGetterSetter(cy,"fillRadialGradientEndPoint",["x","y"]),rb.addGetterSetter(cy,"fillRadialGradientEndPointX",0),rb.addGetterSetter(cy,"fillRadialGradientEndPointY",0),rb.addGetterSetter(cy,"fillPatternRotation",0),rb.addGetterSetter(cy,"fillRule",void 0,Jm()),rb.backCompat(cy,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const uy=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],dy=uy.length;let hy=class extends xb{constructor(e){super(e),this.canvas=new Gm,this.hitCanvas=new Um({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){yb.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!yb.prototype.moveUp.call(this))return!1;const e=this.getStage();return!(!e||!e.content)&&(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(yb.prototype.moveDown.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(yb.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return yb.prototype.remove.call(this),e&&e.parentNode&&Dm._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){const t=e.getType();"Group"!==t&&"Shape"!==t&&Dm.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return(e={...e}).width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=void 0!==e.x?e.x:this.x(),e.y=void 0!==e.y?e.y:this.y(),yb.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){const e=this.visible();this.canvas._canvas.style.display=e?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Dm.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Dm.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Dm.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let t=1,n=!1;for(;;){for(let r=0;r<dy;r++){const i=uy[r],o=this._getIntersection({x:e.x+i.x*t,y:e.y+i.y*t}),a=o.shape;if(a)return a;if(n=!!o.antialiased,!o.antialiased)break}if(!n)return null;t+=1}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,r=n[3];if(255===r){const e=Dm.getHitColorKey(n[0],n[1],n[2]),t=ly[e];return t?{shape:t}:{antialiased:!0}}return r>0?{antialiased:!0}:{}}drawScene(e,t,n){const r=this.getLayer(),i=e||r&&r.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),xb.prototype.drawScene.call(this,i,t,n),this._fire("draw",{node:this}),this}drawHit(e,t){const n=this.getLayer(),r=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),xb.prototype.drawHit.call(this,r,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Dm.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Dm.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return Dm.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};hy.prototype.nodeType="Layer",Cm(hy),rb.addGetterSetter(hy,"imageSmoothingEnabled",!0),rb.addGetterSetter(hy,"clearBeforeDraw",!0),rb.addGetterSetter(hy,"hitGraphEnabled",!0,eb());class fy extends hy{constructor(e){super(e),this.listening(!1),Dm.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}fy.prototype.nodeType="FastLayer",Cm(fy);class py extends xb{_validateAdd(e){const t=e.getType();"Group"!==t&&"Shape"!==t&&Dm.throw("You may only add groups and shapes to groups.")}}py.prototype.nodeType="Group",Cm(py);const gy=Sm.performance&&Sm.performance.now?function(){return Sm.performance.now()}:function(){return(new Date).getTime()};class my{constructor(e,t){this.id=my.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:gy(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,n=t.length;for(let r=0;r<n;r++)if(t[r]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const e=my.animations,t=e.length;for(let n=0;n<t;n++)if(e[n].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=gy(),my._addAnimation(this),this}stop(){return my._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,n=this.animations,r=n.length;for(let i=0;i<r;i++)if(n[i].id===t){this.animations.splice(i,1);break}}static _runFrames(){const e={},t=this.animations;for(let n=0;n<t.length;n++){const r=t[n],i=r.layers,o=r.func;r._updateFrameObject(gy());const a=i.length;let s;if(s=!o||!1!==o.call(r,r.frame),s)for(let t=0;t<a;t++){const n=i[t];void 0!==n._id&&(e[n._id]=n)}}for(const n in e)e.hasOwnProperty(n)&&e[n].batchDraw()}static _animationLoop(){const e=my;e.animations.length?(e._runFrames(),Dm.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Dm.requestAnimFrame(this._animationLoop))}}my.animations=[],my.animIdCounter=0,my.animRunning=!1;const by={node:1,duration:1,easing:1,onFinish:1,yoyo:1},yy=["fill","stroke","shadowColor"];let vy=0;class xy{constructor(e,t,n,r,i,o,a){this.prop=e,this.propFunc=t,this.begin=r,this._pos=r,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=i-this.begin,this.pause()}fire(e){const t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return void 0===e&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;2===this.state?this.setTime(e):3===this.state&&this.setTime(this.duration-e)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class Sy{constructor(e){const t=this,n=e.node,r=n._id,i=e.easing||wy.Linear,o=!!e.yoyo;let a,s;a=void 0===e.duration?.3:0===e.duration?.001:e.duration,this.node=n,this._id=vy++;const l=n.getLayer()||(n instanceof wm.Stage?n.getLayers():null);for(s in l||Dm.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new my(function(){t.tween.onEnterFrame()},l),this.tween=new xy(s,function(e){t._tweenFunc(e)},i,0,1,1e3*a,o),this._addListeners(),Sy.attrs[r]||(Sy.attrs[r]={}),Sy.attrs[r][this._id]||(Sy.attrs[r][this._id]={}),Sy.tweens[r]||(Sy.tweens[r]={}),e)void 0===by[s]&&this._addAttr(s,e[s]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,t){const n=this.node,r=n._id;let i,o,a,s,l;const c=Sy.tweens[r][e];c&&delete Sy.attrs[r][c][e];let u=n.getAttr(e);if(Dm._isArray(t))if(i=[],o=Math.max(t.length,u.length),"points"===e&&t.length!==u.length&&(t.length>u.length?(s=u,u=Dm._prepareArrayForTween(u,t,n.closed())):(a=t,t=Dm._prepareArrayForTween(t,u,n.closed()))),0===e.indexOf("fill"))for(let d=0;d<o;d++)if(d%2==0)i.push(t[d]-u[d]);else{const e=Dm.colorToRGBA(u[d]);l=Dm.colorToRGBA(t[d]),u[d]=e,i.push({r:l.r-e.r,g:l.g-e.g,b:l.b-e.b,a:l.a-e.a})}else for(let d=0;d<o;d++)i.push(t[d]-u[d]);else-1!==yy.indexOf(e)?(u=Dm.colorToRGBA(u),l=Dm.colorToRGBA(t),i={r:l.r-u.r,g:l.g-u.g,b:l.b-u.b,a:l.a-u.a}):i=t-u;Sy.attrs[r][this._id][e]={start:u,diff:i,end:t,trueEnd:a,trueStart:s},Sy.tweens[r][e]=this._id}_tweenFunc(e){const t=this.node,n=Sy.attrs[t._id][this._id];let r,i,o,a,s,l,c,u;for(r in n){if(i=n[r],o=i.start,a=i.diff,u=i.end,Dm._isArray(o))if(s=[],c=Math.max(o.length,u.length),0===r.indexOf("fill"))for(l=0;l<c;l++)l%2==0?s.push((o[l]||0)+a[l]*e):s.push("rgba("+Math.round(o[l].r+a[l].r*e)+","+Math.round(o[l].g+a[l].g*e)+","+Math.round(o[l].b+a[l].b*e)+","+(o[l].a+a[l].a*e)+")");else for(l=0;l<c;l++)s.push((o[l]||0)+a[l]*e);else s=-1!==yy.indexOf(r)?"rgba("+Math.round(o.r+a.r*e)+","+Math.round(o.g+a.g*e)+","+Math.round(o.b+a.b*e)+","+(o.a+a.a*e)+")":o+a*e;t.setAttr(r,s)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,t=Sy.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,t=Sy.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(1e3*e),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,t=this._id,n=Sy.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const r in n)delete Sy.tweens[e][r];delete Sy.attrs[e][t],Sy.tweens[e]&&(0===Object.keys(Sy.tweens[e]).length&&delete Sy.tweens[e],0===Object.keys(Sy.attrs[e]).length&&delete Sy.attrs[e])}}Sy.attrs={},Sy.tweens={},yb.prototype.to=function(e){const t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()};new Sy(e).play()};const wy={BackEaseIn(e,t,n,r){const i=1.70158;return n*(e/=r)*e*((i+1)*e-i)+t},BackEaseOut(e,t,n,r){const i=1.70158;return n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},BackEaseInOut(e,t,n,r){let i=1.70158;return(e/=r/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},ElasticEaseIn(e,t,n,r,i,o){let a=0;return 0===e?t:1===(e/=r)?t+n:(o||(o=.3*r),!i||i<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/o)+t)},ElasticEaseOut(e,t,n,r,i,o){let a=0;return 0===e?t:1===(e/=r)?t+n:(o||(o=.3*r),!i||i<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-a)*(2*Math.PI)/o)+n+t)},ElasticEaseInOut(e,t,n,r,i,o){let a=0;return 0===e?t:2==(e/=r/2)?t+n:(o||(o=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/o)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/o)*.5+n+t)},BounceEaseOut:(e,t,n,r)=>(e/=r)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t,BounceEaseIn:(e,t,n,r)=>n-wy.BounceEaseOut(r-e,0,n,r)+t,BounceEaseInOut:(e,t,n,r)=>e<r/2?.5*wy.BounceEaseIn(2*e,0,n,r)+t:.5*wy.BounceEaseOut(2*e-r,0,n,r)+.5*n+t,EaseIn:(e,t,n,r)=>n*(e/=r)*e+t,EaseOut:(e,t,n,r)=>-n*(e/=r)*(e-2)+t,EaseInOut:(e,t,n,r)=>(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t,StrongEaseIn:(e,t,n,r)=>n*(e/=r)*e*e*e*e+t,StrongEaseOut:(e,t,n,r)=>n*((e=e/r-1)*e*e*e*e+1)+t,StrongEaseInOut:(e,t,n,r)=>(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t,Linear:(e,t,n,r)=>n*e/r+t},Cy=Dm._assign(wm,{Util:Dm,Transform:_m,Node:yb,Container:xb,Stage:ey,stages:Zb,Layer:hy,FastLayer:fy,Group:py,DD:qm,Shape:cy,shapes:ly,Animation:my,Tween:Sy,Easings:wy,Context:Bm,Canvas:Hm});class ky extends cy{_sceneFunc(e){const t=wm.getAngle(this.angle()),n=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,n),e.arc(0,0,this.innerRadius(),t,0,!n),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),n=this.clockwise(),r=wm.getAngle(n?360-this.angle():this.angle()),i=Math.cos(Math.min(r,Math.PI)),o=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),a=Math.sin(Math.min(r,Math.PI/2)),s=i*(i>0?e:t),l=o*(o>0?e:t),c=a*(a>0?t:e);return{x:s,y:n?-1*c:l,width:1*t-s,height:c-l}}}function _y(e,t,n,r,i,o,a){const s=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2)),l=Math.sqrt(Math.pow(i-n,2)+Math.pow(o-r,2)),c=a*s/(s+l),u=a*l/(s+l);return[n-c*(i-e),r-c*(o-t),n+u*(i-e),r+u*(o-t)]}function Ey(e,t){const n=e.length,r=[];for(let i=2;i<n-2;i+=2){const n=_y(e[i-2],e[i-1],e[i],e[i+1],e[i+2],e[i+3],t);isNaN(n[0])||(r.push(n[0]),r.push(n[1]),r.push(e[i]),r.push(e[i+1]),r.push(n[2]),r.push(n[3]))}return r}ky.prototype._centroid=!0,ky.prototype.className="Arc",ky.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],Cm(ky),rb.addGetterSetter(ky,"innerRadius",0,Ym()),rb.addGetterSetter(ky,"outerRadius",0,Ym()),rb.addGetterSetter(ky,"angle",0,Ym()),rb.addGetterSetter(ky,"clockwise",!1,eb());let Py=class extends cy{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const t=this.points(),n=t.length,r=this.tension(),i=this.closed(),o=this.bezier();if(!n)return;let a=0;if(e.beginPath(),e.moveTo(t[0],t[1]),0!==r&&n>4){const r=this.getTensionPoints(),o=r.length;for(a=i?0:4,i||e.quadraticCurveTo(r[0],r[1],r[2],r[3]);a<o-2;)e.bezierCurveTo(r[a++],r[a++],r[a++],r[a++],r[a++],r[a++]);i||e.quadraticCurveTo(r[o-2],r[o-1],t[n-2],t[n-1])}else if(o)for(a=2;a<n;)e.bezierCurveTo(t[a++],t[a++],t[a++],t[a++],t[a++],t[a++]);else for(a=2;a<n;a+=2)e.lineTo(t[a],t[a+1]);i?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Ey(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),t=e.length,n=this.tension(),r=_y(e[t-2],e[t-1],e[0],e[1],e[2],e[3],n),i=_y(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],n),o=Ey(e,n);return[r[2],r[3]].concat(o).concat([i[0],i[1],e[t-2],e[t-1],i[2],i[3],r[0],r[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};e=0!==this.tension()?[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.points();let t,n,r=e[0],i=e[0],o=e[1],a=e[1];for(let s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],r=Math.min(r,t),i=Math.max(i,t),o=Math.min(o,n),a=Math.max(a,n);return{x:r,y:o,width:i-r,height:a-o}}};Py.prototype.className="Line",Py.prototype._attrsAffectingSize=["points","bezier","tension"],Cm(Py),rb.addGetterSetter(Py,"closed",!1),rb.addGetterSetter(Py,"bezier",!1),rb.addGetterSetter(Py,"tension",0,Ym()),rb.addGetterSetter(Py,"points",[],function(){if(wm.isUnminified)return function(e,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(Dm._isArray(e)?e.forEach(function(e){Dm._isNumber(e)||Dm.warn('"'+t+'" attribute has non numeric element '+e+". Make sure that all elements are numbers.")}):Dm.warn(Xm(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}());const $y=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],My=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Ny=[[1],[1,1],[1,2,1],[1,3,3,1]],Ay=(e,t,n)=>{let r,i;const o=n/2;r=0;for(let a=0;a<20;a++)i=o*$y[20][a]+o,r+=My[20][a]*Ry(e,t,i);return o*r},Ty=(e,t,n)=>{void 0===n&&(n=1);const r=e[0]-2*e[1]+e[2],i=t[0]-2*t[1]+t[2],o=2*e[1]-2*e[0],a=2*t[1]-2*t[0],s=4*(r*r+i*i),l=4*(r*o+i*a),c=o*o+a*a;if(0===s)return n*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));const u=l/(2*s),d=n+u,h=c/s-u*u,f=d*d+h>0?Math.sqrt(d*d+h):0,p=u*u+h>0?Math.sqrt(u*u+h):0,g=u+Math.sqrt(u*u+h)!==0?h*Math.log(Math.abs((d+f)/(u+p))):0;return Math.sqrt(s)/2*(d*f-u*p+g)};function Ry(e,t,n){const r=Iy(1,n,e),i=Iy(1,n,t),o=r*r+i*i;return Math.sqrt(o)}const Iy=(e,t,n)=>{const r=n.length-1;let i,o;if(0===r)return 0;if(0===e){o=0;for(let e=0;e<=r;e++)o+=Ny[r][e]*Math.pow(1-t,r-e)*Math.pow(t,e)*n[e];return o}i=new Array(r);for(let a=0;a<r;a++)i[a]=r*(n[a+1]-n[a]);return Iy(e-1,t,i)},Dy=(e,t,n)=>{let r=1,i=e/t,o=(e-n(i))/t,a=0;for(;r>.001;){const s=n(i+o),l=Math.abs(e-s)/t;if(l<r)r=l,i+=o;else{const a=n(i-o),s=Math.abs(e-a)/t;s<r?(r=s,i-=o):o/=2}if(a++,a>500)break}return i};class Ly extends cy{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ly.parsePathData(this.data()),this.pathLength=Ly.getPathLength(this.dataArray)}_sceneFunc(e){const t=this.dataArray;e.beginPath();let n=!1;for(let r=0;r<t.length;r++){const i=t[r].command,o=t[r].points;switch(i){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":const t=o[0],r=o[1],i=o[2],a=o[3],s=o[4],l=o[5],c=o[6],u=o[7],d=i>a?i:a,h=i>a?1:i/a,f=i>a?a/i:1;e.translate(t,r),e.rotate(c),e.scale(h,f),e.arc(0,0,d,s,s+l,1-u),e.scale(1/h,1/f),e.rotate(-c),e.translate(-t,-r);break;case"z":n=!0,e.closePath()}}n||this.hasFill()?e.fillStrokeShape(this):e.strokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(t){if("A"===t.command){const n=t.points[4],r=t.points[5],i=t.points[4]+r;let o=Math.PI/180;if(Math.abs(n-i)<o&&(o=Math.abs(n-i)),r<0)for(let a=n-o;a>i;a-=o){const n=Ly.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],a,0);e.push(n.x,n.y)}else for(let a=n+o;a<i;a+=o){const n=Ly.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],a,0);e.push(n.x,n.y)}}else if("C"===t.command)for(let n=0;n<=1;n+=.01){const r=Ly.getPointOnCubicBezier(n,t.start.x,t.start.y,t.points[0],t.points[1],t.points[2],t.points[3],t.points[4],t.points[5]);e.push(r.x,r.y)}else e=e.concat(t.points)});let t,n,r=e[0],i=e[0],o=e[1],a=e[1];for(let s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],isNaN(t)||(r=Math.min(r,t),i=Math.max(i,t)),isNaN(n)||(o=Math.min(o,n),a=Math.max(a,n));return{x:r,y:o,width:i-r,height:a-o}}getLength(){return this.pathLength}getPointAtLength(e){return Ly.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}static getPathLength(e){let t=0;for(let n=0;n<e.length;++n)t+=e[n].pathLength;return t}static getPointAtLengthOfDataArray(e,t){let n,r=0,i=t.length;if(!i)return null;for(;r<i&&e>t[r].pathLength;)e-=t[r].pathLength,++r;if(r===i)return n=t[r-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01){return"M"===t[r].command?(n=t[r].points.slice(0,2),{x:n[0],y:n[1]}):{x:t[r].start.x,y:t[r].start.y}}const o=t[r],a=o.points;switch(o.command){case"L":return Ly.getPointOnLine(e,o.start.x,o.start.y,a[0],a[1]);case"C":return Ly.getPointOnCubicBezier(Dy(e,Ly.getPathLength(t),e=>Ay([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],e)),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return Ly.getPointOnQuadraticBezier(Dy(e,Ly.getPathLength(t),e=>Ty([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],e)),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":const n=a[0],r=a[1],i=a[2],s=a[3],l=a[5],c=a[6];let u=a[4];return u+=l*e/o.pathLength,Ly.getPointOnEllipticalArc(n,r,i,s,u,c)}return null}static getPointOnLine(e,t,n,r,i,o,a){o=null!=o?o:t,a=null!=a?a:n;const s=this.getLineLength(t,n,r,i);if(s<1e-10)return{x:t,y:n};if(r===t)return{x:o,y:a+(i>n?e:-e)};const l=(i-n)/(r-t),c=Math.sqrt(e*e/(1+l*l))*(r<t?-1:1),u=l*c;if(Math.abs(a-n-l*(o-t))<1e-10)return{x:o+c,y:a+u};const d=((o-t)*(r-t)+(a-n)*(i-n))/(s*s),h=t+d*(r-t),f=n+d*(i-n),p=this.getLineLength(o,a,h,f),g=Math.sqrt(e*e-p*p),m=Math.sqrt(g*g/(1+l*l))*(r<t?-1:1);return{x:h+m,y:f+l*m}}static getPointOnCubicBezier(e,t,n,r,i,o,a,s,l){function c(e){return e*e*e}function u(e){return 3*e*e*(1-e)}function d(e){return 3*e*(1-e)*(1-e)}function h(e){return(1-e)*(1-e)*(1-e)}return{x:s*c(e)+o*u(e)+r*d(e)+t*h(e),y:l*c(e)+a*u(e)+i*d(e)+n*h(e)}}static getPointOnQuadraticBezier(e,t,n,r,i,o,a){function s(e){return e*e}function l(e){return 2*e*(1-e)}function c(e){return(1-e)*(1-e)}return{x:o*s(e)+r*l(e)+t*c(e),y:a*s(e)+i*l(e)+n*c(e)}}static getPointOnEllipticalArc(e,t,n,r,i,o){const a=Math.cos(o),s=Math.sin(o),l=n*Math.cos(i),c=r*Math.sin(i);return{x:e+(l*a-c*s),y:t+(l*s+c*a)}}static parsePathData(e){if(!e)return[];let t=e;const n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(let u=0;u<n.length;u++)t=t.replace(new RegExp(n[u],"g"),"|"+n[u]);const r=t.split("|"),i=[],o=[];let a=0,s=0;const l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let c;for(let u=1;u<r.length;u++){let e=r[u],t=e.charAt(0);for(e=e.slice(1),o.length=0;c=l.exec(e);)o.push(c[0]);let n=[],d="A"===t||"a"===t?0:-1;for(let r=0,i=o.length;r<i;r++){const e=o[r];if("00"!==e)if(d>=0){if(3===d){if(/^[01]{2}\d+(?:\.\d+)?$/.test(e)){n.push(parseInt(e[0],10)),n.push(parseInt(e[1],10)),n.push(parseFloat(e.slice(2))),d+=3,d>=7&&(d-=7);continue}if("11"===e||"10"===e||"01"===e){n.push(parseInt(e[0],10)),n.push(parseInt(e[1],10)),d+=2,d>=7&&(d-=7);continue}if("0"===e||"1"===e){n.push(parseInt(e,10)),d+=1,d>=7&&(d-=7);continue}}else if(4===d){if(/^[01]\d+(?:\.\d+)?$/.test(e)){n.push(parseInt(e[0],10)),n.push(parseFloat(e.slice(1))),d+=2,d>=7&&(d-=7);continue}if("0"===e||"1"===e){n.push(parseInt(e,10)),d+=1,d>=7&&(d-=7);continue}}const t=parseFloat(e);isNaN(t)?n.push(0):n.push(t),d+=1,d>=7&&(d-=7)}else{const t=parseFloat(e);isNaN(t)?n.push(0):n.push(t)}else n.push(0,0),d>=0&&(d+=2,d>=7&&(d-=7))}for(;n.length>0&&!isNaN(n[0]);){let e="",r=[];const o=a,l=s;let c,u,d,h,f,p,g,m,b,y;switch(t){case"l":a+=n.shift(),s+=n.shift(),e="L",r.push(a,s);break;case"L":a=n.shift(),s=n.shift(),r.push(a,s);break;case"m":const o=n.shift(),l=n.shift();if(a+=o,s+=l,e="M",i.length>2&&"z"===i[i.length-1].command)for(let e=i.length-2;e>=0;e--)if("M"===i[e].command){a=i[e].points[0]+o,s=i[e].points[1]+l;break}r.push(a,s),t="l";break;case"M":a=n.shift(),s=n.shift(),e="M",r.push(a,s),t="L";break;case"h":a+=n.shift(),e="L",r.push(a,s);break;case"H":a=n.shift(),e="L",r.push(a,s);break;case"v":s+=n.shift(),e="L",r.push(a,s);break;case"V":s=n.shift(),e="L",r.push(a,s);break;case"C":r.push(n.shift(),n.shift(),n.shift(),n.shift()),a=n.shift(),s=n.shift(),r.push(a,s);break;case"c":r.push(a+n.shift(),s+n.shift(),a+n.shift(),s+n.shift()),a+=n.shift(),s+=n.shift(),e="C",r.push(a,s);break;case"S":u=a,d=s,c=i[i.length-1],"C"===c.command&&(u=a+(a-c.points[2]),d=s+(s-c.points[3])),r.push(u,d,n.shift(),n.shift()),a=n.shift(),s=n.shift(),e="C",r.push(a,s);break;case"s":u=a,d=s,c=i[i.length-1],"C"===c.command&&(u=a+(a-c.points[2]),d=s+(s-c.points[3])),r.push(u,d,a+n.shift(),s+n.shift()),a+=n.shift(),s+=n.shift(),e="C",r.push(a,s);break;case"Q":r.push(n.shift(),n.shift()),a=n.shift(),s=n.shift(),r.push(a,s);break;case"q":r.push(a+n.shift(),s+n.shift()),a+=n.shift(),s+=n.shift(),e="Q",r.push(a,s);break;case"T":u=a,d=s,c=i[i.length-1],"Q"===c.command&&(u=a+(a-c.points[0]),d=s+(s-c.points[1])),a=n.shift(),s=n.shift(),e="Q",r.push(u,d,a,s);break;case"t":u=a,d=s,c=i[i.length-1],"Q"===c.command&&(u=a+(a-c.points[0]),d=s+(s-c.points[1])),a+=n.shift(),s+=n.shift(),e="Q",r.push(u,d,a,s);break;case"A":h=n.shift(),f=n.shift(),p=n.shift(),g=n.shift(),m=n.shift(),b=a,y=s,a=n.shift(),s=n.shift(),e="A",r=this.convertEndpointToCenterParameterization(b,y,a,s,g,m,h,f,p);break;case"a":h=n.shift(),f=n.shift(),p=n.shift(),g=n.shift(),m=n.shift(),b=a,y=s,a+=n.shift(),s+=n.shift(),e="A",r=this.convertEndpointToCenterParameterization(b,y,a,s,g,m,h,f,p)}i.push({command:e||t,points:r,start:{x:o,y:l},pathLength:this.calcLength(o,l,e||t,r)})}"z"!==t&&"Z"!==t||i.push({command:"z",points:[],start:void 0,pathLength:0})}return i}static calcLength(e,t,n,r){let i,o,a,s;const l=Ly;switch(n){case"L":return l.getLineLength(e,t,r[0],r[1]);case"C":return Ay([e,r[0],r[2],r[4]],[t,r[1],r[3],r[5]],1);case"Q":return Ty([e,r[0],r[2]],[t,r[1],r[3]],1);case"A":i=0;const n=r[4],c=r[5],u=r[4]+c;let d=Math.PI/180;if(Math.abs(n-u)<d&&(d=Math.abs(n-u)),o=l.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],n,0),c<0)for(s=n-d;s>u;s-=d)a=l.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),i+=l.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(s=n+d;s<u;s+=d)a=l.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),i+=l.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=l.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),i+=l.getLineLength(o.x,o.y,a.x,a.y),i}return 0}static convertEndpointToCenterParameterization(e,t,n,r,i,o,a,s,l){const c=l*(Math.PI/180),u=Math.cos(c)*(e-n)/2+Math.sin(c)*(t-r)/2,d=-1*Math.sin(c)*(e-n)/2+Math.cos(c)*(t-r)/2,h=u*u/(a*a)+d*d/(s*s);h>1&&(a*=Math.sqrt(h),s*=Math.sqrt(h));let f=Math.sqrt((a*a*(s*s)-a*a*(d*d)-s*s*(u*u))/(a*a*(d*d)+s*s*(u*u)));i===o&&(f*=-1),isNaN(f)&&(f=0);const p=f*a*d/s,g=f*-s*u/a,m=(e+n)/2+Math.cos(c)*p-Math.sin(c)*g,b=(t+r)/2+Math.sin(c)*p+Math.cos(c)*g,y=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},v=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(y(e)*y(t))},x=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(v(e,t))},S=x([1,0],[(u-p)/a,(d-g)/s]),w=[(u-p)/a,(d-g)/s],C=[(-1*u-p)/a,(-1*d-g)/s];let k=x(w,C);return v(w,C)<=-1&&(k=Math.PI),v(w,C)>=1&&(k=0),0===o&&k>0&&(k-=2*Math.PI),1===o&&k<0&&(k+=2*Math.PI),[m,b,a,s,S,k,c,o]}}Ly.prototype.className="Path",Ly.prototype._attrsAffectingSize=["data"],Cm(Ly),rb.addGetterSetter(Ly,"data");class zy extends Py{_sceneFunc(e){super._sceneFunc(e);const t=2*Math.PI,n=this.points();let r=n;const i=0!==this.tension()&&n.length>4;i&&(r=this.getTensionPoints());const o=this.pointerLength(),a=n.length;let s,l;if(i){const e=[r[r.length-4],r[r.length-3],r[r.length-2],r[r.length-1],n[a-2],n[a-1]],t=Ly.calcLength(r[r.length-4],r[r.length-3],"C",e),i=Ly.getPointOnQuadraticBezier(Math.min(1,1-o/t),e[0],e[1],e[2],e[3],e[4],e[5]);s=n[a-2]-i.x,l=n[a-1]-i.y}else s=n[a-2]-n[a-4],l=n[a-1]-n[a-3];const c=(Math.atan2(l,s)+t)%t,u=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(n[a-2],n[a-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-o,u/2),e.lineTo(-o,-u/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(n[0],n[1]),i?(s=(r[0]+r[2])/2-n[0],l=(r[1]+r[3])/2-n[1]):(s=n[2]-n[0],l=n[3]-n[1]),e.rotate((Math.atan2(-l,-s)+t)%t),e.moveTo(0,0),e.lineTo(-o,u/2),e.lineTo(-o,-u/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x,y:e.y-t,width:e.width,height:e.height+2*t}}}zy.prototype.className="Arrow",Cm(zy),rb.addGetterSetter(zy,"pointerLength",10,Ym()),rb.addGetterSetter(zy,"pointerWidth",10,Ym()),rb.addGetterSetter(zy,"pointerAtBeginning",!1),rb.addGetterSetter(zy,"pointerAtEnding",!0);let Wy=class extends cy{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};Wy.prototype._centroid=!0,Wy.prototype.className="Circle",Wy.prototype._attrsAffectingSize=["radius"],Cm(Wy),rb.addGetterSetter(Wy,"radius",0,Ym());class Oy extends cy{_sceneFunc(e){const t=this.radiusX(),n=this.radiusY();e.beginPath(),e.save(),t!==n&&e.scale(1,n/t),e.arc(0,0,t,0,2*Math.PI,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Oy.prototype.className="Ellipse",Oy.prototype._centroid=!0,Oy.prototype._attrsAffectingSize=["radiusX","radiusY"],Cm(Oy),rb.addComponentsGetterSetter(Oy,"radius",["x","y"]),rb.addGetterSetter(Oy,"radiusX",0,Ym()),rb.addGetterSetter(Oy,"radiusY",0,Ym());class By extends cy{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",e=>{this._removeImageLoad(e.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&4===e.readyState||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),t=this.hasShadow();return!(!e||!t)||super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),n=this.getHeight(),r=this.cornerRadius(),i=this.attrs.image;let o;if(i){const e=this.attrs.cropWidth,r=this.attrs.cropHeight;o=e&&r?[i,this.cropX(),this.cropY(),e,r,0,0,t,n]:[i,0,0,t,n]}(this.hasFill()||this.hasStroke()||r)&&(e.beginPath(),r?Dm.drawRoundedRectPath(e,t,n,r):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)),i&&(r&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){const t=this.width(),n=this.height(),r=this.cornerRadius();e.beginPath(),r?Dm.drawRoundedRectPath(e,t,n,r):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t,n;return null!==(n=null!==(e=this.attrs.width)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.width)&&void 0!==n?n:0}getHeight(){var e,t,n;return null!==(n=null!==(e=this.attrs.height)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.height)&&void 0!==n?n:0}static fromURL(e,t,n=null){const r=Dm.createImageElement();r.onload=function(){const e=new By({image:r});t(e)},r.onerror=n,r.crossOrigin="Anonymous",r.src=e}}By.prototype.className="Image",By.prototype._attrsAffectingSize=["image"],Cm(By),rb.addGetterSetter(By,"cornerRadius",0,Km(4)),rb.addGetterSetter(By,"image"),rb.addComponentsGetterSetter(By,"crop",["x","y","width","height"]),rb.addGetterSetter(By,"cropX",0,Ym()),rb.addGetterSetter(By,"cropY",0,Ym()),rb.addGetterSetter(By,"cropWidth",0,Ym()),rb.addGetterSetter(By,"cropHeight",0,Ym());const Fy=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],jy="up",Hy="right",Gy="down",Uy="left",qy=Fy.length;class Xy extends py{constructor(e){super(e),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let t,n=this;const r=function(){n._sync()};for(t=0;t<qy;t++)e.on(Fy[t]+"Change.konva",r)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e,t,n,r,i,o,a,s=this.getText(),l=this.getTag();if(s&&l){switch(e=s.width(),t=s.height(),n=l.pointerDirection(),r=l.pointerWidth(),a=l.pointerHeight(),i=0,o=0,n){case jy:i=e/2,o=-1*a;break;case Hy:i=e+r,o=t/2;break;case Gy:i=e/2,o=t+a;break;case Uy:i=-1*r,o=t/2}l.setAttrs({x:-1*i,y:-1*o,width:e,height:t}),s.setAttrs({x:-1*i,y:-1*o})}}}Xy.prototype.className="Label",Cm(Xy);class Vy extends cy{_sceneFunc(e){const t=this.width(),n=this.height(),r=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let s=0,l=0,c=0,u=0;"number"==typeof a?s=l=c=u=Math.min(a,t/2,n/2):(s=Math.min(a[0]||0,t/2,n/2),l=Math.min(a[1]||0,t/2,n/2),u=Math.min(a[2]||0,t/2,n/2),c=Math.min(a[3]||0,t/2,n/2)),e.beginPath(),e.moveTo(s,0),r===jy&&(e.lineTo((t-i)/2,0),e.lineTo(t/2,-1*o),e.lineTo((t+i)/2,0)),e.lineTo(t-l,0),e.arc(t-l,l,l,3*Math.PI/2,0,!1),r===Hy&&(e.lineTo(t,(n-o)/2),e.lineTo(t+i,n/2),e.lineTo(t,(n+o)/2)),e.lineTo(t,n-u),e.arc(t-u,n-u,u,0,Math.PI/2,!1),r===Gy&&(e.lineTo((t+i)/2,n),e.lineTo(t/2,n+o),e.lineTo((t-i)/2,n)),e.lineTo(c,n),e.arc(c,n-c,c,Math.PI/2,Math.PI,!1),r===Uy&&(e.lineTo(0,(n+o)/2),e.lineTo(-1*i,n/2),e.lineTo(0,(n-o)/2)),e.lineTo(0,s),e.arc(s,s,s,Math.PI,3*Math.PI/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,t=0,n=this.pointerWidth(),r=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),a=this.height();return i===jy?(t-=r,a+=r):i===Gy?a+=r:i===Uy?(e-=1.5*n,o+=n):i===Hy&&(o+=1.5*n),{x:e,y:t,width:o,height:a}}}Vy.prototype.className="Tag",Cm(Vy),rb.addGetterSetter(Vy,"pointerDirection","none"),rb.addGetterSetter(Vy,"pointerWidth",0,Ym()),rb.addGetterSetter(Vy,"pointerHeight",0,Ym()),rb.addGetterSetter(Vy,"cornerRadius",0,Km(4));let Yy=class extends cy{_sceneFunc(e){const t=this.cornerRadius(),n=this.width(),r=this.height();e.beginPath(),t?Dm.drawRoundedRectPath(e,n,r,t):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}};Yy.prototype.className="Rect",Cm(Yy),rb.addGetterSetter(Yy,"cornerRadius",0,Km(4));let Ky=class extends cy{_sceneFunc(e){const t=this._getPoints(),n=this.radius(),r=this.sides(),i=this.cornerRadius();if(e.beginPath(),i)Dm.drawRoundedPolygonPath(e,t,r,n,i);else{e.moveTo(t[0].x,t[0].y);for(let n=1;n<t.length;n++)e.lineTo(t[n].x,t[n].y)}e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,n=[];for(let r=0;r<e;r++)n.push({x:t*Math.sin(2*r*Math.PI/e),y:-1*t*Math.cos(2*r*Math.PI/e)});return n}getSelfRect(){const e=this._getPoints();let t=e[0].x,n=e[0].x,r=e[0].y,i=e[0].y;return e.forEach(e=>{t=Math.min(t,e.x),n=Math.max(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.y)}),{x:t,y:r,width:n-t,height:i-r}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};Ky.prototype.className="RegularPolygon",Ky.prototype._centroid=!0,Ky.prototype._attrsAffectingSize=["radius"],Cm(Ky),rb.addGetterSetter(Ky,"radius",0,Ym()),rb.addGetterSetter(Ky,"sides",0,Ym()),rb.addGetterSetter(Ky,"cornerRadius",0,Km(4));const Qy=2*Math.PI;class Jy extends cy{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,Qy,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),Qy,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Jy.prototype.className="Ring",Jy.prototype._centroid=!0,Jy.prototype._attrsAffectingSize=["innerRadius","outerRadius"],Cm(Jy),rb.addGetterSetter(Jy,"innerRadius",0,Ym()),rb.addGetterSetter(Jy,"outerRadius",0,Ym());class Zy extends cy{constructor(e){super(e),this._updated=!0,this.anim=new my(()=>{const e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const t=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[t],o=this.frameOffsets(),a=i[r+0],s=i[r+1],l=i[r+2],c=i[r+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,l,c),e.closePath(),e.fillStrokeShape(this)),u)if(o){const r=o[t],i=2*n;e.drawImage(u,a,s,l,c,r[i+0],r[i+1],l,c)}else e.drawImage(u,a,s,l,c,0,0,l,c)}_hitFunc(e){const t=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[t],o=this.frameOffsets(),a=i[r+2],s=i[r+3];if(e.beginPath(),o){const r=o[t],i=2*n;e.rect(r[i+0],r[i+1],a,s)}else e.rect(0,0,a,s);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),t=this.animation();e<this.animations()[t].length/4-1?this.frameIndex(e+1):this.frameIndex(0)}}Zy.prototype.className="Sprite",Cm(Zy),rb.addGetterSetter(Zy,"animation"),rb.addGetterSetter(Zy,"animations"),rb.addGetterSetter(Zy,"frameOffsets"),rb.addGetterSetter(Zy,"image"),rb.addGetterSetter(Zy,"frameIndex",0,Ym()),rb.addGetterSetter(Zy,"frameRate",17,Ym()),rb.backCompat(Zy,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class ev extends cy{_sceneFunc(e){const t=this.innerRadius(),n=this.outerRadius(),r=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(let i=1;i<2*r;i++){const o=i%2==0?n:t,a=o*Math.sin(i*Math.PI/r),s=-1*o*Math.cos(i*Math.PI/r);e.lineTo(a,s)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}function tv(e){return[...e].reduce((e,t,n,r)=>{if(new RegExp("\\p{Emoji}","u").test(t)){const i=r[n+1];i&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(i)?(e.push(t+i),r[n+1]=""):e.push(t)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(t+(r[n+1]||""))?e.push(t+r[n+1]):n>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(t)?e[e.length-1]+=t:t&&e.push(t);return e},[])}ev.prototype.className="Star",ev.prototype._centroid=!0,ev.prototype._attrsAffectingSize=["innerRadius","outerRadius"],Cm(ev),rb.addGetterSetter(ev,"numPoints",5,Ym()),rb.addGetterSetter(ev,"innerRadius",0,Ym()),rb.addGetterSetter(ev,"outerRadius",0,Ym());const nv="auto",rv="inherit",iv="justify",ov="left",av="middle",sv="normal",lv=" ",cv="none",uv=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],dv=uv.length;let hv;function fv(){return hv||(hv=Dm.createCanvasElement().getContext("2d"),hv)}let pv=class extends cy{constructor(e){super(function(e){return(e=e||{}).fillLinearGradientColorStops||e.fillRadialGradientColorStops||e.fillPatternImage||(e.fill=e.fill||"black"),e}(e)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<dv;t++)this.on(uv[t]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(e){var t,n;const r=this.textArr,i=r.length;if(!this.text())return;let o,a=this.padding(),s=this.fontSize(),l=this.lineHeight()*s,c=this.verticalAlign(),u=this.direction(),d=0,h=this.align(),f=this.getWidth(),p=this.letterSpacing(),g=this.charRenderFunc(),m=this.fill(),b=this.textDecoration(),y=-1!==b.indexOf("underline"),v=-1!==b.indexOf("line-through");u=u===rv?e.direction:u;let x=l/2,S=av;if(!wm.legacyTextRendering){const e=this.measureSize("M");S="alphabetic";x=((null!==(t=e.fontBoundingBoxAscent)&&void 0!==t?t:e.actualBoundingBoxAscent)-(null!==(n=e.fontBoundingBoxDescent)&&void 0!==n?n:e.actualBoundingBoxDescent))/2+l/2}for("rtl"===u&&e.setAttr("direction",u),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",S),e.setAttr("textAlign",ov),c===av?d=(this.getHeight()-i*l-2*a)/2:"bottom"===c&&(d=this.getHeight()-i*l-2*a),e.translate(a,d+a),o=0;o<i;o++){let t=0,n=0;const c=r[o],d=c.text,b=c.width,S=c.lastInParagraph;if(e.save(),"right"===h?t+=f-b-2*a:"center"===h&&(t+=(f-b-2*a)/2),y){e.save(),e.beginPath();const r=t,i=x+n+(wm.legacyTextRendering?Math.round(s/2):Math.round(s/4));e.moveTo(r,i);const o=h!==iv||S?b:f-2*a;e.lineTo(r+Math.round(o),i),e.lineWidth=s/15;const l=this._getLinearGradient();e.strokeStyle=l||m,e.stroke(),e.restore()}const w=t;if("rtl"===u||0===p&&h!==iv&&!g)0!==p&&e.setAttr("letterSpacing",`${p}px`),this._partialTextX=t,this._partialTextY=x+n,this._partialText=d,e.fillStrokeShape(this);else{const i=d.split(" ").length-1,s=tv(d);for(let l=0;l<s.length;l++){const c=s[l];if(" "!==c||S||h!==iv||(t+=(f-2*a-b)/i),this._partialTextX=t,this._partialTextY=x+n,this._partialText=c,g){e.save();g({char:c,index:l+r.slice(0,o).reduce((e,t)=>e+tv(t.text).length,0),x:t,y:x+n,lineIndex:o,column:l,isLastInLine:S,width:this.measureSize(c).width,context:e})}e.fillStrokeShape(this),g&&e.restore(),t+=this.measureSize(c).width+p}}if(v){e.save(),e.beginPath();const t=wm.legacyTextRendering?0:-Math.round(s/4),r=w;e.moveTo(r,x+n+t);const i=h!==iv||S?b:f-2*a;e.lineTo(r+Math.round(i),x+n+t),e.lineWidth=s/15;const o=this._getLinearGradient();e.strokeStyle=o||m,e.stroke(),e.restore()}e.restore(),i>1&&(x+=l)}}_hitFunc(e){const t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}setText(e){const t=Dm._isString(e)?e:null==e?"":e+"";return this._setAttr("text",t),this}getWidth(){return this.attrs.width===nv||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===nv||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Dm.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,n,r,i,o,a,s,l,c,u,d;let h,f=fv(),p=this.fontSize();f.save(),f.font=this._getContextFont(),h=f.measureText(e),f.restore();const g=p/100;return{actualBoundingBoxAscent:null!==(t=h.actualBoundingBoxAscent)&&void 0!==t?t:71.58203125*g,actualBoundingBoxDescent:null!==(n=h.actualBoundingBoxDescent)&&void 0!==n?n:0,actualBoundingBoxLeft:null!==(r=h.actualBoundingBoxLeft)&&void 0!==r?r:-7.421875*g,actualBoundingBoxRight:null!==(i=h.actualBoundingBoxRight)&&void 0!==i?i:75.732421875*g,alphabeticBaseline:null!==(o=h.alphabeticBaseline)&&void 0!==o?o:0,emHeightAscent:null!==(a=h.emHeightAscent)&&void 0!==a?a:100*g,emHeightDescent:null!==(s=h.emHeightDescent)&&void 0!==s?s:-20*g,fontBoundingBoxAscent:null!==(l=h.fontBoundingBoxAscent)&&void 0!==l?l:91*g,fontBoundingBoxDescent:null!==(c=h.fontBoundingBoxDescent)&&void 0!==c?c:21*g,hangingBaseline:null!==(u=h.hangingBaseline)&&void 0!==u?u:72.80000305175781*g,ideographicBaseline:null!==(d=h.ideographicBaseline)&&void 0!==d?d:-21*g,width:h.width,height:p}}_getContextFont(){return this.fontStyle()+lv+this.fontVariant()+lv+(this.fontSize()+"px ")+this.fontFamily().split(",").map(e=>{const t=(e=e.trim()).indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e=`"${e}"`),e}).join(", ")}_addTextLine(e){this.align()===iv&&(e=e.trim());const t=this._getTextWidth(e);return this.textArr.push({text:e,width:t,lastInParagraph:!1})}_getTextWidth(e){const t=this.letterSpacing(),n=e.length;return fv().measureText(e).width+t*n}_setTextData(){let e=this.text().split("\n"),t=+this.fontSize(),n=0,r=this.lineHeight()*t,i=this.attrs.width,o=this.attrs.height,a=i!==nv&&void 0!==i,s=o!==nv&&void 0!==o,l=this.padding(),c=i-2*l,u=o-2*l,d=0,h=this.wrap(),f="char"!==h&&h!==cv,p=this.ellipsis();this.textArr=[],fv().font=this._getContextFont();const g=p?this._getTextWidth(""):0;for(let m=0,b=e.length;m<b;++m){let t=e[m],i=this._getTextWidth(t);if(a&&i>c)for(;t.length>0;){let e=0,o=tv(t).length,a="",l=0;for(;e<o;){const n=e+o>>>1,i=tv(t).slice(0,n+1).join(""),h=this._getTextWidth(i);(p&&s&&d+r>u?h+g:h)<=c?(e=n+1,a=i,l=h):o=n}if(!a)break;if(f){const n=tv(t),r=tv(a),i=n[r.length];let o;if((i===lv||"-"===i)&&l<=c)o=r.length;else{const e=r.lastIndexOf(lv),t=r.lastIndexOf("-");o=Math.max(e,t)+1}o>0&&(e=o,a=n.slice(0,e).join(""),l=this._getTextWidth(a))}a=a.trimRight(),this._addTextLine(a),n=Math.max(n,l),d+=r;if(this._shouldHandleEllipsis(d)){this._tryToAddEllipsisToLastLine();break}if(t=tv(t).slice(e).join("").trimLeft(),t.length>0&&(i=this._getTextWidth(t),i<=c)){this._addTextLine(t),d+=r,n=Math.max(n,i);break}}else this._addTextLine(t),d+=r,n=Math.max(n,i),this._shouldHandleEllipsis(d)&&m<b-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),s&&d+r>u)break}this.textHeight=t,this.textWidth=n}_shouldHandleEllipsis(e){const t=+this.fontSize(),n=this.lineHeight()*t,r=this.attrs.height,i=r!==nv&&void 0!==r,o=r-2*this.padding();return!(this.wrap()!==cv)||i&&e+n>o}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,t=e!==nv&&void 0!==e,n=e-2*this.padding(),r=this.ellipsis(),i=this.textArr[this.textArr.length-1];if(i&&r){if(t){this._getTextWidth(i.text+"")<n||(i.text=i.text.slice(0,i.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(i.text+"")}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),t=this.hasShadow();return!(!e||!t)||super._useBufferCanvas()}};pv.prototype._fillFunc=function(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)},pv.prototype._strokeFunc=function(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)},pv.prototype.className="Text",pv.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],Cm(pv),rb.overWriteSetter(pv,"width",Qm()),rb.overWriteSetter(pv,"height",Qm()),rb.addGetterSetter(pv,"direction",rv),rb.addGetterSetter(pv,"fontFamily","Arial"),rb.addGetterSetter(pv,"fontSize",12,Ym()),rb.addGetterSetter(pv,"fontStyle",sv),rb.addGetterSetter(pv,"fontVariant",sv),rb.addGetterSetter(pv,"padding",0,Ym()),rb.addGetterSetter(pv,"align",ov),rb.addGetterSetter(pv,"verticalAlign","top"),rb.addGetterSetter(pv,"lineHeight",1,Ym()),rb.addGetterSetter(pv,"wrap","word"),rb.addGetterSetter(pv,"ellipsis",!1,eb()),rb.addGetterSetter(pv,"letterSpacing",0,Ym()),rb.addGetterSetter(pv,"text","",Jm()),rb.addGetterSetter(pv,"textDecoration",""),rb.addGetterSetter(pv,"charRenderFunc",void 0);const gv="normal";function mv(e){e.fillText(this.partialText,0,0)}function bv(e){e.strokeText(this.partialText,0,0)}class yv extends cy{constructor(e){super(e),this.dummyCanvas=Dm.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Ly.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;return e>this.pathLength?null:Ly.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=Ly.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const t=this.textDecoration(),n=this.fill(),r=this.fontSize(),i=this.glyphInfo,o=-1!==t.indexOf("underline"),a=-1!==t.indexOf("line-through");o&&e.beginPath();for(let s=0;s<i.length;s++){e.save();const t=i[s].p0;e.translate(t.x,t.y),e.rotate(i[s].rotation),this.partialText=i[s].text,e.fillStrokeShape(this),o&&(0===s&&e.moveTo(0,r/2+1),e.lineTo(i[s].width,r/2+1)),e.restore()}if(o&&(e.strokeStyle=n,e.lineWidth=r/20,e.stroke()),a){e.beginPath();for(let t=0;t<i.length;t++){e.save();const n=i[t].p0;e.translate(n.x,n.y),e.rotate(i[t].rotation),0===t&&e.moveTo(0,0),e.lineTo(i[t].width,0),e.restore()}e.strokeStyle=n,e.lineWidth=r/20,e.stroke()}e.restore()}_hitFunc(e){e.beginPath();const t=this.glyphInfo;if(t.length>=1){const n=t[0].p0;e.moveTo(n.x,n.y)}for(let n=0;n<t.length;n++){const r=t[n].p1;e.lineTo(r.x,r.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Dm.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return pv.prototype.setText.call(this,e)}_getContextFont(){return pv.prototype._getContextFont.call(this)}_getTextSize(e){const t=this.dummyCanvas.getContext("2d");t.save(),t.font=this._getContextFont();const n=t.measureText(e);return t.restore(),{width:n.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const e=tv(this.text()),t=[];let n=0;for(let u=0;u<e.length;u++)t.push({char:e[u],width:this._getTextSize(e[u]).width}),n+=t[u].width;const{height:r}=this._getTextSize(this.attrs.text);if(this.textWidth=n,this.textHeight=r,this.glyphInfo=[],!this.attrs.data)return null;const i=this.letterSpacing(),o=this.align(),a=this.kerningFunc(),s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);let l=0;"center"===o&&(l=Math.max(0,this.pathLength/2-s/2)),"right"===o&&(l=Math.max(0,this.pathLength-s));let c=l;for(let u=0;u<t.length;u++){const n=this._getPointAtLength(c);if(!n)return;const r=t[u].char;let l=t[u].width+i;if(" "===r&&"justify"===o){const e=this.text().split(" ").length-1;l+=(this.pathLength-s)/e}const d=this._getPointAtLength(c+l);if(!d)return;const h=Ly.getLineLength(n.x,n.y,d.x,d.y);let f=0;if(a)try{f=a(t[u-1].char,r)*this.fontSize()}catch(uS){f=0}n.x+=f,d.x+=f,this.textWidth+=f;const p=Ly.getPointOnLine(f+h/2,n.x,n.y,d.x,d.y),g=Math.atan2(d.y-n.y,d.x-n.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:e[u],rotation:g,p0:n,p1:d,width:h}),c+=l}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(t){e.push(t.p0.x),e.push(t.p0.y),e.push(t.p1.x),e.push(t.p1.y)});let t,n,r=e[0]||0,i=e[0]||0,o=e[1]||0,a=e[1]||0;for(let l=0;l<e.length/2;l++)t=e[2*l],n=e[2*l+1],r=Math.min(r,t),i=Math.max(i,t),o=Math.min(o,n),a=Math.max(a,n);const s=this.fontSize();return{x:r-s/2,y:o-s/2,width:i-r+s,height:a-o+s}}destroy(){return Dm.releaseCanvas(this.dummyCanvas),super.destroy()}}yv.prototype._fillFunc=mv,yv.prototype._strokeFunc=bv,yv.prototype._fillFuncHit=mv,yv.prototype._strokeFuncHit=bv,yv.prototype.className="TextPath",yv.prototype._attrsAffectingSize=["text","fontSize","data"],Cm(yv),rb.addGetterSetter(yv,"data"),rb.addGetterSetter(yv,"fontFamily","Arial"),rb.addGetterSetter(yv,"fontSize",12,Ym()),rb.addGetterSetter(yv,"fontStyle",gv),rb.addGetterSetter(yv,"align","left"),rb.addGetterSetter(yv,"letterSpacing",0,Ym()),rb.addGetterSetter(yv,"textBaseline","middle"),rb.addGetterSetter(yv,"fontVariant",gv),rb.addGetterSetter(yv,"text",""),rb.addGetterSetter(yv,"textDecoration",""),rb.addGetterSetter(yv,"kerningFunc",void 0);const vv="tr-konva",xv=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${vv}`).join(" "),Sv="nodesRect",wv=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],Cv={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},kv="ontouchstart"in wm._global;const _v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function Ev(e,t,n){const r=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),i=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:r,y:i}}function Pv(e,t){const n=function(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}(e);return Ev(e,t,n)}let $v=0;class Mv extends py{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(xv,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return Dm.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return vv+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const t=e.filter(e=>!e.isAncestorOf(this)||(Dm.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1));this._nodes=e=t,1===e.length&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(e=>{const t=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()};if(e._attrsAffectingSize.length){const n=e._attrsAffectingSize.map(e=>e+"Change."+this._getEventNamespace()).join(" ");e.on(n,t)}e.on(wv.map(e=>e+`.${this._getEventNamespace()}`).join(" "),t),e.on(`absoluteTransformChange.${this._getEventNamespace()}`,t),this._proxyDrag(e)}),this._resetTransformCache();return!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,n=>{t=e.getAbsolutePosition(),this.isDragging()||e===this.findOne(".back")||this.startDrag(n,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!t)return;const r=e.getAbsolutePosition(),i=r.x-t.x,o=r.y-t.y;this.nodes().forEach(t=>{if(t===e)return;if(t.isDragging())return;const r=t.getAbsolutePosition();t.setAbsolutePosition({x:r.x+i,y:r.y+o}),t.startDrag(n)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Sv),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Sv,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),n){const r=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),i=e.getAbsoluteScale(n),o=e.getAbsolutePosition(n),a=r.x*i.x-e.offsetX()*i.x,s=r.y*i.y-e.offsetY()*i.y,l=(wm.getAngle(e.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return Ev({x:o.x+a*Math.cos(l)+s*Math.sin(-l),y:o.y+s*Math.cos(l)+a*Math.sin(l),width:r.width*i.x,height:r.height*i.y,rotation:l},-wm.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map(t=>{const n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],i=t.getAbsoluteTransform();r.forEach(function(t){const n=i.point(t);e.push(n)})});const t=new _m;t.rotate(-wm.getAngle(this.rotation()));let n=1/0,r=1/0,i=-1/0,o=-1/0;e.forEach(function(e){const a=t.point(e);void 0===n&&(n=i=a.x,r=o=a.y),n=Math.min(n,a.x),r=Math.min(r,a.y),i=Math.max(i,a.x),o=Math.max(o,a.y)}),t.invert();const a=t.point({x:n,y:r});return{x:a.x,y:a.y,width:i-n,height:o-r,rotation:wm.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),_v.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const t=new Yy({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:kv?10:"auto"}),n=this;t.on("mousedown touchstart",function(e){n._handleMouseDown(e)}),t.on("dragstart",e=>{t.stopDrag(),e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),t.on("mouseenter",()=>{const n=wm.getAngle(this.rotation()),r=this.rotateAnchorCursor(),i=function(e,t,n){if("rotater"===e)return n;t+=Dm.degToRad(Cv[e]||0);const r=(Dm.radToDeg(t)%360+360)%360;return Dm._inRange(r,337.5,360)||Dm._inRange(r,0,22.5)?"ns-resize":Dm._inRange(r,22.5,67.5)?"nesw-resize":Dm._inRange(r,67.5,112.5)?"ew-resize":Dm._inRange(r,112.5,157.5)?"nwse-resize":Dm._inRange(r,157.5,202.5)?"ns-resize":Dm._inRange(r,202.5,247.5)?"nesw-resize":Dm._inRange(r,247.5,292.5)?"ew-resize":Dm._inRange(r,292.5,337.5)?"nwse-resize":(Dm.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}(e,n,r);t.getStage().content&&(t.getStage().content.style.cursor=i),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){const e=new cy({name:"back",width:0,height:0,sceneFunc(e,t){const n=t.getParent(),r=n.padding();e.beginPath(),e.rect(-r,-r,t.width()+2*r,t.height()+2*r),e.moveTo(t.width()/2,-r),n.rotateEnabled()&&n.rotateLineVisible()&&e.lineTo(t.width()/2,-n.rotateAnchorOffset()*Dm._sign(t.height())-r),e.fillStrokeShape(t)},hitFunc:(e,t)=>{if(!this.shouldOverdrawWholeArea())return;const n=this.padding();e.beginPath(),e.rect(-n,-n,t.width()+2*n,t.height()+2*n),e.fillStrokeShape(t)}});this.add(e),this._proxyDrag(e),e.on("dragstart",e=>{e.cancelBubble=!0}),e.on("dragmove",e=>{e.cancelBubble=!0}),e.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const t=this._getNodeRect(),n=t.width,r=t.height,i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/i),this.cos=Math.abs(n/i),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const o=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},$v++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(t=>{t._fire("transformstart",{evt:e.evt,target:t})})}_handleMouseMove(e){let t,n,r;const i=this.findOne("."+this._movingAnchorName),o=i.getStage();o.setPointersPositions(e);const a=o.getPointerPosition();let s={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const l=i.getAbsolutePosition();this.anchorDragBoundFunc()&&(s=this.anchorDragBoundFunc()(l,s,e)),i.setAbsolutePosition(s);const c=i.getAbsolutePosition();if(l.x===c.x&&l.y===c.y)return;if("rotater"===this._movingAnchorName){const r=this._getNodeRect();t=i.x()-r.width/2,n=-i.y()+r.height/2;let o=Math.atan2(-n,t)+Math.PI/2;r.height<0&&(o-=Math.PI);const a=wm.getAngle(this.rotation())+o,s=wm.getAngle(this.rotationSnapTolerance()),l=function(e,t,n){let r=t;for(let i=0;i<e.length;i++){const o=wm.getAngle(e[i]),a=Math.abs(o-t)%(2*Math.PI);Math.min(a,2*Math.PI-a)<n&&(r=o)}return r}(this.rotationSnaps(),a,s),c=Pv(r,l-r.rotation);return void this._fitNodesInto(c,e)}const u=this.shiftBehavior();let d;d="inverted"===u?this.keepRatio()&&!e.shiftKey:"none"===u?this.keepRatio():this.keepRatio()||e.shiftKey;let h=this.centeredScaling()||e.altKey;if("top-left"===this._movingAnchorName){if(d){const e=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(e.x-i.x(),2)+Math.pow(e.y-i.y(),2));const o=this.findOne(".top-left").x()>e.x?-1:1,a=this.findOne(".top-left").y()>e.y?-1:1;t=r*this.cos*o,n=r*this.sin*a,this.findOne(".top-left").x(e.x-t),this.findOne(".top-left").y(e.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(i.y());else if("top-right"===this._movingAnchorName){if(d){const e=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(i.x()-e.x,2)+Math.pow(e.y-i.y(),2));const o=this.findOne(".top-right").x()<e.x?-1:1,a=this.findOne(".top-right").y()>e.y?-1:1;t=r*this.cos*o,n=r*this.sin*a,this.findOne(".top-right").x(e.x+t),this.findOne(".top-right").y(e.y-n)}var f=i.position();this.findOne(".top-left").y(f.y),this.findOne(".bottom-right").x(f.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(i.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(i.x());else if("bottom-left"===this._movingAnchorName){if(d){const e=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(e.x-i.x(),2)+Math.pow(i.y()-e.y,2));const o=e.x<i.x()?-1:1,a=i.y()<e.y?-1:1;t=r*this.cos*o,n=r*this.sin*a,i.x(e.x-t),i.y(e.y+n)}f=i.position(),this.findOne(".top-left").x(f.x),this.findOne(".bottom-right").y(f.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(i.y());else if("bottom-right"===this._movingAnchorName){if(d){const e=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(i.x()-e.x,2)+Math.pow(i.y()-e.y,2));const o=this.findOne(".bottom-right").x()<e.x?-1:1,a=this.findOne(".bottom-right").y()<e.y?-1:1;t=r*this.cos*o,n=r*this.sin*a,this.findOne(".bottom-right").x(e.x+t),this.findOne(".bottom-right").y(e.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(h=this.centeredScaling()||e.altKey,h){const e=this.findOne(".top-left"),t=this.findOne(".bottom-right"),n=e.x(),r=e.y(),i=this.getWidth()-t.x(),o=this.getHeight()-t.y();t.move({x:-n,y:-r}),e.move({x:i,y:o})}const p=this.findOne(".top-left").getAbsolutePosition();t=p.x,n=p.y;const g=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),m=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:n,width:g,height:m,rotation:wm.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var t;if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const n=this.getNode();$v--,this._fire("transformend",{evt:e,target:n}),null===(t=this.getLayer())||void 0===t||t.batchDraw(),n&&this._nodes.forEach(t=>{var n;t._fire("transformend",{evt:e,target:t}),null===(n=t.getLayer())||void 0===n||n.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,t){const n=this._getNodeRect();if(Dm._inRange(e.width,2*-this.padding()-1,1))return void this.update();if(Dm._inRange(e.height,2*-this.padding()-1,1))return void this.update();const r=new _m;if(r.rotate(wm.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const t=r.point({x:2*-this.padding(),y:0});e.x+=t.x,e.y+=t.y,e.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const t=r.point({x:2*this.padding(),y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.width+=2*this.padding()}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const t=r.point({x:0,y:2*-this.padding()});e.x+=t.x,e.y+=t.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding()}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const t=r.point({x:0,y:2*this.padding()});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding()}if(this.boundBoxFunc()){const t=this.boundBoxFunc()(n,e);t?e=t:Dm.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const i=1e7,o=new _m;o.translate(n.x,n.y),o.rotate(n.rotation),o.scale(n.width/i,n.height/i);const a=new _m,s=e.width/i,l=e.height/i;!1===this.flipEnabled()?(a.translate(e.x,e.y),a.rotate(e.rotation),a.translate(e.width<0?e.width:0,e.height<0?e.height:0),a.scale(Math.abs(s),Math.abs(l))):(a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(s,l));const c=a.multiply(o.invert());this._nodes.forEach(e=>{var t;if(!e.getStage())return;const n=e.getParent().getAbsoluteTransform(),r=e.getTransform().copy();r.translate(e.offsetX(),e.offsetY());const i=new _m;i.multiply(n.copy().invert()).multiply(c).multiply(n).multiply(r);const o=i.decompose();e.setAttrs(o),null===(t=e.getLayer())||void 0===t||t.batchDraw()}),this.rotation(Dm._getRotation(e.rotation)),this._nodes.forEach(e=>{this._fire("transform",{evt:t,target:e}),e._fire("transform",{evt:t,target:e})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e;const t=this._getNodeRect();this.rotation(Dm._getRotation(t.rotation));const n=t.width,r=t.height,i=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),s=this.anchorSize(),l=this.find("._anchor");l.forEach(e=>{e.setAttrs({width:s,height:s,offsetX:s/2,offsetY:s/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:s/2+a,offsetY:s/2+a,visible:o&&i.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:s/2+a,visible:o&&i.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:s/2-a,offsetY:s/2+a,visible:o&&i.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:s/2+a,visible:o&&i.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:r/2,offsetX:s/2-a,visible:o&&i.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:s/2+a,offsetY:s/2-a,visible:o&&i.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:r,offsetY:s/2-a,visible:o&&i.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:r,offsetX:s/2-a,offsetY:s/2-a,visible:o&&i.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*Dm._sign(r)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(e=>e.draggable()),x:0,y:0});const c=this.anchorStyleFunc();c&&l.forEach(e=>{c(e)}),null===(e=this.getLayer())||void 0===e||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),py.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return yb.prototype.toObject.call(this)}clone(e){return yb.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Mv.isTransforming=()=>$v>0,Mv.prototype.className="Transformer",Cm(Mv),rb.addGetterSetter(Mv,"enabledAnchors",_v,function(e){return e instanceof Array||Dm.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(e){-1===_v.indexOf(e)&&Dm.warn("Unknown anchor name: "+e+". Available names are: "+_v.join(", "))}),e||[]}),rb.addGetterSetter(Mv,"flipEnabled",!0,eb()),rb.addGetterSetter(Mv,"resizeEnabled",!0),rb.addGetterSetter(Mv,"anchorSize",10,Ym()),rb.addGetterSetter(Mv,"rotateEnabled",!0),rb.addGetterSetter(Mv,"rotateLineVisible",!0),rb.addGetterSetter(Mv,"rotationSnaps",[]),rb.addGetterSetter(Mv,"rotateAnchorOffset",50,Ym()),rb.addGetterSetter(Mv,"rotateAnchorCursor","crosshair"),rb.addGetterSetter(Mv,"rotationSnapTolerance",5,Ym()),rb.addGetterSetter(Mv,"borderEnabled",!0),rb.addGetterSetter(Mv,"anchorStroke","rgb(0, 161, 255)"),rb.addGetterSetter(Mv,"anchorStrokeWidth",1,Ym()),rb.addGetterSetter(Mv,"anchorFill","white"),rb.addGetterSetter(Mv,"anchorCornerRadius",0,Ym()),rb.addGetterSetter(Mv,"borderStroke","rgb(0, 161, 255)"),rb.addGetterSetter(Mv,"borderStrokeWidth",1,Ym()),rb.addGetterSetter(Mv,"borderDash"),rb.addGetterSetter(Mv,"keepRatio",!0),rb.addGetterSetter(Mv,"shiftBehavior","default"),rb.addGetterSetter(Mv,"centeredScaling",!1),rb.addGetterSetter(Mv,"ignoreStroke",!1),rb.addGetterSetter(Mv,"padding",0,Ym()),rb.addGetterSetter(Mv,"nodes"),rb.addGetterSetter(Mv,"node"),rb.addGetterSetter(Mv,"boundBoxFunc"),rb.addGetterSetter(Mv,"anchorDragBoundFunc"),rb.addGetterSetter(Mv,"anchorStyleFunc"),rb.addGetterSetter(Mv,"shouldOverdrawWholeArea",!1),rb.addGetterSetter(Mv,"useSingleNodeRotation",!0),rb.backCompat(Mv,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Nv extends cy{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,wm.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}function Av(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}Nv.prototype.className="Wedge",Nv.prototype._centroid=!0,Nv.prototype._attrsAffectingSize=["radius"],Cm(Nv),rb.addGetterSetter(Nv,"radius",0,Ym()),rb.addGetterSetter(Nv,"angle",0,Ym()),rb.addGetterSetter(Nv,"clockwise",!1),rb.backCompat(Nv,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});const Tv=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Rv=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];rb.addGetterSetter(yb,"blurRadius",0,Ym(),rb.afterSetFilter);rb.addGetterSetter(yb,"brightness",0,Ym(),rb.afterSetFilter);rb.addGetterSetter(yb,"contrast",0,Ym(),rb.afterSetFilter);function Iv(e,t,n,r,i){const o=n-t,a=i-r;if(0===o)return r+a/2;if(0===a)return r;let s=(e-t)/o;return s=a*s+r,s}rb.addGetterSetter(yb,"embossStrength",.5,Ym(),rb.afterSetFilter),rb.addGetterSetter(yb,"embossWhiteLevel",.5,Ym(),rb.afterSetFilter),rb.addGetterSetter(yb,"embossDirection","top-left",void 0,rb.afterSetFilter),rb.addGetterSetter(yb,"embossBlend",!1,void 0,rb.afterSetFilter);rb.addGetterSetter(yb,"enhance",0,Ym(),rb.afterSetFilter);rb.addGetterSetter(yb,"hue",0,Ym(),rb.afterSetFilter),rb.addGetterSetter(yb,"saturation",0,Ym(),rb.afterSetFilter),rb.addGetterSetter(yb,"luminance",0,Ym(),rb.afterSetFilter);rb.addGetterSetter(yb,"hue",0,Ym(),rb.afterSetFilter),rb.addGetterSetter(yb,"saturation",0,Ym(),rb.afterSetFilter),rb.addGetterSetter(yb,"value",0,Ym(),rb.afterSetFilter);function Dv(e,t,n){let r=4*(n*e.width+t);const i=[];return i.push(e.data[r++],e.data[r++],e.data[r++],e.data[r++]),i}function Lv(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}rb.addGetterSetter(yb,"kaleidoscopePower",2,Ym(),rb.afterSetFilter),rb.addGetterSetter(yb,"kaleidoscopeAngle",0,Ym(),rb.afterSetFilter);rb.addGetterSetter(yb,"threshold",0,Ym(),rb.afterSetFilter);rb.addGetterSetter(yb,"noise",.2,Ym(),rb.afterSetFilter);rb.addGetterSetter(yb,"pixelSize",8,Ym(),rb.afterSetFilter);rb.addGetterSetter(yb,"levels",.5,Ym(),rb.afterSetFilter);rb.addGetterSetter(yb,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),rb.addGetterSetter(yb,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),rb.addGetterSetter(yb,"blue",0,Vm,rb.afterSetFilter);rb.addGetterSetter(yb,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),rb.addGetterSetter(yb,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),rb.addGetterSetter(yb,"blue",0,Vm,rb.afterSetFilter),rb.addGetterSetter(yb,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});rb.addGetterSetter(yb,"threshold",.5,Ym(),rb.afterSetFilter),Cy.Util._assign(Cy,{Arc:ky,Arrow:zy,Circle:Wy,Ellipse:Oy,Image:By,Label:Xy,Tag:Vy,Line:Py,Path:Ly,Rect:Yy,RegularPolygon:Ky,Ring:Jy,Sprite:Zy,Star:ev,Text:pv,TextPath:yv,Transformer:Mv,Wedge:Nv,Filters:{Blur:function(e){const t=Math.round(this.blurRadius());t>0&&function(e,t){const n=e.data,r=e.width,i=e.height;let o,a,s,l,c,u,d,h,f,p,g,m,b,y,v,x,S,w,C,k;const _=t+t+1,E=r-1,P=i-1,$=t+1,M=$*($+1)/2,N=new Av,A=Tv[t],T=Rv[t];let R=null,I=N,D=null,L=null;for(let z=1;z<_;z++)I=I.next=new Av,z===$&&(R=I);I.next=N,s=a=0;for(let z=0;z<i;z++){m=b=y=v=l=c=u=d=0,h=$*(x=n[a]),f=$*(S=n[a+1]),p=$*(w=n[a+2]),g=$*(C=n[a+3]),l+=M*x,c+=M*S,u+=M*w,d+=M*C,I=N;for(let e=0;e<$;e++)I.r=x,I.g=S,I.b=w,I.a=C,I=I.next;for(let e=1;e<$;e++)o=a+((E<e?E:e)<<2),l+=(I.r=x=n[o])*(k=$-e),c+=(I.g=S=n[o+1])*k,u+=(I.b=w=n[o+2])*k,d+=(I.a=C=n[o+3])*k,m+=x,b+=S,y+=w,v+=C,I=I.next;D=N,L=R;for(let e=0;e<r;e++)n[a+3]=C=d*A>>T,0!==C?(C=255/C,n[a]=(l*A>>T)*C,n[a+1]=(c*A>>T)*C,n[a+2]=(u*A>>T)*C):n[a]=n[a+1]=n[a+2]=0,l-=h,c-=f,u-=p,d-=g,h-=D.r,f-=D.g,p-=D.b,g-=D.a,o=s+((o=e+t+1)<E?o:E)<<2,m+=D.r=n[o],b+=D.g=n[o+1],y+=D.b=n[o+2],v+=D.a=n[o+3],l+=m,c+=b,u+=y,d+=v,D=D.next,h+=x=L.r,f+=S=L.g,p+=w=L.b,g+=C=L.a,m-=x,b-=S,y-=w,v-=C,L=L.next,a+=4;s+=r}for(let z=0;z<r;z++){b=y=v=m=c=u=d=l=0,a=z<<2,h=$*(x=n[a]),f=$*(S=n[a+1]),p=$*(w=n[a+2]),g=$*(C=n[a+3]),l+=M*x,c+=M*S,u+=M*w,d+=M*C,I=N;for(let t=0;t<$;t++)I.r=x,I.g=S,I.b=w,I.a=C,I=I.next;let e=r;for(let i=1;i<=t;i++)a=e+z<<2,l+=(I.r=x=n[a])*(k=$-i),c+=(I.g=S=n[a+1])*k,u+=(I.b=w=n[a+2])*k,d+=(I.a=C=n[a+3])*k,m+=x,b+=S,y+=w,v+=C,I=I.next,i<P&&(e+=r);a=z,D=N,L=R;for(let t=0;t<i;t++)o=a<<2,n[o+3]=C=d*A>>T,C>0?(C=255/C,n[o]=(l*A>>T)*C,n[o+1]=(c*A>>T)*C,n[o+2]=(u*A>>T)*C):n[o]=n[o+1]=n[o+2]=0,l-=h,c-=f,u-=p,d-=g,h-=D.r,f-=D.g,p-=D.b,g-=D.a,o=z+((o=t+$)<P?o:P)*r<<2,l+=m+=D.r=n[o],c+=b+=D.g=n[o+1],u+=y+=D.b=n[o+2],d+=v+=D.a=n[o+3],D=D.next,h+=x=L.r,f+=S=L.g,p+=w=L.b,g+=C=L.a,m-=x,b-=S,y-=w,v-=C,L=L.next,a+=r}}(e,t)},Brightness:function(e){const t=this.brightness(),n=e.data,r=n.length;for(let i=0;i<r;i+=4)n[i]=Math.min(255,n[i]*t),n[i+1]=Math.min(255,n[i+1]*t),n[i+2]=Math.min(255,n[i+2]*t)},Brighten:function(e){const t=255*this.brightness(),n=e.data,r=n.length;for(let i=0;i<r;i+=4)n[i]+=t,n[i+1]+=t,n[i+2]+=t},Contrast:function(e){const t=Math.pow((this.contrast()+100)/100,2),n=e.data,r=n.length;let i=150,o=150,a=150;for(let s=0;s<r;s+=4)i=n[s],o=n[s+1],a=n[s+2],i/=255,i-=.5,i*=t,i+=.5,i*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,a/=255,a-=.5,a*=t,a+=.5,a*=255,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,a=a<0?0:a>255?255:a,n[s]=i,n[s+1]=o,n[s+2]=a},Emboss:function(e){var t,n,r,i,o,a,s,l,c;const u=e.data,d=e.width,h=e.height,f=Math.min(1,Math.max(0,null!==(n=null===(t=this.embossStrength)||void 0===t?void 0:t.call(this))&&void 0!==n?n:.5)),p=Math.min(1,Math.max(0,null!==(i=null===(r=this.embossWhiteLevel)||void 0===r?void 0:r.call(this))&&void 0!==i?i:.5)),g=null!==(s={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[null!==(a=null===(o=this.embossDirection)||void 0===o?void 0:o.call(this))&&void 0!==a?a:"top-left"])&&void 0!==s?s:315,m=!(null===(c=null===(l=this.embossBlend)||void 0===l?void 0:l.call(this))||void 0===c||!c),b=10*f,y=255*p,v=g*Math.PI/180,x=Math.cos(v),S=Math.sin(v),w=128/1020*b,C=new Uint8ClampedArray(u),k=new Float32Array(d*h);for(let M=0,N=0;N<u.length;N+=4,M++)k[M]=.2126*C[N]+.7152*C[N+1]+.0722*C[N+2];const _=[-1,0,1,-2,0,2,-1,0,1],E=[-1,-2,-1,0,0,0,1,2,1],P=[-d-1,-d,1-d,-1,0,1,d-1,d,d+1],$=e=>e<0?0:e>255?255:e;for(let M=1;M<h-1;M++)for(let e=1;e<d-1;e++){const t=M*d+e;let n=0,r=0;n+=k[t+P[0]]*_[0],r+=k[t+P[0]]*E[0],n+=k[t+P[1]]*_[1],r+=k[t+P[1]]*E[1],n+=k[t+P[2]]*_[2],r+=k[t+P[2]]*E[2],n+=k[t+P[3]]*_[3],r+=k[t+P[3]]*E[3],n+=k[t+P[5]]*_[5],r+=k[t+P[5]]*E[5],n+=k[t+P[6]]*_[6],r+=k[t+P[6]]*E[6],n+=k[t+P[7]]*_[7],r+=k[t+P[7]]*E[7],n+=k[t+P[8]]*_[8],r+=k[t+P[8]]*E[8];const i=$(y+(x*n+S*r)*w),o=4*t;if(m){const e=i-y;u[o]=$(C[o]+e),u[o+1]=$(C[o+1]+e),u[o+2]=$(C[o+2]+e),u[o+3]=C[o+3]}else u[o]=u[o+1]=u[o+2]=i,u[o+3]=C[o+3]}for(let M=0;M<d;M++){let e=4*M,t=4*((h-1)*d+M);u[e]=C[e],u[e+1]=C[e+1],u[e+2]=C[e+2],u[e+3]=C[e+3],u[t]=C[t],u[t+1]=C[t+1],u[t+2]=C[t+2],u[t+3]=C[t+3]}for(let M=1;M<h-1;M++){let e=M*d*4,t=4*(M*d+(d-1));u[e]=C[e],u[e+1]=C[e+1],u[e+2]=C[e+2],u[e+3]=C[e+3],u[t]=C[t],u[t+1]=C[t+1],u[t+2]=C[t+2],u[t+3]=C[t+3]}return e},Enhance:function(e){const t=e.data,n=t.length;let r,i,o,a=t[0],s=a,l=t[1],c=l,u=t[2],d=u;const h=this.enhance();if(0===h)return;for(let v=0;v<n;v+=4)r=t[v+0],r<a?a=r:r>s&&(s=r),i=t[v+1],i<l?l=i:i>c&&(c=i),o=t[v+2],o<u?u=o:o>d&&(d=o);let f,p,g,m,b,y;if(s===a&&(s=255,a=0),c===l&&(c=255,l=0),d===u&&(d=255,u=0),h>0)f=s+h*(255-s),p=a-h*(a-0),g=c+h*(255-c),m=l-h*(l-0),b=d+h*(255-d),y=u-h*(u-0);else{const e=.5*(s+a);f=s+h*(s-e),p=a+h*(a-e);const t=.5*(c+l);g=c+h*(c-t),m=l+h*(l-t);const n=.5*(d+u);b=d+h*(d-n),y=u+h*(u-n)}for(let v=0;v<n;v+=4)t[v+0]=Iv(t[v+0],a,s,p,f),t[v+1]=Iv(t[v+1],l,c,m,g),t[v+2]=Iv(t[v+2],u,d,y,b)},Grayscale:function(e){const t=e.data,n=t.length;for(let r=0;r<n;r+=4){const e=.34*t[r]+.5*t[r+1]+.16*t[r+2];t[r]=e,t[r+1]=e,t[r+2]=e}},HSL:function(e){const t=e.data,n=t.length,r=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=127*this.luminance(),a=1*r*Math.cos(i*Math.PI/180),s=1*r*Math.sin(i*Math.PI/180),l=.299+.701*a+.167*s,c=.587-.587*a+.33*s,u=.114-.114*a-.497*s,d=.299-.299*a-.328*s,h=.587+.413*a+.035*s,f=.114-.114*a+.293*s,p=.299-.3*a+1.25*s,g=.587-.586*a-1.05*s,m=.114+.886*a-.2*s;let b,y,v,x;for(let S=0;S<n;S+=4)b=t[S+0],y=t[S+1],v=t[S+2],x=t[S+3],t[S+0]=l*b+c*y+u*v+o,t[S+1]=d*b+h*y+f*v+o,t[S+2]=p*b+g*y+m*v+o,t[S+3]=x},HSV:function(e){const t=e.data,n=t.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,a=r*i*Math.cos(o*Math.PI/180),s=r*i*Math.sin(o*Math.PI/180),l=.299*r+.701*a+.167*s,c=.587*r-.587*a+.33*s,u=.114*r-.114*a-.497*s,d=.299*r-.299*a-.328*s,h=.587*r+.413*a+.035*s,f=.114*r-.114*a+.293*s,p=.299*r-.3*a+1.25*s,g=.587*r-.586*a-1.05*s,m=.114*r+.886*a-.2*s;for(let b=0;b<n;b+=4){const e=t[b+0],n=t[b+1],r=t[b+2],i=t[b+3];t[b+0]=l*e+c*n+u*r,t[b+1]=d*e+h*n+f*r,t[b+2]=p*e+g*n+m*r,t[b+3]=i}},Invert:function(e){const t=e.data,n=t.length;for(let r=0;r<n;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]},Kaleidoscope:function(e){const t=e.width,n=e.height;let r,i,o,a,s,l,c,u,d,h,f=Math.round(this.kaleidoscopePower());const p=Math.round(this.kaleidoscopeAngle()),g=Math.floor(t*(p%360)/360);if(f<1)return;const m=Dm.createCanvasElement();m.width=t,m.height=n;const b=m.getContext("2d").getImageData(0,0,t,n);Dm.releaseCanvas(m),function(e,t,n){const r=e.data,i=t.data,o=e.width,a=e.height,s=n.polarCenterX||o/2,l=n.polarCenterY||a/2;let c=Math.sqrt(s*s+l*l),u=o-s,d=a-l;const h=Math.sqrt(u*u+d*d);c=h>c?h:c;const f=a,p=o,g=360/p*Math.PI/180;for(let m=0;m<p;m+=1){const e=Math.sin(m*g),t=Math.cos(m*g);for(let n=0;n<f;n+=1){u=Math.floor(s+c*n/f*t),d=Math.floor(l+c*n/f*e);let a=4*(d*o+u);const h=r[a+0],p=r[a+1],g=r[a+2],b=r[a+3];a=4*(m+n*o),i[a+0]=h,i[a+1]=p,i[a+2]=g,i[a+3]=b}}}(e,b,{polarCenterX:t/2,polarCenterY:n/2});let y=t/Math.pow(2,f);for(;y<=8;)y*=2,f-=1;y=Math.ceil(y);let v=y,x=0,S=v,w=1;for(g+y>t&&(x=v,S=0,w=-1),i=0;i<n;i+=1)for(r=x;r!==S;r+=w)o=Math.round(r+g)%t,d=4*(t*i+o),s=b.data[d+0],l=b.data[d+1],c=b.data[d+2],u=b.data[d+3],h=4*(t*i+r),b.data[h+0]=s,b.data[h+1]=l,b.data[h+2]=c,b.data[h+3]=u;for(i=0;i<n;i+=1)for(v=Math.floor(y),a=0;a<f;a+=1){for(r=0;r<v+1;r+=1)d=4*(t*i+r),s=b.data[d+0],l=b.data[d+1],c=b.data[d+2],u=b.data[d+3],h=4*(t*i+2*v-r-1),b.data[h+0]=s,b.data[h+1]=l,b.data[h+2]=c,b.data[h+3]=u;v*=2}!function(e,t,n){const r=e.data,i=t.data,o=e.width,a=e.height,s=n.polarCenterX||o/2,l=n.polarCenterY||a/2;let c=Math.sqrt(s*s+l*l),u=o-s,d=a-l;const h=Math.sqrt(u*u+d*d);c=h>c?h:c;const f=a,p=o;let g,m;for(u=0;u<o;u+=1)for(d=0;d<a;d+=1){const e=u-s,t=d-l,n=Math.sqrt(e*e+t*t)*f/c;let a=(180*Math.atan2(t,e)/Math.PI+360+0)%360;a=a*p/360,g=Math.floor(a),m=Math.floor(n);let h=4*(m*o+g);const b=r[h+0],y=r[h+1],v=r[h+2],x=r[h+3];h=4*(d*o+u),i[h+0]=b,i[h+1]=y,i[h+2]=v,i[h+3]=x}}(b,e,{})},Mask:function(e){let t=function(e,t){const n=Dv(e,0,0),r=Dv(e,e.width-1,0),i=Dv(e,0,e.height-1),o=Dv(e,e.width-1,e.height-1),a=t||10;if(Lv(n,r)<a&&Lv(r,o)<a&&Lv(o,i)<a&&Lv(i,n)<a){const t=function(e){const t=[0,0,0];for(let n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}([r,n,o,i]),s=[];for(let n=0;n<e.width*e.height;n++){const r=Lv(t,[e.data[4*n],e.data[4*n+1],e.data[4*n+2]]);s[n]=r<a?0:255}return s}}(e,this.threshold());return t&&(t=function(e,t,n){const r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),a=[];for(let s=0;s<n;s++)for(let l=0;l<t;l++){const c=s*t+l;let u=0;for(let a=0;a<i;a++)for(let c=0;c<i;c++){const d=s+a-o,h=l+c-o;if(d>=0&&d<n&&h>=0&&h<t){const n=r[a*i+c];u+=e[d*t+h]*n}}a[c]=2040===u?255:0}return a}(t,e.width,e.height),t=function(e,t,n){const r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),a=[];for(let s=0;s<n;s++)for(let l=0;l<t;l++){const c=s*t+l;let u=0;for(let a=0;a<i;a++)for(let c=0;c<i;c++){const d=s+a-o,h=l+c-o;if(d>=0&&d<n&&h>=0&&h<t){const n=r[a*i+c];u+=e[d*t+h]*n}}a[c]=u>=1020?255:0}return a}(t,e.width,e.height),t=function(e,t,n){const r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),a=[];for(let s=0;s<n;s++)for(let l=0;l<t;l++){const c=s*t+l;let u=0;for(let a=0;a<i;a++)for(let c=0;c<i;c++){const d=s+a-o,h=l+c-o;if(d>=0&&d<n&&h>=0&&h<t){const n=r[a*i+c];u+=e[d*t+h]*n}}a[c]=u}return a}(t,e.width,e.height),function(e,t){for(let n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}(e,t)),e},Noise:function(e){const t=255*this.noise(),n=e.data,r=n.length,i=t/2;for(let o=0;o<r;o+=4)n[o+0]+=i-2*i*Math.random(),n[o+1]+=i-2*i*Math.random(),n[o+2]+=i-2*i*Math.random()},Pixelate:function(e){let t=Math.ceil(this.pixelSize()),n=e.width,r=e.height,i=Math.ceil(n/t),o=Math.ceil(r/t),a=e.data;if(t<=0)Dm.error("pixelSize value can not be <= 0");else for(let s=0;s<i;s+=1)for(let e=0;e<o;e+=1){let i=0,o=0,l=0,c=0;const u=s*t,d=u+t,h=e*t,f=h+t;let p=0;for(let e=u;e<d;e+=1)if(!(e>=n))for(let t=h;t<f;t+=1){if(t>=r)continue;const s=4*(n*t+e);i+=a[s+0],o+=a[s+1],l+=a[s+2],c+=a[s+3],p+=1}i/=p,o/=p,l/=p,c/=p;for(let e=u;e<d;e+=1)if(!(e>=n))for(let t=h;t<f;t+=1){if(t>=r)continue;const s=4*(n*t+e);a[s+0]=i,a[s+1]=o,a[s+2]=l,a[s+3]=c}}},Posterize:function(e){const t=Math.round(254*this.levels())+1,n=e.data,r=n.length,i=255/t;for(let o=0;o<r;o+=1)n[o]=Math.floor(n[o]/i)*i},RGB:function(e){const t=e.data,n=t.length,r=this.red(),i=this.green(),o=this.blue();for(let a=0;a<n;a+=4){const e=(.34*t[a]+.5*t[a+1]+.16*t[a+2])/255;t[a]=e*r,t[a+1]=e*i,t[a+2]=e*o,t[a+3]=t[a+3]}},RGBA:function(e){const t=e.data,n=t.length,r=this.red(),i=this.green(),o=this.blue(),a=this.alpha();for(let s=0;s<n;s+=4){const e=1-a;t[s]=r*a+t[s]*e,t[s+1]=i*a+t[s+1]*e,t[s+2]=o*a+t[s+2]*e}},Sepia:function(e){const t=e.data,n=t.length;for(let r=0;r<n;r+=4){const e=t[r+0],n=t[r+1],i=t[r+2];t[r+0]=Math.min(255,.393*e+.769*n+.189*i),t[r+1]=Math.min(255,.349*e+.686*n+.168*i),t[r+2]=Math.min(255,.272*e+.534*n+.131*i)}},Solarize:function(e){const t=e.data;for(let n=0;n<t.length;n+=4){const e=t[n],r=t[n+1],i=t[n+2];.2126*e+.7152*r+.0722*i>=128&&(t[n]=255-e,t[n+1]=255-r,t[n+2]=255-i)}return e},Threshold:function(e){const t=255*this.threshold(),n=e.data,r=n.length;for(let i=0;i<r;i+=1)n[i]=n[i]<t?0:255}}});var zv,Wv,Ov={exports:{}},Bv={exports:{}};function Fv(){return zv||(zv=1,function(e){e.exports=function(e){function t(e,t,n,r){return new Fi(e,t,n,r)}function n(){}function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function o(e){if(i(e)!==e)throw Error(r(188))}function a(e){var t=e.alternate;if(!t){if(null===(t=i(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,a=t;;){var s=n.return;if(null===s)break;var l=s.alternate;if(null===l){if(null!==(a=s.return)){n=a;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return o(s),e;if(l===a)return o(s),t;l=l.sibling}throw Error(r(188))}if(n.return!==a.return)n=s,a=l;else{for(var c=!1,u=s.child;u;){if(u===n){c=!0,n=s,a=l;break}if(u===a){c=!0,a=s,n=l;break}u=u.sibling}if(!c){for(u=l.child;u;){if(u===n){c=!0,n=l,a=s;break}if(u===a){c=!0,a=l,n=s;break}u=u.sibling}if(!c)throw Error(r(189))}}if(n.alternate!==a)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}function s(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=s(e)))return t;e=e.sibling}return null}function l(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(4!==e.tag&&null!==(t=l(e)))return t;e=e.sibling}return null}function c(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Co&&e[Co]||e["@@iterator"])?e:null}function u(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===ko?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case uo:return"Fragment";case fo:return"Profiler";case ho:return"StrictMode";case bo:return"Suspense";case yo:return"SuspenseList";case So:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case co:return"Portal";case go:return e.displayName||"Context";case po:return(e._context.displayName||"Context")+".Consumer";case mo:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case vo:return null!==(t=e.displayName||null)?t:u(e.type)||"Memo";case xo:t=e._payload,e=e._init;try{return u(e(t))}catch(n){}}return null}function d(e){return{current:e}}function h(e){0>Xs||(e.current=qs[Xs],qs[Xs]=null,Xs--)}function f(e,t){Xs++,qs[Xs]=e.current,e.current=t}function p(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function g(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?i=p(r):0!==(a&=s)?i=p(a):n||0!==(n=s&~e)&&(i=p(n)):0!==(s=r&~o)?i=p(s):0!==a?i=p(a):n||0!==(n=r&~e)&&(i=p(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&4194048&n)?t:i}function m(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function b(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function y(){var e=el;return!(62914560&(el<<=1))&&(el=4194304),e}function v(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function x(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function S(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ys(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function w(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ys(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function C(e,t){var n=t&-t;return 0!==((n=42&n?1:k(n))&(e.suspendedLanes|t))?0:n}function k(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function _(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function E(e){if("function"==typeof ul&&dl(e),fl&&"function"==typeof fl.setStrictMode)try{fl.setStrictMode(hl,e)}catch(t){}}function P(e){if(void 0===ws)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ws=t&&t[1]||"",Cs=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+ws+e+Cs}function $(e,t){if(!e||bl)return"";bl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"==typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var l=a.split("\n"),c=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{bl=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?P(n):""}function M(e,t){switch(e.tag){case 26:case 27:case 5:return P(e.type);case 16:return P("Lazy");case 13:return e.child!==t&&null!==t?P("Suspense Fallback"):P("Suspense");case 19:return P("SuspenseList");case 0:case 15:return $(e.type,!1);case 11:return $(e.type.render,!1);case 1:return $(e.type,!0);case 31:return P("Activity");default:return""}}function N(e){try{var t="",n=null;do{t+=M(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}function A(e,t){if("object"==typeof e&&null!==e){var n=yl.get(e);return void 0!==n?n:(t={value:e,source:t,stack:N(t)},yl.set(e,t),t)}return{value:e,source:t,stack:N(t)}}function T(e,t){vl[xl++]=wl,vl[xl++]=Sl,Sl=e,wl=t}function R(e,t,n){Cl[kl++]=El,Cl[kl++]=Pl,Cl[kl++]=_l,_l=e;var r=El;e=Pl;var i=32-Ys(r)-1;r&=~(1<<i),n+=1;var o=32-Ys(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,El=1<<32-Ys(t)+i|n<<i|r,Pl=o+e}else El=1<<o|n<<i|r,Pl=e}function I(e){null!==e.return&&(T(e,1),R(e,1,0))}function D(e){for(;e===Sl;)Sl=vl[--xl],vl[xl]=null,wl=vl[--xl],vl[xl]=null;for(;e===_l;)_l=Cl[--kl],Cl[kl]=null,Pl=Cl[--kl],Cl[kl]=null,El=Cl[--kl],Cl[kl]=null}function L(e,t){Cl[kl++]=El,Cl[kl++]=Pl,Cl[kl++]=_l,El=t.id,Pl=t.overflow,_l=e}function z(e,t){f(Nl,t),f(Ml,e),f($l,null),e=Ao(t),h($l),f($l,e)}function W(){h($l),h(Ml),h(Nl)}function O(e){null!==e.memoizedState&&f(Al,e);var t=$l.current,n=To(t,e.type);t!==n&&(f(Ml,e),f($l,n))}function F(e){Ml.current===e&&(h($l),h(Ml)),Al.current===e&&(h(Al),Ho?la._currentValue=sa:la._currentValue2=sa)}function j(e){throw V(A(Error(r(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),zl}function H(e,t){if(!qo)throw Error(r(175));os(e.stateNode,e.type,e.memoizedProps,t,e)||j(e,!0)}function G(e){for(Tl=e.return;Tl;)switch(Tl.tag){case 5:case 31:case 13:return void(Ll=!1);case 27:case 3:return void(Ll=!0);default:Tl=Tl.return}}function U(e){if(!qo||e!==Tl)return!1;if(!Il)return G(e),Il=!0,!1;var t=e.tag;if(Bs?3!==t&&27!==t&&(5!==t||Ss(e.type)&&!Wo(e.type,e.memoizedProps))&&Rl&&j(e):3!==t&&(5!==t||Ss(e.type)&&!Wo(e.type,e.memoizedProps))&&Rl&&j(e),G(e),13===t){if(!qo)throw Error(r(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));Rl=us(e)}else if(31===t){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));Rl=cs(e)}else Rl=Bs&&27===t?Ya(e.type,Rl):Tl?Va(e.stateNode):null;return!0}function q(){qo&&(Rl=Tl=null,Il=!1)}function X(){var e=Dl;return null!==e&&(null===Su?Su=e:Su.push.apply(Su,e),Dl=null),e}function V(e){null===Dl?Dl=[e]:Dl.push(e)}function K(e,t,n){Ho?(f(Wl,t._currentValue),t._currentValue=n):(f(Wl,t._currentValue2),t._currentValue2=n)}function Q(e){var t=Wl.current;Ho?e._currentValue=t:e._currentValue2=t,h(Wl)}function J(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Z(e,t,n,i){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var a=o.dependencies;if(null!==a){var s=o.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=o;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),J(a.return,n,e),i||(s=null);break e}a=l.next}}else if(18===o.tag){if(null===(s=o.return))throw Error(r(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),J(s,n,e),s=null}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}}function ee(e,t,n,i){e=null;for(var o=t,a=!1;null!==o;){if(!a)if(524288&o.flags)a=!0;else if(262144&o.flags)break;if(10===o.tag){var s=o.alternate;if(null===s)throw Error(r(387));if(null!==(s=s.memoizedProps)){var l=o.type;pl(o.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(o===Al.current){if(null===(s=o.alternate))throw Error(r(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(la):e=[la])}o=o.return}null!==e&&Z(t,e,n,i),t.flags|=262144}function te(e){for(e=e.firstContext;null!==e;){var t=e.context;if(!pl(Ho?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function ne(e){Ol=e,Bl=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function re(e){return oe(Ol,e)}function ie(e,t){return null===Ol&&ne(e),oe(e,t)}function oe(e,t){var n=Ho?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},null===Bl){if(null===e)throw Error(r(308));Bl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Bl=Bl.next=t;return n}function ae(){return{controller:new Fl,data:new Map,refCount:0}}function se(e){e.refCount--,0===e.refCount&&jl(Hl,function(){e.controller.abort()})}function le(){}function ce(e){e!==ql&&null===e.next&&(null===ql?Ul=ql=e:ql=ql.next=e),Vl=!0,Xl||(Xl=!0,ua?da(function(){6&iu?tl(al,de):he()}):tl(al,de))}function ue(e,t){if(!Yl&&Vl){Yl=!0;do{for(var n=!1,r=Ul;null!==r;){if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var a=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-Ys(42|e)+1)-1,o=201326741&(o&=i&~(a&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,ge(r,o))}else o=su,!(3&(o=g(r,r===ou?o:0,null!==r.cancelPendingCommit||r.timeoutHandle!==jo)))||m(r,o)||(n=!0,ge(r,o));r=r.next}}while(n);Yl=!1}}function de(){he()}function he(){Vl=Xl=!1;var e=0;0!==Kl&&Jo()&&(e=Kl);for(var t=ol(),n=null,r=Ul;null!==r;){var i=r.next,o=fe(r,t);0===o?(r.next=null,null===n?Ul=i:n.next=i,null===i&&(ql=n)):(n=r,(0!==e||3&o)&&(Vl=!0)),r=i}0!==$u&&5!==$u||ue(e),0!==Kl&&(Kl=0)}function fe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-Ys(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=b(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(n=su,n=g(e,e===(t=ou)?n:0,null!==e.cancelPendingCommit||e.timeoutHandle!==jo),r=e.callbackNode,0===n||e===t&&(2===lu||9===lu)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&nl(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||m(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&nl(r),_(n)){case 2:case 8:n=sl;break;case 32:default:n=ll;break;case 268435456:n=cl}return r=pe.bind(null,e),n=tl(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&nl(r),e.callbackPriority=2,e.callbackNode=null,2}function pe(e,t){if(0!==$u&&5!==$u)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ti()&&e.callbackNode!==n)return null;var r=su;return 0===(r=g(e,e===ou?r:0,null!==e.cancelPendingCommit||e.timeoutHandle!==jo))?null:(si(e,r,t),fe(e,ol()),null!=e.callbackNode&&e.callbackNode===n?pe.bind(null,e):null)}function ge(e,t){if(Ti())return null;si(e,t,!0)}function me(){if(0===Kl){var e=Zl;0===e&&(e=Js,!(261888&(Js<<=1))&&(Js=256)),Kl=e}return Kl}function be(){if(0===--Jl&&null!==Ql){null!==ec&&(ec.status="fulfilled");var e=Ql;Ql=null,Zl=0,ec=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ye(){var e=nc.current;return null!==e?e:ou.pooledCache}function ve(e,t){f(nc,null===t?nc.current:t.pool)}function xe(){var e=ye();return null===e?null:{parent:Ho?Gl._currentValue:Gl._currentValue2,pool:e}}function Se(e,t){if(pl(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ml.call(t,i)||!pl(e[i],t[i]))return!1}return!0}function we(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ce(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(le,le),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw Ee(e=t.reason),e;default:if("string"==typeof t.status)t.then(le,le);else{if(null!==(e=ou)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw Ee(e=t.reason),e}throw sc=t,rc}}function ke(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw sc=t,rc;throw t}}function _e(){if(null===sc)throw Error(r(459));var e=sc;return sc=null,e}function Ee(e){if(e===rc||e===oc)throw Error(r(483))}function Pe(e){var t=cc;return cc+=1,null===lc&&(lc=[]),Ce(lc,e,t)}function $e(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Me(e,t){if(t.$$typeof===so)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ne(e){function n(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function i(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function o(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Hi(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Xi(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n,r){var i=n.type;return i===uo?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===xo&&ke(i)===t.type)?($e(t=a(t,n.props),n),t.return=e,t):($e(t=Ui(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function h(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Yi(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=qi(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Xi(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case lo:return $e(n=Ui(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case co:return(t=Yi(t,e.mode,n)).return=e,t;case xo:return p(e,t=ke(t),n)}if(_o(t)||c(t))return(t=qi(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return p(e,Pe(t),n);if(t.$$typeof===go)return p(e,ie(e,t),n);Me(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case lo:return n.key===i?d(e,t,n,r):null;case co:return n.key===i?h(e,t,n,r):null;case xo:return g(e,t,n=ke(n),r)}if(_o(n)||c(n))return null!==i?null:f(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,Pe(n),r);if(n.$$typeof===go)return g(e,t,ie(e,n),r);Me(e,n)}return null}function m(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case lo:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case co:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case xo:return m(e,t,n,r=ke(r),i)}if(_o(r)||c(r))return f(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return m(e,t,n,Pe(r),i);if(r.$$typeof===go)return m(e,t,n,ie(t,r),i);Me(t,r)}return null}function b(t,u,d,h){if("object"==typeof d&&null!==d&&d.type===uo&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case lo:e:{for(var f=d.key;null!==u;){if(u.key===f){if((f=d.type)===uo){if(7===u.tag){i(t,u.sibling),(h=a(u,d.props.children)).return=t,t=h;break e}}else if(u.elementType===f||"object"==typeof f&&null!==f&&f.$$typeof===xo&&ke(f)===u.type){i(t,u.sibling),$e(h=a(u,d.props),d),h.return=t,t=h;break e}i(t,u);break}n(t,u),u=u.sibling}d.type===uo?((h=qi(d.props.children,t.mode,h,d.key)).return=t,t=h):($e(h=Ui(d.type,d.key,d.props,null,t.mode,h),d),h.return=t,t=h)}return l(t);case co:e:{for(f=d.key;null!==u;){if(u.key===f){if(4===u.tag&&u.stateNode.containerInfo===d.containerInfo&&u.stateNode.implementation===d.implementation){i(t,u.sibling),(h=a(u,d.children||[])).return=t,t=h;break e}i(t,u);break}n(t,u),u=u.sibling}(h=Yi(d,t.mode,h)).return=t,t=h}return l(t);case xo:return b(t,u,d=ke(d),h)}if(_o(d))return function(t,r,a,l){for(var c=null,u=null,d=r,h=r=0,f=null;null!==d&&h<a.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var b=g(t,d,a[h],l);if(null===b){null===d&&(d=f);break}e&&d&&null===b.alternate&&n(t,d),r=s(b,r,h),null===u?c=b:u.sibling=b,u=b,d=f}if(h===a.length)return i(t,d),Il&&T(t,h),c;if(null===d){for(;h<a.length;h++)null!==(d=p(t,a[h],l))&&(r=s(d,r,h),null===u?c=d:u.sibling=d,u=d);return Il&&T(t,h),c}for(d=o(d);h<a.length;h++)null!==(f=m(d,t,h,a[h],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),r=s(f,r,h),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach(function(e){return n(t,e)}),Il&&T(t,h),c}(t,u,d,h);if(c(d)){if("function"!=typeof(f=c(d)))throw Error(r(150));return function(t,a,l,c){if(null==l)throw Error(r(151));for(var u=null,d=null,h=a,f=a=0,b=null,y=l.next();null!==h&&!y.done;f++,y=l.next()){h.index>f?(b=h,h=null):b=h.sibling;var v=g(t,h,y.value,c);if(null===v){null===h&&(h=b);break}e&&h&&null===v.alternate&&n(t,h),a=s(v,a,f),null===d?u=v:d.sibling=v,d=v,h=b}if(y.done)return i(t,h),Il&&T(t,f),u;if(null===h){for(;!y.done;f++,y=l.next())null!==(y=p(t,y.value,c))&&(a=s(y,a,f),null===d?u=y:d.sibling=y,d=y);return Il&&T(t,f),u}for(h=o(h);!y.done;f++,y=l.next())null!==(y=m(h,t,f,y.value,c))&&(e&&null!==y.alternate&&h.delete(null===y.key?f:y.key),a=s(y,a,f),null===d?u=y:d.sibling=y,d=y);return e&&h.forEach(function(e){return n(t,e)}),Il&&T(t,f),u}(t,u,d=f.call(d),h)}if("function"==typeof d.then)return b(t,u,Pe(d),h);if(d.$$typeof===go)return b(t,u,ie(t,d),h);Me(t,d)}return"string"==typeof d&&""!==d||"number"==typeof d||"bigint"==typeof d?(d=""+d,null!==u&&6===u.tag?(i(t,u.sibling),(h=a(u,d)).return=t,t=h):(i(t,u),(h=Xi(d,t.mode,h)).return=t,t=h),l(t)):i(t,u)}return function(e,n,r,i){try{cc=0;var o=b(e,n,r,i);return lc=null,o}catch(s){if(s===rc||s===oc)throw s;var a=t(29,s,null,e.mode);return a.lanes=i,a.return=e,a}}}function Ae(){for(var e=fc,t=pc=fc=0;t<e;){var n=hc[t];hc[t++]=null;var r=hc[t];hc[t++]=null;var i=hc[t];hc[t++]=null;var o=hc[t];if(hc[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==o&&De(n,i,o)}}function Te(e,t,n,r){hc[fc++]=e,hc[fc++]=t,hc[fc++]=n,hc[fc++]=r,pc|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Re(e,t,n,r){return Te(e,t,n,r),Le(e)}function Ie(e,t){return Te(e,null,null,t),Le(e)}function De(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-Ys(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Le(e){if(50<Du)throw Du=0,Lu=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}function ze(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function We(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Oe(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Be(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&iu){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Le(e),De(e,null,n),t}return Te(e,r,t,n),Le(e)}function Fe(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,w(e,n)}}function je(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function He(){if(mc){if(null!==ec)throw ec}}function Ge(e,t,n,r){mc=!1;var i=e.updateQueue;gc=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var h=-536870913&s.lane,f=h!==s.lane;if(f?(su&h)===h:(r&h)===h){0!==h&&h===Zl&&(mc=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var p=e,g=s;h=t;var m=n;switch(g.tag){case 1:if("function"==typeof(p=g.payload)){d=p.call(m,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=g.payload)?p.call(m,d,h):p))break e;d=ao({},d,h);break e;case 2:gc=!0}}null!==(h=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[h]:f.push(h))}else f={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===o&&(i.shared.lanes=0),gu|=a,e.lanes=a,e.memoizedState=d}}function Ue(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function qe(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ue(n[e],t)}function Xe(e,t){f(yc,e=fu),f(bc,t),fu=e|t.baseLanes}function Ve(){f(yc,fu),f(bc,bc.current)}function Ye(){fu=yc.current,h(bc),h(yc)}function Ke(e){var t=e.alternate;f(Sc,1&Sc.current),f(vc,e),null===xc&&(null===t||null!==bc.current||null!==t.memoizedState)&&(xc=e)}function Qe(e){f(Sc,Sc.current),f(vc,e),null===xc&&(xc=e)}function Je(e){22===e.tag?(f(Sc,Sc.current),f(vc,e),null===xc&&(xc=e)):Ze()}function Ze(){f(Sc,Sc.current),f(vc,vc.current)}function et(e){h(vc),xc===e&&(xc=null),h(Sc)}function tt(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||ja(n)||Ha(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function nt(){throw Error(r(321))}function rt(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pl(e[n],t[n]))return!1;return!0}function it(e,t,n,r,i,o){return wc=o,Cc=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Eo.H=null===e||null===e.memoizedState?Ic:Dc,$c=!1,o=n(r,i),$c=!1,Pc&&(o=at(t,n,r,i)),ot(e),o}function ot(e){Eo.H=Rc;var t=null!==kc&&null!==kc.next;if(wc=0,_c=kc=Cc=null,Ec=!1,Nc=0,Ac=null,t)throw Error(r(300));null===e||Oc||null!==(e=e.dependencies)&&te(e)&&(Oc=!0)}function at(e,t,n,i){Cc=e;var o=0;do{if(Pc&&(Ac=null),Nc=0,Pc=!1,25<=o)throw Error(r(301));if(o+=1,_c=kc=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}Eo.H=Lc,a=t(n,i)}while(Pc);return a}function st(){var e=Eo.H,t=e.useState()[0];return t="function"==typeof t.then?ft(t):t,e=e.useState()[0],(null!==kc?kc.memoizedState:null)!==e&&(Cc.flags|=1024),t}function lt(){var e=0!==Mc;return Mc=0,e}function ct(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ut(e){if(Ec){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ec=!1}wc=0,_c=kc=Cc=null,Pc=!1,Nc=Mc=0,Ac=null}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_c?Cc.memoizedState=_c=e:_c=_c.next=e,_c}function ht(){if(null===kc){var e=Cc.alternate;e=null!==e?e.memoizedState:null}else e=kc.next;var t=null===_c?Cc.memoizedState:_c.next;if(null!==t)_c=t,kc=e;else{if(null===e){if(null===Cc.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(kc=e).memoizedState,baseState:kc.baseState,baseQueue:kc.baseQueue,queue:kc.queue,next:null},null===_c?Cc.memoizedState=_c=e:_c=_c.next=e}return _c}function ft(e){var t=Nc;return Nc+=1,null===Ac&&(Ac=[]),e=Ce(Ac,e,t),t=Cc,null===(null===_c?t.memoizedState:_c.next)&&(t=t.alternate,Eo.H=null===t||null===t.memoizedState?Ic:Dc),e}function pt(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ft(e);if(e.$$typeof===go)return re(e)}throw Error(r(438,String(e)))}function gt(e){var t=null,n=Cc.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Cc.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Cc.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=wo;return t.index++,n}function mt(e,t){return"function"==typeof t?t(e):t}function bt(e){return yt(ht(),kc,e)}function yt(e,t,n){var i=e.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=n;var o=e.baseQueue,a=i.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}t.baseQueue=o=a,i.pending=null}if(a=e.baseState,null===o)e.memoizedState=a;else{var l=s=null,c=null,u=t=o.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(su&h)===h:(wc&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Zl&&(d=!0);else{if((wc&f)===f){u=u.next,f===Zl&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,s=a):c=c.next=h,Cc.lanes|=f,gu|=f}h=u.action,$c&&n(a,h),a=u.hasEagerState?u.eagerState:n(a,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,s=a):c=c.next=f,Cc.lanes|=h,gu|=h;u=u.next}while(null!==u&&u!==t);if(null===c?s=a:c.next=l,!pl(a,e.memoizedState)&&(Oc=!0,d&&null!==(n=ec)))throw n;e.memoizedState=a,e.baseState=s,e.baseQueue=c,i.lastRenderedState=a}return null===o&&(i.lanes=0),[e.memoizedState,i.dispatch]}function vt(e){var t=ht(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);pl(a,t.memoizedState)||(Oc=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function xt(e,t,n){var i=Cc,o=ht(),a=Il;if(a){if(void 0===n)throw Error(r(407));n=n()}else n=t();var s=!pl((kc||o).memoizedState,n);if(s&&(o.memoizedState=n,Oc=!0),o=o.queue,Ut(Ct.bind(null,i,o,e),[e]),o.getSnapshot!==t||s||null!==_c&&1&_c.memoizedState.tag){if(i.flags|=2048,Bt(9,{destroy:void 0},wt.bind(null,i,o,n,t),null),null===ou)throw Error(r(349));a||127&wc||St(i,t,n)}return n}function St(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Cc.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Cc.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function wt(e,t,n,r){t.value=n,t.getSnapshot=r,kt(t)&&_t(e)}function Ct(e,t,n){return n(function(){kt(t)&&_t(e)})}function kt(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pl(e,n)}catch(r){return!0}}function _t(e){var t=Ie(e,2);null!==t&&ai(t,e,2)}function Et(e){var t=dt();if("function"==typeof e){var n=e;if(e=n(),$c){E(!0);try{n()}finally{E(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mt,lastRenderedState:e},t}function Pt(e,t,n,r){return e.baseState=n,yt(e,kc,"function"==typeof r?r:mt)}function $t(e,t,n,i,o){if(fn(e))throw Error(r(485));if(null!==(e=t.action)){var a={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==Eo.T?n(!0):a.isTransition=!1,i(a),null===(n=t.pending)?(a.next=t.pending=a,Mt(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Mt(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=Eo.T,a={};Eo.T=a;try{var s=n(i,r),l=Eo.S;null!==l&&l(a,s),Nt(e,t,s)}catch(c){Tt(e,t,c)}finally{null!==o&&null!==a.types&&(o.types=a.types),Eo.T=o}}else try{Nt(e,t,o=n(i,r))}catch(u){Tt(e,t,u)}}function Nt(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){At(e,t,n)},function(n){return Tt(e,t,n)}):At(e,t,n)}function At(e,t,n){t.status="fulfilled",t.value=n,Rt(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Mt(e,n)))}function Tt(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Rt(t),t=t.next}while(t!==r)}e.action=null}function Rt(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function It(e,t){return t}function Dt(e,t){if(Il){var n=ou.formState;if(null!==n){e:{var r=Cc;if(Il){if(Rl){var i=qa(Rl,Ll);if(i){Rl=Va(i),r=Xa(i);break e}}j(r)}r=!1}r&&(t=n[0])}}(n=dt()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:It,lastRenderedState:t},n.queue=r,n=un.bind(null,Cc,r),r.dispatch=n,r=Et(!1);var o=hn.bind(null,Cc,!1,r.queue);return i={state:t,dispatch:null,action:e,pending:null},(r=dt()).queue=i,n=$t.bind(null,Cc,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Lt(e){return zt(ht(),kc,e)}function zt(e,t,n){if(t=yt(e,t,It)[0],e=bt(mt)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=ft(t)}catch(a){if(a===rc)throw oc;throw a}else r=t;var i=(t=ht()).queue,o=i.dispatch;return n!==t.memoizedState&&(Cc.flags|=2048,Bt(9,{destroy:void 0},Wt.bind(null,i,n),null)),[r,o,e]}function Wt(e,t){e.action=t}function Ot(e){var t=ht(),n=kc;if(null!==n)return zt(t,n,e);ht(),t=t.memoizedState;var r=(n=ht()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Bt(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Cc.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Cc.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ft(){return ht().memoizedState}function jt(e,t,n,r){var i=dt();Cc.flags|=e,i.memoizedState=Bt(1|t,{destroy:void 0},n,void 0===r?null:r)}function Ht(e,t,n,r){var i=ht();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==kc&&null!==r&&rt(r,kc.memoizedState.deps)?i.memoizedState=Bt(t,o,n,r):(Cc.flags|=e,i.memoizedState=Bt(1|t,o,n,r))}function Gt(e,t){jt(8390656,8,e,t)}function Ut(e,t){Ht(2048,8,e,t)}function qt(e){var t=ht().memoizedState;return function(e){Cc.flags|=4;var t=Cc.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Cc.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&iu)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function Xt(e,t){return Ht(4,2,e,t)}function Vt(e,t){return Ht(4,4,e,t)}function Yt(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Kt(e,t,n){n=null!=n?n.concat([e]):null,Ht(4,4,Yt.bind(null,t,e),n)}function Qt(){}function Jt(e,t){var n=ht();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&rt(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zt(e,t){var n=ht();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&rt(t,r[1]))return r[0];if(r=e(),$c){E(!0);try{e()}finally{E(!1)}}return n.memoizedState=[r,t],r}function en(e,t,n){return void 0===n||1073741824&wc&&!(261930&su)?e.memoizedState=t:(e.memoizedState=n,e=oi(),Cc.lanes|=e,gu|=e,n)}function tn(e,t,n,r){return pl(n,t)?n:null!==bc.current?(e=en(e,n,r),pl(e,t)||(Oc=!0),e):42&wc&&(!(1073741824&wc)||261930&su)?(e=oi(),Cc.lanes|=e,gu|=e,t):(Oc=!0,e.memoizedState=n)}function nn(e,t,n,r,i){var o=Ko();Yo(0!==o&&8>o?o:8);var a,s,l,c=Eo.T,u={};Eo.T=u,hn(e,!1,t,n);try{var d=i(),h=Eo.S;if(null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)dn(e,t,(a=r,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<s.length;e++)(0,s[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),l),ii());else dn(e,t,r,ii())}catch(f){dn(e,t,{then:function(){},status:"rejected",reason:f},ii())}finally{Yo(o),null!==c&&null!==u.types&&(c.types=u.types),Eo.T=c}}function rn(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:sa,baseState:sa,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mt,lastRenderedState:sa},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mt,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function on(){return re(la)}function an(){return ht().memoizedState}function sn(){return ht().memoizedState}function ln(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=ii(),r=Be(t,e=Oe(n),n);return null!==r&&(ai(r,t,n),Fe(r,t,n)),t={cache:ae()},void(e.payload=t)}t=t.return}}function cn(e,t,n){var r=ii();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fn(e)?pn(t,n):null!==(n=Re(e,t,n,r))&&(ai(n,e,r),gn(n,t,r))}function un(e,t,n){dn(e,t,n,ii())}function dn(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(fn(e))pn(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,pl(s,a))return Te(e,t,i,0),null===ou&&Ae(),!1}catch(l){}if(null!==(n=Re(e,t,i,r)))return ai(n,e,r),gn(n,t,r),!0}return!1}function hn(e,t,n,i){if(i={lane:2,revertLane:me(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},fn(e)){if(t)throw Error(r(479))}else null!==(t=Re(e,n,i,2))&&ai(t,e,2)}function fn(e){var t=e.alternate;return e===Cc||null!==t&&t===Cc}function pn(e,t){Pc=Ec=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gn(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,w(e,n)}}function mn(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:ao({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function bn(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Se(n,r)||!Se(i,o))}function yn(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zc.enqueueReplaceState(t,t.state,null)}function vn(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=ao({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function xn(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(uS){setTimeout(function(){throw uS})}}function Sn(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(uS){setTimeout(function(){throw uS})}}function wn(e,t,n){return(n=Oe(n)).tag=3,n.payload={element:null},n.callback=function(){xn(e,t)},n}function Cn(e){return(e=Oe(e)).tag=3,e}function kn(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){Sn(t,n,r)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){Sn(t,n,r),"function"!=typeof i&&(null===Pu?Pu=new Set([this]):Pu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}function _n(e,t,n,r){t.child=null===e?dc(t,null,n,r):uc(t,e.child,n,r)}function En(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return ne(t),r=it(e,t,n,a,o,i),s=lt(),null===e||Oc?(Il&&s&&I(t),t.flags|=1,_n(e,t,r,i),t.child):(ct(e,t,i),Vn(e,t,i))}function Pn(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||ji(o)||void 0!==o.defaultProps||null!==n.compare?((e=Ui(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,$n(e,t,o,r,i))}if(o=e.child,!Yn(e,i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Se)(a,r)&&e.ref===t.ref)return Vn(e,t,i)}return t.flags|=1,(e=Hi(o,r)).ref=t.ref,e.return=t,t.child=e}function $n(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Se(o,r)&&e.ref===t.ref){if(Oc=!1,t.pendingProps=r=o,!Yn(e,i))return t.lanes=e.lanes,Vn(e,t,i);131072&e.flags&&(Oc=!0)}}return Dn(e,t,n,r,i)}function Mn(e,t,n,r){var i=r.children,o=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(128&t.flags){if(o=null!==o?o.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~o}else r=0,t.child=null;return An(e,t,o,n,r)}if(!(536870912&n))return r=t.lanes=536870912,An(e,t,null!==o?o.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&ve(0,null!==o?o.cachePool:null),null!==o?Xe(t,o):Ve(),Je(t)}else null!==o?(ve(0,o.cachePool),Xe(t,o),Ze(),t.memoizedState=null):(null!==e&&ve(0,null),Ve(),Ze());return _n(e,t,i,n),t.child}function Nn(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function An(e,t,n,r,i){var o=ye();return o=null===o?null:{parent:Ho?Gl._currentValue:Gl._currentValue2,pool:o},t.memoizedState={baseLanes:n,cachePool:o},null!==e&&ve(0,null),Ve(),Je(t),null!==e&&ee(e,t,r,!0),t.childLanes=i,null}function Tn(e,t){return(t=Hn({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Rn(e,t,n){return uc(t,e.child,null,n),(e=Tn(t,t.pendingProps)).flags|=2,et(t),t.memoizedState=null,e}function In(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Dn(e,t,n,r,i){return ne(t),n=it(e,t,n,r,void 0,i),r=lt(),null===e||Oc?(Il&&r&&I(t),t.flags|=1,_n(e,t,n,i),t.child):(ct(e,t,i),Vn(e,t,i))}function Ln(e,t,n,r,i,o){return ne(t),t.updateQueue=null,n=at(t,r,n,i),ot(e),r=lt(),null===e||Oc?(Il&&r&&I(t),t.flags|=1,_n(e,t,n,o),t.child):(ct(e,t,o),Vn(e,t,o))}function zn(e,t,n,r,i){if(ne(t),null===t.stateNode){var o=Vs,a=n.contextType;"object"==typeof a&&null!==a&&(o=re(a)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=zc,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},ze(t),a=n.contextType,o.context="object"==typeof a&&null!==a?re(a):Vs,o.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(mn(t,n,a,r),o.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(a=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&zc.enqueueReplaceState(o,o.state,null),Ge(t,r,o,i),He(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=vn(n,s);o.props=l;var c=o.context,u=n.contextType;a=Vs,"object"==typeof u&&null!==u&&(a=re(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s||c!==a)&&yn(t,o,r,a),gc=!1;var h=t.memoizedState;o.state=h,Ge(t,r,o,i),He(),c=t.memoizedState,s||h!==c||gc?("function"==typeof d&&(mn(t,n,d,r),c=t.memoizedState),(l=gc||bn(t,n,l,r,h,c,a))?(u||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=a,r=l):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,We(e,t),u=vn(n,a=t.memoizedProps),o.props=u,d=t.pendingProps,h=o.context,c=n.contextType,l=Vs,"object"==typeof c&&null!==c&&(l=re(c)),(c="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||h!==l)&&yn(t,o,r,l),gc=!1,h=t.memoizedState,o.state=h,Ge(t,r,o,i),He();var f=t.memoizedState;a!==d||h!==f||gc||null!==e&&null!==e.dependencies&&te(e.dependencies)?("function"==typeof s&&(mn(t,n,s,r),f=t.memoizedState),(u=gc||bn(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&te(e.dependencies))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,In(e,t),r=!!(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=uc(t,e.child,null,i),t.child=uc(t,null,n,i)):_n(e,t,n,i),t.memoizedState=o.state,e=t.child):e=Vn(e,t,i),e}function Wn(e,t,n,r){return q(),t.flags|=256,_n(e,t,n,r),t.child}function On(e){return{baseLanes:e,cachePool:xe()}}function Bn(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=yu),e}function Fn(e,t,n){var i,o=t.pendingProps,a=!1,s=!!(128&t.flags);if((i=s)||(i=(null===e||null!==e.memoizedState)&&!!(2&Sc.current)),i&&(a=!0,t.flags&=-129),i=!!(32&t.flags),t.flags&=-33,null===e){if(Il){if(a?Ke(t):Ze(),(e=Rl)?null!==(e=is(e,Ll))&&(t.memoizedState={dehydrated:e,treeContext:null!==_l?{id:El,overflow:Pl}:null,retryLane:536870912,hydrationErrors:null},(n=Vi(e)).return=t,t.child=n,Tl=t,Rl=null):e=null,null===e)throw j(t);return Ha(e)?t.lanes=32:t.lanes=536870912,null}var l=o.children;return o=o.fallback,a?(Ze(),l=Hn({mode:"hidden",children:l},a=t.mode),o=qi(o,a,n,null),l.return=t,o.return=t,l.sibling=o,t.child=l,(o=t.child).memoizedState=On(n),o.childLanes=Bn(e,i,n),t.memoizedState=Bc,Nn(null,o)):(Ke(t),jn(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(s)256&t.flags?(Ke(t),t.flags&=-257,t=Gn(e,t,n)):null!==t.memoizedState?(Ze(),t.child=e.child,t.flags|=128,t=null):(Ze(),l=o.fallback,a=t.mode,o=Hn({mode:"visible",children:o.children},a),(l=qi(l,a,n,null)).flags|=2,o.return=t,l.return=t,o.sibling=l,t.child=o,uc(t,e.child,null,n),(o=t.child).memoizedState=On(n),o.childLanes=Bn(e,i,n),t.memoizedState=Bc,t=Nn(null,o));else if(Ke(t),Ha(l))i=Ga(l).digest,(o=Error(r(419))).stack="",o.digest=i,V({value:o,source:null,stack:null}),t=Gn(e,t,n);else if(Oc||ee(e,t,n,!1),i=0!==(n&e.childLanes),Oc||i){if(null!==(i=ou)&&(0!==(o=C(i,n))&&o!==c.retryLane))throw c.retryLane=o,Ie(e,o),ai(i,e,o),Wc;ja(l)||yi(),t=Gn(e,t,n)}else ja(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,qo&&(Rl=Za(l),Tl=t,Il=!0,Dl=null,Ll=!1,null!==e&&L(t,e)),(t=jn(t,o.children)).flags|=4096);return t}return a?(Ze(),l=o.fallback,a=t.mode,s=(c=e.child).sibling,(o=Hi(c,{mode:"hidden",children:o.children})).subtreeFlags=65011712&c.subtreeFlags,null!==s?l=Hi(s,l):(l=qi(l,a,n,null)).flags|=2,l.return=t,o.return=t,o.sibling=l,t.child=o,Nn(null,o),o=t.child,null===(l=e.child.memoizedState)?l=On(n):(null!==(a=l.cachePool)?(c=Ho?Gl._currentValue:Gl._currentValue2,a=a.parent!==c?{parent:c,pool:c}:a):a=xe(),l={baseLanes:l.baseLanes|n,cachePool:a}),o.memoizedState=l,o.childLanes=Bn(e,i,n),t.memoizedState=Bc,Nn(e.child,o)):(Ke(t),e=(n=e.child).sibling,(n=Hi(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function jn(e,t){return(t=Hn({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Hn(e,n){return(e=t(22,e,null,n)).lanes=0,e}function Gn(e,t,n){return uc(t,e.child,null,n),(e=jn(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Un(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),J(e.return,t,n)}function qn(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.treeForkCount=o)}function Xn(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;r=r.children;var a=Sc.current,s=!!(2&a);if(s?(a=1&a|2,t.flags|=128):a&=1,f(Sc,a),_n(e,t,r,n),r=Il?wl:0,!s&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Un(e,n,t);else if(19===e.tag)Un(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===tt(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qn(t,!1,i,n,o,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===tt(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qn(t,!0,n,null,o,r);break;case"together":qn(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Vn(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),gu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ee(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Hi(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hi(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Yn(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!te(e))}function Kn(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Oc=!0;else{if(!(Yn(e,n)||128&t.flags))return Oc=!1,function(e,t,n){switch(t.tag){case 3:z(t,t.stateNode.containerInfo),K(0,Gl,e.memoizedState.cache),q();break;case 27:case 5:O(t);break;case 4:z(t,t.stateNode.containerInfo);break;case 10:K(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Qe(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ke(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Fn(e,t,n):(Ke(t),null!==(e=Vn(e,t,n))?e.sibling:null);Ke(t);break;case 19:var i=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(ee(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Xn(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),f(Sc,Sc.current),r)break;return null;case 22:return t.lanes=0,Mn(e,t,n,t.pendingProps);case 24:K(0,Gl,e.memoizedState.cache)}return Vn(e,t,n)}(e,t,n);Oc=!!(131072&e.flags)}else Oc=!1,Il&&1048576&t.flags&&R(t,wl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=ke(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var o=e.$$typeof;if(o===mo){t.tag=11,t=En(null,t,e,i,n);break e}if(o===vo){t.tag=14,t=Pn(null,t,e,i,n);break e}}throw t=u(e)||e,Error(r(306,t,""))}ji(e)?(i=vn(e,i),t.tag=1,t=zn(null,t,e,i,n)):(t.tag=0,t=Dn(null,t,e,i,n))}return t;case 0:return Dn(e,t,t.type,t.pendingProps,n);case 1:return zn(e,t,i=t.type,o=vn(i,t.pendingProps),n);case 3:e:{if(z(t,t.stateNode.containerInfo),null===e)throw Error(r(387));var a=t.pendingProps;i=(o=t.memoizedState).element,We(e,t),Ge(t,a,null,n);var s=t.memoizedState;if(a=s.cache,K(0,Gl,a),a!==o.cache&&Z(t,[Gl],n,!0),He(),a=s.element,qo&&o.isDehydrated){if(o={element:a,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Wn(e,t,a,n);break e}if(a!==i){V(i=A(Error(r(424)),t)),t=Wn(e,t,a,n);break e}for(qo&&(Rl=Qa(t.stateNode.containerInfo),Tl=t,Il=!0,Dl=null,Ll=!0),n=dc(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(q(),a===i){t=Vn(e,t,n);break e}_n(e,t,a,n)}t=t.child}return t;case 26:if(Es)return In(e,t),null===e?(n=Ms(t.type,null,t.pendingProps,null))?t.memoizedState=n:Il||(t.stateNode=Ds(t.type,t.pendingProps,Nl.current,t)):t.memoizedState=Ms(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(Bs)return O(t),null===e&&Bs&&Il&&(i=t.stateNode=Fs(t.type,t.pendingProps,Nl.current,$l.current,!1),Tl=t,Ll=!0,Rl=es(t.type,i,Rl)),_n(e,t,t.pendingProps.children,n),In(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&Il&&(ks(t.type,t.pendingProps,$l.current),(o=i=Rl)&&(null!==(i=ts(i,t.type,t.pendingProps,Ll))?(t.stateNode=i,Tl=t,Rl=Ka(i),Ll=!1,o=!0):o=!1),o||j(t)),O(t),o=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,i=a.children,Wo(o,a)?i=null:null!==s&&Wo(o,s)&&(t.flags|=32),null!==t.memoizedState&&(o=it(e,t,st,null,null,n),Ho?la._currentValue=o:la._currentValue2=o),In(e,t),_n(e,t,i,n),t.child;case 6:return null===e&&Il&&(_s(t.pendingProps,$l.current),(e=n=Rl)&&(null!==(n=ns(n,t.pendingProps,Ll))?(t.stateNode=n,Tl=t,Rl=null,e=!0):e=!1),e||j(t)),null;case 13:return Fn(e,t,n);case 4:return z(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=uc(t,null,i,n):_n(e,t,i,n),t.child;case 11:return En(e,t,t.type,t.pendingProps,n);case 7:return _n(e,t,t.pendingProps,n),t.child;case 8:case 12:return _n(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,K(0,t.type,i.value),_n(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,ne(t),i=i(o=re(o)),t.flags|=1,_n(e,t,i,n),t.child;case 14:return Pn(e,t,t.type,t.pendingProps,n);case 15:return $n(e,t,t.type,t.pendingProps,n);case 19:return Xn(e,t,n);case 31:return function(e,t,n){var i=t.pendingProps,o=!!(128&t.flags);if(t.flags&=-129,null===e){if(Il){if("hidden"===i.mode)return e=Tn(t,i),t.lanes=536870912,Nn(null,e);if(Qe(t),(e=Rl)?null!==(e=rs(e,Ll))&&(t.memoizedState={dehydrated:e,treeContext:null!==_l?{id:El,overflow:Pl}:null,retryLane:536870912,hydrationErrors:null},(n=Vi(e)).return=t,t.child=n,Tl=t,Rl=null):e=null,null===e)throw j(t);return t.lanes=536870912,null}return Tn(t,i)}var a=e.memoizedState;if(null!==a){var s=a.dehydrated;if(Qe(t),o)if(256&t.flags)t.flags&=-257,t=Rn(e,t,n);else{if(null===t.memoizedState)throw Error(r(558));t.child=e.child,t.flags|=128,t=null}else if(Oc||ee(e,t,n,!1),o=0!==(n&e.childLanes),Oc||o){if(null!==(i=ou)&&0!==(s=C(i,n))&&s!==a.retryLane)throw a.retryLane=s,Ie(e,s),ai(i,e,s),Wc;yi(),t=Rn(e,t,n)}else e=a.treeContext,qo&&(Rl=Ja(s),Tl=t,Il=!0,Dl=null,Ll=!1,null!==e&&L(t,e)),(t=Tn(t,i)).flags|=4096;return t}return(e=Hi(e.child,{mode:i.mode,children:i.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Mn(e,t,n,t.pendingProps);case 24:return ne(t),i=re(Gl),null===e?(null===(o=ye())&&(o=ou,a=ae(),o.pooledCache=a,a.refCount++,null!==a&&(o.pooledCacheLanes|=n),o=a),t.memoizedState={parent:i,cache:o},ze(t),K(0,Gl,o)):(0!==(e.lanes&n)&&(We(e,t),Ge(t,null,null,n),He()),o=e.memoizedState,a=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),K(0,Gl,i)):(i=a.cache,K(0,Gl,i),i!==o.cache&&Z(t,[Gl],n,!0))),_n(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Qn(e){e.flags|=4}function Jn(e){Uo&&(e.flags|=8)}function Zn(e,t){if(null!==e&&e.child===t.child)return!1;if(16&t.flags)return!0;for(e=t.child;null!==e;){if(8218&e.flags||8218&e.subtreeFlags)return!0;e=e.sibling}return!1}function er(e,t,n,r){if(Go)for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)Lo(e,n.stateNode);else if(!(4===n.tag||Bs&&27===n.tag)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if(Uo)for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Ba(o,i.type,i.memoizedProps)),Lo(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=Fa(o,i.memoizedProps)),Lo(e,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),er(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function tr(e,t,n,r){var i=!1;if(Uo)for(var o=t.child;null!==o;){if(5===o.tag){var a=o.stateNode;n&&r&&(a=Ba(a,o.type,o.memoizedProps)),za(e,a)}else if(6===o.tag)a=o.stateNode,n&&r&&(a=Fa(a,o.memoizedProps)),za(e,a);else if(4!==o.tag)if(22===o.tag&&null!==o.memoizedState)null!==(i=o.child)&&(i.return=o),tr(e,o,!0,!0),i=!0;else if(null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return i;o=o.return}o.sibling.return=o.return,o=o.sibling}return i}function nr(e,t){if(Uo&&Zn(e,t)){var n=(e=t.stateNode).containerInfo,r=La();tr(r,t,!1,!1),e.pendingChildren=r,Qn(t),Wa(n,r)}}function rr(e,t,n,r){if(Go)e.memoizedProps!==r&&Qn(t);else if(Uo){var i=e.stateNode,o=e.memoizedProps;if((e=Zn(e,t))||o!==r){var a=$l.current;(o=Da(i,n,o,r,!e,null))===i?t.stateNode=i:(Jn(t),zo(o,n,r,a)&&Qn(t),t.stateNode=o,e&&er(o,t,!1,!1))}else t.stateNode=i}}function ir(e,t,n,r,i){if(32&e.mode&&(null===n?ea(t,r):ta(t,n,r))){if(e.flags|=16777216,(335544128&i)===i||na(t,r))if(ra(e.stateNode,t,r))e.flags|=8192;else{if(!gi())throw sc=ac,ic;e.flags|=8192}}else e.flags&=-16777217}function or(e,t){if(zs(t)){if(e.flags|=16777216,!Ws(t)){if(!gi())throw sc=ac,ic;e.flags|=8192}}else e.flags&=-16777217}function ar(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?y():536870912,e.lanes|=t,vu|=t)}function sr(e,t){if(!Il)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lr(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function cr(e,t,n){var i=t.pendingProps;switch(D(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return lr(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Q(Gl),W(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(U(t)?Qn(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,X())),nr(e,t),lr(t),null;case 26:if(Es){var o=t.type,a=t.memoizedState;return null===e?(Qn(t),null!==a?(lr(t),or(t,a)):(lr(t),ir(t,o,null,i,n))):a?a!==e.memoizedState?(Qn(t),lr(t),or(t,a)):(lr(t),t.flags&=-16777217):(a=e.memoizedProps,Go?a!==i&&Qn(t):rr(e,t,o,i),lr(t),ir(t,o,a,i,n)),null}case 27:if(Bs){if(F(t),n=Nl.current,o=t.type,null!==e&&null!=t.stateNode)Go?e.memoizedProps!==i&&Qn(t):rr(e,t,o,i);else{if(!i){if(null===t.stateNode)throw Error(r(166));return lr(t),null}e=$l.current,U(t)?H(t,e):(e=Fs(o,i,n,e,!0),t.stateNode=e,Qn(t))}return lr(t),null}case 5:if(F(t),o=t.type,null!==e&&null!=t.stateNode)rr(e,t,o,i);else{if(!i){if(null===t.stateNode)throw Error(r(166));return lr(t),null}if(a=$l.current,U(t))H(t,a),gs(t.stateNode,o,i,a)&&(t.flags|=64);else{var s=Do(o,i,Nl.current,a,t);Jn(t),er(s,t,!1,!1),t.stateNode=s,zo(s,o,i,a)&&Qn(t)}}return lr(t),ir(t,t.type,null===e?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)n=e.memoizedProps,Go?n!==i&&Qn(t):Uo&&(n!==i?(e=Nl.current,n=$l.current,Jn(t),t.stateNode=Oo(i,e,n,t)):t.stateNode=e.stateNode);else{if("string"!=typeof i&&null===t.stateNode)throw Error(r(166));if(e=Nl.current,n=$l.current,U(t)){if(!qo)throw Error(r(176));if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(o=Tl))switch(o.tag){case 27:case 5:i=o.memoizedProps}as(e,n,t,i)||j(t,!0)}else Jn(t),t.stateNode=Oo(i,e,n,t)}return lr(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(i=U(t),null!==n){if(null===e){if(!i)throw Error(r(318));if(!qo)throw Error(r(556));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(r(557));ss(e,t)}else q(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;lr(t),e=!1}else n=X(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(et(t),t):(et(t),null);if(128&t.flags)throw Error(r(558))}return lr(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=U(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!qo)throw Error(r(344));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));ls(o,t)}else q(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;lr(t),o=!1}else o=X(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(et(t),t):(et(t),null)}return et(t),128&t.flags?(t.lanes=n,t):(n=null!==i,e=null!==e&&null!==e.memoizedState,n&&(o=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(o=i.alternate.memoizedState.cachePool.pool),a=null,null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(a=i.memoizedState.cachePool.pool),a!==o&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ar(t,t.updateQueue),lr(t),null);case 4:return W(),nr(e,t),null===e&&Vo(t.stateNode.containerInfo),lr(t),null;case 10:return Q(t.type),lr(t),null;case 19:if(h(Sc),null===(i=t.memoizedState))return lr(t),null;if(o=!!(128&t.flags),null===(a=i.rendering))if(o)sr(i,!1);else{if(0!==pu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=tt(e))){for(t.flags|=128,sr(i,!1),e=a.updateQueue,t.updateQueue=e,ar(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Gi(n,e),n=n.sibling;return f(Sc,1&Sc.current|2),Il&&T(t,i.treeForkCount),t.child}e=e.sibling}null!==i.tail&&ol()>_u&&(t.flags|=128,o=!0,sr(i,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=tt(a))){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,ar(t,e),sr(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!Il)return lr(t),null}else 2*ol()-i.renderingStartTime>_u&&536870912!==n&&(t.flags|=128,o=!0,sr(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ol(),e.sibling=null,n=Sc.current,f(Sc,o?1&n|2:1&n),Il&&T(t,i.treeForkCount),e):(lr(t),null);case 22:case 23:return et(t),Ye(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?!!(536870912&n)&&!(128&t.flags)&&(lr(t),6&t.subtreeFlags&&(t.flags|=8192)):lr(t),null!==(n=t.updateQueue)&&ar(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&h(nc),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Q(Gl),lr(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function ur(e,t){switch(D(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Q(Gl),W(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return F(t),null;case 31:if(null!==t.memoizedState){if(et(t),null===t.alternate)throw Error(r(340));q()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(et(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));q()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return h(Sc),null;case 4:return W(),null;case 10:return Q(t.type),null;case 22:case 23:return et(t),Ye(),null!==e&&h(nc),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Q(Gl),null;default:return null}}function dr(e,t){switch(D(t),t.tag){case 3:Q(Gl),W();break;case 26:case 27:case 5:F(t);break;case 4:W();break;case 31:null!==t.memoizedState&&et(t);break;case 13:et(t);break;case 19:h(Sc);break;case 10:Q(t.type);break;case 22:case 23:et(t),Ye(),null!==e&&h(nc);break;case 24:Q(Gl)}}function hr(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,a=n.inst;r=o(),a.destroy=r}n=n.next}while(n!==i)}}catch(s){Di(t,t.return,s)}}function fr(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,i=t;var l=n,c=s;try{c()}catch(u){Di(i,l,u)}}}r=r.next}while(r!==o)}}catch(u){Di(t,t.return,u)}}function pr(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{qe(t,n)}catch(r){Di(e,e.return,r)}}}function gr(e,t,n){n.props=vn(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Di(e,t,r)}}function mr(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=No(e.stateNode);break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(i){Di(e,t,i)}}function br(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(i){Di(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(o){Di(e,t,o)}else n.current=null}function yr(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{Ca(r,t,n,e)}catch(i){Di(e,e.return,i)}}function vr(e,t,n){try{ka(e.stateNode,e.type,n,t,e)}catch(r){Di(e,e.return,r)}}function xr(e){return 5===e.tag||3===e.tag||!!Es&&26===e.tag||!!Bs&&(27===e.tag&&Us(e.type))||4===e.tag}function Sr(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xr(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(Bs&&27===e.tag&&Us(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function wr(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?Ea(n,e,t):Sa(n,e);else if(4!==r&&(Bs&&27===r&&Us(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(wr(e,t,n),e=e.sibling;null!==e;)wr(e,t,n),e=e.sibling}function Cr(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?_a(n,e,t):xa(n,e);else if(4!==r&&(Bs&&27===r&&Us(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Cr(e,t,n),e=e.sibling;null!==e;)Cr(e,t,n),e=e.sibling}function kr(e,t,n){e=e.containerInfo;try{Oa(e,n)}catch(r){Di(t,t.return,r)}}function _r(e){var t=e.stateNode,n=e.memoizedProps;try{js(e.type,n,t,e)}catch(r){Di(e,e.return,r)}}function Er(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:zr(e,n),4&r&&hr(5,n);break;case 1:if(zr(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){Di(n,n.return,a)}else{var i=vn(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){Di(n,n.return,s)}}64&r&&pr(n),512&r&&mr(n,n.return);break;case 3:if(zr(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:e=No(n.child.stateNode);break;case 1:e=n.child.stateNode}try{qe(r,e)}catch(a){Di(n,n.return,a)}}break;case 27:Bs&&null===t&&4&r&&_r(n);case 26:case 5:if(zr(e,n),null===t)if(4&r)yr(n);else if(64&r){e=n.type,t=n.memoizedProps,i=n.stateNode;try{ds(i,e,t,n)}catch(a){Di(n,n.return,a)}}512&r&&mr(n,n.return);break;case 12:zr(e,n);break;case 31:zr(e,n),4&r&&Nr(e,n);break;case 13:zr(e,n),4&r&&Ar(e,n),64&r&&(null!==(r=n.memoizedState)&&(null!==(r=r.dehydrated)&&(n=Oi.bind(null,n),Ua(r,n))));break;case 22:if(!(r=null!==n.memoizedState||Fc)){t=null!==t&&null!==t.memoizedState||jc,i=Fc;var o=jc;Fc=r,(jc=t)&&!o?Or(e,n,!!(8772&n.subtreeFlags)):zr(e,n),Fc=i,jc=o}break;case 30:break;default:zr(e,n)}}function Pr(e){var t=e.alternate;null!==t&&(e.alternate=null,Pr(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Zo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $r(e,t,n){for(n=n.child;null!==n;)Mr(e,t,n),n=n.sibling}function Mr(e,t,n){if(fl&&"function"==typeof fl.onCommitFiberUnmount)try{fl.onCommitFiberUnmount(hl,n)}catch(o){}switch(n.tag){case 26:if(Es){jc||br(n,t),$r(e,t,n),n.memoizedState?As(n.memoizedState):n.stateNode&&Is(n.stateNode);break}case 27:if(Bs){jc||br(n,t);var r=qc,i=Xc;Us(n.type)&&(qc=n.stateNode,Xc=!1),$r(e,t,n),Hs(n.stateNode),qc=r,Xc=i;break}case 5:jc||br(n,t);case 6:if(Go){if(r=qc,i=Xc,qc=null,$r(e,t,n),Xc=i,null!==(qc=r))if(Xc)try{$a(qc,n.stateNode)}catch(a){Di(n,t,a)}else try{Pa(qc,n.stateNode)}catch(a){Di(n,t,a)}}else $r(e,t,n);break;case 18:Go&&null!==qc&&(Xc?ys(qc,n.stateNode):bs(qc,n.stateNode));break;case 4:Go?(r=qc,i=Xc,qc=n.stateNode.containerInfo,Xc=!0,$r(e,t,n),qc=r,Xc=i):(Uo&&kr(n.stateNode,n,La()),$r(e,t,n));break;case 0:case 11:case 14:case 15:fr(2,n,t),jc||fr(4,n,t),$r(e,t,n);break;case 1:jc||(br(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&gr(n,t,r)),$r(e,t,n);break;case 21:$r(e,t,n);break;case 22:jc=(r=jc)||null!==n.memoizedState,$r(e,t,n),jc=r;break;default:$r(e,t,n)}}function Nr(e,t){if(qo&&null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{fs(e)}catch(n){Di(t,t.return,n)}}}function Ar(e,t){if(qo&&null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{ps(e)}catch(n){Di(t,t.return,n)}}function Tr(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Gc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Gc),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Bi.bind(null,e,t);t.then(r,r)}})}function Rr(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var o=n[i],a=e,s=t;if(Go){var l=s;e:for(;null!==l;){switch(l.tag){case 27:if(Bs){if(Us(l.type)){qc=l.stateNode,Xc=!1;break e}break}case 5:qc=l.stateNode,Xc=!1;break e;case 3:case 4:qc=l.stateNode.containerInfo,Xc=!0;break e}l=l.return}if(null===qc)throw Error(r(160));Mr(a,s,o),qc=null,Xc=!1}else Mr(a,s,o);null!==(a=o.alternate)&&(a.return=null),o.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Ir(t,e),t=t.sibling}function Ir(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rr(t,e),Dr(e),4&i&&(fr(3,e,e.return),hr(3,e),fr(5,e,e.return));break;case 1:Rr(t,e),Dr(e),512&i&&(jc||null===n||br(n,n.return)),64&i&&Fc&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:if(Es){var o=Vc;if(Rr(t,e),Dr(e),512&i&&(jc||null===n||br(n,n.return)),4&i){i=null!==n?n.memoizedState:null;var a=e.memoizedState;null===n?null===a?null===e.stateNode?e.stateNode=Ts(o,e.type,e.memoizedProps,e):Rs(o,e.type,e.stateNode):e.stateNode=Ns(o,a,e.memoizedProps):i!==a?(null===i?null!==n.stateNode&&Is(n.stateNode):As(i),null===a?Rs(o,e.type,e.stateNode):Ns(o,a,e.memoizedProps)):null===a&&null!==e.stateNode&&vr(e,e.memoizedProps,n.memoizedProps)}break}case 27:if(Bs){Rr(t,e),Dr(e),512&i&&(jc||null===n||br(n,n.return)),null!==n&&4&i&&vr(e,e.memoizedProps,n.memoizedProps);break}case 5:if(Rr(t,e),Dr(e),512&i&&(jc||null===n||br(n,n.return)),Go){if(32&e.flags){o=e.stateNode;try{Ma(o)}catch(h){Di(e,e.return,h)}}4&i&&null!=e.stateNode&&vr(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&i&&(Hc=!0)}else Uo&&null!==e.alternate&&(e.alternate.stateNode=e.stateNode);break;case 6:if(Rr(t,e),Dr(e),4&i&&Go){if(null===e.stateNode)throw Error(r(162));i=e.memoizedProps,n=null!==n?n.memoizedProps:i,o=e.stateNode;try{wa(o,n,i)}catch(h){Di(e,e.return,h)}}break;case 3:if(Es?(Ls(),o=Vc,Vc=$s(t.containerInfo),Rr(t,e),Vc=o):Rr(t,e),Dr(e),4&i){if(Go&&qo&&null!==n&&n.memoizedState.isDehydrated)try{hs(t.containerInfo)}catch(h){Di(e,e.return,h)}if(Uo){i=t.containerInfo,n=t.pendingChildren;try{Oa(i,n)}catch(h){Di(e,e.return,h)}}}Hc&&(Hc=!1,Lr(e));break;case 4:Es?(n=Vc,Vc=$s(e.stateNode.containerInfo),Rr(t,e),Dr(e),Vc=n):(Rr(t,e),Dr(e)),4&i&&Uo&&kr(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:Rr(t,e),Dr(e);break;case 31:Rr(t,e),Dr(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Tr(e,i)));break;case 13:Rr(t,e),Dr(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Cu=ol()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Tr(e,i)));break;case 22:o=null!==e.memoizedState;var s=null!==n&&null!==n.memoizedState,l=Fc,c=jc;if(Fc=l||o,jc=c||s,Rr(t,e),jc=c,Fc=l,Dr(e),8192&i&&((t=e.stateNode)._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||s||Fc||jc||Wr(e)),Go))e:if(n=null,Go)for(t=e;;){if(5===t.tag||Es&&26===t.tag){if(null===n){s=n=t;try{a=s.stateNode,o?Na(a):Ta(s.stateNode,s.memoizedProps)}catch(h){Di(s,s.return,h)}}}else if(6===t.tag){if(null===n){s=t;try{var u=s.stateNode;o?Aa(u):Ra(u,s.memoizedProps)}catch(h){Di(s,s.return,h)}}}else if(18===t.tag){if(null===n){s=t;try{var d=s.stateNode;o?vs(d):xs(s.stateNode)}catch(h){Di(s,s.return,h)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Tr(e,n))));break;case 19:Rr(t,e),Dr(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Tr(e,i)));break;case 30:case 21:break;default:Rr(t,e),Dr(e)}}function Dr(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(xr(i)){n=i;break}i=i.return}if(Go){if(null==n)throw Error(r(160));switch(n.tag){case 27:if(Bs){var o=n.stateNode;Cr(e,Sr(e),o);break}case 5:var a=n.stateNode;32&n.flags&&(Ma(a),n.flags&=-33),Cr(e,Sr(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;wr(e,Sr(e),s);break;default:throw Error(r(161))}}}catch(l){Di(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Lr(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Lr(t),5===t.tag&&1024&t.flags&&ca(t.stateNode),e=e.sibling}}function zr(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Er(e,t.alternate,t),t=t.sibling}function Wr(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:fr(4,t,t.return),Wr(t);break;case 1:br(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&gr(t,t.return,n),Wr(t);break;case 27:Bs&&Hs(t.stateNode);case 26:case 5:br(t,t.return),Wr(t);break;case 22:null===t.memoizedState&&Wr(t);break;default:Wr(t)}e=e.sibling}}function Or(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:Or(i,o,n),hr(4,o);break;case 1:if(Or(i,o,n),"function"==typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){Di(r,r.return,c)}if(null!==(i=(r=o).updateQueue)){var s=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Ue(l[i],s)}catch(c){Di(r,r.return,c)}}n&&64&a&&pr(o),mr(o,o.return);break;case 27:Bs&&_r(o);case 26:case 5:Or(i,o,n),n&&null===r&&4&a&&yr(o),mr(o,o.return);break;case 12:Or(i,o,n);break;case 31:Or(i,o,n),n&&4&a&&Nr(i,o);break;case 13:Or(i,o,n),n&&4&a&&Ar(i,o);break;case 22:null===o.memoizedState&&Or(i,o,n),mr(o,o.return);break;case 30:break;default:Or(i,o,n)}t=t.sibling}}function Br(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&se(n))}function Fr(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&se(e))}function jr(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hr(e,t,n,r),t=t.sibling}function Hr(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:jr(e,t,n,r),2048&i&&hr(9,t);break;case 1:case 31:case 13:default:jr(e,t,n,r);break;case 3:jr(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&se(e)));break;case 12:if(2048&i){jr(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"==typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Di(t,t.return,l)}}else jr(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,a=t.alternate,null!==t.memoizedState?2&o._visibility?jr(e,t,n,r):Ur(e,t):2&o._visibility?jr(e,t,n,r):(o._visibility|=2,Gr(e,t,n,r,!!(10256&t.subtreeFlags)||!1)),2048&i&&Br(a,t);break;case 24:jr(e,t,n,r),2048&i&&Fr(t.alternate,t)}}function Gr(e,t,n,r,i){for(i=i&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var o=e,a=t,s=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Gr(o,a,s,l,i),hr(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Gr(o,a,s,l,i):Ur(o,a):(u._visibility|=2,Gr(o,a,s,l,i)),i&&2048&c&&Br(a.alternate,a);break;case 24:Gr(o,a,s,l,i),i&&2048&c&&Fr(a.alternate,a);break;default:Gr(o,a,s,l,i)}t=t.sibling}}function Ur(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Ur(n,r),2048&i&&Br(r.alternate,r);break;case 24:Ur(n,r),2048&i&&Fr(r.alternate,r);break;default:Ur(n,r)}t=t.sibling}}function qr(e,t,n){if(e.subtreeFlags&Yc)for(e=e.child;null!==e;)Xr(e,t,n),e=e.sibling}function Xr(e,t,n){switch(e.tag){case 26:if(qr(e,t,n),e.flags&Yc)if(null!==e.memoizedState)Os(n,Vc,e.memoizedState,e.memoizedProps);else{var r=e.stateNode,i=e.type;e=e.memoizedProps,((335544128&t)===t||na(i,e))&&oa(n,r,i,e)}break;case 5:qr(e,t,n),e.flags&Yc&&(r=e.stateNode,i=e.type,e=e.memoizedProps,((335544128&t)===t||na(i,e))&&oa(n,r,i,e));break;case 3:case 4:Es?(r=Vc,Vc=$s(e.stateNode.containerInfo),qr(e,t,n),Vc=r):qr(e,t,n);break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=Yc,Yc=16777216,qr(e,t,n),Yc=r):qr(e,t,n));break;default:qr(e,t,n)}}function Vr(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yr(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Uc=r,Jr(r,e)}Vr(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Kr(e),e=e.sibling}function Kr(e){switch(e.tag){case 0:case 11:case 15:Yr(e),2048&e.flags&&fr(9,e,e.return);break;case 3:case 12:default:Yr(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Qr(e)):Yr(e)}}function Qr(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Uc=r,Jr(r,e)}Vr(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:fr(8,t,t.return),Qr(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Qr(t));break;default:Qr(t)}e=e.sibling}}function Jr(e,t){for(;null!==Uc;){var n=Uc;switch(n.tag){case 0:case 11:case 15:fr(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:se(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Uc=r;else e:for(n=e;null!==Uc;){var i=(r=Uc).sibling,o=r.return;if(Pr(r),r===n){Uc=null;break e}if(null!==i){i.return=o,Uc=i;break e}Uc=o}}}function Zr(e){var t=Xo(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(r(364));return t}if(null===(e=fa(e)))throw Error(r(362));return e.stateNode.current}function ei(e,t){var n=e.tag;switch(t.$$typeof){case Qc:if(e.type===t.value)return!0;break;case Jc:e:{for(t=t.value,e=[e,0],n=0;n<e.length;){var i=e[n++],o=i.tag,a=e[n++],s=t[a];if(5!==o&&26!==o&&27!==o||!ma(i)){for(;null!=s&&ei(i,s);)s=t[++a];if(a===t.length){t=!0;break e}for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}t=!1}return t;case Zc:if((5===n||26===n||27===n)&&ba(e.stateNode,t.value))return!0;break;case tu:if((5===n||6===n||26===n||27===n)&&null!==(e=ga(e))&&0<=e.indexOf(t.value))return!0;break;case eu:if((5===n||26===n||27===n)&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(r(365))}return!1}function ti(e){switch(e.$$typeof){case Qc:return"<"+(u(e.value)||"Unknown")+">";case Jc:return":has("+(ti(e)||"")+")";case Zc:return'[role="'+e.value+'"]';case tu:return'"'+e.value+'"';case eu:return'[data-testname="'+e.value+'"]';default:throw Error(r(365))}}function ni(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],o=i.tag,a=e[r++],s=t[a];if(5!==o&&26!==o&&27!==o||!ma(i)){for(;null!=s&&ei(i,s);)s=t[++a];if(a===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}return n}function ri(e,t){if(!ha)throw Error(r(363));e=ni(e=Zr(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++],o=i.tag;if(5===o||26===o||27===o)ma(i)||t.push(i.stateNode);else for(i=i.child;null!==i;)e.push(i),i=i.sibling}return t}function ii(){return 2&iu&&0!==su?su&-su:null!==Eo.T?me():Qo()}function oi(){if(0===yu)if(536870912&su&&!Il)yu=536870912;else{var e=Zs;!(3932160&(Zs<<=1))&&(Zs=262144),yu=e}return null!==(e=vc.current)&&(e.flags|=32),yu}function ai(e,t,n){(e!==ou||2!==lu&&9!==lu)&&null===e.cancelPendingCommit||(fi(e,0),ui(e,su,yu,!1)),x(e,n),2&iu&&e===ou||(e===ou&&(!(2&iu)&&(mu|=n),4===pu&&ui(e,su,yu,!1)),ce(e))}function si(e,t,n){if(6&iu)throw Error(r(327));for(var i=!n&&!(127&t)&&0===(t&e.expiredLanes)||m(e,t),o=i?function(e,t){var n=iu;iu|=2;var i=mi(),o=bi();ou!==e||su!==t?(Eu=null,_u=ol()+500,fi(e,t)):du=m(e,t);e:for(;;)try{if(0!==lu&&null!==au){t=au;var a=cu;t:switch(lu){case 1:lu=0,cu=null,ki(e,t,a,1);break;case 2:case 9:if(we(a)){lu=0,cu=null,Ci(t);break}t=function(){2!==lu&&9!==lu||ou!==e||(lu=7),ce(e)},a.then(t,t);break e;case 3:lu=7;break e;case 4:lu=5;break e;case 7:we(a)?(lu=0,cu=null,Ci(t)):(lu=0,cu=null,ki(e,t,a,7));break;case 5:var s=null;switch(au.tag){case 26:s=au.memoizedState;case 5:case 27:var l=au,c=l.type,u=l.pendingProps;if(s?Ws(s):ra(l.stateNode,c,u)){lu=0,cu=null;var d=l.sibling;if(null!==d)au=d;else{var h=l.return;null!==h?(au=h,_i(h)):au=null}break t}}lu=0,cu=null,ki(e,t,a,5);break;case 6:lu=0,cu=null,ki(e,t,a,6);break;case 8:hi(),pu=6;break e;default:throw Error(r(462))}}Si();break}catch(f){pi(e,f)}return Bl=Ol=null,Eo.H=i,Eo.A=o,iu=n,null!==au?0:(ou=null,su=0,Ae(),pu)}(e,t):vi(e,t,!0),a=i;;){if(0===o){du&&!i&&ui(e,t,0,!1);break}if(n=e.current.alternate,!a||ci(n)){if(2===o){if(a=t,e.errorRecoveryDisabledLanes&a)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;o=xu;var c=qo&&l.current.memoizedState.isDehydrated;if(c&&(fi(l,s).flags|=256),2!==(s=vi(l,s,!1))){if(hu&&!c){l.errorRecoveryDisabledLanes|=a,mu|=a,o=4;break e}a=Su,Su=o,null!==a&&(null===Su?Su=a:Su.push.apply(Su,a))}o=s}if(a=!1,2!==o)continue}}if(1===o){fi(e,0),ui(e,t,0,!0);break}e:{switch(i=e,a=o){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:ui(i,t,yu,!uu);break e;case 2:Su=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(o=Cu+300-ol())){if(ui(i,t,yu,!uu),0!==g(i,0,!0))break e;Au=t,i.timeoutHandle=Bo(li.bind(null,i,n,Su,Eu,wu,t,yu,mu,vu,uu,a,"Throttled",-0,0),o)}else li(i,n,Su,Eu,wu,t,yu,mu,vu,uu,a,null,-0,0)}break}o=vi(e,t,!1),a=!1}ce(e)}function li(e,t,n,r,i,o,a,s,l,c,u,d,h,f){if(e.timeoutHandle=jo,8192&(d=t.subtreeFlags)||!(16785408&~d)){Xr(t,o,d=ia());var p=(62914560&o)===o?Cu-ol():(4194048&o)===o?ku-ol():0;if(null!==(p=aa(d,p)))return Au=o,e.cancelPendingCommit=p(Pi.bind(null,e,t,o,n,r,i,a,s,l,u,d,null,h,f)),void ui(e,o,a,!c)}Pi(e,t,o,n,r,i,a,s,l)}function ci(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!pl(o(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ui(e,t,n,r){t&=~bu,t&=~mu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-Ys(i),a=1<<o;r[o]=-1,i&=~a}0!==n&&S(e,n,t)}function di(){return!!(6&iu)||(ue(0),!1)}function hi(){if(null!==au){if(0===lu)var e=au.return;else Bl=Ol=null,ut(e=au),lc=null,cc=0,e=au;for(;null!==e;)dr(e.alternate,e),e=e.return;au=null}}function fi(e,t){var n=e.timeoutHandle;n!==jo&&(e.timeoutHandle=jo,Fo(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Au=0,hi(),ou=e,au=n=Hi(e.current,null),su=t,lu=0,cu=null,uu=!1,du=m(e,t),hu=!1,vu=yu=bu=mu=gu=pu=0,Su=xu=null,wu=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-Ys(r),o=1<<i;t|=e[i],r&=~o}return fu=t,Ae(),n}function pi(e,t){Cc=null,Eo.H=Rc,t===rc||t===oc?(t=_e(),lu=3):t===ic?(t=_e(),lu=4):lu=t===Wc?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,cu=t,null===au&&(pu=1,xn(e,A(t,e.current)))}function gi(){var e=vc.current;return null===e||((4194048&su)===su?null===xc:!!((62914560&su)===su||536870912&su)&&e===xc)}function mi(){var e=Eo.H;return Eo.H=Rc,null===e?Rc:e}function bi(){var e=Eo.A;return Eo.A=Kc,e}function yi(){pu=4,uu||(4194048&su)!==su&&null!==vc.current||(du=!0),!(134217727&gu)&&!(134217727&mu)||null===ou||ui(ou,su,yu,!1)}function vi(e,t,n){var r=iu;iu|=2;var i=mi(),o=bi();ou===e&&su===t||(Eu=null,fi(e,t)),t=!1;var a=pu;e:for(;;)try{if(0!==lu&&null!==au){var s=au,l=cu;switch(lu){case 8:hi(),a=6;break e;case 3:case 2:case 9:case 6:null===vc.current&&(t=!0);var c=lu;if(lu=0,cu=null,ki(e,s,l,c),n&&du){a=0;break e}break;default:c=lu,lu=0,cu=null,ki(e,s,l,c)}}xi(),a=pu;break}catch(u){pi(e,u)}return t&&e.shellSuspendCounter++,Bl=Ol=null,iu=r,Eo.H=i,Eo.A=o,null===au&&(ou=null,su=0,Ae()),a}function xi(){for(;null!==au;)wi(au)}function Si(){for(;null!==au&&!rl();)wi(au)}function wi(e){var t=Kn(e.alternate,e,fu);e.memoizedProps=e.pendingProps,null===t?_i(e):au=t}function Ci(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ln(n,t,t.pendingProps,t.type,void 0,su);break;case 11:t=Ln(n,t,t.pendingProps,t.type.render,t.ref,su);break;case 5:ut(t);default:dr(n,t),t=Kn(n,t=au=Gi(t,fu),fu)}e.memoizedProps=e.pendingProps,null===t?_i(e):au=t}function ki(e,t,n,i){Bl=Ol=null,ut(t),lc=null,cc=0;var o=t.return;try{if(function(e,t,n,i,o){if(n.flags|=32768,null!==i&&"object"==typeof i&&"function"==typeof i.then){if(null!==(t=n.alternate)&&ee(t,n,o,!0),null!==(n=vc.current)){switch(n.tag){case 31:case 13:return null===xc?yi():null===n.alternate&&0===pu&&(pu=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===ac?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),Li(e,i,o)),!1;case 22:return n.flags|=65536,i===ac?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),Li(e,i,o)),!1}throw Error(r(435,n.tag))}return Li(e,i,o),yi(),!1}if(Il)return null!==(t=vc.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==zl&&V(A(e=Error(r(422),{cause:i}),n))):(i!==zl&&V(A(t=Error(r(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,i=A(i,n),je(e,o=wn(e.stateNode,i,o)),4!==pu&&(pu=2)),!1;var a=Error(r(520),{cause:i});if(a=A(a,n),null===xu?xu=[a]:xu.push(a),4!==pu&&(pu=2),null===t)return!0;i=A(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,je(n,e=wn(n.stateNode,i,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==Pu&&Pu.has(a))))return n.flags|=65536,o&=-o,n.lanes|=o,kn(o=Cn(o),e,n,i),je(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,su))return pu=1,xn(e,A(n,e.current)),void(au=null)}catch(a){if(null!==o)throw au=o,a;return pu=1,xn(e,A(n,e.current)),void(au=null)}32768&t.flags?(Il||1===i?e=!0:du||536870912&su?e=!1:(uu=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=vc.current)&&13===i.tag&&(i.flags|=16384))),Ei(t,e)):_i(t)}function _i(e){var t=e;do{if(32768&t.flags)return void Ei(t,uu);e=t.return;var n=cr(t.alternate,t,fu);if(null!==n)return void(au=n);if(null!==(t=t.sibling))return void(au=t);au=t=e}while(null!==t);0===pu&&(pu=5)}function Ei(e,t){do{var n=ur(e.alternate,e);if(null!==n)return n.flags&=32767,void(au=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(au=e);au=e=n}while(null!==e);pu=6,au=null}function Pi(e,t,n,i,o,a,s,l,c){e.cancelPendingCommit=null;do{Ti()}while(0!==$u);if(6&iu)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,i,o){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-Ys(n),d=1<<u;s[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&S(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,n,a|=pc,s,l,c),e===ou&&(au=ou=null,su=0),Nu=t,Mu=e,Au=n,Tu=a,Ru=o,Iu=i,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,tl(ll,function(){return Ri(),null})):(e.callbackNode=null,e.callbackPriority=0),i=!!(13878&t.flags),13878&t.subtreeFlags||i){i=Eo.T,Eo.T=null,o=Ko(),Yo(2),s=iu,iu|=4;try{!function(e,t){for(Ro(e.containerInfo),Uc=t;null!==Uc;)if(t=(e=Uc).child,1028&e.subtreeFlags&&null!==t)t.return=e,Uc=t;else for(;null!==Uc;){var n=(e=Uc).alternate;switch(t=e.flags,e.tag){case 0:if(4&t&&null!==(t=null!==(t=e.updateQueue)?t.events:null))for(var i=0;i<t.length;i++){var o=t[i];o.ref.impl=o.nextImpl}break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&t&&null!==n){t=void 0,i=e,o=n.memoizedProps,n=n.memoizedState;var a=i.stateNode;try{var s=vn(i.type,o);t=a.getSnapshotBeforeUpdate(s,n),a.__reactInternalSnapshotBeforeUpdate=t}catch(l){Di(i,i.return,l)}}break;case 3:1024&t&&Go&&Ia(e.stateNode.containerInfo);break;default:if(1024&t)throw Error(r(163))}if(null!==(t=e.sibling)){t.return=e.return,Uc=t;break}Uc=e.return}}(e,t)}finally{iu=s,Yo(o),Eo.T=i}}$u=1,$i(),Mi(),Ni()}}function $i(){if(1===$u){$u=0;var e=Mu,t=Nu,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=Eo.T,Eo.T=null;var r=Ko();Yo(2);var i=iu;iu|=4;try{Ir(t,e),Io(e.containerInfo)}finally{iu=i,Yo(r),Eo.T=n}}e.current=t,$u=2}}function Mi(){if(2===$u){$u=0;var e=Mu,t=Nu,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=Eo.T,Eo.T=null;var r=Ko();Yo(2);var i=iu;iu|=4;try{Er(e,t.alternate,t)}finally{iu=i,Yo(r),Eo.T=n}}$u=3}}function Ni(){if(4===$u||3===$u){$u=0,il();var e=Mu,t=Nu,n=Au,r=Iu;10256&t.subtreeFlags||10256&t.flags?$u=5:($u=0,Nu=Mu=null,Ai(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Pu=null),_(n),t=t.stateNode,fl&&"function"==typeof fl.onCommitFiberRoot)try{fl.onCommitFiberRoot(hl,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==r){t=Eo.T,i=Ko(),Yo(2),Eo.T=null;try{for(var o=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];o(s.value,{componentStack:s.stack})}}finally{Eo.T=t,Yo(i)}}3&Au&&Ti(),ce(e),i=e.pendingLanes,261930&n&&42&i?e===Lu?Du++:(Du=0,Lu=e):Du=0,qo&&ms(),ue(0)}}function Ai(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,se(t)))}function Ti(){return $i(),Mi(),Ni(),Ri()}function Ri(){if(5!==$u)return!1;var e=Mu,t=Tu;Tu=0;var n=_(Au),i=32>n?32:n;n=Eo.T;var o=Ko();try{Yo(i),Eo.T=null,i=Ru,Ru=null;var a=Mu,s=Au;if($u=0,Nu=Mu=null,Au=0,6&iu)throw Error(r(331));var l=iu;if(iu|=4,Kr(a.current),Hr(a,a.current,s,i),iu=l,ue(0),fl&&"function"==typeof fl.onPostCommitFiberRoot)try{fl.onPostCommitFiberRoot(hl,a)}catch(c){}return!0}finally{Yo(o),Eo.T=n,Ai(e,t)}}function Ii(e,t,n){t=A(n,t),null!==(e=Be(e,t=wn(e.stateNode,t,2),2))&&(x(e,2),ce(e))}function Di(e,t,n){if(3===e.tag)Ii(e,e,n);else for(;null!==t;){if(3===t.tag){Ii(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Pu||!Pu.has(r))){e=A(n,e),null!==(r=Be(t,n=Cn(2),2))&&(kn(n,r,t,e),x(r,2),ce(r));break}}t=t.return}}function Li(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ru;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(hu=!0,i.add(n),e=zi.bind(null,e,t,n),t.then(e,e))}function zi(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ou===e&&(su&n)===n&&(4===pu||3===pu&&(62914560&su)===su&&300>ol()-Cu?!(2&iu)&&fi(e,0):bu|=n,vu===su&&(vu=0)),ce(e)}function Wi(e,t){0===t&&(t=y()),null!==(e=Ie(e,t))&&(x(e,t),ce(e))}function Oi(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Wi(e,n)}function Bi(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==i&&i.delete(t),Wi(e,n)}function Fi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hi(e,n){var r=e.alternate;return null===r?((r=t(e.tag,n,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=65011712&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Gi(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ui(e,n,i,o,a,s){var l=0;if(o=e,"function"==typeof e)ji(e)&&(l=1);else if("string"==typeof e)l=Es&&Bs?Ps(e,i,$l.current)?26:Gs(e)?27:5:Es?Ps(e,i,$l.current)?26:5:Bs&&Gs(e)?27:5;else e:switch(e){case So:return(e=t(31,i,n,a)).elementType=So,e.lanes=s,e;case uo:return qi(i.children,a,s,n);case ho:l=8,a|=24;break;case fo:return(e=t(12,i,n,2|a)).elementType=fo,e.lanes=s,e;case bo:return(e=t(13,i,n,a)).elementType=bo,e.lanes=s,e;case yo:return(e=t(19,i,n,a)).elementType=yo,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case go:l=10;break e;case po:l=9;break e;case mo:l=11;break e;case vo:l=14;break e;case xo:l=16,o=null;break e}l=29,i=Error(r(130,null===e?"null":typeof e,"")),o=null}return(n=t(l,i,n,a)).elementType=e,n.type=o,n.lanes=s,n}function qi(e,n,r,i){return(e=t(7,e,i,n)).lanes=r,e}function Xi(e,n,r){return(e=t(6,e,null,n)).lanes=r,e}function Vi(e){var n=t(18,null,null,0);return n.stateNode=e,n}function Yi(e,n,r){return(n=t(4,null!==e.children?e.children:[],e.key,n)).lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Ki(e,t,n,r,i,o,a,s,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=jo,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=v(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=v(0),this.hiddenUpdates=v(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Qi(e,n,r,i,o,a,s,l,c,u,d,h){return e=new Ki(e,n,r,s,c,u,d,h,l),n=1,!0===a&&(n|=24),a=t(3,null,null,n),e.current=a,a.stateNode=e,(n=ae()).refCount++,e.pooledCache=n,n.refCount++,a.memoizedState={element:i,isDehydrated:r,cache:n},ze(a),e}function Ji(e){return e?e=Vs:Vs}function Zi(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return null===(e=null!==(e=a(t))?s(e):null)?null:No(e.stateNode)}function eo(e,t,n,r,i,o){i=Ji(i),null===r.context?r.context=i:r.pendingContext=i,(r=Oe(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=Be(e,r,t))&&(ai(n,0,t),Fe(n,e,t))}function to(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function no(e,t){to(e,t),(e=e.alternate)&&to(e,t)}var ro={},io=B(),oo=Y(),ao=Object.assign,so=Symbol.for("react.element"),lo=Symbol.for("react.transitional.element"),co=Symbol.for("react.portal"),uo=Symbol.for("react.fragment"),ho=Symbol.for("react.strict_mode"),fo=Symbol.for("react.profiler"),po=Symbol.for("react.consumer"),go=Symbol.for("react.context"),mo=Symbol.for("react.forward_ref"),bo=Symbol.for("react.suspense"),yo=Symbol.for("react.suspense_list"),vo=Symbol.for("react.memo"),xo=Symbol.for("react.lazy"),So=Symbol.for("react.activity"),wo=Symbol.for("react.memo_cache_sentinel"),Co=Symbol.iterator,ko=Symbol.for("react.client.reference"),_o=Array.isArray,Eo=io.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Po=e.rendererVersion,$o=e.rendererPackageName,Mo=e.extraDevToolsConfig,No=e.getPublicInstance,Ao=e.getRootHostContext,To=e.getChildHostContext,Ro=e.prepareForCommit,Io=e.resetAfterCommit,Do=e.createInstance;e.cloneMutableInstance;var Lo=e.appendInitialChild,zo=e.finalizeInitialChildren,Wo=e.shouldSetTextContent,Oo=e.createTextInstance;e.cloneMutableTextInstance;var Bo=e.scheduleTimeout,Fo=e.cancelTimeout,jo=e.noTimeout,Ho=e.isPrimaryRenderer;e.warnsIfNotActing;var Go=e.supportsMutation,Uo=e.supportsPersistence,qo=e.supportsHydration,Xo=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var Vo=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Yo=e.setCurrentUpdatePriority,Ko=e.getCurrentUpdatePriority,Qo=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Jo=e.shouldAttemptEagerTransition,Zo=e.detachDeletedInstance;e.requestPostPaintCallback;var ea=e.maySuspendCommit,ta=e.maySuspendCommitOnUpdate,na=e.maySuspendCommitInSyncRender,ra=e.preloadInstance,ia=e.startSuspendingCommit,oa=e.suspendInstance;e.suspendOnActiveViewTransition;var aa=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var sa=e.NotPendingTransition,la=e.HostTransitionContext,ca=e.resetFormInstance;e.bindToConsole;var ua=e.supportsMicrotasks,da=e.scheduleMicrotask,ha=e.supportsTestSelectors,fa=e.findFiberRoot,pa=e.getBoundingRect,ga=e.getTextContent,ma=e.isHiddenSubtree,ba=e.matchAccessibilityRole,ya=e.setFocusIfFocusable,va=e.setupIntersectionObserver,xa=e.appendChild,Sa=e.appendChildToContainer,wa=e.commitTextUpdate,Ca=e.commitMount,ka=e.commitUpdate,_a=e.insertBefore,Ea=e.insertInContainerBefore,Pa=e.removeChild,$a=e.removeChildFromContainer,Ma=e.resetTextContent,Na=e.hideInstance,Aa=e.hideTextInstance,Ta=e.unhideInstance,Ra=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Ia=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var Da=e.cloneInstance,La=e.createContainerChildSet,za=e.appendChildToContainerChildSet,Wa=e.finalizeContainerChildren,Oa=e.replaceContainerChildren,Ba=e.cloneHiddenInstance,Fa=e.cloneHiddenTextInstance,ja=e.isSuspenseInstancePending,Ha=e.isSuspenseInstanceFallback,Ga=e.getSuspenseInstanceFallbackErrorDetails,Ua=e.registerSuspenseInstanceRetry,qa=e.canHydrateFormStateMarker,Xa=e.isFormStateMarkerMatching,Va=e.getNextHydratableSibling,Ya=e.getNextHydratableSiblingAfterSingleton,Ka=e.getFirstHydratableChild,Qa=e.getFirstHydratableChildWithinContainer,Ja=e.getFirstHydratableChildWithinActivityInstance,Za=e.getFirstHydratableChildWithinSuspenseInstance,es=e.getFirstHydratableChildWithinSingleton,ts=e.canHydrateInstance,ns=e.canHydrateTextInstance,rs=e.canHydrateActivityInstance,is=e.canHydrateSuspenseInstance,os=e.hydrateInstance,as=e.hydrateTextInstance,ss=e.hydrateActivityInstance,ls=e.hydrateSuspenseInstance,cs=e.getNextHydratableInstanceAfterActivityInstance,us=e.getNextHydratableInstanceAfterSuspenseInstance,ds=e.commitHydratedInstance,hs=e.commitHydratedContainer,fs=e.commitHydratedActivityInstance,ps=e.commitHydratedSuspenseInstance,gs=e.finalizeHydratedChildren,ms=e.flushHydrationEvents;e.clearActivityBoundary;var bs=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var ys=e.clearSuspenseBoundaryFromContainer,vs=e.hideDehydratedBoundary,xs=e.unhideDehydratedBoundary,Ss=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var ws,Cs,ks=e.validateHydratableInstance,_s=e.validateHydratableTextInstance,Es=e.supportsResources,Ps=e.isHostHoistableType,$s=e.getHoistableRoot,Ms=e.getResource,Ns=e.acquireResource,As=e.releaseResource,Ts=e.hydrateHoistable,Rs=e.mountHoistable,Is=e.unmountHoistable,Ds=e.createHoistableInstance,Ls=e.prepareToCommitHoistables,zs=e.mayResourceSuspendCommit,Ws=e.preloadResource,Os=e.suspendResource,Bs=e.supportsSingletons,Fs=e.resolveSingletonInstance,js=e.acquireSingletonInstance,Hs=e.releaseSingletonInstance,Gs=e.isHostSingletonType,Us=e.isSingletonScope,qs=[],Xs=-1,Vs={},Ys=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Ks(e)/Qs|0)|0},Ks=Math.log,Qs=Math.LN2,Js=256,Zs=262144,el=4194304,tl=oo.unstable_scheduleCallback,nl=oo.unstable_cancelCallback,rl=oo.unstable_shouldYield,il=oo.unstable_requestPaint,ol=oo.unstable_now,al=oo.unstable_ImmediatePriority,sl=oo.unstable_UserBlockingPriority,ll=oo.unstable_NormalPriority,cl=oo.unstable_IdlePriority,ul=oo.log,dl=oo.unstable_setDisableYieldValue,hl=null,fl=null,pl="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},gl="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},ml=Object.prototype.hasOwnProperty,bl=!1,yl=new WeakMap,vl=[],xl=0,Sl=null,wl=0,Cl=[],kl=0,_l=null,El=1,Pl="",$l=d(null),Ml=d(null),Nl=d(null),Al=d(null),Tl=null,Rl=null,Il=!1,Dl=null,Ll=!1,zl=Error(r(519)),Wl=d(null),Ol=null,Bl=null,Fl="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},jl=oo.unstable_scheduleCallback,Hl=oo.unstable_NormalPriority,Gl={$$typeof:go,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Ul=null,ql=null,Xl=!1,Vl=!1,Yl=!1,Kl=0,Ql=null,Jl=0,Zl=0,ec=null,tc=Eo.S;Eo.S=function(e,t){ku=ol(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Ql){var n=Ql=[];Jl=0,Zl=me(),ec={status:"pending",value:void 0,then:function(e){n.push(e)}}}Jl++,t.then(be,be)}(0,t),null!==tc&&tc(e,t)};var nc=d(null),rc=Error(r(460)),ic=Error(r(474)),oc=Error(r(542)),ac={then:function(){}},sc=null,lc=null,cc=0,uc=Ne(!0),dc=Ne(!1),hc=[],fc=0,pc=0,gc=!1,mc=!1,bc=d(null),yc=d(0),vc=d(null),xc=null,Sc=d(0),wc=0,Cc=null,kc=null,_c=null,Ec=!1,Pc=!1,$c=!1,Mc=0,Nc=0,Ac=null,Tc=0,Rc={readContext:re,use:pt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useLayoutEffect:nt,useInsertionEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useSyncExternalStore:nt,useId:nt,useHostTransitionStatus:nt,useFormState:nt,useActionState:nt,useOptimistic:nt,useMemoCache:nt,useCacheRefresh:nt};Rc.useEffectEvent=nt;var Ic={readContext:re,use:pt,useCallback:function(e,t){return dt().memoizedState=[e,void 0===t?null:t],e},useContext:re,useEffect:Gt,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,jt(4194308,4,Yt.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jt(4194308,4,e,t)},useInsertionEffect:function(e,t){jt(4,2,e,t)},useMemo:function(e,t){var n=dt();t=void 0===t?null:t;var r=e();if($c){E(!0);try{e()}finally{E(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=dt();if(void 0!==n){var i=n(t);if($c){E(!0);try{n(t)}finally{E(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=cn.bind(null,Cc,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},dt().memoizedState=e},useState:function(e){var t=(e=Et(e)).queue,n=un.bind(null,Cc,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qt,useDeferredValue:function(e,t){return en(dt(),e,t)},useTransition:function(){var e=Et(!1);return e=nn.bind(null,Cc,e.queue,!0,!1),dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Cc,o=dt();if(Il){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===ou)throw Error(r(349));127&su||St(i,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Gt(Ct.bind(null,i,a,e),[e]),i.flags|=2048,Bt(9,{destroy:void 0},wt.bind(null,i,a,n,t),null),n},useId:function(){var e=dt(),t=ou.identifierPrefix;if(Il){var n=Pl;t="_"+t+"R_"+(n=(El&~(1<<32-Ys(El)-1)).toString(32)+n),0<(n=Mc++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Tc++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:on,useFormState:Dt,useActionState:Dt,useOptimistic:function(e){var t=dt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=hn.bind(null,Cc,!0,n),n.dispatch=t,[e,t]},useMemoCache:gt,useCacheRefresh:function(){return dt().memoizedState=ln.bind(null,Cc)},useEffectEvent:function(e){var t=dt(),n={impl:e};return t.memoizedState=n,function(){if(2&iu)throw Error(r(440));return n.impl.apply(void 0,arguments)}}},Dc={readContext:re,use:pt,useCallback:Jt,useContext:re,useEffect:Ut,useImperativeHandle:Kt,useInsertionEffect:Xt,useLayoutEffect:Vt,useMemo:Zt,useReducer:bt,useRef:Ft,useState:function(){return bt(mt)},useDebugValue:Qt,useDeferredValue:function(e,t){return tn(ht(),kc.memoizedState,e,t)},useTransition:function(){var e=bt(mt)[0],t=ht().memoizedState;return["boolean"==typeof e?e:ft(e),t]},useSyncExternalStore:xt,useId:an,useHostTransitionStatus:on,useFormState:Lt,useActionState:Lt,useOptimistic:function(e,t){return Pt(ht(),0,e,t)},useMemoCache:gt,useCacheRefresh:sn};Dc.useEffectEvent=qt;var Lc={readContext:re,use:pt,useCallback:Jt,useContext:re,useEffect:Ut,useImperativeHandle:Kt,useInsertionEffect:Xt,useLayoutEffect:Vt,useMemo:Zt,useReducer:vt,useRef:Ft,useState:function(){return vt(mt)},useDebugValue:Qt,useDeferredValue:function(e,t){var n=ht();return null===kc?en(n,e,t):tn(n,kc.memoizedState,e,t)},useTransition:function(){var e=vt(mt)[0],t=ht().memoizedState;return["boolean"==typeof e?e:ft(e),t]},useSyncExternalStore:xt,useId:an,useHostTransitionStatus:on,useFormState:Ot,useActionState:Ot,useOptimistic:function(e,t){var n=ht();return null!==kc?Pt(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:gt,useCacheRefresh:sn};Lc.useEffectEvent=qt;var zc={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ii(),i=Oe(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=Be(e,i,r))&&(ai(t,0,r),Fe(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ii(),i=Oe(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=Be(e,i,r))&&(ai(t,0,r),Fe(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ii(),r=Oe(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=Be(e,r,n))&&(ai(t,0,n),Fe(t,e,n))}},Wc=Error(r(461)),Oc=!1,Bc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Fc=!1,jc=!1,Hc=!1,Gc="function"==typeof WeakSet?WeakSet:Set,Uc=null,qc=null,Xc=!1,Vc=null,Yc=8192,Kc={getCacheForType:function(e){var t=re(Gl),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return re(Gl).controller.signal}},Qc=0,Jc=1,Zc=2,eu=3,tu=4;if("function"==typeof Symbol&&Symbol.for){var nu=Symbol.for;Qc=nu("selector.component"),Jc=nu("selector.has_pseudo_class"),Zc=nu("selector.role"),eu=nu("selector.test_id"),tu=nu("selector.text")}var ru="function"==typeof WeakMap?WeakMap:Map,iu=0,ou=null,au=null,su=0,lu=0,cu=null,uu=!1,du=!1,hu=!1,fu=0,pu=0,gu=0,mu=0,bu=0,yu=0,vu=0,xu=null,Su=null,wu=!1,Cu=0,ku=0,_u=1/0,Eu=null,Pu=null,$u=0,Mu=null,Nu=null,Au=0,Tu=0,Ru=null,Iu=null,Du=0,Lu=null;return ro.attemptContinuousHydration=function(e){if(13===e.tag||31===e.tag){var t=Ie(e,67108864);null!==t&&ai(t,0,67108864),no(e,67108864)}},ro.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag||31===e.tag){var t=ii(),n=Ie(e,t=k(t));null!==n&&ai(n,0,t),no(e,t)}},ro.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if((e=e.stateNode).current.memoizedState.isDehydrated){var t=p(e.pendingLanes);if(0!==t){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-Ys(t);e.entanglements[1]|=n,t&=~n}ce(e),!(6&iu)&&(_u=ol()+500,ue(0))}}break;case 31:case 13:null!==(t=Ie(e,2))&&ai(t,0,2),di(),no(e,2)}},ro.batchedUpdates=function(e,t){return e(t)},ro.createComponentSelector=function(e){return{$$typeof:Qc,value:e}},ro.createContainer=function(e,t,n,r,i,o,a,s,l,c){return Qi(e,t,!1,null,0,r,o,null,a,s,l,c)},ro.createHasPseudoClassSelector=function(e){return{$$typeof:Jc,value:e}},ro.createHydrationContainer=function(e,t,n,r,i,o,a,s,l,c,u,d,h,f){return(e=Qi(n,r,!0,e,0,o,s,f,l,c,u,d)).context=Ji(null),n=e.current,(i=Oe(r=k(r=ii()))).callback=null!=t?t:null,Be(n,i,r),t=r,e.current.lanes=t,x(e,t),ce(e),e},ro.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:co,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},ro.createRoleSelector=function(e){return{$$typeof:Zc,value:e}},ro.createTestNameSelector=function(e){return{$$typeof:eu,value:e}},ro.createTextSelector=function(e){return{$$typeof:tu,value:e}},ro.defaultOnCaughtError=function(e){console.error(e)},ro.defaultOnRecoverableError=function(e){gl(e)},ro.defaultOnUncaughtError=function(e){gl(e)},ro.deferredUpdates=function(e){var t=Eo.T,n=Ko();try{return Yo(32),Eo.T=null,e()}finally{Yo(n),Eo.T=t}},ro.discreteUpdates=function(e,t,n,r,i){var o=Eo.T,a=Ko();try{return Yo(2),Eo.T=null,e(t,n,r,i)}finally{Yo(a),Eo.T=o,0===iu&&(_u=ol()+500)}},ro.findAllNodes=ri,ro.findBoundingRects=function(e,t){if(!ha)throw Error(r(363));t=ri(e,t),e=[];for(var n=0;n<t.length;n++)e.push(pa(t[n]));for(t=e.length-1;0<t;t--)for(var i=(n=e[t]).x,o=i+n.width,a=n.y,s=a+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,d=u+c.width,h=c.y,f=h+c.height;if(i>=u&&a>=h&&o<=d&&s<=f){e.splice(t,1);break}if(!(i!==u||n.width!==c.width||f<a||h>s)){h>a&&(c.height+=h-a,c.y=a),f<s&&(c.height=s-h),e.splice(t,1);break}if(!(a!==h||n.height!==c.height||d<i||u>o)){u>i&&(c.width+=u-i,c.x=i),d<o&&(c.width=o-u),e.splice(t,1);break}}return e},ro.findHostInstance=Zi,ro.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=a(e))?l(e):null)?null:No(e.stateNode)},ro.findHostInstanceWithWarning=function(e){return Zi(e)},ro.flushPassiveEffects=Ti,ro.flushSyncFromReconciler=function(e){var t=iu;iu|=1;var n=Eo.T,r=Ko();try{if(Yo(2),Eo.T=null,e)return e()}finally{Yo(r),Eo.T=n,!(6&(iu=t))&&ue(0)}},ro.flushSyncWork=di,ro.focusWithin=function(e,t){if(!ha)throw Error(r(363));for(t=ni(e=Zr(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++],i=n.tag;if(!ma(n)){if((5===i||26===i||27===i)&&ya(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},ro.getFindAllNodesFailureDescription=function(e,t){if(!ha)throw Error(r(363));var n=0,i=[];e=[Zr(e),0];for(var o=0;o<e.length;){var a=e[o++],s=a.tag,l=e[o++],c=t[l];if((5!==s&&26!==s&&27!==s||!ma(a))&&(ei(a,c)&&(i.push(ti(c)),++l>n&&(n=l)),l<t.length))for(a=a.child;null!==a;)e.push(a,l),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(ti(t[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},ro.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 27:case 5:return No(e.child.stateNode);default:return e.child.stateNode}},ro.injectIntoDevTools=function(){var e={bundleType:0,version:Po,rendererPackageName:$o,currentDispatcherRef:Eo,reconcilerVersion:"19.2.0"};if(null!==Mo&&(e.rendererConfig=Mo),"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{hl=t.inject(e),fl=t}catch(n){}e=!!t.checkDCE}}return e},ro.isAlreadyRendering=function(){return!!(6&iu)},ro.observeVisibleRects=function(e,t,n,i){if(!ha)throw Error(r(363));e=ri(e,t);var o=va(e,n,i).disconnect;return{disconnect:function(){o()}}},ro.shouldError=function(){return null},ro.shouldSuspend=function(){return!1},ro.startHostTransition=function(e,t,i,o){if(5!==e.tag)throw Error(r(476));var a=rn(e).queue;nn(e,a,t,sa,null===i?n:function(){var t=rn(e);return null===t.next&&(t=e.alternate.memoizedState),dn(e,t.next.queue,{},ii()),i(o)})},ro.updateContainer=function(e,t,n,r){var i=t.current,o=ii();return eo(i,o,e,t,n,r),o},ro.updateContainerSync=function(e,t,n,r){return eo(t.current,2,e,t,n,r),2},ro},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})}(Bv)),Bv.exports}const jv=O((Wv||(Wv=1,Ov.exports=Fv()),Ov.exports));var Hv,Gv,Uv={exports:{}},qv={};var Xv=(Gv||(Gv=1,Uv.exports=(Hv||(Hv=1,qv.ConcurrentRoot=1,qv.ContinuousEventPriority=8,qv.DefaultEventPriority=32,qv.DiscreteEventPriority=2,qv.IdleEventPriority=268435456,qv.LegacyRoot=0,qv.NoEventPriority=0),qv)),Uv.exports);const Vv={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Yv=!1,Kv=!1;const Qv=".react-konva-event",Jv={};function Zv(e,t,n=Jv){if(!Yv&&"zIndex"in t&&(console.warn('ReactKonva: You are using "zIndex" attribute for a Konva node.\nreact-konva may get confused with ordering. Just define correct order of elements in your render function of a component.\nFor more info see: https://github.com/konvajs/react-konva/issues/194\n'),Yv=!0),!Kv&&t.draggable){var r=void 0!==t.x||void 0!==t.y,i=t.onDragEnd||t.onDragMove;r&&!i&&(console.warn("ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.\nPosition of a node will be changed during drag&drop, so you should update state of the react app as well.\nConsider to add onDragMove or onDragEnd events.\nFor more info see: https://github.com/konvajs/react-konva/issues/256\n"),Kv=!0)}for(var o in n)if(!Vv[o]){var a="on"===o.slice(0,2),s=n[o]!==t[o];if(a&&s)"content"===(f=o.substr(2).toLowerCase()).substr(0,7)&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),e.off(f,n[o]);!t.hasOwnProperty(o)&&e.setAttr(o,void 0)}var l=t._useStrictMode,c={},u=!1;const d={};for(var o in t)if(!Vv[o]){a="on"===o.slice(0,2);var h=n[o]!==t[o];if(a&&h)"content"===(f=o.substr(2).toLowerCase()).substr(0,7)&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),t[o]&&(d[f]=t[o]);!a&&(t[o]!==n[o]||l&&t[o]!==e.getAttr(o))&&(u=!0,c[o]=t[o])}for(var f in u&&(e.setAttrs(c),ex(e)),d)e.off(f+Qv),e.on(f+Qv,d[f])}function ex(e){if(!wm.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var tx=Y();const nx={},rx={};Cy.Node.prototype._applyProps=Zv;let ix=Xv.DefaultEventPriority;const ox=setTimeout,ax=clearTimeout;function sx(e,t,n){t._remove(),e.add(t),t.setZIndex(n.getZIndex()),ex(e)}const lx=o.createContext(null);const cx=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:lx,NotPendingTransition:null,afterActiveInstanceBlur:function(){},appendChild:function(e,t){t.parent===e?t.moveToTop():e.add(t),ex(e)},appendChildToContainer:function(e,t){t.parent===e?t.moveToTop():e.add(t),ex(e)},appendInitialChild:function(e,t){"string"!=typeof t?(e.add(t),ex(e)):console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`)},beforeActiveInstanceBlur:function(){},cancelTimeout:ax,clearContainer:function(e){},commitMount:function(e,t,n){},commitTextUpdate:function(e,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)},commitUpdate:function(e,t,n,r){Zv(e,r,n)},createInstance:function(e,t,n){let r=Cy[e];r||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=Cy.Group);const i={},o={};for(var a in t){if("ref"!==a)"on"===a.slice(0,2)?o[a]=t[a]:i[a]=t[a]}const s=new r(i);return Zv(s,o),s},createTextInstance:function(e,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)},detachDeletedInstance:function(){},finalizeInitialChildren:function(e,t,n){return!1},getChildHostContext:function(){return nx},getCurrentEventPriority:function(){return Xv.DefaultEventPriority},getCurrentUpdatePriority:function(){return ix},getInstanceFromNode:function(){return null},getInstanceFromScope:function(){return null},getPublicInstance:function(e){return e},getRootHostContext:function(){return nx},hideInstance:function(e){e.hide(),ex(e)},hideTextInstance:function(e){},idlePriority:tx.unstable_IdlePriority,insertBefore:sx,insertInContainerBefore:function(e,t,n){sx(e,t,n)},isPrimaryRenderer:!1,maySuspendCommit:function(){return!1},noTimeout:-1,now:tx.unstable_now,preloadInstance:function(){return!0},prepareForCommit:function(){return null},preparePortalMount:function(){return null},prepareScopeUpdate:function(){},prepareUpdate:function(e,t,n,r){return rx},removeChild:function(e,t){t.destroy(),t.off(Qv),ex(e)},removeChildFromContainer:function(e,t){t.destroy(),t.off(Qv),ex(e)},requestPostPaintCallback:function(){},resetAfterCommit:function(){},resetFormInstance:function(){},resetTextContent:function(e){},resolveEventTimeStamp:function(){return-1.1},resolveEventType:function(){return null},resolveUpdatePriority:function(){return Xv.DiscreteEventPriority},run:tx.unstable_runWithPriority,scheduleMicrotask:e=>{e()},scheduleTimeout:ox,setCurrentUpdatePriority:function(e){ix=e},shouldAttemptEagerTransition:function(){return!1},shouldDeprioritizeSubtree:function(e,t){return!1},shouldSetTextContent:function(e,t){return!1},startSuspendingCommit:function(){},supportsHydration:!1,supportsMicrotasks:!0,supportsMutation:!0,supportsPersistence:!1,suspendInstance:function(){},trackSchedulerEvent:function(){},unhideInstance:function(e,t){(null==t.visible||t.visible)&&e.show()},unhideTextInstance:function(e,t){},waitForCommitToBeReady:function(){return null},warnsIfNotActing:!1},Symbol.toStringTag,{value:"Module"}));function ux(e,t,n){if(!e)return;if(!0===n(e))return e;let r=e.child;for(;r;){const e=ux(r,t,n);if(e)return e;r=r.sibling}}function dx(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const hx=dx(i.createContext(null));class fx extends i.Component{render(){return i.createElement(hx.Provider,{value:this._reactInternals},this.props.children)}}const px=Symbol.for("react.context"),gx=e=>null!==e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===px;function mx(){const e=function(){const e=i.useContext(hx);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=i.useId();return i.useMemo(()=>{for(const n of[e,null==e?void 0:e.alternate]){if(!n)continue;const e=ux(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}(),[t]=i.useState(()=>new Map);t.clear();let n=e;for(;n;){const e=n.type;gx(e)&&e!==hx&&!t.has(e)&&t.set(e,i.use(dx(e))),n=n.return}return t}if(-1===o.version.indexOf("19"))throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");const bx=e=>{const t=o.useRef(null),n=o.useRef(null),r=o.useRef(null),a=function(e){const t=o.useRef({});return o.useLayoutEffect(()=>{t.current=e}),o.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}(e),s=function(){const e=mx();return i.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>i.createElement(t,null,i.createElement(n.Provider,{...r,value:e.get(n)})),e=>i.createElement(fx,{...e})),[e])}(),l=o.useRef(null),c=t=>{const{forwardedRef:n}=e;n&&("function"==typeof n?n(t):n.current=t)},u=(()=>{const e=o.useRef(0);return o.useMemo(()=>{e.current++},[]),e.current>1})(),d=()=>{c(null),Cx.updateContainer(null,r.current,null),n.current?.destroy(),n.current=null};return o.useLayoutEffect(()=>(l.current&&(clearTimeout(l.current),l.current=null),n.current?c(n.current):(n.current=new Cy.Stage({width:e.width,height:e.height,container:t.current}),c(n.current),r.current=Cx.createContainer(n.current,Xv.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Cx.updateContainer(o.createElement(s,{},e.children),r.current,null,()=>{})),()=>{u?l.current=setTimeout(d,0):d()}),[]),o.useLayoutEffect(()=>{c(n.current),Zv(n.current,e,a),Cx.updateContainer(o.createElement(s,{},e.children),r.current,null)}),o.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},yx="Layer",vx="Rect",xx="Circle",Sx="Line",wx="RegularPolygon",Cx=jv(cx),kx=o.forwardRef((e,t)=>o.createElement(fx,{},o.createElement(bx,{...e,forwardedRef:t}))),_x=(e,t,n,r)=>Th.calculateCurvePoints(e,t,n,r),Ex=e=>{const t=Oe.c(21),{lines:n,currentShape:r,isDrawing:i,isMultiPointDrawing:o,vanishingPoint:a,showVanishingLines:s,onVanishingPointClick:l,onVanishingPointDblClick:c}=e,u=void 0!==o&&o,d=window.innerWidth,h=window.innerHeight;let f,p,g,m,b,y;return t[0]!==s||t[1]!==a?(f=s&&a&&((e,t,n)=>{if(!e)return null;const r=((e,t,n)=>{const r=[],i=t/20,o=n/20;for(let a=0;a<=20;a++){const n=a*o;r.push({start:{x:0,y:n},end:e}),r.push({start:{x:t,y:n},end:e})}for(let a=0;a<=20;a++){const t=a*i;r.push({start:{x:t,y:0},end:e}),r.push({start:{x:t,y:n},end:e})}return r})(e,t,n);return r.map((e,t)=>D(Sx,{points:[e.start.x,e.start.y,e.end.x,e.end.y],stroke:"#888888",strokeWidth:.8,opacity:.6,dash:[8,8],lineCap:"round"},`vanishing-line-${t}`))})(a,d,h),t[0]=s,t[1]=a,t[2]=f):f=t[2],t[3]!==n?(p=n.map(Px),t[3]=n,t[4]=p):p=t[4],t[5]!==r||t[6]!==i?(g=i&&r&&(e=>{if(!e)return null;const{type:t,start:n,end:r,color:i,width:o=3}=e;switch(t){case"line":return D(Sx,{points:[n.x,n.y,r.x,r.y],stroke:i||"#000000",strokeWidth:o,lineCap:"round",lineJoin:"round",dash:[10,5]});case"curve":{const e=_x(n.x,n.y,r.x,r.y);return D(Sx,{points:e,stroke:i||"#000000",strokeWidth:o,tension:0,lineCap:"round",lineJoin:"round",dash:[10,5]})}case"rectangle":return D(vx,{x:Math.min(n.x,r.x),y:Math.min(n.y,r.y),width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y),stroke:i||"#000000",strokeWidth:o,fill:"transparent",dash:[10,5]});case"circle":{const e=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2));return D(xx,{x:n.x,y:n.y,radius:e,stroke:i||"#000000",strokeWidth:o,fill:"transparent",dash:[10,5]})}case"triangle":{const e=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2));return D(wx,{x:n.x,y:n.y,sides:3,radius:e,stroke:i||"#000000",strokeWidth:o,fill:"transparent",dash:[10,5]})}case"custom":{const e=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2));return D(wx,{x:n.x,y:n.y,sides:5,radius:e,stroke:i||"#000000",strokeWidth:o,fill:"transparent",dash:[10,5]})}default:return null}})(r),t[5]=r,t[6]=i,t[7]=g):g=t[7],t[8]!==r||t[9]!==u?(m=u&&r&&"multiLine"===r.type&&D(Sx,{points:r.points,stroke:r.color||"#000000",strokeWidth:r.width||5,tension:0,lineCap:"round",lineJoin:"round",dash:[10,5]}),t[8]=r,t[9]=u,t[10]=m):m=t[10],t[11]!==l||t[12]!==c||t[13]!==a?(b=((e,t,n)=>e?D(xx,{x:e.x,y:e.y,radius:8,fill:"#ff0000",stroke:"#ffffff",strokeWidth:2,shadowBlur:5,shadowColor:"#000000",shadowOpacity:.5,shadowOffset:{x:0,y:0},onClick:n=>{n.cancelBubble=!0,t(e)},onDblClick:e=>{e.cancelBubble=!0,n()},onMouseEnter:e=>{e.target.scale({x:1.2,y:1.2}),e.target.getLayer().batchDraw()},onMouseLeave:e=>{e.target.scale({x:1,y:1}),e.target.getLayer().batchDraw()},cursor:"pointer"},"vanishing-point"):null)(a,l,c),t[11]=l,t[12]=c,t[13]=a,t[14]=b):b=t[14],t[15]!==f||t[16]!==p||t[17]!==g||t[18]!==m||t[19]!==b?(y=W(V,{children:[f,p,g,m,b]}),t[15]=f,t[16]=p,t[17]=g,t[18]=m,t[19]=b,t[20]=y):y=t[20],y};function Px(e,t){return((e,t)=>{const{start:n,end:r,shapeType:i,color:o,width:a=3}=e;if("shape"!==e.tool&&!e.shapeType)return D(Sx,{points:e.points,stroke:o,strokeWidth:a,tension:0,lineCap:"round",lineJoin:"round",globalCompositeOperation:"eraser"===e.tool?"destination-out":"source-over",opacity:"pen"===e.tool&&e.flow||1},t);if(console.log(n,r,i,o,a),!("multiLine"===i||n&&r))return null;switch(i){case"line":return D(Sx,{points:[n.x,n.y,r.x,r.y],stroke:o,strokeWidth:a,lineCap:"round",lineJoin:"round"},t);case"curve":{const i=_x(n.x,n.y,r.x,r.y);return D(Sx,{points:i,stroke:e.color,strokeWidth:a,tension:0,lineCap:"round",lineJoin:"round"},t)}case"rectangle":return D(vx,{x:Math.min(n.x,r.x),y:Math.min(n.y,r.y),width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y),stroke:o,strokeWidth:a,fill:"transparent"},t);case"circle":{const e=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2));return D(xx,{x:n.x,y:n.y,radius:e,stroke:o,strokeWidth:a,fill:"transparent"},t)}case"triangle":{const e=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2));return D(wx,{x:n.x,y:n.y,sides:3,radius:e,stroke:o,strokeWidth:a,fill:"transparent"},t)}case"custom":{const e=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2));return D(wx,{x:n.x,y:n.y,sides:5,radius:e,stroke:o,strokeWidth:a,fill:"transparent"},t)}case"multiLine":return D(Sx,{points:e.points,stroke:o,strokeWidth:a,tension:0,lineCap:"round",lineJoin:"round"},t);default:return null}})(e,t)}const $x=()=>{if(!document.querySelector(".tracky-mouse-pointer")){const e=document.createElement("div");return e.className="tracky-mouse-pointer",document.body.appendChild(e),e}return document.querySelector(".tracky-mouse-pointer")},Mx=(e,t=6)=>{const n=Math.max(1,e);return Math.round(t+1.5*n)},Nx=(e,t)=>{const n=Oe.c(4),r=void 0===t?10:t;let o,a;n[0]!==r||n[1]!==e?(o=()=>{(()=>{if(document.getElementById("tracky-mouse-custom-styles"))return;const e=document.createElement("style");e.id="tracky-mouse-custom-styles",e.textContent="\n    /*  tracky-mouse  */\n    \n    /*  */\n    .tracky-mouse-pointer {\n      position: fixed;\n      left: 0;\n      top: 0;\n      z-index: 900000;\n      pointer-events: none;\n      transform: translate(-50%, -50%);\n    }\n    \n    /*  */\n    .tracky-mouse-default-pointer {\n      background-color: red;\n      border-radius: 50%;\n    }\n    \n    /*  -  +  */\n    .tracky-mouse-pen-pointer {\n      background-color: transparent;\n      border: 2px solid #888888;\n      border-radius: 50%;\n      border-width: 3px;\n    }\n    \n    /*  - 45 */\n    .tracky-mouse-pen-pointer::after {\n      content: '';\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(30%, -90%) rotate(135deg);\n      width: 14px;\n      height: 28px;\n      background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 32' fill='none' stroke='%23333333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M0 16 L12 16'/%3E%3Cpath d='M0 12 L12 12'/%3E%3Cpath d='M0 20 L12 20'/%3E%3Cpath d='M12 8 L14 16 L12 24'/%3E%3Cpath d='M14 16 L16 16'/%3E%3C/svg%3E\");\n      background-size: contain;\n      background-repeat: no-repeat;\n      background-position: center;\n      pointer-events: none;\n    }\n    \n    /*  */\n    .tracky-mouse-eraser-pointer {\n      background-color: #ffffff;\n      border: 2px solid #000000;\n      border-radius: 0;\n    }\n    \n    /*  -  */\n    .tracky-mouse-shape-pointer {\n      background-color: transparent;\n      border: 2px solid #0000ff;\n      border-radius: 50%;\n    }\n  ",document.head.appendChild(e)})(),window.TrackyMouse&&(window.TrackyMouse.dependenciesRoot="/node_modules/tracky-mouse",window.TrackyMouse.loadDependencies&&window.TrackyMouse.loadDependencies().then(()=>{window.TrackyMouse.init&&window.TrackyMouse.init()}).catch(e=>{console.error("Failed to initialize TrackyMouse:",e)})),$x(),((e,t=10)=>{const n=$x();let r;switch(n.className="tracky-mouse-pointer",n.classList.add((e=>{switch(e){case"pen":return"tracky-mouse-pen-pointer";case"eraser":return"tracky-mouse-eraser-pointer";case"shape":return"tracky-mouse-shape-pointer";default:return"tracky-mouse-default-pointer"}})(e)),e){case"pen":case"eraser":r=Math.max(16,Mx(t,5)),n.style.width=`${r}px`,n.style.height=`${r}px`;break;case"shape":r=Math.max(12,Mx(t,5)),n.style.width=`${r}px`,n.style.height=`${r}px`;break;default:r=Math.max(8,Mx(t)),n.style.width=`${r}px`,n.style.height=`${r}px`}})(e,r);const t=(()=>{const e=$x(),t=t=>{e.style.left=`${t.clientX}px`,e.style.top=`${t.clientY}px`};return document.addEventListener("mousemove",t),()=>{document.removeEventListener("mousemove",t)}})();return()=>{t();const e=document.querySelector(".tracky-mouse-pointer");e&&e.parentNode&&e.parentNode.removeChild(e)}},a=[e,r],n[0]=r,n[1]=e,n[2]=o,n[3]=a):(o=n[2],a=n[3]),i.useEffect(o,a)},Ax=({tool:e,color:t,shapeType:n,scale:r,lines:a,currentShape:s,setCurrentShape:l,addLine:c,updateLastLine:u,vanishingPoint:d,setVanishingPoint:h,clearVanishingPoint:f,showVanishingLines:p,brushFlow:g,brushSmoothness:m,brushWidth:b,isMultiPointDrawing:y,multiPointShape:v,startMultiPointDrawing:x,addPointToMultiPointDrawing:S,finishMultiPointDrawing:w,cancelMultiPointDrawing:C})=>{const k=i.useRef(null),_=i.useRef(!1),E=i.useRef(null);Nx(e,b);const P=r=>{if(0!==r.evt.button)return;_.current=!0;const i=r?.target?.getStage()?.getPointerPosition();"pen"===e?c({tool:e,points:[i.x,i.y],color:t,flow:g,smoothness:m,width:b}):"eraser"===e?c({tool:"eraser",points:[i.x,i.y],color:t,width:b}):"vanishingPoint"===e?h(i):"shape"===e&&"multiLine"===n?y?S(i):(x(n,i,t),l({type:n,points:[i.x,i.y],color:t})):(E.current=i,l({type:n,start:i,end:i,color:t}))},$=r=>{const i=r.target.getStage().getPointerPosition();if("pen"===e&&_.current){let e=a[a.length-1];if(e){const t=[...e.points,i.x,i.y];u(t)}}else if("eraser"===e&&_.current){let e=a[a.length-1];if(e){const t=[...e.points,i.x,i.y];u(t)}}else"shape"===e&&"multiLine"===n&&y?l(e=>{if(!e||!e.points)return e;const t=[...v.points];return{...e,points:[...t,i.x,i.y],color:e.color}}):_.current&&l(e=>({...e,end:i,color:t}))},M=()=>{_.current&&("multiLine"!==n&&"pen"!==e&&"eraser"!==e&&s&&c({tool:"shape",shapeType:n,...s,color:t}),_.current=!1,E.current=null)},N=()=>{"shape"===e&&"multiLine"===n&&y&&(w(),l(null))};o.useEffect(()=>{const e=e=>{"Escape"===e.key&&"multiLine"===n&&y&&(C(),l(null))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[n,y,C]),o.useEffect(()=>{y&&v&&l(e=>({...e,type:v.type,points:[...v.points],color:v.color}))},[v,y]);const A=e=>{},T=()=>{f()};return W(kx,{ref:k,width:window.innerWidth,height:window.innerHeight,scale:{x:r,y:r},onMouseDown:P,onMousemove:$,onMouseup:M,onDblClick:N,onTouchStart:P,onTouchMove:$,onTouchEnd:M,onTap:N,pixelRatio:1,style:{cursor:"none"},children:[D(yx,{children:D(Ex,{lines:[],currentShape:null,isDrawing:!1,isMultiPointDrawing:y,vanishingPoint:d,showVanishingLines:p,onVanishingPointClick:A,onVanishingPointDblClick:T})}),D(yx,{children:D(Ex,{lines:a,currentShape:s,isDrawing:_.current,isMultiPointDrawing:y,vanishingPoint:null,showVanishingLines:!1,onVanishingPointClick:A,onVanishingPointDblClick:T})})]})},Tx=e=>{const t=Oe.c(13),{visible:n,onSelect:r,onClose:i}=e;let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=[{key:"1",type:"line",label:"",icon:""},{key:"2",type:"curve",label:"",icon:""},{key:"3",type:"triangle",label:"",icon:""},{key:"4",type:"rectangle",label:"",icon:""},{key:"5",type:"circle",label:"",icon:""},{key:"6",type:"custom",label:"",icon:""},{key:"7",type:"multiLine",label:"",icon:""}],t[0]=o):o=t[0];const a=o;if(!n)return null;let s,l,c,u,d,h,f;return t[1]===Symbol.for("react.memo_cache_sentinel")?(s={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",padding:"16px",zIndex:1e3,minWidth:"280px"},l={position:"absolute",top:"8px",right:"8px",width:"24px",height:"24px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",color:"#666"},t[1]=s,t[2]=l):(s=t[1],l=t[2]),t[3]!==i?(c=D("div",{style:l,onClick:i,children:""}),t[3]=i,t[4]=c):c=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(u=D("div",{style:{marginBottom:"12px",fontSize:"14px",fontWeight:"bold",textAlign:"center"},children:""}),d={display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"},t[5]=u,t[6]=d):(u=t[5],d=t[6]),t[7]!==i||t[8]!==r?(h=D("div",{style:d,children:a.map(e=>W("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"12px 8px",border:"1px solid #d9d9d9",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:"#fff",minHeight:"60px"},onClick:()=>{r({key:e.key}),i()},onMouseEnter:Rx,onMouseLeave:Ix,children:[D("div",{style:{fontSize:"24px",marginBottom:"4px",color:"#333",lineHeight:1},children:e.icon}),D("div",{style:{fontSize:"11px",color:"#666",textAlign:"center"},children:e.label})]},e.key))}),t[7]=i,t[8]=r,t[9]=h):h=t[9],t[10]!==c||t[11]!==h?(f=W("div",{style:s,children:[c,u,h]}),t[10]=c,t[11]=h,t[12]=f):f=t[12],f};function Rx(e){e.currentTarget.style.backgroundColor="#f0f0f0",e.currentTarget.style.borderColor="#1890ff"}function Ix(e){e.currentTarget.style.backgroundColor="#fff",e.currentTarget.style.borderColor="#d9d9d9"}const Dx=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Lx=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),zx=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var Wx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ox=i.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:s,...l},c)=>i.createElement("svg",{ref:c,...Wx,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:Lx("lucide",o),...!a&&!zx(l)&&{"aria-hidden":"true"},...l},[...s.map(([e,t])=>i.createElement(e,t)),...Array.isArray(a)?a:[a]])),Bx=(e,t)=>{const n=i.forwardRef(({className:n,...r},o)=>{return i.createElement(Ox,{ref:o,iconNode:t,className:Lx(`lucide-${a=Dx(e),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var a});return n.displayName=Dx(e),n},Fx=Bx("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),jx=Bx("highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);var Hx=function(){return Hx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Hx.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var Gx=function(e){return"function"==typeof e};function Ux(e,t){if(e===t)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0}function qx(e){var t=i.useRef(e);return t.current=e,t}var Xx=!("undefined"==typeof window||!window.document||!window.document.createElement);function Vx(e,t){if(Xx)return e?Gx(e)?e():"current"in e?e.current:e:t}var Yx,Kx=(Yx=i.useEffect,function(e,t,n){var r,o=i.useRef(!1),a=i.useRef([]),s=i.useRef([]),l=i.useRef(void 0);Yx(function(){var r,i=(Array.isArray(n)?n:[n]).map(function(e){return Vx(e)});if(!o.current)return o.current=!0,a.current=i,s.current=t,void(l.current=e());i.length===a.current.length&&Ux(a.current,i)&&Ux(s.current,t)||(null===(r=l.current)||void 0===r||r.call(l),a.current=i,s.current=t,l.current=e())}),r=qx(function(){var e;null===(e=l.current)||void 0===e||e.call(l),o.current=!1}),i.useEffect(function(){return function(){r.current()}},[])});function Qx(e,t,n){var r={},o=r.delay,a=void 0===o?300:o,s=r.moveThreshold,l=r.onClick,c=r.onLongPressEnd,u=qx(e),d=qx(l),h=qx(c),f=i.useRef(void 0),p=i.useRef(!1),g=i.useRef({x:0,y:0}),m=i.useRef(!1),b=i.useRef(!1),y=!!((null==s?void 0:s.x)&&s.x>0||(null==s?void 0:s.y)&&s.y>0);Kx(function(){var e=Vx(t);if(null==e?void 0:e.addEventListener){var n=function(e){f.current=setTimeout(function(){u.current(e),p.current=!0},a)},r=function(e){if(!b.current){if(b.current=!0,y){var t=x(e),r=t.clientX,i=t.clientY;g.current.x=r,g.current.y=i}n(e)}},i=function(e){var t;(null===(t=null==e?void 0:e.sourceCapabilities)||void 0===t?void 0:t.firesTouchEvents)||(m.current=!0,y&&(g.current.x=e.clientX,g.current.y=e.clientY),n(e))},o=function(e){f.current&&function(e){var t=x(e),n=t.clientX,r=t.clientY,i=Math.abs(n-g.current.x),o=Math.abs(r-g.current.y);return!!((null==s?void 0:s.x)&&i>s.x||(null==s?void 0:s.y)&&o>s.y)}(e)&&(clearTimeout(f.current),f.current=void 0)},l=function(e){var t;b.current&&(b.current=!1,f.current&&(clearTimeout(f.current),f.current=void 0),p.current?null===(t=h.current)||void 0===t||t.call(h,e):d.current&&d.current(e),p.current=!1)},c=function(e){var t,n;(null===(t=null==e?void 0:e.sourceCapabilities)||void 0===t?void 0:t.firesTouchEvents)||m.current&&(m.current=!1,f.current&&(clearTimeout(f.current),f.current=void 0),p.current?null===(n=h.current)||void 0===n||n.call(h,e):d.current&&d.current(e),p.current=!1)},v=function(e){var t;m.current&&(m.current=!1,f.current&&(clearTimeout(f.current),f.current=void 0),p.current&&(null===(t=h.current)||void 0===t||t.call(h,e),p.current=!1))};return e.addEventListener("mousedown",i),e.addEventListener("mouseup",c),e.addEventListener("mouseleave",v),e.addEventListener("touchstart",r),e.addEventListener("touchend",l),y&&(e.addEventListener("mousemove",o),e.addEventListener("touchmove",o)),function(){f.current&&(clearTimeout(f.current),p.current=!1),e.removeEventListener("mousedown",i),e.removeEventListener("mouseup",c),e.removeEventListener("mouseleave",v),e.removeEventListener("touchstart",r),e.removeEventListener("touchend",l),y&&(e.removeEventListener("mousemove",o),e.removeEventListener("touchmove",o))}}function x(e){return"TouchEvent"in window&&e instanceof TouchEvent?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:e instanceof MouseEvent?{clientX:e.clientX,clientY:e.clientY}:{clientX:0,clientY:0}}},[],t)}var Jx=function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(i.useState(e),2),n=t[0],r=t[1],o=function(e){var t=i.useRef(e);t.current=i.useMemo(function(){return e},[e]);var n=i.useRef(void 0);return n.current||(n.current=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.current.apply(this,e)}),n.current}(function(e){r(function(t){var n=Gx(e)?e(t):e;return n?Hx(Hx({},t),n):t})});return[n,o]};const{Group:Zx}=On,{Text:eS}=pt,tS=e=>{const t=Oe.c(65),{brushType:n,brushPreset:r,brushFlow:i,brushSmoothness:a,brushWidth:s,pencilPresets:l,setBrushPreset:c,setBrushType:u,setBrushFlow:d,setBrushSmoothness:h,setBrushWidth:f,setTool:p,setShapeType:g}=e,[m,b]=o.useState("Marco");let y,v,x,S,w,C,k,_,E,P,$,M,N,A,T,R,I,L,z,O,B,F,j,H,G,U;Qx(nS,o.useRef(null)),t[0]===Symbol.for("react.memo_cache_sentinel")?(y=D(eS,{strong:!0,className:"text-xs block mb-1",children:""}),t[0]=y):y=t[0],t[1]!==u?(v=e=>u(e.target.value),t[1]=u,t[2]=v):v=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(x=D(On.Button,{value:"pencil",children:""}),S=D(On.Button,{value:"brush",children:""}),t[3]=x,t[4]=S):(x=t[3],S=t[4]),t[5]!==n||t[6]!==v?(w=W("div",{className:"mb-3",children:[y,W(Zx,{value:n,onChange:v,buttonStyle:"solid",size:"small",children:[x,S]})]}),t[5]=n,t[6]=v,t[7]=w):w=t[7],t[8]!==r||t[9]!==n||t[10]!==m||t[11]!==l||t[12]!==c?(C="pencil"===n&&W("div",{className:"mb-3",children:[D(eS,{strong:!0,className:"text-xs block mb-1",children:""}),W("div",{className:"mb-3",children:[D(eS,{className:"text-xs text-gray-600 block mb-1",children:"HB-8B"}),D(Nt,{gutter:[6,6],children:Object.keys(l).filter(rS).map(e=>D(Mt,{xs:3,sm:3,md:3,lg:3,children:W("div",{onClick:()=>c(e),title:l[e].description,className:"cursor-pointer p-1 rounded border transition-all duration-200 "+(r===e?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-300 hover:border-blue-300 hover:bg-gray-50"),children:[D("div",{className:"text-xs font-bold mb-0.5",children:l[e].name}),D("div",{className:"w-4 h-4 rounded mx-auto",style:{backgroundColor:l[e].color}})]})},e))})]}),W("div",{className:"mt-3",children:[W("div",{className:"flex justify-between items-center mb-2",children:[D(eS,{className:"text-xs text-gray-600 block",children:""}),W(Zx,{value:m,onChange:e=>b(e.target.value),size:"small",children:[D(On.Button,{value:"Marco",children:"24"}),D(On.Button,{value:"Prismacolor",children:""})]})]}),D("div",{className:"grid grid-cols-6 gap-2",children:Object.keys(l).filter(e=>!/^(HB|2B|3B|4B|5B|6B|7B|8B)$/.test(e)&&("Marco"===m?e.startsWith("Marco"):e.startsWith("Prismacolor"))).map(e=>W("div",{onClick:()=>c(e),title:l[e].description,className:"cursor-pointer p-1 rounded border transition-all duration-200 h-[60px] flex flex-col items-center justify-center "+(r===e?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-300 hover:border-blue-300 hover:bg-gray-50"),children:[D("div",{className:"text-xs font-bold mb-0.5 text-center",children:l[e].name}),D("div",{className:"w-4 h-4 rounded",style:{backgroundColor:l[e].color}})]},e))})]})]}),t[8]=r,t[9]=n,t[10]=m,t[11]=l,t[12]=c,t[13]=C):C=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(k=D(eS,{strong:!0,className:"text-xs",children:""}),t[14]=k):k=t[14],t[15]!==i?(_=Math.round(100*i),t[15]=i,t[16]=_):_=t[16],t[17]!==_?(E=W("div",{className:"flex justify-between mb-0.5",children:[k,W(eS,{className:"text-xs",children:[_,"%"]})]}),t[17]=_,t[18]=E):E=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(P={formatter:iS},t[19]=P):P=t[19],t[20]!==i||t[21]!==d?($=D(la,{min:.1,max:1,step:.1,value:i,onChange:d,size:"small",tooltip:P}),t[20]=i,t[21]=d,t[22]=$):$=t[22],t[23]!==$||t[24]!==E?(M=W("div",{children:[E,$]}),t[23]=$,t[24]=E,t[25]=M):M=t[25],t[26]===Symbol.for("react.memo_cache_sentinel")?(N=D(eS,{strong:!0,className:"text-xs",children:""}),t[26]=N):N=t[26],t[27]!==a?(A=Math.round(100*a),t[27]=a,t[28]=A):A=t[28],t[29]!==A?(T=W("div",{className:"flex justify-between mb-0.5",children:[N,W(eS,{className:"text-xs",children:[A,"%"]})]}),t[29]=A,t[30]=T):T=t[30],t[31]===Symbol.for("react.memo_cache_sentinel")?(R={formatter:oS},t[31]=R):R=t[31],t[32]!==a||t[33]!==h?(I=D(la,{min:0,max:1,step:.1,value:a,onChange:h,size:"small",tooltip:R}),t[32]=a,t[33]=h,t[34]=I):I=t[34],t[35]!==T||t[36]!==I?(L=W("div",{children:[T,I]}),t[35]=T,t[36]=I,t[37]=L):L=t[37],t[38]===Symbol.for("react.memo_cache_sentinel")?(z=D(eS,{strong:!0,className:"text-xs",children:""}),t[38]=z):z=t[38],t[39]!==s?(O=s.toFixed(1),t[39]=s,t[40]=O):O=t[40],t[41]!==O?(B=W("div",{className:"flex justify-between mb-0.5",children:[z,D(eS,{className:"text-xs",children:O})]}),t[41]=O,t[42]=B):B=t[42],t[43]===Symbol.for("react.memo_cache_sentinel")?(F={formatter:aS},t[43]=F):F=t[43],t[44]!==s||t[45]!==f?(j=D(la,{min:1,max:20,step:1,value:s,onChange:f,size:"small",tooltip:F}),t[44]=s,t[45]=f,t[46]=j):j=t[46],t[47]!==B||t[48]!==j?(H=W("div",{children:[B,j]}),t[47]=B,t[48]=j,t[49]=H):H=t[49],t[50]!==M||t[51]!==L||t[52]!==H?(G=W("div",{className:"grid grid-cols-3 gap-3",children:[M,L,H]}),t[50]=M,t[51]=L,t[52]=H,t[53]=G):G=t[53],t[54]!==G||t[55]!==w||t[56]!==C?(U=W("div",{className:"p-2 w-[480px] max-h-[240px] overflow-y-auto",children:[w,C,G]}),t[54]=G,t[55]=w,t[56]=C,t[57]=U):U=t[57];const q=U;let X,V,Y;return t[58]===Symbol.for("react.memo_cache_sentinel")?(X=D(jx,{}),t[58]=X):X=t[58],t[59]!==g||t[60]!==p?(V=D(Ka,{icon:X,onClick:()=>{p("pen"),g("line")}}),t[59]=g,t[60]=p,t[61]=V):V=t[61],t[62]!==q||t[63]!==V?(Y=D(st,{content:q,title:"",trigger:"hover",placement:"top",children:V}),t[62]=q,t[63]=V,t[64]=Y):Y=t[64],Y};function nS(){}function rS(e){return/^(HB|2B|3B|4B|5B|6B|7B|8B)$/.test(e)}function iS(e){return`${Math.round(100*e)}%`}function oS(e){return`${Math.round(100*e)}%`}function aS(e){return`${e.toFixed(1)}`}const sS=e=>{const t=Oe.c(54),{color:n,shapeType:r,brushType:i,brushPreset:o,brushFlow:a,brushSmoothness:s,brushWidth:l,pencilPresets:c,isAuthenticated:u,setTool:d,setColor:h,setShapeType:f,setBrushType:p,setBrushPreset:g,setBrushFlow:m,setBrushSmoothness:b,setBrushWidth:y,setShowShapeSelector:v,setShowChat:x,getShapeIcon:S}=e,w=I(),C=K();let k;t[0]!==S||t[1]!==r?(k=()=>{if(S)return S();return{line:"",curve:"",triangle:"",rectangle:"",circle:"",custom:""}[r]||""},t[0]=S,t[1]=r,t[2]=k):k=t[2];const _=k;let E,P,$,M,N,A,T,R,L,z,O,B,F,j,H,G;return t[3]===Symbol.for("react.memo_cache_sentinel")?(E={position:"absolute",insetInlineEnd:24,insetBlockEnd:24},t[3]=E):E=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(P=D(Fx,{size:20}),t[4]=P):P=t[4],t[5]!==f||t[6]!==d?($=D(Ka,{icon:P,onClick:()=>{d("eraser"),f("line")}}),t[5]=f,t[6]=d,t[7]=$):$=t[7],t[8]!==a||t[9]!==o||t[10]!==s||t[11]!==i||t[12]!==l||t[13]!==c||t[14]!==m||t[15]!==g||t[16]!==b||t[17]!==p||t[18]!==y||t[19]!==f||t[20]!==d?(M=D(tS,{brushType:i,brushPreset:o,brushFlow:a,brushSmoothness:s,brushWidth:l,pencilPresets:c,setBrushType:p,setBrushPreset:g,setBrushFlow:m,setBrushSmoothness:b,setBrushWidth:y,setTool:d,setShapeType:f}),t[8]=a,t[9]=o,t[10]=s,t[11]=i,t[12]=l,t[13]=c,t[14]=m,t[15]=g,t[16]=b,t[17]=p,t[18]=y,t[19]=f,t[20]=d,t[21]=M):M=t[21],t[22]===Symbol.for("react.memo_cache_sentinel")?(N=D(Ke,{}),t[22]=N):N=t[22],t[23]!==f||t[24]!==d?(A=D(Ka,{icon:N,onClick:()=>{d("vanishingPoint"),f("")}}),t[23]=f,t[24]=d,t[25]=A):A=t[25],t[26]===Symbol.for("react.memo_cache_sentinel")?(T=D(_i,{}),t[26]=T):T=t[26],t[27]!==u||t[28]!==C||t[29]!==w||t[30]!==x?(R=D(Ka,{icon:T,onClick:()=>{u?x(!0):Ft.confirm({title:"",centered:!0,content:"",okText:"",cancelText:"",onOk:()=>{w(`/login?redirectTo=${encodeURIComponent(C.pathname)}`)}})}}),t[27]=u,t[28]=C,t[29]=w,t[30]=x,t[31]=R):R=t[31],t[32]!==h?(L=e=>h(e.toHexString()),t[32]=h,t[33]=L):L=t[33],t[34]!==n||t[35]!==L?(z=D(Ka,{content:D(Na,{value:n,destroyOnHidden:!0,allowClear:!0,onChangeComplete:L})}),t[34]=n,t[35]=L,t[36]=z):z=t[36],t[37]===Symbol.for("react.memo_cache_sentinel")?(O={fontSize:"16px",lineHeight:1},t[37]=O):O=t[37],t[38]!==_?(B=_(),t[38]=_,t[39]=B):B=t[39],t[40]!==B?(F=D("span",{style:O,children:B}),t[40]=B,t[41]=F):F=t[41],t[42]!==v?(j=()=>v(!0),t[42]=v,t[43]=j):j=t[43],t[44]!==F||t[45]!==j?(H=D(Ka,{icon:F,variant:"text",onClick:j}),t[44]=F,t[45]=j,t[46]=H):H=t[46],t[47]!==z||t[48]!==H||t[49]!==$||t[50]!==M||t[51]!==A||t[52]!==R?(G=W(Ka.Group,{shape:"square",style:E,children:[$,M,A,R,z,H]}),t[47]=z,t[48]=H,t[49]=$,t[50]=M,t[51]=A,t[52]=R,t[53]=G):G=t[53],G};const lS=()=>{const e=Oe.c(77),{tool:t,scale:n,color:r,lines:o,shapeType:a,brushFlow:s,brushSmoothness:l,brushWidth:c,brushType:u,brushPreset:d,pencilPresets:h,vanishingPoint:f,showVanishingLines:p,isMultiPointDrawing:g,multiPointShape:m,setTool:b,setColor:y,addLine:v,updateLastLine:x,setShapeType:S,setBrushFlow:w,setBrushSmoothness:C,setBrushWidth:k,setBrushType:_,setBrushPreset:E,setVanishingPoint:P,clearVanishingPoint:$,startMultiPointDrawing:M,addPointToMultiPointDrawing:N,finishMultiPointDrawing:A,cancelMultiPointDrawing:T}=hm(),{isAuthenticated:R}=Q();let I;e[0]===Symbol.for("react.memo_cache_sentinel")?(I={showChat:!1,showShapeSelector:!1},e[0]=I):I=e[0];const[L,z]=function(e){const t=Oe.c(7),[n,r]=Jx(e),o=i.useRef(n);let a,s,l;t[0]!==n?(a=()=>{o.current=n},s=[n],t[0]=n,t[1]=a,t[2]=s):(a=t[1],s=t[2]),i.useEffect(a,s),t[3]===Symbol.for("react.memo_cache_sentinel")?(l=()=>o.current,t[3]=l):l=t[3];const c=l;let u;return t[4]!==r||t[5]!==n?(u=[n,r,o,c],t[4]=r,t[5]=n,t[6]=u):u=t[6],u}(I),[O,B]=i.useState(null),{showChat:F,showShapeSelector:j}=L;let H,G;e[1]===Symbol.for("react.memo_cache_sentinel")?(H=[],e[1]=H):H=e[1],i.useEffect(cS,H),e[2]!==S||e[3]!==b?(G=e=>{const{key:t}=e;S({1:"line",2:"curve",3:"triangle",4:"rectangle",5:"circle",6:"custom",7:"multiLine"}[t]||"line"),b("shape")},e[2]=S,e[3]=b,e[4]=G):G=e[4];const U=G;let q;e[5]!==a?(q=()=>({line:"",curve:"",triangle:"",rectangle:"",circle:"",custom:"",multiLine:""}[a]||D(vm,{type:"icon-canvasshape"})),e[5]=a,e[6]=q):q=e[6];const X=q;let V,Y,K,J,Z,ee,te,ne,re,ie,oe;return e[7]!==r||e[8]!==n||e[9]!==a||e[10]!==t?(V=D(ym,{tool:t,shape:a,color:r,scale:n}),e[7]=r,e[8]=n,e[9]=a,e[10]=t,e[11]=V):V=e[11],e[12]!==z?(Y=e=>z({showShapeSelector:e}),K=e=>z({showChat:e}),e[12]=z,e[13]=Y,e[14]=K):(Y=e[13],K=e[14]),e[15]!==s||e[16]!==d||e[17]!==l||e[18]!==u||e[19]!==c||e[20]!==r||e[21]!==X||e[22]!==R||e[23]!==h||e[24]!==w||e[25]!==E||e[26]!==C||e[27]!==_||e[28]!==k||e[29]!==y||e[30]!==S||e[31]!==b||e[32]!==a||e[33]!==Y||e[34]!==K||e[35]!==t?(J=D(sS,{tool:t,color:r,shapeType:a,brushType:u,brushPreset:d,brushFlow:s,brushSmoothness:l,brushWidth:c,pencilPresets:h,isAuthenticated:R,setTool:b,setColor:y,setShapeType:S,setBrushType:_,setBrushPreset:E,setBrushFlow:w,setBrushSmoothness:C,setBrushWidth:k,setShowShapeSelector:Y,setShowChat:K,getShapeIcon:X}),e[15]=s,e[16]=d,e[17]=l,e[18]=u,e[19]=c,e[20]=r,e[21]=X,e[22]=R,e[23]=h,e[24]=w,e[25]=E,e[26]=C,e[27]=_,e[28]=k,e[29]=y,e[30]=S,e[31]=b,e[32]=a,e[33]=Y,e[34]=K,e[35]=t,e[36]=J):J=e[36],e[37]===Symbol.for("react.memo_cache_sentinel")?(Z=D(Ih,{}),e[37]=Z):Z=e[37],e[38]!==v||e[39]!==N||e[40]!==s||e[41]!==l||e[42]!==c||e[43]!==T||e[44]!==$||e[45]!==r||e[46]!==O||e[47]!==A||e[48]!==g||e[49]!==o||e[50]!==m||e[51]!==n||e[52]!==P||e[53]!==a||e[54]!==p||e[55]!==M||e[56]!==t||e[57]!==x||e[58]!==f?(ee=D(Ax,{tool:t,color:r,shapeType:a,scale:n,lines:o,currentShape:O,setCurrentShape:B,addLine:v,updateLastLine:x,vanishingPoint:f,setVanishingPoint:P,clearVanishingPoint:$,showVanishingLines:p,brushFlow:s,brushSmoothness:l,brushWidth:c,isMultiPointDrawing:g,multiPointShape:m,startMultiPointDrawing:M,addPointToMultiPointDrawing:N,finishMultiPointDrawing:A,cancelMultiPointDrawing:T}),e[38]=v,e[39]=N,e[40]=s,e[41]=l,e[42]=c,e[43]=T,e[44]=$,e[45]=r,e[46]=O,e[47]=A,e[48]=g,e[49]=o,e[50]=m,e[51]=n,e[52]=P,e[53]=a,e[54]=p,e[55]=M,e[56]=t,e[57]=x,e[58]=f,e[59]=ee):ee=e[59],e[60]!==z?(te=()=>z({showShapeSelector:!1}),e[60]=z,e[61]=te):te=e[61],e[62]!==U||e[63]!==j||e[64]!==te?(ne=D(Tx,{visible:j,onSelect:U,onClose:te}),e[62]=U,e[63]=j,e[64]=te,e[65]=ne):ne=e[65],e[66]!==z?(re=()=>z({showChat:!1}),e[66]=z,e[67]=re):re=e[67],e[68]!==F||e[69]!==re?(ie=D(um,{isOpen:F,onClose:re,title:"AI Assistant"}),e[68]=F,e[69]=re,e[70]=ie):ie=e[70],e[71]!==ne||e[72]!==ie||e[73]!==V||e[74]!==J||e[75]!==ee?(oe=W("div",{children:[V,J,Z,ee,ne,ie]}),e[71]=ne,e[72]=ie,e[73]=V,e[74]=J,e[75]=ee,e[76]=oe):oe=e[76],oe};function cS(){const e=new Ah("","user1");return()=>{e.destroy()}}export{lS as default};
