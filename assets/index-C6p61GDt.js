import{_ as t,ai as e,r as n,p as r,o as s,k as o,f as i,e as c,R as l,C as a,H as h,Q as d,ah as u,d as p}from"./index-DuFNnSed.js";import{R as f,i as g,D as m,g as w}from"./Dropdown--5kCfuVF.js";import{p as k}from"./index-CeIxwLQO.js";import{j as y,g as b,m as W,y as S,u as C,X as v,$ as x,a0 as _,a1 as E,a2 as D,a as I,a3 as M,a4 as O,d as R,T as A,Z as N,b as P,k as $,a5 as T,V as L,o as U,Y as z,L as G}from"./compiler-runtime-tUREv3q0.js";import{u as V}from"./statusUtils-_7GSuK3W.js";import{u as B,r as Q}from"./index-msonT1VO.js";import{M as j,O as F,R as q}from"./index-DLgceogM.js";import{R as J}from"./RightOutlined-GQ0EVVOA.js";import{s as K,a as H,b as X,c as Y,i as Z,R as tt}from"./EllipsisOutlined-BrqVJbPk.js";import{B as et}from"./index-D4kUrRjd.js";import{S as nt}from"./index-ouXO071O.js";function rt(...t){const e={};return t.forEach(t=>{t&&Object.keys(t).forEach(n=>{void 0!==t[n]&&(e[n]=t[n])})}),e}const st=t=>{if(!t)return;const{closable:e,closeIcon:n}=t;return{closable:e,closeIcon:n}},ot={},it=(t,e)=>{if(!t&&(!1===t||!1===e||null===e))return!1;if(void 0===t&&void 0===e)return null;let n={closeIcon:"boolean"!=typeof e&&null!==e?e:void 0};return t&&"object"==typeof t&&(n={...n,...t}),n},ct=(e,n,r=ot,s="Close")=>{const o=it(e?.closable,e?.closeIcon),i=it(n?.closable,n?.closeIcon),c={closeIcon:t.createElement(f,null),...r},l=((t,e,n)=>!1!==t&&(t?rt(n,e,t):!1!==e&&(e?rt(n,e):!!n.closable&&n)))(o,i,c),a="boolean"!=typeof l&&!!l?.disabled;if(!1===l)return[!1,null,a,{}];const[h,d]=((e,n,r)=>{const{closeIconRender:s}=n,{closeIcon:o,...i}=e;let c=o;const l=k(i,!0);return y(c)&&(s&&(c=s(c)),c=t.isValidElement(c)?t.cloneElement(c,{"aria-label":r,...c.props,...l}):t.createElement("span",{"aria-label":r,...l},c)),[c,l]})(l,c,s);return[!0,h,a,d]},lt=(n,r,s=ot)=>{const[o]=V("global",e.global);return t.useMemo(()=>ct(n,r,{closeIcon:t.createElement(f,null),...s},o.close),[n,r,s,o.close])},at=n.createContext({}),ht=t=>{const{antCls:e,componentCls:n,iconCls:o,avatarBg:i,avatarColor:c,containerSize:l,containerSizeLG:a,containerSizeSM:h,textFontSize:d,textFontSizeLG:u,textFontSizeSM:p,iconFontSize:f,iconFontSizeLG:g,iconFontSizeSM:m,borderRadius:w,borderRadiusLG:k,borderRadiusSM:y,lineWidth:b,lineType:W}=t,S=(t,e,r,s)=>({width:t,height:t,borderRadius:"50%",fontSize:e,[`&${n}-square`]:{borderRadius:s},[`&${n}-icon`]:{fontSize:r,[`> ${o}`]:{margin:0}}});return{[n]:{...s(t),position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:c,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:i,border:`${r(b)} ${W} transparent`,"&-image":{background:"transparent"},[`${e}-image-img`]:{display:"block"},...S(l,d,f,w),"&-lg":{...S(a,u,g,k)},"&-sm":{...S(h,p,m,y)},"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}}}},dt=t=>{const{componentCls:e,groupBorderColor:n,groupOverlapping:r,groupSpace:s}=t;return{[`${e}-group`]:{display:"inline-flex",[e]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:r}},[`${e}-group-popover`]:{[`${e} + ${e}`]:{marginInlineStart:s}}}},ut=b("Avatar",t=>{const{colorTextLightSolid:e,colorTextPlaceholder:n}=t,r=W(t,{avatarBg:n,avatarColor:e});return[ht(r),dt(r)]},t=>{const{controlHeight:e,controlHeightLG:n,controlHeightSM:r,fontSize:s,fontSizeLG:o,fontSizeXL:i,fontSizeHeading3:c,marginXS:l,marginXXS:a,colorBorderBg:h}=t;return{containerSize:e,containerSizeLG:n,containerSizeSM:r,textFontSize:s,textFontSizeLG:s,textFontSizeSM:s,iconFontSize:Math.round((o+i)/2),iconFontSizeLG:c,iconFontSizeSM:s,groupSpace:a,groupOverlapping:-l,groupBorderColor:h}}),pt=n.forwardRef((t,e)=>{const{prefixCls:r,shape:s,size:a,src:h,srcSet:d,icon:u,className:p,rootClassName:f,style:g,alt:m,draggable:w,children:k,crossOrigin:y,gap:b=4,onError:W,...v}=t,[x,_]=n.useState(1),[E,D]=n.useState(!1),[I,M]=n.useState(!0),O=n.useRef(null),R=n.useRef(null),A=o(e,O),{getPrefixCls:N,className:P,style:$}=i("avatar"),T=n.useContext(at),L=()=>{if(!R.current||!O.current)return;const t=R.current.offsetWidth,e=O.current.offsetWidth;0!==t&&0!==e&&2*b<e&&_(e-2*b<t?(e-2*b)/t:1)};n.useEffect(()=>{D(!0)},[]),n.useEffect(()=>{M(!0),_(1)},[h]),n.useEffect(L,[b]);const U=()=>{const t=W?.();!1!==t&&M(!1)},z=S(t=>a??T?.size??t??"default"),G=Object.keys("object"==typeof z&&z||{}).some(t=>["xs","sm","md","lg","xl","xxl"].includes(t)),V=B(G),j=n.useMemo(()=>{if("object"!=typeof z)return{};const t=Q.find(t=>V[t]),e=z[t];return e?{width:e,height:e,fontSize:e&&(u||k)?e/2:18}:{}},[V,z,u,k]),F=N("avatar",r),q=C(F),[J,K]=ut(F,q),H=c({[`${F}-lg`]:"large"===z,[`${F}-sm`]:"small"===z}),X=n.isValidElement(h),Y=c(F,H,P,`${F}-${s||T?.shape||"circle"}`,{[`${F}-image`]:X||h&&I,[`${F}-icon`]:!!u},K,q,p,f,J),Z="number"==typeof z?{width:z,height:z,fontSize:u?z/2:18}:{};let tt;if("string"==typeof h&&I)tt=n.createElement("img",{src:h,draggable:w,srcSet:d,onError:U,alt:m,crossOrigin:y});else if(X)tt=h;else if(u)tt=u;else if(E||1!==x){const t=`scale(${x})`,e={msTransform:t,WebkitTransform:t,transform:t};tt=n.createElement(l,{onResize:L},n.createElement("span",{className:`${F}-string`,ref:R,style:e},k))}else tt=n.createElement("span",{className:`${F}-string`,style:{opacity:0},ref:R},k);return n.createElement("span",{...v,style:{...Z,...j,...$,...g},className:Y,ref:A},tt)}),ft=t=>t?"function"==typeof t?t():t:null,gt=t=>{const{componentCls:e,popoverColor:n,titleMinWidth:r,fontWeightStrong:o,innerPadding:i,boxShadowSecondary:c,colorTextHeading:l,borderRadiusLG:a,zIndexPopup:h,titleMarginBottom:d,colorBgElevated:u,popoverBg:p,titleBorderBottom:f,innerContentPadding:g,titlePadding:m}=t;return[{[e]:{...s(t),position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:h,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":u,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${e}-content`]:{position:"relative"},[`${e}-container`]:{backgroundColor:p,backgroundClip:"padding-box",borderRadius:a,boxShadow:c,padding:i},[`${e}-title`]:{minWidth:r,marginBottom:d,color:l,fontWeight:o,borderBottom:f,padding:m},[`${e}-content`]:{color:n,padding:g}}},x(t,"var(--antd-arrow-background-color)"),{[`${e}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow,display:"inline-block"}}]},mt=t=>{const{componentCls:e}=t;return{[e]:_.map(n=>{const r=t[`${n}6`];return{[`&${e}-${n}`]:{"--antd-arrow-background-color":r,[`${e}-inner`]:{backgroundColor:r},[`${e}-arrow`]:{background:"transparent"}}}})}},wt=b("Popover",t=>{const{colorBgElevated:e,colorText:n}=t,r=W(t,{popoverBg:e,popoverColor:n});return[gt(r),mt(r),v(r,"zoom-big")]},t=>{const{lineWidth:e,controlHeight:n,fontHeight:r,padding:s,wireframe:o,zIndexPopupBase:i,borderRadiusLG:c,marginXS:l,lineType:a,colorSplit:h,paddingSM:d}=t,u=n-r,p=u/2,f=u/2-e,g=s;return{titleMinWidth:177,zIndexPopup:i+30,...D(t),...E({contentRadius:c,limitVerticalRadius:!0}),innerPadding:o?0:12,titleMarginBottom:o?0:l,titlePadding:o?`${p}px ${g}px ${f}px`:0,titleBorderBottom:o?`${e}px ${a} ${h}`:"none",innerContentPadding:o?`${d}px ${g}px`:0}},{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]}),kt=t=>{const{title:e,content:r,prefixCls:s,classNames:o,styles:i}=t;return e||r?n.createElement(n.Fragment,null,e&&n.createElement("div",{className:c(`${s}-title`,o?.title),style:i?.title},e),r&&n.createElement("div",{className:c(`${s}-content`,o?.content),style:i?.content},r)):null},yt=t=>{const{hashId:e,prefixCls:r,className:s,style:o,placement:i="top",title:l,content:a,children:h,classNames:d,styles:u}=t,p=ft(l),f=ft(a),g={...t,placement:i},[m,w]=I([d],[u],{props:g}),k=c(e,r,`${r}-pure`,`${r}-placement-${i}`,s);return n.createElement("div",{className:k,style:o},n.createElement("div",{className:`${r}-arrow`}),n.createElement(M,{...t,className:e,prefixCls:r,classNames:m,styles:w},h||n.createElement(kt,{prefixCls:r,title:p,content:f,classNames:m,styles:w})))},bt=n.forwardRef((t,e)=>{const{prefixCls:r,title:s,content:o,overlayClassName:l,placement:a="top",trigger:h,children:d,mouseEnterDelay:u=.1,mouseLeaveDelay:p=.1,onOpenChange:f,overlayStyle:g={},styles:m,classNames:w,motion:k,arrow:y,...b}=t,{getPrefixCls:W,className:S,style:C,classNames:v,styles:x,arrow:_,trigger:E}=i("popover"),D=W("popover",r),[M,T]=wt(D),L=W(),U=O(y,_),z=h||E||"hover",G={...t,placement:a,trigger:z,mouseEnterDelay:u,mouseLeaveDelay:p,overlayStyle:g,styles:m,classNames:w},[V,B]=I([v,w],[x,m],{props:G}),Q=c(l,M,T,S,V.root),[j,F]=R(t.defaultOpen??!1,t.open),q=(t,e)=>{F(t),f?.(t,e)},J=ft(s),K=ft(o);return n.createElement(A,{unique:!1,arrow:U,placement:a,trigger:z,mouseEnterDelay:u,mouseLeaveDelay:p,...b,prefixCls:D,classNames:{root:Q,container:V.container,arrow:V.arrow},styles:{root:{...B.root,...C,...g},container:B.container,arrow:B.arrow},ref:e,open:j,onOpenChange:t=>{q(t)},overlay:J||K?n.createElement(kt,{prefixCls:D,title:J,content:K,classNames:V,styles:B}):null,motion:{motionName:N(L,"zoom-big","string"==typeof k?.motionName?k?.motionName:void 0)},"data-popover-inject":!0},P(d,{onKeyDown:t=>{n.isValidElement(d)&&d?.props.onKeyDown?.(t),(t=>{t.keyCode===$.ESC&&q(!1,t)})(t)}}))}),Wt=bt;Wt._InternalPanelDoNotUseOrYouWillBeFired=t=>{const{prefixCls:e,className:r,...s}=t,{getPrefixCls:o}=n.useContext(a),i=o("popover",e),[l,h]=wt(i);return n.createElement(yt,{...s,prefixCls:i,hashId:l,className:c(r,h)})};const St=t=>{const{size:e,shape:r}=n.useContext(at),s=n.useMemo(()=>({size:t.size||e,shape:t.shape||r}),[t.size,t.shape,e,r]);return n.createElement(at.Provider,{value:s},t.children)},Ct=pt;Ct.Group=t=>{const{getPrefixCls:e,direction:r}=n.useContext(a),{prefixCls:s,className:o,rootClassName:i,style:l,maxCount:d,maxStyle:u,size:p,shape:f,maxPopoverPlacement:g,maxPopoverTrigger:m,children:w,max:k}=t,y=e("avatar",s),b=`${y}-group`,W=C(y),[S,v]=ut(y,W),x=c(b,{[`${b}-rtl`]:"rtl"===r},v,W,o,i,S),_=h(w).map((t,e)=>P(t,{key:`avatar-key-${e}`})),E=k?.count||d,D=_.length;if(E&&E<D){const t=_.slice(0,E),e=_.slice(E,D),r=k?.style||u,s=k?.popover?.trigger||m||"hover",o=k?.popover?.placement||g||"top",i={content:e,...k?.popover,placement:o,trigger:s,rootClassName:c(`${b}-popover`,k?.popover?.rootClassName)};return t.push(n.createElement(Wt,{key:"avatar-popover-key",destroyOnHidden:!0,...i},n.createElement(pt,{style:r},"+"+(D-E)))),n.createElement(St,{shape:f,size:p},n.createElement("div",{className:x,style:l},t))}return n.createElement(St,{shape:f,size:p},n.createElement("div",{className:x,style:l},_))};const vt=t=>{const{componentCls:e,menuCls:n,colorError:r,colorTextLightSolid:s}=t,o=`${n}-item`;return{[`${e}, ${e}-menu-submenu`]:{[`${n} ${o}`]:{[`&${o}-danger:not(${o}-disabled)`]:{color:r,"&:hover":{color:s,backgroundColor:r}}}}}},xt=t=>{const{componentCls:e,menuCls:n,zIndexPopup:o,dropdownArrowDistance:i,sizePopupArrow:c,antCls:l,iconCls:a,motionDurationMid:h,paddingBlock:u,fontSize:p,dropdownEdgeChildPadding:f,colorTextDisabled:m,fontSizeIcon:w,controlPaddingHorizontal:k,colorBgElevated:y}=t;return[{[e]:{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:o,display:"block","&::before":{position:"absolute",insetBlock:t.calc(c).div(2).sub(i).equal(),zIndex:-9999,opacity:1e-4,content:'""'},"&-menu-vertical":{maxHeight:"100vh",overflowY:"auto"},[`&-trigger${l}-btn`]:{[`& > ${a}-down, & > ${l}-btn-icon > ${a}-down`]:{fontSize:w}},[`${e}-wrap`]:{position:"relative",[`${l}-btn > ${a}-down`]:{fontSize:w},[`${a}-down::before`]:{transition:`transform ${h}`}},[`${e}-wrap-open`]:{[`${a}-down::before`]:{transform:"rotate(180deg)"}},"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ":{display:"none"},[`&${l}-slide-down-enter${l}-slide-down-enter-active${e}-placement-bottomLeft,\n          &${l}-slide-down-appear${l}-slide-down-appear-active${e}-placement-bottomLeft,\n          &${l}-slide-down-enter${l}-slide-down-enter-active${e}-placement-bottom,\n          &${l}-slide-down-appear${l}-slide-down-appear-active${e}-placement-bottom,\n          &${l}-slide-down-enter${l}-slide-down-enter-active${e}-placement-bottomRight,\n          &${l}-slide-down-appear${l}-slide-down-appear-active${e}-placement-bottomRight`]:{animationName:Y},[`&${l}-slide-up-enter${l}-slide-up-enter-active${e}-placement-topLeft,\n          &${l}-slide-up-appear${l}-slide-up-appear-active${e}-placement-topLeft,\n          &${l}-slide-up-enter${l}-slide-up-enter-active${e}-placement-top,\n          &${l}-slide-up-appear${l}-slide-up-appear-active${e}-placement-top,\n          &${l}-slide-up-enter${l}-slide-up-enter-active${e}-placement-topRight,\n          &${l}-slide-up-appear${l}-slide-up-appear-active${e}-placement-topRight`]:{animationName:X},[`&${l}-slide-down-leave${l}-slide-down-leave-active${e}-placement-bottomLeft,\n          &${l}-slide-down-leave${l}-slide-down-leave-active${e}-placement-bottom,\n          &${l}-slide-down-leave${l}-slide-down-leave-active${e}-placement-bottomRight`]:{animationName:H},[`&${l}-slide-up-leave${l}-slide-up-leave-active${e}-placement-topLeft,\n          &${l}-slide-up-leave${l}-slide-up-leave-active${e}-placement-top,\n          &${l}-slide-up-leave${l}-slide-up-leave-active${e}-placement-topRight`]:{animationName:K}}},x(t,y,{arrowPlacement:{top:!0,bottom:!0}}),{[`${e} ${n}`]:{position:"relative",margin:0},[`${n}-submenu-popup`]:{position:"absolute",zIndex:o,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${e}, ${e}-menu-submenu`]:{...s(t),[n]:{padding:f,listStyleType:"none",backgroundColor:y,backgroundClip:"padding-box",borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary,...d(t),"&:empty":{padding:0,boxShadow:"none"},[`${n}-item-group-title`]:{padding:`${r(u)} ${r(k)}`,color:t.colorTextDescription,transition:`all ${h}`},[`${n}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${n}-item-icon`]:{minWidth:p,marginInlineEnd:t.marginXS,fontSize:t.fontSizeSM},[`${n}-title-content`]:{flex:"auto","&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},"> a":{color:"inherit",transition:`all ${h}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}},[`${n}-item-extra`]:{paddingInlineStart:t.padding,marginInlineStart:"auto",fontSize:t.fontSizeSM,color:t.colorTextDescription}},[`${n}-item, ${n}-submenu-title`]:{display:"flex",margin:0,padding:`${r(u)} ${r(k)}`,color:t.colorText,fontWeight:"normal",fontSize:p,lineHeight:t.lineHeight,cursor:"pointer",transition:`all ${h}`,borderRadius:t.borderRadiusSM,"&:hover, &-active":{backgroundColor:t.controlItemBgHover},...d(t),"&-selected":{color:t.colorPrimary,backgroundColor:t.controlItemBgActive,"&:hover, &-active":{backgroundColor:t.controlItemBgActiveHover}},"&-disabled":{color:m,cursor:"not-allowed","&:hover":{color:m,backgroundColor:y,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${r(t.marginXXS)} 0`,overflow:"hidden",lineHeight:0,backgroundColor:t.colorSplit},[`${e}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:t.paddingXS,[`${e}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:t.colorIcon,fontSize:w,fontStyle:"normal"}}},[`${n}-item-group-list`]:{margin:`0 ${r(t.marginXS)}`,padding:0,listStyle:"none"},[`${n}-submenu-title`]:{paddingInlineEnd:t.calc(k).add(t.fontSizeSM).equal()},[`${n}-submenu-vertical`]:{position:"relative"},[`${n}-submenu${n}-submenu-disabled ${e}-menu-submenu-title`]:{[`&, ${e}-menu-submenu-arrow-icon`]:{color:m,backgroundColor:y,cursor:"not-allowed"}},[`${n}-submenu-selected ${e}-menu-submenu-title`]:{color:t.colorPrimary}}}},[Z(t,"slide-up"),Z(t,"slide-down"),g(t,"move-up"),g(t,"move-down"),v(t,"zoom-big")]]},_t=b("Dropdown",t=>{const{marginXXS:e,sizePopupArrow:n,paddingXXS:r,componentCls:s}=t,o=W(t,{menuCls:`${s}-menu`,dropdownArrowDistance:t.calc(n).div(2).add(e).equal(),dropdownEdgeChildPadding:r});return[xt(o),vt(o)]},t=>({zIndexPopup:t.zIndexPopupBase+50,paddingBlock:(t.controlHeight-t.fontSize*t.lineHeight)/2,...E({contentRadius:t.borderRadiusLG,limitVerticalRadius:!0}),...D(t)}),{resetStyle:!1}),Et=t=>{const{menu:e,arrow:r,prefixCls:s,children:o,trigger:l,disabled:a,dropdownRender:h,popupRender:d,getPopupContainer:f,overlayClassName:g,rootClassName:w,overlayStyle:k,open:y,onOpenChange:b,mouseEnterDelay:W=.15,mouseLeaveDelay:S=.1,autoAdjustOverflow:v=!0,placement:x="",transitionName:_,classNames:E,styles:D,destroyPopupOnHide:M,destroyOnHidden:O}=t,{getPrefixCls:A,direction:N,getPopupContainer:$,className:G,style:V,classNames:B,styles:Q}=i("dropdown"),K={...t,mouseEnterDelay:W,mouseLeaveDelay:S,autoAdjustOverflow:v},[H,X]=I([B,E],[Q,D],{props:K}),Y={...V,...k,...X.root},Z=d||h,tt=n.useMemo(()=>{const t=A();return void 0!==_?_:x.includes("top")?`${t}-slide-down`:`${t}-slide-up`},[A,x,_]),et=n.useMemo(()=>x?x.includes("Center")?x.slice(0,x.indexOf("Center")):x:"rtl"===N?"bottomRight":"bottomLeft",[x,N]),nt=A("dropdown",s),rt=C(nt),[st,ot]=_t(nt,rt),[,it]=u(),ct=n.Children.only("object"!=typeof(lt=o)&&"function"!=typeof lt||null===lt?n.createElement("span",null,o):o);var lt;const at=P(ct,{className:c(`${nt}-trigger`,{[`${nt}-rtl`]:"rtl"===N},ct.props.className),disabled:ct.props.disabled??a}),ht=a?[]:l,dt=!!ht?.includes("contextMenu"),[ut,pt]=R(!1,y),ft=p(t=>{b?.(t,{source:"trigger"}),pt(t)}),gt=c(g,w,st,ot,rt,G,H.root,{[`${nt}-rtl`]:"rtl"===N}),mt=T({arrowPointAtCenter:"object"==typeof r&&r.pointAtCenter,autoAdjustOverflow:v,offset:it.marginXXS,arrowWidth:r?it.sizePopupArrow:0,borderRadius:it.borderRadius}),wt=p(()=>{e?.selectable&&e?.multiple||(b?.(!1,{source:"menu"}),pt(!1))}),[kt,yt]=L("Dropdown",Y.zIndex);let bt=n.createElement(m,{alignPoint:dt,...U(t,["rootClassName","onOpenChange"]),mouseEnterDelay:W,mouseLeaveDelay:S,visible:ut,builtinPlacements:mt,arrow:!!r,overlayClassName:gt,prefixCls:nt,getPopupContainer:f||$,transitionName:tt,trigger:ht,overlay:()=>{const t=U(H,["root"]),r=U(X,["root"]);let s;return e?.items&&(s=n.createElement(j,{...e,classNames:{...t,subMenu:{...t}},styles:{...r,subMenu:{...r}}})),Z&&(s=Z(s)),s=n.Children.only("string"==typeof s?n.createElement("span",null,s):s),n.createElement(F,{prefixCls:`${nt}-menu`,rootClassName:c(ot,rt),expandIcon:n.createElement("span",{className:`${nt}-menu-submenu-arrow`},"rtl"===N?n.createElement(q,{className:`${nt}-menu-submenu-arrow-icon`}):n.createElement(J,{className:`${nt}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:wt,validator:({mode:t})=>{}},s)},placement:et,onVisibleChange:ft,overlayStyle:{...Y,zIndex:kt},autoDestroy:O??M},at);return kt&&(bt=n.createElement(z.Provider,{value:yt},bt)),bt},Dt=w(Et,"align",void 0,"dropdown",t=>t);Et._InternalPanelDoNotUseOrYouWillBeFired=t=>n.createElement(Dt,{...t},n.createElement("span",null));const It=t=>{const{getPopupContainer:e,getPrefixCls:r,direction:s}=n.useContext(a),{prefixCls:o,type:i="default",danger:l,disabled:h,loading:d,onClick:u,htmlType:p,children:f,className:g,menu:m,arrow:w,autoFocus:k,trigger:y,align:b,open:W,onOpenChange:S,placement:C,getPopupContainer:v,href:x,icon:_=n.createElement(tt,null),title:E,buttonsRender:D=t=>t,mouseEnterDelay:I,mouseLeaveDelay:M,overlayClassName:O,overlayStyle:R,destroyOnHidden:A,destroyPopupOnHide:N,dropdownRender:P,popupRender:$,...T}=t,L=r("dropdown",o),U=`${L}-button`,z={menu:m,arrow:w,autoFocus:k,align:b,disabled:h,trigger:h?[]:y,onOpenChange:S,getPopupContainer:v||e,mouseEnterDelay:I,mouseLeaveDelay:M,classNames:{root:O},styles:{root:R},destroyOnHidden:A,popupRender:$||P},{compactSize:V,compactItemClassnames:B}=G(L,s),Q=c(U,B,g);"destroyPopupOnHide"in t&&(z.destroyPopupOnHide=N),"open"in t&&(z.open=W),z.placement="placement"in t?C:"rtl"===s?"bottomLeft":"bottomRight";const j=n.createElement(et,{type:i,danger:l,disabled:h,loading:d,onClick:u,htmlType:p,href:x,title:E},f),F=n.createElement(et,{type:i,danger:l,icon:_}),[q,J]=D([j,F]);return n.createElement(nt.Compact,{className:Q,size:V,block:!0,...T},q,n.createElement(Et,{...z},J))};It.__ANT_BUTTON=!0;const Mt=Et;Mt.Button=It;const Ot=Nt;!function(){const t=Nt,e=Pt();for(;;)try{if(593413===parseInt(t(461,"tH&H"))/1*(parseInt(t(430,"AMTN"))/2)+parseInt(t(431,"xB2k"))/3*(-parseInt(t(427,"V^DN"))/4)+-parseInt(t(441,"W&B6"))/5+-parseInt(t(439,"&*IT"))/6+-parseInt(t(420,"V^DN"))/7*(parseInt(t(413,"6[as"))/8)+parseInt(t(449,"v^bs"))/9+parseInt(t(426,"((]T"))/10)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const Rt=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Nt(457,"kwM6")](e,arguments);return n=null,t}}:function(){};return t=!1,r}}()(void 0,function(){const t=Nt;return Rt.toString().search(t(460,"Rmmc"))[t(450,"&*IT")]().constructor(Rt)[t(453,"t^m*")](t(464,"G!VF"))});Rt();const At=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Nt(445,"dQ28")](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function Nt(t,e){t-=411;const n=Pt();let r=n[t];if(void 0===Nt.XYeGuh){var s=function(t){let e="",n="",r=e+s;for(let s,o,i=0,c=0;o=t.charAt(c++);~o&&(s=i%4?64*s+o:o,i++%4)?e+=r.charCodeAt(c+10)-10!=0?String.fromCharCode(255&s>>(-2*i&6)):i:0)o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(o);for(let s=0,o=e.length;s<o;s++)n+="%"+("00"+e.charCodeAt(s).toString(16)).slice(-2);return decodeURIComponent(n)};const t=function(t,e){let n,r,o=[],i=0,c="";for(t=s(t),r=0;r<256;r++)o[r]=r;for(r=0;r<256;r++)i=(i+o[r]+e.charCodeAt(r%e.length))%256,n=o[r],o[r]=o[i],o[i]=n;r=0,i=0;for(let s=0;s<t.length;s++)r=(r+1)%256,i=(i+o[r])%256,n=o[r],o[r]=o[i],o[i]=n,c+=String.fromCharCode(t.charCodeAt(s)^o[(o[r]+o[i])%256]);return c};Nt.SbpGEe=t,Nt.zEsmDV={},Nt.XYeGuh=!0}const o=t+n[0],i=Nt.zEsmDV[o];if(i)r=i;else{if(void 0===Nt.RqcjmH){const t=function(t){this.TdDEAu=t,this.ldtYAQ=[1,0,0],this.gsjGWw=function(){return"newState"},this.XOwwAK="\\w+ *\\(\\) *{\\w+ *",this.EdupbD="['|\"].+['|\"];? *}"};t.prototype.kZkIxE=function(){const t=new RegExp(this.XOwwAK+this.EdupbD).test(this.gsjGWw.toString())?--this.ldtYAQ[1]:--this.ldtYAQ[0];return this.fxGumQ(t)},t.prototype.fxGumQ=function(t){return Boolean(~t)?this.XjxlaU(this.TdDEAu):t},t.prototype.XjxlaU=function(t){for(let e=0,n=this.ldtYAQ.length;e<n;e++)this.ldtYAQ.push(Math.round(Math.random())),n=this.ldtYAQ.length;return t(this.ldtYAQ[0])},new t(Nt).kZkIxE(),Nt.RqcjmH=!0}r=Nt.SbpGEe(r,e),Nt.zEsmDV[o]=r}return r}At(void 0,function(){const t=Nt,e=function(){const t=Nt;let e;try{e=Function(t(434,"4qO&")+t(448,"Gc1X")+");")()}catch(n){e=window}return e}(),n=e[t(466,"tH&H")]=e[t(462,"r#2M")]||{},r=[t(465,"!LX["),"warn","info",t(421,"kwM6"),t(425,"h3t("),t(440,"%iVb"),t(424,"zzRx")];for(let s=0;s<r[t(454,"EPoF")];s++){const e=At.constructor[t(429,")3Kn")][t(442,")3Kn")](At),o=r[s],i=n[o]||e;e.__proto__=At[t(456,"[64t")](At),e[t(447,"xq2T")]=i[t(444,"M(j#")][t(415,"W#Ow")](i),n[o]=e}})();Ot(451,"V^DN"),Ot(432,"ZQAp"),Ot(419,"&fR]"),Ot(452,"xB2k"),Ot(436,"Y$yp"),Ot(467,"&(*F"),Ot(455,"R4X%");function Pt(){const t=["WQ7dHhfIW71VW7ZcJdRdVCk7EGq","W6WXW47cR8kPW4a","WO7dN2ddPSo3W6ldGelcImkVDXj6","WQ/cKCkthCkk","WPBcPCorWOVdL2ifh8kCb0BcNSkh","amkLi3K","WPtcSdmcW67dIchdU8kskepcIa","WOFcUHqIW67dGchdRW","bSkovxqa","WOb3WQW","WPdcUCoUltxdOYlcGq","W6i+WPNcUmk5W7lcUmohWQNcIc9EvSo9wCkYWRZdVHxdG8obF30tWRWzrSoCWRBcRW7dMq","xSkNwfRdQSkiW4BcIrnMW60zWOu","W4JcGGpcPmk3WR7cMMy","C8olwWS","WQ1gWOJcKIjnu8o4W5yP","W588WPhdNmkoFa","WP5qWReHhmow","aCkfWPhdUCo4","WPBdIJBcKW","ie3cSdBdSG","y8kgW7BdN8osW5rpbq","W7fuWOFdLW","WOitWQBcKIreE108W5xdG2m","W5WRwYXQbCksfColWO4lpq","ArTyuSkwW5PR","W548WPtdM8koCq","WOi+lrldPXhcPsldQfrraW","WPX3WRW","WOL9dwK9w8k9","WQqHWPChWOJcGL0","WPnxWQW","arO1W4PY","nrRcHt3dT8kyWR8bW4rwqanv","W6dcPmoBh8kZWQ9qgComCCkwt8kK","W7JcV8kNWOCfgdjJW6S","x2ldJxO","cXm0W4j0W6O","WO3dM2NdO8o3W6ddHdhcVCkNxdTcbW","xcBcOICTWRfbW5zuA3W1W4S","CcJdRuFdRa","mCkAqXtcPComW5VdNq","je/cSJxdUq","W5HBiKW6r8kY","zmklWQlcRSkMWR9DhSoCwGdcKa","omkDW7XQEq","c2ZdSxrVW7aCW7Pn","W5KaW57cRIBdK8oKWQddTgC7bmo8WRq","nmo+Ab3cQSoJW7u","WPP9fa","eSk+iMNcTmkUW4uVWR0","WOLFisRcJ8o8W58","W7SEW4JdKNCvaCoWW4O+WQ3cOGy","wCkVW7xdIG","WRBcRmoxWRdcV8o/W5G3nLXEWPu","WQpcRmoxWPhcV8oWWPzSnKzcWPSlW63dMmk/W4NdS8oN","W6xdGmkPyCoaW6Kw","dSoYASoUW6BdPSkSwZNcObO"];return(Pt=function(){return t})()}const $t=()=>new Map,Tt=t=>{const e=$t();return t.forEach((t,n)=>{e.set(n,t)}),e},Lt=(t,e,n)=>{let r=t.get(e);return void 0===r&&t.set(e,r=n()),r},Ut=()=>new Set,zt=t=>t[t.length-1],Gt=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Vt=Array.from,Bt=(t,e)=>{for(let n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},Qt=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},jt=Array.isArray;class Ft{constructor(){this._observers=$t()}on(t,e){return Lt(this._observers,t,Ut).add(e),e}once(t,e){const n=(...r)=>{this.off(t,n),e(...r)};this.on(t,n)}off(t,e){const n=this._observers.get(t);void 0!==n&&(n.delete(e),0===n.size&&this._observers.delete(t))}emit(t,e){return Vt((this._observers.get(t)||$t()).values()).forEach(t=>t(...e))}destroy(){this._observers=$t()}}const qt=Math.floor,Jt=Math.abs,Kt=(t,e)=>t<e?t:e,Ht=(t,e)=>t>e?t:e,Xt=t=>0!==t?t<0:1/t<0,Yt=64,Zt=128,te=127,ee=Number.MAX_SAFE_INTEGER,ne=Number.MIN_SAFE_INTEGER,re=Number.isInteger||(t=>"number"==typeof t&&isFinite(t)&&qt(t)===t),se=String.fromCharCode,oe=/^\s*/g,ie=/([A-Z])/g,ce=(t,e)=>(t=>t.replace(oe,""))(t.replace(ie,t=>`${e}${(t=>t.toLowerCase())(t)}`)),le="undefined"!=typeof TextEncoder?new TextEncoder:null,ae=le?t=>le.encode(t):t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.codePointAt(s);return r};let he="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});he&&1===he.decode(new Uint8Array).length&&(he=null);const de=(t,e)=>((t,e)=>{const n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r,n);return n})(e,()=>t).join("");class ue{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const pe=()=>new ue,fe=t=>{const e=new Uint8Array((t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e})(t));let n=0;for(let r=0;r<t.bufs.length;r++){const s=t.bufs[r];e.set(s,n),n+=s.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},ge=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},me=ge,we=(t,e)=>{for(;e>te;)ge(t,Zt|te&e),e=qt(e/128);ge(t,te&e)},ke=(t,e)=>{const n=Xt(e);for(n&&(e=-e),ge(t,(e>63?Zt:0)|(n?Yt:0)|63&e),e=qt(e/64);e>0;)ge(t,(e>te?Zt:0)|te&e),e=qt(e/128)},ye=new Uint8Array(3e4),be=ye.length/3,We=le&&le.encodeInto?(t,e)=>{if(e.length<be){const n=le.encodeInto(e,ye).written||0;we(t,n);for(let e=0;e<n;e++)ge(t,ye[e])}else Ce(t,ae(e))}:(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;we(t,r);for(let s=0;s<r;s++)ge(t,n.codePointAt(s))},Se=(t,e)=>{const n=t.cbuf.length,r=t.cpos,s=Kt(n-r,e.length),o=e.length-s;t.cbuf.set(e.subarray(0,s),r),t.cpos+=s,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Ht(2*n,o)),t.cbuf.set(e.subarray(s)),t.cpos=o)},Ce=(t,e)=>{we(t,e.byteLength),Se(t,e)},ve=(t,e)=>{((t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(2*Ht(n,e)),t.cpos=0)})(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},xe=new DataView(new ArrayBuffer(4)),_e=(t,e)=>{switch(typeof e){case"string":ge(t,119),We(t,e);break;case"number":re(e)&&Jt(e)<=2147483647?(ge(t,125),ke(t,e)):(n=e,xe.setFloat32(0,n),xe.getFloat32(0)===n?(ge(t,124),((t,e)=>{ve(t,4).setFloat32(0,e,!1)})(t,e)):(ge(t,123),((t,e)=>{ve(t,8).setFloat64(0,e,!1)})(t,e)));break;case"bigint":ge(t,122),((t,e)=>{ve(t,8).setBigInt64(0,e,!1)})(t,e);break;case"object":if(null===e)ge(t,126);else if(jt(e)){ge(t,117),we(t,e.length);for(let n=0;n<e.length;n++)_e(t,e[n])}else if(e instanceof Uint8Array)ge(t,116),Ce(t,e);else{ge(t,118);const n=Object.keys(e);we(t,n.length);for(let r=0;r<n.length;r++){const s=n[r];We(t,s),_e(t,e[s])}}break;case"boolean":ge(t,e?120:121);break;default:ge(t,127)}var n};class Ee extends ue{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&we(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const De=t=>{t.count>0&&(ke(t.encoder,1===t.count?t.s:-t.s),t.count>1&&we(t.encoder,t.count-2))};class Ie{constructor(){this.encoder=new ue,this.s=0,this.count=0}write(t){this.s===t?this.count++:(De(this),this.count=1,this.s=t)}toUint8Array(){return De(this),fe(this.encoder)}}const Me=t=>{if(t.count>0){const e=2*t.diff+(1===t.count?0:1);ke(t.encoder,e),t.count>1&&we(t.encoder,t.count-2)}};class Oe{constructor(){this.encoder=new ue,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(Me(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return Me(this),fe(this.encoder)}}class Re{constructor(){this.sarr=[],this.s="",this.lensE=new Ie}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new ue;return this.sarr.push(this.s),this.s="",We(t,this.sarr.join("")),Se(t,this.lensE.toUint8Array()),fe(t)}}const Ae=t=>new Error(t),Ne=()=>{throw Ae("Method unimplemented")},Pe=()=>{throw Ae("Unexpected case")},$e=Ae("Unexpected end of array"),Te=Ae("Integer out of Range");class Le{constructor(t){this.arr=t,this.pos=0}}const Ue=t=>new Le(t),ze=t=>t.pos!==t.arr.length,Ge=t=>((t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n})(t,Be(t)),Ve=t=>t.arr[t.pos++],Be=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const r=t.arr[t.pos++];if(e+=(r&te)*n,n*=128,r<Zt)return e;if(e>ee)throw Te}throw $e},Qe=t=>{let e=t.arr[t.pos++],n=63&e,r=64;const s=(e&Yt)>0?-1:1;if(0===(e&Zt))return s*n;const o=t.arr.length;for(;t.pos<o;){if(e=t.arr[t.pos++],n+=(e&te)*r,r*=128,e<Zt)return s*n;if(n>ee)throw Te}throw $e},je=he?t=>he.decode(Ge(t)):t=>{let e=Be(t);if(0===e)return"";{let n=String.fromCodePoint(Ve(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(Ve(t));else for(;e>0;){const r=e<1e4?e:1e4,s=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,s),e-=r}return decodeURIComponent(escape(n))}},Fe=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},qe=[t=>{},t=>null,Qe,t=>Fe(t,4).getFloat32(0,!1),t=>Fe(t,8).getFloat64(0,!1),t=>Fe(t,8).getBigInt64(0,!1),t=>!1,t=>!0,je,t=>{const e=Be(t),n={};for(let r=0;r<e;r++){n[je(t)]=Je(t)}return n},t=>{const e=Be(t),n=[];for(let r=0;r<e;r++)n.push(Je(t));return n},Ge],Je=t=>qe[127-Ve(t)](t);class Ke extends Le{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),ze(this)?this.count=Be(this)+1:this.count=-1),this.count--,this.s}}class He extends Le{constructor(t){super(t),this.s=0,this.count=0}read(){if(0===this.count){this.s=Qe(this);const t=Xt(this.s);this.count=1,t&&(this.s=-this.s,this.count=Be(this)+2)}return this.count--,this.s}}class Xe extends Le{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const t=Qe(this),e=1&t;this.diff=qt(t/2),this.count=1,e&&(this.count=Be(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Ye{constructor(t){this.decoder=new He(t),this.str=je(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}const Ze=crypto.getRandomValues.bind(crypto),tn=()=>Ze(new Uint32Array(1))[0],en="10000000-1000-4000-8000-100000000000",nn=()=>en.replace(/[018]/g,t=>(t^tn()&15>>t/4).toString(16)),rn=Date.now,sn=t=>new Promise(t);Promise.all.bind(Promise);const on=t=>void 0===t?null:t;let cn=new class{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}},ln=!0;try{"undefined"!=typeof localStorage&&localStorage&&(cn=localStorage,ln=!1)}catch(Vc){}const an=cn,hn=Symbol("Equality"),dn=(t,e)=>t===e||!!t?.[hn]?.(e)||!1,un=Object.assign,pn=Object.keys,fn=t=>pn(t).length,gn=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},mn=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),wn=Object.freeze,kn=t=>{for(const e in t){const n=t[e];"object"!=typeof n&&"function"!=typeof n||kn(t[e])}return wn(t)},yn=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&yn(t,e,n+1)}},bn=t=>t,Wn=(t,e)=>{if(t===e)return!0;if(null==t||null==e||t.constructor!==e.constructor&&(t.constructor||Object)!==(e.constructor||Object))return!1;if(null!=t[hn])return t[hn](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break;case Set:if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break;case Map:if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!Wn(t.get(n),e.get(n)))return!1;break;case void 0:case Object:if(fn(t)!==fn(e))return!1;for(const n in t)if(!mn(t,n)||!Wn(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Wn(t[n],e[n]))return!1;break;default:return!1}return!0};var Sn={};const Cn="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);let vn;const xn=t=>(()=>{if(void 0===vn)if(Cn){vn=$t();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];"-"===r[0]?(null!==e&&vn.set(e,""),e=r):null!==e&&(vn.set(e,r),e=null)}null!==e&&vn.set(e,"")}else"object"==typeof location?(vn=$t(),(location.search||"?").slice(1).split("&").forEach(t=>{if(0!==t.length){const[e,n]=t.split("=");vn.set(`--${ce(e,"-")}`,n),vn.set(`-${ce(e,"-")}`,n)}})):vn=$t();return vn})().has(t),_n=t=>on(Cn?Sn[t.toUpperCase().replaceAll("-","_")]:an.getItem(t)),En=t=>xn("--"+t)||null!==_n(t),Dn=En("production");const In=Cn&&["true","1","2"].includes(Sn.FORCE_COLOR)||!xn("--no-colors")&&!En("no-color")&&(!Cn||process.stdout.isTTY)&&(!Cn||xn("--color")||null!==_n("COLORTERM")||(_n("TERM")||"").includes("color")),Mn=t=>{const e=(n=t.byteLength,new Uint8Array(n));var n;return e.set(t),e};class On{constructor(t,e){this.left=t,this.right=e}}const Rn=(t,e)=>new On(t,e),An=t=>t.next()>=.5,Nn=(t,e,n)=>qt(t.next()*(n+1-e)+e),Pn=(t,e,n)=>qt(t.next()*(n+1-e)+e),$n=(t,e,n)=>Pn(t,e,n),Tn=t=>se($n(t,97,122)),Ln=(t,e)=>e[$n(t,0,e.length-1)],Un=Symbol("0schema");class zn{constructor(){this._rerrs=[]}extend(t,e,n,r=null){this._rerrs.push({path:t,expected:e,has:n,message:r})}toString(){const t=[];for(let e=this._rerrs.length-1;e>0;e--){const n=this._rerrs[e];t.push(de(" ",2*(this._rerrs.length-e))+`${null!=n.path?`[${n.path}] `:""}${n.has} doesn't match ${n.expected}. ${n.message}`)}return t.join("\n")}}const Gn=(t,e)=>t===e||null!=t&&null!=e&&t.constructor===e.constructor&&(t[hn]?dn(t,e):jt(t)?Bt(t,t=>Qt(e,e=>Gn(t,e))):"object"==typeof t&&gn(t,(t,n)=>Gn(t,e[n])));class Vn{static _dilutes=!1;extends(t){let[e,n]=[this.shape,t.shape];return this.constructor._dilutes&&([n,e]=[e,n]),Gn(e,n)}equals(t){return this.constructor===t.constructor&&Wn(this.shape,t.shape)}[Un](){return!0}[hn](t){return this.equals(t)}validate(t){return this.check(t)}check(t,e){Ne()}get nullable(){return wr(this,Rr)}get optional(){return new Zn(this)}cast(t){return $r(t,this),t}expect(t){return $r(t,this),t}}class Bn extends Vn{constructor(t,e){super(),this.shape=t,this._c=e}check(t,e=void 0){const n=t?.constructor===this.shape&&(null==this._c||this._c(t));return!n&&e?.extend(null,this.shape.name,t?.constructor.name,t?.constructor!==this.shape?"Constructor match failed":"Check failed"),n}}const Qn=(t,e=null)=>new Bn(t,e);Qn(Bn);class jn extends Vn{constructor(t){super(),this.shape=t}check(t,e){const n=this.shape(t);return!n&&e?.extend(null,"custom prop",t?.constructor.name,"failed to check custom prop"),n}}const Fn=t=>new jn(t);Qn(jn);class qn extends Vn{constructor(t){super(),this.shape=t}check(t,e){const n=this.shape.some(e=>e===t);return!n&&e?.extend(null,this.shape.join(" | "),t.toString()),n}}const Jn=(...t)=>new qn(t),Kn=Qn(qn),Hn=RegExp.escape||(t=>t.replace(/[().|&,$^[\]]/g,t=>"\\"+t)),Xn=t=>Er.check(t)?[Hn(t)]:Kn.check(t)?t.shape.map(t=>t+""):_r.check(t)?["[+-]?\\d+.?\\d*"]:Dr.check(t)?[".*"]:kr.check(t)?t.shape.map(Xn).flat(1):void Pe();Qn(class extends Vn{constructor(t){super(),this.shape=t,this._r=new RegExp("^"+t.map(Xn).map(t=>`(${t.join("|")})`).join("")+"$")}check(t,e){const n=null!=this._r.exec(t);return!n&&e?.extend(null,this._r.toString(),t.toString(),"String doesn't match string template."),n}});const Yn=Symbol("optional");class Zn extends Vn{constructor(t){super(),this.shape=t}check(t,e){const n=void 0===t||this.shape.check(t);return!n&&e?.extend(null,"undefined (optional)","()"),n}get[Yn](){return!0}}const tr=Qn(Zn);Qn(class extends Vn{check(t,e){return e?.extend(null,"never",typeof t),!1}});class er extends Vn{constructor(t,e=!1){super(),this.shape=t,this._isPartial=e}static _dilutes=!0;get partial(){return new er(this.shape,!0)}check(t,e){return null==t?(e?.extend(null,"object","null"),!1):gn(this.shape,(n,r)=>{const s=this._isPartial&&!mn(t,r)||n.check(t[r],e);return!s&&e?.extend(r.toString(),n.toString(),typeof t[r],"Object property does not match"),s})}}const nr=Qn(er),rr=Fn(t=>null!=t&&(t.constructor===Object||null==t.constructor));class sr extends Vn{constructor(t,e){super(),this.shape={keys:t,values:e}}check(t,e){return null!=t&&gn(t,(n,r)=>{const s=this.shape.keys.check(r,e);return!s&&e?.extend(r+"","Record",typeof t,s?"Key doesn't match schema":"Value doesn't match value"),s&&this.shape.values.check(n,e)})}}const or=(t,e)=>new sr(t,e),ir=Qn(sr);class cr extends Vn{constructor(t){super(),this.shape=t}check(t,e){return null!=t&&gn(this.shape,(n,r)=>{const s=n.check(t[r],e);return!s&&e?.extend(r.toString(),"Tuple",typeof n),s})}}Qn(cr);class lr extends Vn{constructor(t){super(),this.shape=1===t.length?t[0]:new mr(t)}check(t,e){const n=jt(t)&&Bt(t,t=>this.shape.check(t));return!n&&e?.extend(null,"Array",""),n}}const ar=(...t)=>new lr(t),hr=Qn(lr),dr=Fn(t=>jt(t));class ur extends Vn{constructor(t,e){super(),this.shape=t,this._c=e}check(t,e){const n=t instanceof this.shape&&(null==this._c||this._c(t));return!n&&e?.extend(null,this.shape.name,t?.constructor.name),n}}Qn(ur);const pr=((t,e=null)=>new ur(t,e))(Vn);const fr=Qn(class extends Vn{constructor(t){super(),this.len=t.length-1,this.args=((...t)=>new cr(t))(...t.slice(-1)),this.res=t[this.len]}check(t,e){const n=t.constructor===Function&&t.length<=this.len;return!n&&e?.extend(null,"function",typeof t),n}}),gr=Fn(t=>"function"==typeof t);Qn(class extends Vn{constructor(t){super(),this.shape=t}check(t,e){const n=Bt(this.shape,n=>n.check(t,e));return!n&&e?.extend(null,"Intersectinon",typeof t),n}},t=>t.shape.length>0);class mr extends Vn{static _dilutes=!0;constructor(t){super(),this.shape=t}check(t,e){const n=Qt(this.shape,n=>n.check(t,e));return e?.extend(null,"Union",typeof t),n}}const wr=(...t)=>t.findIndex(t=>kr.check(t))>=0?wr(...t.map(t=>Pr(t)).map(t=>kr.check(t)?t.shape:[t]).flat(1)):1===t.length?t[0]:new mr(t),kr=Qn(mr),yr=()=>!0,br=Fn(yr),Wr=Qn(jn,t=>t.shape===yr),Sr=Fn(t=>"bigint"==typeof t),Cr=Fn(t=>t===Sr),vr=Fn(t=>"symbol"==typeof t);Fn(t=>t===vr);const xr=Fn(t=>"number"==typeof t),_r=Fn(t=>t===xr),Er=Fn(t=>"string"==typeof t),Dr=Fn(t=>t===Er),Ir=Fn(t=>"boolean"==typeof t),Mr=Fn(t=>t===Ir),Or=Jn(void 0);Qn(qn,t=>1===t.shape.length&&void 0===t.shape[0]),Jn(void 0);const Rr=Jn(null),Ar=Qn(qn,t=>1===t.shape.length&&null===t.shape[0]);Qn(Uint8Array),Qn(Bn,t=>t.shape===Uint8Array);const Nr=wr(xr,Er,Rr,Or,Sr,Ir,vr);(()=>{const t=ar(br),e=or(Er,br),n=wr(xr,Er,Rr,Ir,t,e);t.shape=n,e.shape.values=n})();const Pr=t=>{if(pr.check(t))return t;if(rr.check(t)){const e={};for(const n in t)e[n]=Pr(t[n]);return new er(e)}return dr.check(t)?wr(...t.map(Pr)):Nr.check(t)?Jn(t):gr.check(t)?Qn(t):void Pe()},$r=Dn?()=>{}:(t,e)=>{const n=new zn;if(!e.check(t,n))throw Ae(`Expected value to be of type ${e.constructor.name}.\n${n.toString()}`)};class Tr{constructor(t){this.patterns=[],this.$state=t}if(t,e){return this.patterns.push({if:Pr(t),h:e}),this}else(t){return this.if(br,t)}done(){return(t,e)=>{for(let n=0;n<this.patterns.length;n++){const r=this.patterns[n];if(r.if.check(t))return r.h(t,e)}throw Ae("Unhandled pattern")}}}const Lr=(Ur=br,new Tr(Ur)).if(_r,(t,e)=>Nn(e,ne,ee)).if(Dr,(t,e)=>((t,e=0,n=20)=>{const r=$n(t,e,n);let s="";for(let o=0;o<r;o++)s+=Tn(t);return s})(e)).if(Mr,(t,e)=>An(e)).if(Cr,(t,e)=>BigInt(Nn(e,ne,ee))).if(kr,(t,e)=>zr(e,Ln(e,t.shape))).if(nr,(t,e)=>{const n={};for(const r in t.shape){let s=t.shape[r];if(tr.check(s)){if(An(e))continue;s=s.shape}n[r]=Lr(s,e)}return n}).if(hr,(t,e)=>{const n=[],r=Pn(e,0,42);for(let s=0;s<r;s++)n.push(zr(e,t.shape));return n}).if(Kn,(t,e)=>Ln(e,t.shape)).if(Ar,(t,e)=>null).if(fr,(t,e)=>{const n=zr(e,t.res);return()=>n}).if(Wr,(t,e)=>zr(e,Ln(e,[xr,Er,Rr,Or,Sr,Ir,ar(xr),or(wr("a","b","c"),xr)]))).if(ir,(t,e)=>{const n={},r=Nn(e,0,3);for(let s=0;s<r;s++){const r=zr(e,t.shape.keys),s=zr(e,t.shape.values);n[r]=s}return n}).done();var Ur;const zr=(t,e)=>Lr(Pr(e),t),Gr="undefined"!=typeof document?document:{};Fn(t=>t.nodeType===Fr),"undefined"!=typeof DOMParser&&new DOMParser,Fn(t=>t.nodeType===Br),Fn(t=>t.nodeType===Qr);const Vr=t=>((t,e)=>{const n=[];for(const[r,s]of t)n.push(e(s,r));return n})(t,(t,e)=>`${e}:${t};`).join(""),Br=Gr.ELEMENT_NODE,Qr=Gr.TEXT_NODE,jr=Gr.DOCUMENT_NODE,Fr=Gr.DOCUMENT_FRAGMENT_NODE;Fn(t=>t.nodeType===jr);const qr=Symbol,Jr=qr(),Kr=qr(),Hr=qr(),Xr=qr(),Yr=qr(),Zr=qr(),ts=qr(),es=qr(),ns=qr(),rs={[Jr]:Rn("font-weight","bold"),[Kr]:Rn("font-weight","normal"),[Hr]:Rn("color","blue"),[Yr]:Rn("color","green"),[Xr]:Rn("color","grey"),[Zr]:Rn("color","red"),[ts]:Rn("color","purple"),[es]:Rn("color","orange"),[ns]:Rn("color","black")},ss=In?t=>{1===t.length&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[],r=$t();let s=[],o=0;for(;o<t.length;o++){const s=t[o],i=rs[s];if(void 0!==i)r.set(i.left,i.right);else{if(void 0===s)break;if(s.constructor!==String&&s.constructor!==Number)break;{const t=Vr(r);o>0||t.length>0?(e.push("%c"+s),n.push(t)):e.push(s)}}}for(o>0&&(s=n,s.unshift(e.join("")));o<t.length;o++){const e=t[o];e instanceof Symbol||s.push(e)}return s}:t=>{1===t.length&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const n=t[r];if(void 0===n)break;if(n.constructor===String||n.constructor===Number)e.push(n);else if(n.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const e=t[r];e instanceof Symbol||n.push(e)}return n},os=(...t)=>{console.log(...ss(t)),cs.forEach(e=>e.print(t))},is=(...t)=>{console.warn(...ss(t)),t.unshift(es),cs.forEach(e=>e.print(t))},cs=Ut(),ls=t=>({[Symbol.iterator](){return this},next:t}),as=(t,e)=>ls(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class hs{constructor(t,e){this.clock=t,this.len=e}}class ds{constructor(){this.clients=new Map}}const us=(t,e,n)=>e.clients.forEach((e,r)=>{const s=t.doc.store.clients.get(r);if(null!=s){const r=s[s.length-1],o=r.id.clock+r.length;for(let i=0,c=e[i];i<e.length&&c.clock<o;c=e[++i])yo(t,s,c.clock,c.len,n)}}),ps=(t,e)=>{const n=t.clients.get(e.client);return void 0!==n&&null!==((t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const s=qt((n+r)/2),o=t[s],i=o.clock;if(i<=e){if(e<i+o.len)return s;n=s+1}else r=s-1}return null})(n,e.clock)},fs=t=>{t.clients.forEach(t=>{let e,n;for(t.sort((t,e)=>t.clock-e.clock),e=1,n=1;e<t.length;e++){const r=t[n-1],s=t[e];r.clock+r.len>=s.clock?r.len=Ht(r.len,s.clock+s.len-r.clock):(n<e&&(t[n]=s),n++)}t.length=n})},gs=t=>{const e=new ds;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,s)=>{if(!e.clients.has(s)){const o=r.slice();for(let e=n+1;e<t.length;e++)Gt(o,t[e].clients.get(s)||[]);e.clients.set(s,o)}});return fs(e),e},ms=(t,e,n,r)=>{Lt(t.clients,e,()=>[]).push(new hs(n,r))},ws=()=>new ds,ks=t=>{const e=ws();return t.clients.forEach((t,n)=>{const r=[];for(let e=0;e<t.length;e++){const n=t[e];if(n.deleted){const s=n.id.clock;let o=n.length;if(e+1<t.length)for(let n=t[e+1];e+1<t.length&&n.deleted;n=t[1+ ++e])o+=n.length;r.push(new hs(s,o))}}r.length>0&&e.clients.set(n,r)}),e},ys=(t,e)=>{we(t.restEncoder,e.clients.size),Vt(e.clients.entries()).sort((t,e)=>e[0]-t[0]).forEach(([e,n])=>{t.resetDsCurVal(),we(t.restEncoder,e);const r=n.length;we(t.restEncoder,r);for(let s=0;s<r;s++){const e=n[s];t.writeDsClock(e.clock),t.writeDsLen(e.len)}})},bs=t=>{const e=new ds,n=Be(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const n=Be(t.restDecoder),r=Be(t.restDecoder);if(r>0){const s=Lt(e.clients,n,()=>[]);for(let e=0;e<r;e++)s.push(new hs(t.readDsClock(),t.readDsLen()))}}return e},Ws=(t,e,n)=>{const r=new ds,s=Be(t.restDecoder);for(let o=0;o<s;o++){t.resetDsCurVal();const s=Be(t.restDecoder),o=Be(t.restDecoder),i=n.clients.get(s)||[],c=uo(n,s);for(let n=0;n<o;n++){const n=t.readDsClock(),o=n+t.readDsLen();if(n<c){c<o&&ms(r,s,c,o-c);let t=fo(i,n),l=i[t];for(!l.deleted&&l.id.clock<n&&(i.splice(t+1,0,mc(e,l,n-l.id.clock)),t++);t<i.length&&(l=i[t++],l.id.clock<o);)l.deleted||(o<l.id.clock+l.length&&i.splice(t,0,mc(e,l,o-l.id.clock)),l.delete(e))}else ms(r,s,n,o-n)}}if(r.clients.size>0){const t=new Rs;return we(t.restEncoder,0),ys(t,r),t.toUint8Array()}return null},Ss=(t,e)=>{if(t.clients.size!==e.clients.size)return!1;for(const[n,r]of t.clients.entries()){const t=e.clients.get(n);if(void 0===t||r.length!==t.length)return!1;for(let e=0;e<r.length;e++){const n=r[e],s=t[e];if(n.clock!==s.clock||n.len!==s.len)return!1}}return!0},Cs=tn;class vs extends Ft{constructor({guid:t=nn(),collectionid:e=null,gc:n=!0,gcFilter:r=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:i=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=Cs(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new ao,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=i,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=sn(t=>{this.on("load",()=>{this.isLoaded=!0,t(this)})});const c=()=>sn(t=>{const e=n=>{void 0!==n&&!0!==n||(this.off("sync",e),t())};this.on("sync",e)});this.on("sync",t=>{!1===t&&this.isSynced&&(this.whenSynced=c()),this.isSynced=void 0===t||!0===t,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=c()}load(){const t=this._item;null===t||this.shouldLoad||Eo(t.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Vt(this.subdocs).map(t=>t.guid))}transact(t,e=null){return Eo(this,t,e)}get(t,e=ri){const n=Lt(this.share,t,()=>{const t=new e;return t._integrate(this,null),t}),r=n.constructor;if(e!==ri&&r!==e){if(r===ri){const r=new e;r._map=n._map,n._map.forEach(t=>{for(;null!==t;t=t.left)t.parent=r}),r._start=n._start;for(let t=r._start;null!==t;t=t.right)t.parent=r;return r._length=n._length,this.share.set(t,r),r._integrate(this,null),r}throw new Error(`Type with the name ${t} has already been defined with a different constructor`)}return n}getArray(t=""){return this.get(t,Si)}getText(t=""){return this.get(t,zi)}getMap(t=""){return this.get(t,vi)}getXmlElement(t=""){return this.get(t,Bi)}getXmlFragment(t=""){return this.get(t,Vi)}toJSON(){const t={};return this.share.forEach((e,n)=>{t[n]=e.toJSON()}),t}destroy(){this.isDestroyed=!0,Vt(this.subdocs).forEach(t=>t.destroy());const t=this._item;if(null!==t){this._item=null;const e=t.content;e.doc=new vs({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,Eo(t.parent.doc,n=>{const r=e.doc;t.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class xs{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return Be(this.restDecoder)}readDsLen(){return Be(this.restDecoder)}}class _s extends xs{readLeftID(){return Js(Be(this.restDecoder),Be(this.restDecoder))}readRightID(){return Js(Be(this.restDecoder),Be(this.restDecoder))}readClient(){return Be(this.restDecoder)}readInfo(){return Ve(this.restDecoder)}readString(){return je(this.restDecoder)}readParentInfo(){return 1===Be(this.restDecoder)}readTypeRef(){return Be(this.restDecoder)}readLen(){return Be(this.restDecoder)}readAny(){return Je(this.restDecoder)}readBuf(){return Mn(Ge(this.restDecoder))}readJSON(){return JSON.parse(je(this.restDecoder))}readKey(){return je(this.restDecoder)}}class Es{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Be(this.restDecoder),this.dsCurrVal}readDsLen(){const t=Be(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class Ds extends Es{constructor(t){super(t),this.keys=[],Be(t),this.keyClockDecoder=new Xe(Ge(t)),this.clientDecoder=new He(Ge(t)),this.leftClockDecoder=new Xe(Ge(t)),this.rightClockDecoder=new Xe(Ge(t)),this.infoDecoder=new Ke(Ge(t),Ve),this.stringDecoder=new Ye(Ge(t)),this.parentInfoDecoder=new Ke(Ge(t),Ve),this.typeRefDecoder=new He(Ge(t)),this.lenDecoder=new He(Ge(t))}readLeftID(){return new Fs(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Fs(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Je(this.restDecoder)}readBuf(){return Ge(this.restDecoder)}readJSON(){return Je(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const t=this.stringDecoder.read();return this.keys.push(t),t}}}class Is{constructor(){this.restEncoder=pe()}toUint8Array(){return fe(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){we(this.restEncoder,t)}writeDsLen(t){we(this.restEncoder,t)}}class Ms extends Is{writeLeftID(t){we(this.restEncoder,t.client),we(this.restEncoder,t.clock)}writeRightID(t){we(this.restEncoder,t.client),we(this.restEncoder,t.clock)}writeClient(t){we(this.restEncoder,t)}writeInfo(t){me(this.restEncoder,t)}writeString(t){We(this.restEncoder,t)}writeParentInfo(t){we(this.restEncoder,t?1:0)}writeTypeRef(t){we(this.restEncoder,t)}writeLen(t){we(this.restEncoder,t)}writeAny(t){_e(this.restEncoder,t)}writeBuf(t){Ce(this.restEncoder,t)}writeJSON(t){We(this.restEncoder,JSON.stringify(t))}writeKey(t){We(this.restEncoder,t)}}class Os{constructor(){this.restEncoder=pe(),this.dsCurrVal=0}toUint8Array(){return fe(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,we(this.restEncoder,e)}writeDsLen(t){0===t&&Pe(),we(this.restEncoder,t-1),this.dsCurrVal+=t}}class Rs extends Os{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Oe,this.clientEncoder=new Ie,this.leftClockEncoder=new Oe,this.rightClockEncoder=new Oe,this.infoEncoder=new Ee(me),this.stringEncoder=new Re,this.parentInfoEncoder=new Ee(me),this.typeRefEncoder=new Ie,this.lenEncoder=new Ie}toUint8Array(){const t=pe();return we(t,0),Ce(t,this.keyClockEncoder.toUint8Array()),Ce(t,this.clientEncoder.toUint8Array()),Ce(t,this.leftClockEncoder.toUint8Array()),Ce(t,this.rightClockEncoder.toUint8Array()),Ce(t,fe(this.infoEncoder)),Ce(t,this.stringEncoder.toUint8Array()),Ce(t,fe(this.parentInfoEncoder)),Ce(t,this.typeRefEncoder.toUint8Array()),Ce(t,this.lenEncoder.toUint8Array()),Se(t,fe(this.restEncoder)),fe(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){_e(this.restEncoder,t)}writeBuf(t){Ce(this.restEncoder,t)}writeJSON(t){_e(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);void 0===e?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const As=(t,e,n)=>{const r=new Map;n.forEach((t,n)=>{uo(e,n)>t&&r.set(n,t)}),ho(e).forEach((t,e)=>{n.has(e)||r.set(e,0)}),we(t.restEncoder,r.size),Vt(r.entries()).sort((t,e)=>e[0]-t[0]).forEach(([n,r])=>{((t,e,n,r)=>{r=Ht(r,e[0].id.clock);const s=fo(e,r);we(t.restEncoder,e.length-s),t.writeClient(n),we(t.restEncoder,r);const o=e[s];o.write(t,r-o.id.clock);for(let i=s+1;i<e.length;i++)e[i].write(t,0)})(t,e.clients.get(n),n,r)})},Ns=(t,e,n,r=new Ds(t))=>Eo(e,t=>{t.local=!1;let e=!1;const n=t.doc,s=n.store,o=((t,e)=>{const n=$t(),r=Be(t.restDecoder);for(let s=0;s<r;s++){const r=Be(t.restDecoder),s=new Array(r),o=t.readClient();let i=Be(t.restDecoder);n.set(o,{i:0,refs:s});for(let n=0;n<r;n++){const r=t.readInfo();switch(31&r){case 0:{const e=t.readLen();s[n]=new Ji(Js(o,i),e),i+=e;break}case 10:{const e=Be(t.restDecoder);s[n]=new Sc(Js(o,i),e),i+=e;break}default:{const c=!(192&r),l=new yc(Js(o,i),null,(r&Zt)===Zt?t.readLeftID():null,null,(r&Yt)===Yt?t.readRightID():null,c?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,!c||32&~r?null:t.readString(),bc(t,r));s[n]=l,i+=l.length}}}}return n})(r,n),i=((t,e,n)=>{const r=[];let s=Vt(n.keys()).sort((t,e)=>t-e);if(0===s.length)return null;const o=()=>{if(0===s.length)return null;let t=n.get(s[s.length-1]);for(;t.refs.length===t.i;){if(s.pop(),!(s.length>0))return null;t=n.get(s[s.length-1])}return t};let i=o();if(null===i)return null;const c=new ao,l=new Map,a=(t,e)=>{const n=l.get(t);(null==n||n>e)&&l.set(t,e)};let h=i.refs[i.i++];const d=new Map,u=()=>{for(const t of r){const e=t.id.client,r=n.get(e);r?(r.i--,c.clients.set(e,r.refs.slice(r.i)),n.delete(e),r.i=0,r.refs=[]):c.clients.set(e,[t]),s=s.filter(t=>t!==e)}r.length=0};for(;;){if(h.constructor!==Sc){const s=Lt(d,h.id.client,()=>uo(e,h.id.client))-h.id.clock;if(s<0)r.push(h),a(h.id.client,h.id.clock-1),u();else{const o=h.getMissing(t,e);if(null!==o){r.push(h);const t=n.get(o)||{refs:[],i:0};if(t.refs.length!==t.i){h=t.refs[t.i++];continue}a(o,uo(e,o)),u()}else(0===s||s<h.length)&&(h.integrate(t,s),d.set(h.id.client,h.id.clock+h.length))}}if(r.length>0)h=r.pop();else if(null!==i&&i.i<i.refs.length)h=i.refs[i.i++];else{if(i=o(),null===i)break;h=i.refs[i.i++]}}if(c.clients.size>0){const t=new Rs;return As(t,c,new Map),we(t.restEncoder,0),{missing:l,update:t.toUint8Array()}}return null})(t,s,o),c=s.pendingStructs;if(c){for(const[t,n]of c.missing)if(n<uo(s,t)){e=!0;break}if(i){for(const[t,e]of i.missing){const n=c.missing.get(t);(null==n||n>e)&&c.missing.set(t,e)}c.update=Uo([c.update,i.update])}}else s.pendingStructs=i;const l=Ws(r,t,s);if(s.pendingDs){const e=new Ds(Ue(s.pendingDs));Be(e.restDecoder);const n=Ws(e,t,s);s.pendingDs=l&&n?Uo([l,n]):l||n}else s.pendingDs=l;if(e){const e=s.pendingStructs.update;s.pendingStructs=null,Ps(t.doc,e)}},n,!1),Ps=(t,e,n,r=Ds)=>{const s=Ue(e);Ns(s,t,n,new r(s))},$s=(t,e=new Uint8Array([0]),n=new Rs)=>{((t,e,n=new Map)=>{As(t,e.store,n),ys(t,ks(e.store))})(n,t,Ls(e));const r=[n.toUint8Array()];if(t.store.pendingDs&&r.push(t.store.pendingDs),t.store.pendingStructs&&r.push(zo(t.store.pendingStructs.update,e)),r.length>1){if(n.constructor===Ms)return Po(r.map((t,e)=>0===e?t:Fo(t)));if(n.constructor===Rs)return Uo(r)}return r[0]},Ts=t=>{const e=new Map,n=Be(t.restDecoder);for(let r=0;r<n;r++){const n=Be(t.restDecoder),r=Be(t.restDecoder);e.set(n,r)}return e},Ls=t=>Ts(new xs(Ue(t))),Us=(t,e)=>(we(t.restEncoder,e.size),Vt(e.entries()).sort((t,e)=>e[0]-t[0]).forEach(([e,n])=>{we(t.restEncoder,e),we(t.restEncoder,n)}),t),zs=(t,e=new Os)=>(t instanceof Map?Us(e,t):((t,e)=>{Us(t,ho(e.store))})(e,t),e.toUint8Array());class Gs{constructor(){this.l=[]}}const Vs=()=>new Gs,Bs=(t,e)=>t.l.push(e),Qs=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(t=>e!==t),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},js=(t,e,n)=>yn(t.l,[e,n]);class Fs{constructor(t,e){this.client=t,this.clock=e}}const qs=(t,e)=>t===e||null!==t&&null!==e&&t.client===e.client&&t.clock===e.clock,Js=(t,e)=>new Fs(t,e),Ks=(t,e)=>{we(t,e.client),we(t,e.clock)},Hs=t=>Js(Be(t),Be(t)),Xs=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw Pe()},Ys=(t,e)=>{for(;null!==e;){if(e.parent===t)return!0;e=e.parent._item}return!1};class Zs{constructor(t,e,n,r=0){this.type=t,this.tname=e,this.item=n,this.assoc=r}}class to{constructor(t,e,n=0){this.type=t,this.index=e,this.assoc=n}}const eo=(t,e,n)=>{let r=null,s=null;return null===t._item?s=Xs(t):r=Js(t._item.id.client,t._item.id.clock),new Zs(r,s,e,n)};class no{constructor(t,e){this.ds=t,this.sv=e}}const ro=(t,e=new Os)=>(ys(e,t.ds),Us(e,t.sv),e.toUint8Array()),so=(t,e=new Es(Ue(t)))=>new no(bs(e),Ts(e)),oo=(t,e)=>new no(t,e),io=oo(ws(),new Map),co=(t,e)=>void 0===e?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!ps(e.ds,t.id),lo=(t,e)=>{const n=Lt(t.meta,lo,Ut),r=t.doc.store;n.has(e)||(e.sv.forEach((e,n)=>{e<uo(r,n)&&wo(t,Js(n,e))}),us(t,e.ds,t=>{}),n.add(e))};class ao{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const ho=t=>{const e=new Map;return t.clients.forEach((t,n)=>{const r=t[t.length-1];e.set(n,r.id.clock+r.length)}),e},uo=(t,e)=>{const n=t.clients.get(e);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},po=(t,e)=>{let n=t.clients.get(e.id.client);if(void 0===n)n=[],t.clients.set(e.id.client,n);else{const t=n[n.length-1];if(t.id.clock+t.length!==e.id.clock)throw Pe()}n.push(e)},fo=(t,e)=>{let n=0,r=t.length-1,s=t[r],o=s.id.clock;if(o===e)return r;let i=qt(e/(o+s.length-1)*r);for(;n<=r;){if(s=t[i],o=s.id.clock,o<=e){if(e<o+s.length)return i;n=i+1}else r=i-1;i=qt((n+r)/2)}throw Pe()},go=(t,e)=>{const n=t.clients.get(e.client);return n[fo(n,e.clock)]},mo=(t,e,n)=>{const r=fo(e,n),s=e[r];return s.id.clock<n&&s instanceof yc?(e.splice(r+1,0,mc(t,s,n-s.id.clock)),r+1):r},wo=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[mo(t,n,e.clock)]},ko=(t,e,n)=>{const r=e.clients.get(n.client),s=fo(r,n.clock),o=r[s];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Ji&&r.splice(s+1,0,mc(t,o,n.clock-o.id.clock+1)),o},yo=(t,e,n,r,s)=>{if(0===r)return;const o=n+r;let i,c=mo(t,e,n);do{i=e[c++],o<i.id.clock+i.length&&mo(t,e,o),s(i)}while(c<e.length&&e[c].id.clock<o)};class bo{constructor(t,e,n){this.doc=t,this.deleteSet=new ds,this.beforeState=ho(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Wo=(t,e)=>!(0===e.deleteSet.clients.size&&!((t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1})(e.afterState,(t,n)=>e.beforeState.get(n)!==t))&&(fs(e.deleteSet),((t,e)=>{As(t,e.doc.store,e.beforeState)})(t,e),ys(t,e.deleteSet),!0),So=(t,e,n)=>{const r=e._item;(null===r||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Lt(t.changed,e,Ut).add(n)},Co=(t,e)=>{let n=t[e],r=t[e-1],s=e;for(;s>0&&(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n));n=r,r=t[--s-1])n instanceof yc&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const o=e-s;return o&&t.splice(e+1-o,o),o},vo=(t,e,n)=>{for(const[r,s]of t.clients.entries()){const t=e.clients.get(r);for(let r=s.length-1;r>=0;r--){const o=s[r],i=o.clock+o.len;for(let r=fo(t,o.clock),s=t[r];r<t.length&&s.id.clock<i;s=t[++r]){const s=t[r];if(o.clock+o.len<=s.id.clock)break;s instanceof yc&&s.deleted&&!s.keep&&n(s)&&s.gc(e,!1)}}}},xo=(t,e)=>{t.clients.forEach((t,n)=>{const r=e.clients.get(n);for(let e=t.length-1;e>=0;e--){const n=t[e];for(let t=Kt(r.length-1,1+fo(r,n.clock+n.len-1)),e=r[t];t>0&&e.id.clock>=n.clock;e=r[t])t-=1+Co(r,t)}})},_o=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,s=r.store,o=n.deleteSet,i=n._mergeStructs;try{fs(o),n.afterState=ho(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const t=[];n.changed.forEach((e,r)=>t.push(()=>{null!==r._item&&r._item.deleted||r._callObserver(n,e)})),t.push(()=>{n.changedParentTypes.forEach((t,e)=>{e._dEH.l.length>0&&(null===e._item||!e._item.deleted)&&((t=t.filter(t=>null===t.target._item||!t.target._item.deleted)).forEach(t=>{t.currentTarget=e,t._path=null}),t.sort((t,e)=>t.path.length-e.path.length),js(e._dEH,t,n))})}),t.push(()=>r.emit("afterTransaction",[n,r])),yn(t,[]),n._needFormattingCleanup&&Ti(n)}finally{r.gc&&vo(o,s,r.gcFilter),xo(o,s),n.afterState.forEach((t,e)=>{const r=n.beforeState.get(e)||0;if(r!==t){const t=s.clients.get(e),n=Ht(fo(t,r),1);for(let e=t.length-1;e>=n;)e-=1+Co(t,e)}});for(let t=i.length-1;t>=0;t--){const{client:e,clock:n}=i[t].id,r=s.clients.get(e),o=fo(r,n);o+1<r.length&&Co(r,o+1)>1||o>0&&Co(r,o)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(os(es,Jr,"[yjs] ",Kr,Zr,"Changed the client-id because another client seems to be using it."),r.clientID=Cs()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const t=new Ms;Wo(t,n)&&r.emit("update",[t.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const t=new Rs;Wo(t,n)&&r.emit("updateV2",[t.toUint8Array(),n.origin,r,n])}const{subdocsAdded:c,subdocsLoaded:l,subdocsRemoved:a}=n;(c.size>0||a.size>0||l.size>0)&&(c.forEach(t=>{t.clientID=r.clientID,null==t.collectionid&&(t.collectionid=r.collectionid),r.subdocs.add(t)}),a.forEach(t=>r.subdocs.delete(t)),r.emit("subdocs",[{loaded:l,added:c,removed:a},r,n]),a.forEach(t=>t.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):_o(t,e+1)}}},Eo=(t,e,n=null,r=!0)=>{const s=t._transactionCleanups;let o=!1,i=null;null===t._transaction&&(o=!0,t._transaction=new bo(t,n,r),s.push(t._transaction),1===s.length&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{i=e(t._transaction)}finally{if(o){const e=t._transaction===s[0];t._transaction=null,e&&_o(s,0)}}return i};class Do{constructor(t,e){this.insertions=e,this.deletions=t,this.meta=new Map}}const Io=(t,e,n)=>{us(t,n.deletions,n=>{n instanceof yc&&e.scope.some(e=>e===t.doc||Ys(e,n))&&gc(n,!1)})},Mo=(t,e,n)=>{let r=null;const s=t.doc,o=t.scope;Eo(s,n=>{for(;e.length>0&&null===t.currStackItem;){const r=s.store,i=e.pop(),c=new Set,l=[];let a=!1;us(n,i.insertions,t=>{if(t instanceof yc){if(null!==t.redone){let{item:e,diff:s}=fc(r,t.id);s>0&&(e=wo(n,Js(e.id.client,e.id.clock+s))),t=e}!t.deleted&&o.some(e=>e===n.doc||Ys(e,t))&&l.push(t)}}),us(n,i.deletions,t=>{t instanceof yc&&o.some(e=>e===n.doc||Ys(e,t))&&!ps(i.insertions,t.id)&&c.add(t)}),c.forEach(e=>{a=null!==kc(n,e,c,i.insertions,t.ignoreRemoteMapChanges,t)||a});for(let e=l.length-1;e>=0;e--){const r=l[e];t.deleteFilter(r)&&(r.delete(n),a=!0)}t.currStackItem=a?i:null}n.changed.forEach((t,e)=>{t.has(null)&&e._searchMarker&&(e._searchMarker.length=0)}),r=n},t);const i=t.currStackItem;if(null!=i){const e=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:i,type:n,changedParentTypes:e,origin:t},t]),t.currStackItem=null}return i};class Oo{constructor(t,e){this.gen=function*(t){const e=Be(t.restDecoder);for(let n=0;n<e;n++){const e=Be(t.restDecoder),n=t.readClient();let r=Be(t.restDecoder);for(let s=0;s<e;s++){const e=t.readInfo();if(10===e){const e=Be(t.restDecoder);yield new Sc(Js(n,r),e),r+=e}else if(31&e){const s=!(192&e),o=new yc(Js(n,r),null,(e&Zt)===Zt?t.readLeftID():null,null,(e&Yt)===Yt?t.readRightID():null,s?t.readParentInfo()?t.readString():t.readLeftID():null,!s||32&~e?null:t.readString(),bc(t,e));yield o,r+=o.length}else{const e=t.readLen();yield new Ji(Js(n,r),e),r+=e}}}}(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Sc);return this.curr}}const Ro=(t,e=Ds)=>{const n=[],r=new e(Ue(t)),s=new Oo(r,!1);for(let i=s.curr;null!==i;i=s.next())n.push(i);os("Structs: ",n);const o=bs(r);os("DeleteSet: ",o)},Ao=(t,e=Ds)=>{const n=[],r=new e(Ue(t)),s=new Oo(r,!1);for(let o=s.curr;null!==o;o=s.next())n.push(o);return{structs:n,ds:bs(r)}};class No{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Po=t=>Uo(t,_s,Ms),$o=(t,e=Os,n=Ds)=>{const r=new e,s=new Oo(new n(Ue(t)),!1);let o=s.curr;if(null!==o){let t=0,e=o.id.client,n=0!==o.id.clock,i=n?0:o.id.clock+o.length;for(;null!==o;o=s.next())e!==o.id.client&&(0!==i&&(t++,we(r.restEncoder,e),we(r.restEncoder,i)),e=o.id.client,i=0,n=0!==o.id.clock),o.constructor===Sc&&(n=!0),n||(i=o.id.clock+o.length);0!==i&&(t++,we(r.restEncoder,e),we(r.restEncoder,i));const c=pe();return we(c,t),((t,e)=>{Se(t,fe(e))})(c,r.restEncoder),r.restEncoder=c,r.toUint8Array()}return we(r.restEncoder,0),r.toUint8Array()},To=(t,e=Ds)=>{const n=new Map,r=new Map,s=new Oo(new e(Ue(t)),!1);let o=s.curr;if(null!==o){let t=o.id.client,e=o.id.clock;for(n.set(t,e);null!==o;o=s.next())t!==o.id.client&&(r.set(t,e),n.set(o.id.client,o.id.clock),t=o.id.client),e=o.id.clock+o.length;r.set(t,e)}return{from:n,to:r}},Lo=(t,e)=>{if(t.constructor===Ji){const{client:n,clock:r}=t.id;return new Ji(Js(n,r+e),t.length-e)}if(t.constructor===Sc){const{client:n,clock:r}=t.id;return new Sc(Js(n,r+e),t.length-e)}{const n=t,{client:r,clock:s}=n.id;return new yc(Js(r,s+e),null,Js(r,s+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Uo=(t,e=Ds,n=Rs)=>{if(1===t.length)return t[0];const r=t.map(t=>new e(Ue(t)));let s=r.map(t=>new Oo(t,!0)),o=null;const i=new n,c=new No(i);for(;s=s.filter(t=>null!==t.curr),s.sort((t,e)=>{if(t.curr.id.client===e.curr.id.client){const n=t.curr.id.clock-e.curr.id.clock;return 0===n?t.curr.constructor===e.curr.constructor?0:t.curr.constructor===Sc?1:-1:n}return e.curr.id.client-t.curr.id.client}),0!==s.length;){const t=s[0],e=t.curr.id.client;if(null!==o){let n=t.curr,r=!1;for(;null!==n&&n.id.clock+n.length<=o.struct.id.clock+o.struct.length&&n.id.client>=o.struct.id.client;)n=t.next(),r=!0;if(null===n||n.id.client!==e||r&&n.id.clock>o.struct.id.clock+o.struct.length)continue;if(e!==o.struct.id.client)Vo(c,o.struct,o.offset),o={struct:n,offset:0},t.next();else if(o.struct.id.clock+o.struct.length<n.id.clock)if(o.struct.constructor===Sc)o.struct.length=n.id.clock+n.length-o.struct.id.clock;else{Vo(c,o.struct,o.offset);const t=n.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Sc(Js(e,o.struct.id.clock+o.struct.length),t),offset:0}}else{const e=o.struct.id.clock+o.struct.length-n.id.clock;e>0&&(o.struct.constructor===Sc?o.struct.length-=e:n=Lo(n,e)),o.struct.mergeWith(n)||(Vo(c,o.struct,o.offset),o={struct:n,offset:0},t.next())}}else o={struct:t.curr,offset:0},t.next();for(let n=t.curr;null!==n&&n.id.client===e&&n.id.clock===o.struct.id.clock+o.struct.length&&n.constructor!==Sc;n=t.next())Vo(c,o.struct,o.offset),o={struct:n,offset:0}}null!==o&&(Vo(c,o.struct,o.offset),o=null),Bo(c);const l=r.map(t=>bs(t)),a=gs(l);return ys(i,a),i.toUint8Array()},zo=(t,e,n=Ds,r=Rs)=>{const s=Ls(e),o=new r,i=new No(o),c=new n(Ue(t)),l=new Oo(c,!1);for(;l.curr;){const t=l.curr,e=t.id.client,n=s.get(e)||0;if(l.curr.constructor!==Sc)if(t.id.clock+t.length>n)for(Vo(i,t,Ht(n-t.id.clock,0)),l.next();l.curr&&l.curr.id.client===e;)Vo(i,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===e&&l.curr.id.clock+l.curr.length<=n;)l.next();else l.next()}Bo(i);const a=bs(c);return ys(o,a),o.toUint8Array()},Go=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:fe(t.encoder.restEncoder)}),t.encoder.restEncoder=pe(),t.written=0)},Vo=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&Go(t),0===t.written&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),we(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},Bo=t=>{Go(t);const e=t.encoder.restEncoder;we(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];we(e,r.written),Se(e,r.restEncoder)}},Qo=(t,e,n,r)=>{const s=new n(Ue(t)),o=new Oo(s,!1),i=new r,c=new No(i);for(let a=o.curr;null!==a;a=o.next())Vo(c,e(a),0);Bo(c);const l=bs(s);return ys(i,l),i.toUint8Array()},jo=({formatting:t=!0,subdocs:e=!0,yxml:n=!0}={})=>{let r=0;const s=$t(),o=$t(),i=$t(),c=$t();return c.set(null,null),l=>{switch(l.constructor){case Ji:case Sc:return l;case yc:{const a=l,h=a.content;switch(h.constructor){case Hi:break;case pc:if(n){const t=h.type;t instanceof Bi&&(t.nodeName=Lt(o,t.nodeName,()=>"node-"+r)),t instanceof ji&&(t.hookName=Lt(o,t.hookName,()=>"hook-"+r))}break;case rc:{const t=h;t.arr=t.arr.map(()=>r);break}case Ki:h.content=new Uint8Array([r]);break;case Yi:{const t=h;e&&(t.opts={},t.doc.guid=r+"");break}case Zi:h.embed={};break;case tc:{const e=h;t&&(e.key=Lt(i,e.key,()=>r+""),e.value=Lt(c,e.value,()=>({i:r})));break}case ec:{const t=h;t.arr=t.arr.map(()=>r);break}case sc:{const t=h;t.str=de(r%10+"",t.str.length);break}default:Pe()}return a.parentSub&&(a.parentSub=Lt(s,a.parentSub,()=>r+"")),r++,l}default:Pe()}}},Fo=t=>Qo(t,bn,Ds,Ms),qo="You must not compute changes after the event-handler fired.";class Jo{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Ko(this.currentTarget,this.target))}deletes(t){return ps(this.transaction.deleteSet,t.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw Ae(qo);const t=new Map,e=this.target;this.transaction.changed.get(e).forEach(n=>{if(null!==n){const r=e._map.get(n);let s,o;if(this.adds(r)){let t=r.left;for(;null!==t&&this.adds(t);)t=t.left;if(this.deletes(r)){if(null===t||!this.deletes(t))return;s="delete",o=zt(t.content.getContent())}else null!==t&&this.deletes(t)?(s="update",o=zt(t.content.getContent())):(s="add",o=void 0)}else{if(!this.deletes(r))return;s="delete",o=zt(r.content.getContent())}t.set(n,{action:s,oldValue:o})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(null===t){if(0===this.transaction.doc._transactionCleanups.length)throw Ae(qo);const e=this.target,n=Ut(),r=Ut(),s=[];t={added:n,deleted:r,delta:s,keys:this.keys};if(this.transaction.changed.get(e).has(null)){let t=null;const o=()=>{t&&s.push(t)};for(let s=e._start;null!==s;s=s.right)s.deleted?this.deletes(s)&&!this.adds(s)&&(null!==t&&void 0!==t.delete||(o(),t={delete:0}),t.delete+=s.length,r.add(s)):this.adds(s)?(null!==t&&void 0!==t.insert||(o(),t={insert:[]}),t.insert=t.insert.concat(s.content.getContent()),n.add(s)):(null!==t&&void 0!==t.retain||(o(),t={retain:0}),t.retain+=s.length);null!==t&&void 0===t.retain&&o()}this._changes=t}return t}}const Ko=(t,e)=>{const n=[];for(;null!==e._item&&e!==t;){if(null!==e._item.parentSub)n.unshift(e._item.parentSub);else{let t=0,r=e._item.parent._start;for(;r!==e._item&&null!==r;)!r.deleted&&r.countable&&(t+=r.length),r=r.right;n.unshift(t)}e=e._item.parent}return n},Ho=()=>{is("Invalid access: Add Yjs type to a document before reading data.")};let Xo=0;class Yo{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=Xo++}}const Zo=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=Xo++},ti=(t,e)=>{if(null===t._start||0===e||null===t._searchMarker)return null;const n=0===t._searchMarker.length?null:t._searchMarker.reduce((t,n)=>Jt(e-t.index)<Jt(e-n.index)?t:n);let r=t._start,s=0;for(null!==n&&(r=n.p,s=n.index,(t=>{t.timestamp=Xo++})(n));null!==r.right&&s<e;){if(!r.deleted&&r.countable){if(e<s+r.length)break;s+=r.length}r=r.right}for(;null!==r.left&&s>e;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);return null!==n&&Jt(n.index-s)<r.parent.length/80?(Zo(n,r,s),n):((t,e,n)=>{if(t.length>=80){const r=t.reduce((t,e)=>t.timestamp<e.timestamp?t:e);return Zo(r,e,n),r}{const r=new Yo(e,n);return t.push(r),r}})(t._searchMarker,r,s)},ei=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const s=t[r];if(n>0){let e=s.p;for(e.marker=!1;e&&(e.deleted||!e.countable);)e=e.left,e&&!e.deleted&&e.countable&&(s.index-=e.length);if(null===e||!0===e.marker){t.splice(r,1);continue}s.p=e,e.marker=!0}(e<s.index||n>0&&e===s.index)&&(s.index=Ht(e,s.index+n))}},ni=(t,e,n)=>{const r=t,s=e.changedParentTypes;for(;Lt(s,t,()=>[]).push(n),null!==t._item;)t=t._item.parent;js(r._eH,n,e)};class ri{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Vs(),this._dEH=Vs(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw Ne()}clone(){throw Ne()}_write(t){}get _first(){let t=this._start;for(;null!==t&&t.deleted;)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Bs(this._eH,t)}observeDeep(t){Bs(this._dEH,t)}unobserve(t){Qs(this._eH,t)}unobserveDeep(t){Qs(this._dEH,t)}toJSON(){}}const si=(t,e,n)=>{t.doc??Ho(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const s=[];let o=t._start;for(;null!==o&&r>0;){if(o.countable&&!o.deleted){const t=o.content.getContent();if(t.length<=e)e-=t.length;else{for(let n=e;n<t.length&&r>0;n++)s.push(t[n]),r--;e=0}}o=o.right}return s},oi=t=>{t.doc??Ho();const e=[];let n=t._start;for(;null!==n;){if(n.countable&&!n.deleted){const t=n.content.getContent();for(let n=0;n<t.length;n++)e.push(t[n])}n=n.right}return e},ii=(t,e)=>{let n=0,r=t._start;for(t.doc??Ho();null!==r;){if(r.countable&&!r.deleted){const s=r.content.getContent();for(let r=0;r<s.length;r++)e(s[r],n++,t)}r=r.right}},ci=(t,e)=>{const n=[];return ii(t,(r,s)=>{n.push(e(r,s,t))}),n},li=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==e&&e.deleted;)e=e.right;if(null===e)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const t=n[r++];return n.length<=r&&(n=null),{done:!1,value:t}}}},ai=(t,e)=>{t.doc??Ho();const n=ti(t,e);let r=t._start;for(null!==n&&(r=n.p,e-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},hi=(t,e,n,r)=>{let s=n;const o=t.doc,i=o.clientID,c=o.store,l=null===n?e._start:n.right;let a=[];const h=()=>{a.length>0&&(s=new yc(Js(i,uo(c,i)),s,s&&s.lastId,l,l&&l.id,e,null,new rc(a)),s.integrate(t,0),a=[])};r.forEach(n=>{if(null===n)a.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:a.push(n);break;default:switch(h(),n.constructor){case Uint8Array:case ArrayBuffer:s=new yc(Js(i,uo(c,i)),s,s&&s.lastId,l,l&&l.id,e,null,new Ki(new Uint8Array(n))),s.integrate(t,0);break;case vs:s=new yc(Js(i,uo(c,i)),s,s&&s.lastId,l,l&&l.id,e,null,new Yi(n)),s.integrate(t,0);break;default:if(!(n instanceof ri))throw new Error("Unexpected content type in insert operation");s=new yc(Js(i,uo(c,i)),s,s&&s.lastId,l,l&&l.id,e,null,new pc(n)),s.integrate(t,0)}}}),h()},di=()=>Ae("Length exceeded!"),ui=(t,e,n,r)=>{if(n>e._length)throw di();if(0===n)return e._searchMarker&&ei(e._searchMarker,n,r.length),hi(t,e,null,r);const s=n,o=ti(e,n);let i=e._start;for(null!==o&&(i=o.p,0===(n-=o.index)&&(i=i.prev,n+=i&&i.countable&&!i.deleted?i.length:0));null!==i;i=i.right)if(!i.deleted&&i.countable){if(n<=i.length){n<i.length&&wo(t,Js(i.id.client,i.id.clock+n));break}n-=i.length}return e._searchMarker&&ei(e._searchMarker,s,r.length),hi(t,e,i,r)},pi=(t,e,n,r)=>{if(0===r)return;const s=n,o=r,i=ti(e,n);let c=e._start;for(null!==i&&(c=i.p,n-=i.index);null!==c&&n>0;c=c.right)!c.deleted&&c.countable&&(n<c.length&&wo(t,Js(c.id.client,c.id.clock+n)),n-=c.length);for(;r>0&&null!==c;)c.deleted||(r<c.length&&wo(t,Js(c.id.client,c.id.clock+r)),c.delete(t),r-=c.length),c=c.right;if(r>0)throw di();e._searchMarker&&ei(e._searchMarker,s,-o+r)},fi=(t,e,n)=>{const r=e._map.get(n);void 0!==r&&r.delete(t)},gi=(t,e,n,r)=>{const s=e._map.get(n)||null,o=t.doc,i=o.clientID;let c;if(null==r)c=new rc([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:c=new rc([r]);break;case Uint8Array:c=new Ki(r);break;case vs:c=new Yi(r);break;default:if(!(r instanceof ri))throw new Error("Unexpected content type");c=new pc(r)}new yc(Js(i,uo(o.store,i)),s,s&&s.lastId,null,null,e,n,c).integrate(t,0)},mi=(t,e)=>{t.doc??Ho();const n=t._map.get(e);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},wi=t=>{const e={};return t.doc??Ho(),t._map.forEach((t,n)=>{t.deleted||(e[n]=t.content.getContent()[t.length-1])}),e},ki=(t,e)=>{t.doc??Ho();const n=t._map.get(e);return void 0!==n&&!n.deleted},yi=(t,e)=>{const n={};return t._map.forEach((t,r)=>{let s=t;for(;null!==s&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;null!==s&&co(s,e)&&(n[r]=s.content.getContent()[s.length-1])}),n},bi=t=>{return t.doc??Ho(),e=t._map.entries(),n=t=>!t[1].deleted,ls(()=>{let t;do{t=e.next()}while(!t.done&&!n(t.value));return t});var e,n};class Wi extends Jo{}class Si extends ri{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Si;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Si}clone(){const t=new Si;return t.insert(0,this.toArray().map(t=>t instanceof ri?t.clone():t)),t}get length(){return this.doc??Ho(),this._length}_callObserver(t,e){super._callObserver(t,e),ni(this,t,new Wi(this,t))}insert(t,e){null!==this.doc?Eo(this.doc,n=>{ui(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){null!==this.doc?Eo(this.doc,e=>{((t,e,n)=>{let r=(e._searchMarker||[]).reduce((t,e)=>e.index>t.index?e:t,{index:0,p:e._start}).p;if(r)for(;r.right;)r=r.right;hi(t,e,r,n)})(e,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){null!==this.doc?Eo(this.doc,n=>{pi(n,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return ai(this,t)}toArray(){return oi(this)}slice(t=0,e=this.length){return si(this,t,e)}toJSON(){return this.map(t=>t instanceof ri?t.toJSON():t)}map(t){return ci(this,t)}forEach(t){ii(this,t)}[Symbol.iterator](){return li(this)}_write(t){t.writeTypeRef(ic)}}class Ci extends Jo{constructor(t,e,n){super(t,e),this.keysChanged=n}}class vi extends ri{constructor(t){super(),this._prelimContent=null,this._prelimContent=void 0===t?new Map:new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((t,e)=>{this.set(e,t)}),this._prelimContent=null}_copy(){return new vi}clone(){const t=new vi;return this.forEach((e,n)=>{t.set(n,e instanceof ri?e.clone():e)}),t}_callObserver(t,e){ni(this,t,new Ci(this,t,e))}toJSON(){this.doc??Ho();const t={};return this._map.forEach((e,n)=>{if(!e.deleted){const r=e.content.getContent()[e.length-1];t[n]=r instanceof ri?r.toJSON():r}}),t}get size(){return[...bi(this)].length}keys(){return as(bi(this),t=>t[0])}values(){return as(bi(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return as(bi(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??Ho(),this._map.forEach((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(t){null!==this.doc?Eo(this.doc,e=>{fi(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return null!==this.doc?Eo(this.doc,n=>{gi(n,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return mi(this,t)}has(t){return ki(this,t)}clear(){null!==this.doc?Eo(this.doc,t=>{this.forEach(function(e,n,r){fi(t,r,n)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(cc)}}const xi=(t,e)=>t===e||"object"==typeof t&&"object"==typeof e&&t&&e&&((t,e)=>t===e||fn(t)===fn(e)&&gn(t,(t,n)=>(void 0!==t||mn(e,n))&&dn(e[n],t)))(t,e);class _i{constructor(t,e,n,r){this.left=t,this.right=e,this.index=n,this.currentAttributes=r}forward(){if(null===this.right&&Pe(),this.right.content.constructor===tc)this.right.deleted||Mi(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}const Ei=(t,e,n)=>{for(;null!==e.right&&n>0;){if(e.right.content.constructor===tc)e.right.deleted||Mi(e.currentAttributes,e.right.content);else e.right.deleted||(n<e.right.length&&wo(t,Js(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);e.left=e.right,e.right=e.right.right}return e},Di=(t,e,n,r)=>{const s=new Map,o=r?ti(e,n):null;if(o){const e=new _i(o.p.left,o.p,o.index,s);return Ei(t,e,n-o.index)}{const r=new _i(null,e._start,0,s);return Ei(t,r,n)}},Ii=(t,e,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===tc&&xi(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const s=t.doc,o=s.clientID;r.forEach((r,i)=>{const c=n.left,l=n.right,a=new yc(Js(o,uo(s.store,o)),c,c&&c.lastId,l,l&&l.id,e,null,new tc(i,r));a.integrate(t,0),n.right=a,n.forward()})},Mi=(t,e)=>{const{key:n,value:r}=e;null===r?t.delete(n):t.set(n,r)},Oi=(t,e)=>{for(;null!==t.right&&(t.right.deleted||t.right.content.constructor===tc&&xi(e[t.right.content.key]??null,t.right.content.value));)t.forward()},Ri=(t,e,n,r)=>{const s=t.doc,o=s.clientID,i=new Map;for(const c in r){const l=r[c],a=n.currentAttributes.get(c)??null;if(!xi(a,l)){i.set(c,a);const{left:r,right:h}=n;n.right=new yc(Js(o,uo(s.store,o)),r,r&&r.lastId,h,h&&h.id,e,null,new tc(c,l)),n.right.integrate(t,0),n.forward()}}return i},Ai=(t,e,n,r,s)=>{n.currentAttributes.forEach((t,e)=>{void 0===s[e]&&(s[e]=null)});const o=t.doc,i=o.clientID;Oi(n,s);const c=Ri(t,e,n,s),l=r.constructor===String?new sc(r):r instanceof ri?new pc(r):new Zi(r);let{left:a,right:h,index:d}=n;e._searchMarker&&ei(e._searchMarker,n.index,l.getLength()),h=new yc(Js(i,uo(o.store,i)),a,a&&a.lastId,h,h&&h.id,e,null,l),h.integrate(t,0),n.right=h,n.index=d,n.forward(),Ii(t,e,n,c)},Ni=(t,e,n,r,s)=>{const o=t.doc,i=o.clientID;Oi(n,s);const c=Ri(t,e,n,s);t:for(;null!==n.right&&(r>0||c.size>0&&(n.right.deleted||n.right.content.constructor===tc));){if(!n.right.deleted)switch(n.right.content.constructor){case tc:{const{key:e,value:o}=n.right.content,i=s[e];if(void 0!==i){if(xi(i,o))c.delete(e);else{if(0===r)break t;c.set(e,o)}n.right.delete(t)}else n.currentAttributes.set(e,o);break}default:r<n.right.length&&wo(t,Js(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let s="";for(;r>0;r--)s+="\n";n.right=new yc(Js(i,uo(o.store,i)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new sc(s)),n.right.integrate(t,0),n.forward()}Ii(t,e,n,c)},Pi=(t,e,n,r,s)=>{let o=e;const i=$t();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===tc){const t=o.content;i.set(t.key,t)}o=o.right}let c=0,l=!1;for(;e!==o;){if(n===e&&(l=!0),!e.deleted){const n=e.content;switch(n.constructor){case tc:{const{key:o,value:a}=n,h=r.get(o)??null;i.get(o)===n&&h!==a||(e.delete(t),c++,l||(s.get(o)??null)!==a||h===a||(null===h?s.delete(o):s.set(o,h))),l||e.deleted||Mi(s,n);break}}}e=e.right}return c},$i=t=>{let e=0;return Eo(t.doc,n=>{let r=t._start,s=t._start,o=$t();const i=Tt(o);for(;s;){if(!1===s.deleted)if(s.content.constructor===tc)Mi(i,s.content);else e+=Pi(n,r,s,o,i),o=Tt(i),r=s;s=s.right}}),e},Ti=t=>{const e=new Set,n=t.doc;for(const[r,s]of t.afterState.entries()){const o=t.beforeState.get(r)||0;s!==o&&yo(t,n.store.clients.get(r),o,s,t=>{t.deleted||t.content.constructor!==tc||t.constructor===Ji||e.add(t.parent)})}Eo(n,n=>{us(t,t.deleteSet,t=>{if(t instanceof Ji||!t.parent._hasFormatting||e.has(t.parent))return;const r=t.parent;t.content.constructor===tc?e.add(r):((t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===tc){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}})(n,t)});for(const t of e)$i(t)})},Li=(t,e,n)=>{const r=n,s=Tt(e.currentAttributes),o=e.right;for(;n>0&&null!==e.right;){if(!1===e.right.deleted)switch(e.right.content.constructor){case pc:case Zi:case sc:n<e.right.length&&wo(t,Js(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t)}e.forward()}o&&Pi(t,o,e.right,s,e.currentAttributes);const i=(e.left||e.right).parent;return i._searchMarker&&ei(i._searchMarker,e.index,-r+n),e};class Ui extends Jo{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(t=>{null===t?this.childListChanged=!0:this.keysChanged.add(t)})}get changes(){if(null===this._changes){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(null===this._delta){const t=this.target.doc,e=[];Eo(t,t=>{const n=new Map,r=new Map;let s=this.target._start,o=null;const i={};let c="",l=0,a=0;const h=()=>{if(null!==o){let t=null;switch(o){case"delete":a>0&&(t={delete:a}),a=0;break;case"insert":("object"==typeof c||c.length>0)&&(t={insert:c},n.size>0&&(t.attributes={},n.forEach((e,n)=>{null!==e&&(t.attributes[n]=e)}))),c="";break;case"retain":l>0&&(t={retain:l},(t=>{for(const e in t)return!1;return!0})(i)||(t.attributes=un({},i))),l=0}t&&e.push(t),o=null}};for(;null!==s;){switch(s.content.constructor){case pc:case Zi:this.adds(s)?this.deletes(s)||(h(),o="insert",c=s.content.getContent()[0],h()):this.deletes(s)?("delete"!==o&&(h(),o="delete"),a+=1):s.deleted||("retain"!==o&&(h(),o="retain"),l+=1);break;case sc:this.adds(s)?this.deletes(s)||("insert"!==o&&(h(),o="insert"),c+=s.content.str):this.deletes(s)?("delete"!==o&&(h(),o="delete"),a+=s.length):s.deleted||("retain"!==o&&(h(),o="retain"),l+=s.length);break;case tc:{const{key:e,value:c}=s.content;if(this.adds(s)){if(!this.deletes(s)){const l=n.get(e)??null;xi(l,c)?null!==c&&s.delete(t):("retain"===o&&h(),xi(c,r.get(e)??null)?delete i[e]:i[e]=c)}}else if(this.deletes(s)){r.set(e,c);const t=n.get(e)??null;xi(t,c)||("retain"===o&&h(),i[e]=t)}else if(!s.deleted){r.set(e,c);const n=i[e];void 0!==n&&(xi(n,c)?null!==n&&s.delete(t):("retain"===o&&h(),null===c?delete i[e]:i[e]=c))}s.deleted||("insert"===o&&h(),Mi(n,s.content));break}}s=s.right}for(h();e.length>0;){const t=e[e.length-1];if(void 0===t.retain||void 0!==t.attributes)break;e.pop()}}),this._delta=e}return this._delta}}class zi extends ri{constructor(t){super(),this._pending=void 0!==t?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Ho(),this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(t=>t())}catch(Vc){console.error(Vc)}this._pending=null}_copy(){return new zi}clone(){const t=new zi;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new Ui(this,t,e);ni(this,t,n),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??Ho();let t="",e=this._start;for(;null!==e;)!e.deleted&&e.countable&&e.content.constructor===sc&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){null!==this.doc?Eo(this.doc,n=>{const r=new _i(null,this._start,0,new Map);for(let s=0;s<t.length;s++){const o=t[s];if(void 0!==o.insert){const i=e||"string"!=typeof o.insert||s!==t.length-1||null!==r.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!=typeof i||i.length>0)&&Ai(n,this,r,i,o.attributes||{})}else void 0!==o.retain?Ni(n,this,r,o.retain,o.attributes||{}):void 0!==o.delete&&Li(n,r,o.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,n){this.doc??Ho();const r=[],s=new Map,o=this.doc;let i="",c=this._start;function l(){if(i.length>0){const t={};let e=!1;s.forEach((n,r)=>{e=!0,t[r]=n});const n={insert:i};e&&(n.attributes=t),r.push(n),i=""}}const a=()=>{for(;null!==c;){if(co(c,t)||void 0!==e&&co(c,e))switch(c.content.constructor){case sc:{const r=s.get("ychange");void 0===t||co(c,t)?void 0===e||co(c,e)?void 0!==r&&(l(),s.delete("ychange")):void 0!==r&&r.user===c.id.client&&"added"===r.type||(l(),s.set("ychange",n?n("added",c.id):{type:"added"})):void 0!==r&&r.user===c.id.client&&"removed"===r.type||(l(),s.set("ychange",n?n("removed",c.id):{type:"removed"})),i+=c.content.str;break}case pc:case Zi:{l();const t={insert:c.content.getContent()[0]};if(s.size>0){const e={};t.attributes=e,s.forEach((t,n)=>{e[n]=t})}r.push(t);break}case tc:co(c,t)&&(l(),Mi(s,c.content))}c=c.right}l()};return t||e?Eo(o,n=>{t&&lo(n,t),e&&lo(n,e),a()},"cleanup"):a(),r}insert(t,e,n){if(e.length<=0)return;const r=this.doc;null!==r?Eo(r,r=>{const s=Di(r,this,t,!n);n||(n={},s.currentAttributes.forEach((t,e)=>{n[e]=t})),Ai(r,this,s,e,n)}):this._pending.push(()=>this.insert(t,e,n))}insertEmbed(t,e,n){const r=this.doc;null!==r?Eo(r,r=>{const s=Di(r,this,t,!n);Ai(r,this,s,e,n||{})}):this._pending.push(()=>this.insertEmbed(t,e,n||{}))}delete(t,e){if(0===e)return;const n=this.doc;null!==n?Eo(n,n=>{Li(n,Di(n,this,t,!0),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,n){if(0===e)return;const r=this.doc;null!==r?Eo(r,r=>{const s=Di(r,this,t,!1);null!==s.right&&Ni(r,this,s,e,n)}):this._pending.push(()=>this.format(t,e,n))}removeAttribute(t){null!==this.doc?Eo(this.doc,e=>{fi(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){null!==this.doc?Eo(this.doc,n=>{gi(n,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return mi(this,t)}getAttributes(){return wi(this)}_write(t){t.writeTypeRef(lc)}}class Gi{constructor(t,e=()=>!0){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??Ho()}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(null!==t&&(!this._firstCall||t.deleted||!this._filter(e)))do{if(e=t.content.type,t.deleted||e.constructor!==Bi&&e.constructor!==Vi||null===e._start)for(;null!==t;){const e=t.next;if(null!==e){t=e;break}t=t.parent===this._root?null:t.parent._item}else t=e._start}while(null!==t&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,null===t?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class Vi extends ri{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Vi}clone(){const t=new Vi;return t.insert(0,this.toArray().map(t=>t instanceof ri?t.clone():t)),t}get length(){return this.doc??Ho(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(t){return new Gi(this,t)}querySelector(t){t=t.toUpperCase();const e=new Gi(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t).next();return e.done?null:e.value}querySelectorAll(t){return t=t.toUpperCase(),Vt(new Gi(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){ni(this,t,new Qi(this,e,t))}toString(){return ci(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const r=t.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),ii(this,s=>{r.insertBefore(s.toDOM(t,e,n),null)}),r}insert(t,e){null!==this.doc?Eo(this.doc,n=>{ui(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(null!==this.doc)Eo(this.doc,n=>{const r=t&&t instanceof ri?t._item:t;hi(n,this,r,e)});else{const n=this._prelimContent,r=null===t?0:n.findIndex(e=>e===t)+1;if(0===r&&null!==t)throw Ae("Reference item not found");n.splice(r,0,...e)}}delete(t,e=1){null!==this.doc?Eo(this.doc,n=>{pi(n,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return oi(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return ai(this,t)}slice(t=0,e=this.length){return si(this,t,e)}forEach(t){ii(this,t)}_write(t){t.writeTypeRef(hc)}}class Bi extends Vi{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((t,e)=>{this.setAttribute(e,t)}),this._prelimAttrs=null}_copy(){return new Bi(this.nodeName)}clone(){const t=new Bi(this.nodeName);return((t,e)=>{for(const n in t)e(t[n],n)})(this.getAttributes(),(e,n)=>{t.setAttribute(n,e)}),t.insert(0,this.toArray().map(t=>t instanceof ri?t.clone():t)),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const o in t)n.push(o);n.sort();const r=n.length;for(let o=0;o<r;o++){const r=n[o];e.push(r+'="'+t[r]+'"')}const s=this.nodeName.toLocaleLowerCase();return`<${s}${e.length>0?" "+e.join(" "):""}>${super.toString()}</${s}>`}removeAttribute(t){null!==this.doc?Eo(this.doc,e=>{fi(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){null!==this.doc?Eo(this.doc,n=>{gi(n,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return mi(this,t)}hasAttribute(t){return ki(this,t)}getAttributes(t){return t?yi(this,t):wi(this)}toDOM(t=document,e={},n){const r=t.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const t=s[o];"string"==typeof t&&r.setAttribute(o,t)}return ii(this,s=>{r.appendChild(s.toDOM(t,e,n))}),void 0!==n&&n._createAssociation(r,this),r}_write(t){t.writeTypeRef(ac),t.writeKey(this.nodeName)}}class Qi extends Jo{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(t=>{null===t?this.childListChanged=!0:this.attributesChanged.add(t)})}}class ji extends vi{constructor(t){super(),this.hookName=t}_copy(){return new ji(this.hookName)}clone(){const t=new ji(this.hookName);return this.forEach((e,n)=>{t.set(n,e)}),t}toDOM(t=document,e={},n){const r=e[this.hookName];let s;return s=void 0!==r?r.createDom(this):document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(s,this),s}_write(t){t.writeTypeRef(dc),t.writeKey(this.hookName)}}class Fi extends zi{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new Fi}clone(){const t=new Fi;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const r=t.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map(t=>{const e=[];for(const r in t.attributes){const n=[];for(const e in t.attributes[r])n.push({key:e,value:t.attributes[r][e]});n.sort((t,e)=>t.key<e.key?-1:1),e.push({nodeName:r,attrs:n})}e.sort((t,e)=>t.nodeName<e.nodeName?-1:1);let n="";for(let r=0;r<e.length;r++){const t=e[r];n+=`<${t.nodeName}`;for(let e=0;e<t.attrs.length;e++){const r=t.attrs[e];n+=` ${r.key}="${r.value}"`}n+=">"}n+=t.insert;for(let r=e.length-1;r>=0;r--)n+=`</${e[r].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(uc)}}class qi{constructor(t,e){this.id=t,this.length=e}get deleted(){throw Ne()}mergeWith(t){return!1}write(t,e,n){throw Ne()}integrate(t,e){throw Ne()}}class Ji extends qi{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),po(t.doc.store,this)}write(t,e){t.writeInfo(0),t.writeLen(this.length-e)}getMissing(t,e){return null}}class Ki{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Ki(this.content)}splice(t){throw Ne()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}class Hi{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Hi(this.len)}splice(t){const e=new Hi(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){ms(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const Xi=(t,e)=>new vs({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Yi{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),null!==t.meta&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Yi(Xi(this.doc.guid,this.opts))}splice(t){throw Ne()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}class Zi{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Zi(this.embed)}splice(t){throw Ne()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}class tc{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new tc(this.key,this.value)}splice(t){throw Ne()}mergeWith(t){return!1}integrate(t,e){const n=e.parent;n._searchMarker=null,n._hasFormatting=!0}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}class ec{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ec(this.arr)}splice(t){const e=new ec(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeString(void 0===e?"undefined":JSON.stringify(e))}}getRef(){return 2}}const nc="development"===_n("node_env");class rc{constructor(t){this.arr=t,nc&&kn(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new rc(this.arr)}splice(t){const e=new rc(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeAny(e)}}getRef(){return 8}}class sc{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new sc(this.str)}splice(t){const e=new sc(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"",e.str=""+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(0===e?this.str:this.str.slice(e))}getRef(){return 4}}const oc=[t=>new Si,t=>new vi,t=>new zi,t=>new Bi(t.readKey()),t=>new Vi,t=>new ji(t.readKey()),t=>new Fi],ic=0,cc=1,lc=2,ac=3,hc=4,dc=5,uc=6;class pc{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new pc(this.type._copy())}splice(t){throw Ne()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;for(;null!==e;)e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(e=>{e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;for(;null!==e;)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(e=>{for(;null!==e;)e.gc(t,!0),e=e.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const fc=(t,e)=>{let n,r=e,s=0;do{s>0&&(r=Js(r.client,r.clock+s)),n=go(t,r),s=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof yc);return{item:n,diff:s}},gc=(t,e)=>{for(;null!==t&&t.keep!==e;)t.keep=e,t=t.parent._item},mc=(t,e,n)=>{const{client:r,clock:s}=e.id,o=new yc(Js(r,s+n),e,Js(r,s+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),null!==e.redone&&(o.redone=Js(e.redone.client,e.redone.clock+n)),e.right=o,null!==o.right&&(o.right.left=o),t._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),e.length=n,o},wc=(t,e)=>Qt(t,t=>ps(t.deletions,e)),kc=(t,e,n,r,s,o)=>{const i=t.doc,c=i.store,l=i.clientID,a=e.redone;if(null!==a)return wo(t,a);let h,d=e.parent._item,u=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===kc(t,d,n,r,s,o)))return null;for(;null!==d.redone;)d=wo(t,d.redone)}const p=null===d?e.parent:d.content.type;if(null===e.parentSub){for(u=e.left,h=e;null!==u;){let e=u;for(;null!==e&&e.parent._item!==d;)e=null===e.redone?null:wo(t,e.redone);if(null!==e&&e.parent._item===d){u=e;break}u=u.left}for(;null!==h;){let e=h;for(;null!==e&&e.parent._item!==d;)e=null===e.redone?null:wo(t,e.redone);if(null!==e&&e.parent._item===d){h=e;break}h=h.right}}else if(h=null,e.right&&!s){for(u=e;null!==u&&null!==u.right&&(u.right.redone||ps(r,u.right.id)||wc(o.undoStack,u.right.id)||wc(o.redoStack,u.right.id));)for(u=u.right;u.redone;)u=wo(t,u.redone);if(u&&null!==u.right)return null}else u=p._map.get(e.parentSub)||null;const f=uo(c,l),g=Js(l,f),m=new yc(g,u,u&&u.lastId,h,h&&h.id,p,e.parentSub,e.content.copy());return e.redone=g,gc(m,!0),m.integrate(t,0),m};class yc extends qi{constructor(t,e,n,r,s,o,i,c){super(t,c.getLength()),this.origin=n,this.left=e,this.right=r,this.rightOrigin=s,this.parent=o,this.parentSub=i,this.redone=null,this.content=c,this.info=this.content.isCountable()?2:0}set marker(t){(8&this.info)>0!==t&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(t){this.keep!==t&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(t){this.deleted!==t&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=uo(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=uo(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Fs&&this.id.client!==this.parent.client&&this.parent.clock>=uo(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ko(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=wo(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Ji||this.right&&this.right.constructor===Ji)this.parent=null;else if(this.parent){if(this.parent.constructor===Fs){const t=go(e,this.parent);t.constructor===Ji?this.parent=null:this.parent=t.content.type}}else this.left&&this.left.constructor===yc?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===yc&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=ko(t,t.doc.store,Js(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let e,n=this.left;if(null!==n)e=n.right;else if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start;const r=new Set,s=new Set;for(;null!==e&&e!==this.right;){if(s.add(e),r.add(e),qs(this.origin,e.origin)){if(e.id.client<this.id.client)n=e,r.clear();else if(qs(this.rightOrigin,e.rightOrigin))break}else{if(null===e.origin||!s.has(go(t.doc.store,e.origin)))break;r.has(go(t.doc.store,e.origin))||(n=e,r.clear())}e=e.right}this.left=n}if(null!==this.left){const t=this.left.right;this.right=t,this.left.right=this}else{let t;if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start,this.parent._start=this;this.right=t}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(t)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),po(t.doc.store,this),this.content.integrate(t,this),So(t,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(t)}else new Ji(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;null!==t&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;null!==t&&t.deleted;)t=t.left;return t}get lastId(){return 1===this.length?this.id:Js(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&qs(t.origin,this.lastId)&&this.right===t&&qs(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&null===this.redone&&null===t.redone&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach(e=>{e.p===t&&(e.p=this,!this.deleted&&this.countable&&(e.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,null!==this.right&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&null===this.parentSub&&(e._length-=this.length),this.markDeleted(),ms(t.deleteSet,this.id.client,this.id.clock,this.length),So(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw Pe();this.content.gc(t),e?((t,e,n)=>{const r=t.clients.get(e.id.client);r[fo(r,e.id.clock)]=n})(t,this,new Ji(this.id,this.length)):this.content=new Hi(this.length)}write(t,e){const n=e>0?Js(this.id.client,this.id.clock+e-1):this.origin,r=this.rightOrigin,s=this.parentSub,o=31&this.content.getRef()|(null===n?0:Zt)|(null===r?0:Yt)|(null===s?0:32);if(t.writeInfo(o),null!==n&&t.writeLeftID(n),null!==r&&t.writeRightID(r),null===n&&null===r){const e=this.parent;if(void 0!==e._item){const n=e._item;if(null===n){const n=Xs(e);t.writeParentInfo(!0),t.writeString(n)}else t.writeParentInfo(!1),t.writeLeftID(n.id)}else e.constructor===String?(t.writeParentInfo(!0),t.writeString(e)):e.constructor===Fs?(t.writeParentInfo(!1),t.writeLeftID(e)):Pe();null!==s&&t.writeString(s)}this.content.write(t,e)}}const bc=(t,e)=>Wc[31&e](t),Wc=[()=>{Pe()},t=>new Hi(t.readLen()),t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const e=t.readString();"undefined"===e?n.push(void 0):n.push(JSON.parse(e))}return new ec(n)},t=>new Ki(t.readBuf()),t=>new sc(t.readString()),t=>new Zi(t.readJSON()),t=>new tc(t.readKey(),t.readJSON()),t=>new pc(oc[t.readTypeRef()](t)),t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new rc(n)},t=>new Yi(Xi(t.readString(),t.readAny())),()=>{Pe()}];class Sc extends qi{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){Pe()}write(t,e){t.writeInfo(10),we(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const Cc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},vc="__ $YJS$ __";!0===Cc[vc]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Cc[vc]=!0;const xc=Object.freeze(Object.defineProperty({__proto__:null,AbsolutePosition:to,AbstractConnector:class extends Ft{constructor(t,e){super(),this.doc=t,this.awareness=e}},AbstractStruct:qi,AbstractType:ri,Array:Si,ContentAny:rc,ContentBinary:Ki,ContentDeleted:Hi,ContentDoc:Yi,ContentEmbed:Zi,ContentFormat:tc,ContentJSON:ec,ContentString:sc,ContentType:pc,Doc:vs,GC:Ji,ID:Fs,Item:yc,Map:vi,PermanentUserData:class{constructor(t,e=t.getMap("users")){const n=new Map;this.yusers=e,this.doc=t,this.clients=new Map,this.dss=n;const r=(t,e)=>{const n=t.get("ds"),r=t.get("ids"),s=t=>this.clients.set(t,e);n.observe(t=>{t.changes.added.forEach(t=>{t.content.getContent().forEach(t=>{t instanceof Uint8Array&&this.dss.set(e,gs([this.dss.get(e)||ws(),bs(new xs(Ue(t)))]))})})}),this.dss.set(e,gs(n.map(t=>bs(new xs(Ue(t)))))),r.observe(t=>t.changes.added.forEach(t=>t.content.getContent().forEach(s))),r.forEach(s)};e.observe(t=>{t.keysChanged.forEach(t=>r(e.get(t),t))}),e.forEach(r)}setUserMapping(t,e,n,{filter:r=()=>!0}={}){const s=this.yusers;let o=s.get(n);o||(o=new vi,o.set("ids",new Si),o.set("ds",new Si),s.set(n,o)),o.get("ids").push([e]),s.observe(t=>{setTimeout(()=>{const t=s.get(n);if(t!==o){o=t,this.clients.forEach((t,e)=>{n===t&&o.get("ids").push([e])});const e=new Is,r=this.dss.get(n);r&&(ys(e,r),o.get("ds").push([e.toUint8Array()]))}},0)}),t.on("afterTransaction",t=>{setTimeout(()=>{const e=o.get("ds"),n=t.deleteSet;if(t.local&&n.clients.size>0&&r(t,n)){const t=new Is;ys(t,n),e.push([t.toUint8Array()])}})})}getUserByClientId(t){return this.clients.get(t)||null}getUserByDeletedId(t){for(const[e,n]of this.dss.entries())if(ps(n,t))return e;return null}},RelativePosition:Zs,Skip:Sc,Snapshot:no,Text:zi,Transaction:bo,UndoManager:class extends Ft{constructor(t,{captureTimeout:e=500,captureTransaction:n=t=>!0,deleteFilter:r=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:i=(jt(t)?t[0].doc:t instanceof vs?t:t.doc)}={}){super(),this.scope=[],this.doc=i,this.addToScope(t),this.deleteFilter=r,s.add(this),this.trackedOrigins=s,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=e,this.afterTransactionHandler=t=>{if(!(this.captureTransaction(t)&&this.scope.some(e=>t.changedParentTypes.has(e)||e===this.doc)&&(this.trackedOrigins.has(t.origin)||t.origin&&this.trackedOrigins.has(t.origin.constructor))))return;const e=this.undoing,n=this.redoing,r=e?this.redoStack:this.undoStack;e?this.stopCapturing():n||this.clear(!1,!0);const s=new ds;t.afterState.forEach((e,n)=>{const r=t.beforeState.get(n)||0,o=e-r;o>0&&ms(s,n,r,o)});const o=rn();let i=!1;if(this.lastChange>0&&o-this.lastChange<this.captureTimeout&&r.length>0&&!e&&!n){const e=r[r.length-1];e.deletions=gs([e.deletions,t.deleteSet]),e.insertions=gs([e.insertions,s])}else r.push(new Do(t.deleteSet,s)),i=!0;e||n||(this.lastChange=o),us(t,t.deleteSet,e=>{e instanceof yc&&this.scope.some(n=>n===t.doc||Ys(n,e))&&gc(e,!0)});const c=[{stackItem:r[r.length-1],origin:t.origin,type:e?"redo":"undo",changedParentTypes:t.changedParentTypes},this];i?this.emit("stack-item-added",c):this.emit("stack-item-updated",c)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(t){const e=new Set(this.scope);(t=jt(t)?t:[t]).forEach(t=>{e.has(t)||(e.add(t),(t instanceof ri?t.doc!==this.doc:t!==this.doc)&&is("[yjs#509] Not same Y.Doc"),this.scope.push(t))})}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}clear(t=!0,e=!0){(t&&this.canUndo()||e&&this.canRedo())&&this.doc.transact(n=>{t&&(this.undoStack.forEach(t=>Io(n,this,t)),this.undoStack=[]),e&&(this.redoStack.forEach(t=>Io(n,this,t)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:e}])})}stopCapturing(){this.lastChange=0}undo(){let t;this.undoing=!0;try{t=Mo(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){let t;this.redoing=!0;try{t=Mo(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}},UpdateDecoderV1:_s,UpdateDecoderV2:Ds,UpdateEncoderV1:Ms,UpdateEncoderV2:Rs,XmlElement:Bi,XmlFragment:Vi,XmlHook:ji,XmlText:Fi,YArrayEvent:Wi,YEvent:Jo,YMapEvent:Ci,YTextEvent:Ui,YXmlEvent:Qi,applyUpdate:(t,e,n)=>Ps(t,e,n,_s),applyUpdateV2:Ps,cleanupYTextFormatting:$i,compareIDs:qs,compareRelativePositions:(t,e)=>t===e||null!==t&&null!==e&&t.tname===e.tname&&qs(t.item,e.item)&&qs(t.type,e.type)&&t.assoc===e.assoc,convertUpdateFormatV1ToV2:t=>Qo(t,bn,_s,Rs),convertUpdateFormatV2ToV1:Fo,createAbsolutePositionFromRelativePosition:(t,e,n=!0)=>{const r=e.store,s=t.item,o=t.type,i=t.tname,c=t.assoc;let l=null,a=0;if(null!==s){if(uo(r,s.client)<=s.clock)return null;const t=n?fc(r,s):((t,e)=>{const n=go(t,e);return{item:n,diff:e.clock-n.id.clock}})(r,s),e=t.item;if(!(e instanceof yc))return null;if(l=e.parent,null===l._item||!l._item.deleted){a=e.deleted||!e.countable?0:t.diff+(c>=0?0:1);let n=e.left;for(;null!==n;)!n.deleted&&n.countable&&(a+=n.length),n=n.left}}else{if(null!==i)l=e.get(i);else{if(null===o)throw Pe();{if(uo(r,o.client)<=o.clock)return null;const{item:t}=n?fc(r,o):{item:go(r,o)};if(!(t instanceof yc&&t.content instanceof pc))return null;l=t.content.type}}a=c>=0?l._length:0}return((t,e,n=0)=>new to(t,e,n))(l,a,t.assoc)},createDeleteSet:ws,createDeleteSetFromStructStore:ks,createDocFromSnapshot:(t,e,n=new vs)=>{if(t.gc)throw new Error("Garbage-collection must be disabled in `originDoc`!");const{sv:r,ds:s}=e,o=new Rs;return t.transact(e=>{let n=0;r.forEach(t=>{t>0&&n++}),we(o.restEncoder,n);for(const[s,i]of r){if(0===i)continue;i<uo(t.store,s)&&wo(e,Js(s,i));const n=t.store.clients.get(s)||[],r=fo(n,i-1);we(o.restEncoder,r+1),o.writeClient(s),we(o.restEncoder,0);for(let t=0;t<=r;t++)n[t].write(o,0)}ys(o,s)}),Ps(n,o.toUint8Array(),"snapshot"),n},createID:Js,createRelativePositionFromJSON:t=>new Zs(null==t.type?null:Js(t.type.client,t.type.clock),t.tname??null,null==t.item?null:Js(t.item.client,t.item.clock),null==t.assoc?0:t.assoc),createRelativePositionFromTypeIndex:(t,e,n=0)=>{let r=t._start;if(n<0){if(0===e)return eo(t,null,n);e--}for(;null!==r;){if(!r.deleted&&r.countable){if(r.length>e)return eo(t,Js(r.id.client,r.id.clock+e),n);e-=r.length}if(null===r.right&&n<0)return eo(t,r.lastId,n);r=r.right}return eo(t,null,n)},createSnapshot:oo,decodeRelativePosition:t=>(t=>{let e=null,n=null,r=null;switch(Be(t)){case 0:r=Hs(t);break;case 1:n=je(t);break;case 2:e=Hs(t)}const s=ze(t)?Qe(t):0;return new Zs(e,n,r,s)})(Ue(t)),decodeSnapshot:t=>so(t,new xs(Ue(t))),decodeSnapshotV2:so,decodeStateVector:Ls,decodeUpdate:t=>Ao(t,_s),decodeUpdateV2:Ao,diffUpdate:(t,e)=>zo(t,e,_s,Ms),diffUpdateV2:zo,emptySnapshot:io,encodeRelativePosition:t=>{const e=pe();return((t,e)=>{const{type:n,tname:r,item:s,assoc:o}=e;if(null!==s)we(t,0),Ks(t,s);else if(null!==r)me(t,1),We(t,r);else{if(null===n)throw Pe();me(t,2),Ks(t,n)}ke(t,o)})(e,t),fe(e)},encodeSnapshot:t=>ro(t,new Is),encodeSnapshotV2:ro,encodeStateAsUpdate:(t,e)=>$s(t,e,new Ms),encodeStateAsUpdateV2:$s,encodeStateVector:t=>zs(t,new Is),encodeStateVectorFromUpdate:t=>$o(t,Is,_s),encodeStateVectorFromUpdateV2:$o,equalDeleteSets:Ss,equalSnapshots:(t,e)=>{const n=t.ds.clients,r=e.ds.clients,s=t.sv,o=e.sv;if(s.size!==o.size||n.size!==r.size)return!1;for(const[i,c]of s.entries())if(o.get(i)!==c)return!1;for(const[i,c]of n.entries()){const t=r.get(i)||[];if(c.length!==t.length)return!1;for(let e=0;e<c.length;e++){const n=c[e],r=t[e];if(n.clock!==r.clock||n.len!==r.len)return!1}}return!0},findIndexSS:fo,findRootTypeKey:Xs,getItem:go,getItemCleanEnd:ko,getItemCleanStart:wo,getState:uo,getTypeChildren:t=>{t.doc??Ho();let e=t._start;const n=[];for(;e;)n.push(e),e=e.right;return n},isDeleted:ps,isParentOf:Ys,iterateDeletedStructs:us,logType:t=>{const e=[];let n=t._start;for(;n;)e.push(n),n=n.right;console.log("Children: ",e),console.log("Children content: ",e.filter(t=>!t.deleted).map(t=>t.content))},logUpdate:t=>Ro(t,_s),logUpdateV2:Ro,mergeDeleteSets:gs,mergeUpdates:Po,mergeUpdatesV2:Uo,obfuscateUpdate:(t,e)=>Qo(t,jo(e),_s,Ms),obfuscateUpdateV2:(t,e)=>Qo(t,jo(e),Ds,Rs),parseUpdateMeta:t=>To(t,_s),parseUpdateMetaV2:To,readUpdate:(t,e,n)=>Ns(t,e,n,new _s(t)),readUpdateV2:Ns,relativePositionToJSON:t=>{const e={};return t.type&&(e.type=t.type),t.tname&&(e.tname=t.tname),t.item&&(e.item=t.item),null!=t.assoc&&(e.assoc=t.assoc),e},snapshot:t=>oo(ks(t.store),ho(t.store)),snapshotContainsUpdate:(t,e)=>((t,e,n=Ds)=>{const r=new n(Ue(e)),s=new Oo(r,!1);for(let i=s.curr;null!==i;i=s.next())if((t.sv.get(i.id.client)||0)<i.id.clock+i.length)return!1;const o=gs([t.ds,bs(r)]);return Ss(t.ds,o)})(t,e,_s),transact:Eo,tryGc:(t,e,n)=>{vo(t,e,n),xo(t,e)},typeListToArraySnapshot:(t,e)=>{const n=[];let r=t._start;for(;null!==r;){if(r.countable&&co(r,e)){const t=r.content.getContent();for(let e=0;e<t.length;e++)n.push(t[e])}r=r.right}return n},typeMapGetAllSnapshot:yi,typeMapGetSnapshot:(t,e,n)=>{let r=t._map.get(e)||null;for(;null!==r&&(!n.sv.has(r.id.client)||r.id.clock>=(n.sv.get(r.id.client)||0));)r=r.left;return null!==r&&co(r,n)?r.content.getContent()[r.length-1]:void 0}},Symbol.toStringTag,{value:"Module"}));function _c(){const t=["W6ddVhSnWRJcQxFcLgO7bG","lSoMWOPXW6/dGKRcR1u","lSk8W4BdUmoRWPNdJM7cGq","ot03WPq5qItdH8k2W4m","W5KYed3dQmoRW7GoAMBcKW","xtxdLL3cOuySwIpdGmkO","oeeEDq","WPfzgfldK1NdPHW+WQu","eGVdU8oGWQxdTY0fW4hdKq","pHddGK4+W45bW7tdSmo8","a8kvomofWQZcLMXu","W5DicmklwmkEW74eWQ0u","W5agta7dOvJdJJ49WO13WOeqprO","WQVcQmkJgN5zWOm","wIlcHe/dNgWiW7NcGuGEnWffWRa6a0b9fWXUCCkf","h38KzCkT","h3evFCk6WQRdKHG","tJ7cMqBcNc8i","WRhcQZbpW7RcLvO","WOddTmkgW4JdImk/iHBdJW","eK/dNq","W4JdSuLYsJmFqmoov8kRpa4PWQC","hGNdUSoGW7pdKa4kW53dNmod","wt7cPahcGsOdW70","W4P+W4/dJ8kZW67dTtzli3yyiq","nGBcNGi","j8kOC3e","mtOWWPvRqJ7dV8khW7tcQW","o1inEmkI","gCoLWPldOvGZWRi","tmkTWQ/dVc/cNCoG","WOeptSowrG","wbGJWONdG8oze8oOjG","W4L/W4/cJ8oeWPpcOcPm","DvBdJIxcImoPeMFcKW","FrnFkmo0xmkIW7CwWRjcWPdcMW","l0KPwN7dRx4u","W7NcK8o3W6WxWONcNmkMACkt","hgtdGZ3cPsaPW5/cGa","oJSYWPvPpMNdMSkaW4BcRmocW4S","WO3cQH0OjMvpD8oBwmk8bcu","WPasB8onrSkoW6Cp","vMJdKtNcTGG","W4xdIKj5CbqpsSoUrq","sSk7yCkmWQi","W6lcJSoRW7bqW5NdGmoJaCoVs8oA","DvBdJf/cVCoci1JcMCoN","W6q/WOZcKG","WQxcGmk3WPJcKCknW7GxnCkxBW","wSo3FCkUW7xdJ8ojpq","WR/cR3ZdQIPsWPldRCk5Amoqu8osW4ddQa","eaK0yKa","oJKXW5yCqJZdJmkF","BCo7icylWRTSW7VdNmkBoG","W6S5abpdL8o4W7Cw","W6mNb8oYW7X3W4S","fCkOWR0","WQZcQIXy","WRLXgmkdmmozW5vgB0O","hfFcJGhdUumCrr7dGW","smo3W6RcO3VdG8kbDmoNbMmBWQm","W5ehta4","W4pdVxFdRmohy8knB8k+WP3dHW","krZdKf8YW4G","WRyVlw3cJfVcHa","uSkVFSkd","WR0WzCoLWReocbJdKCkEgCoPB8kBwSkpW7iuzYxcU8oNqSo6W69LemkRWPTivmkQ","WQ9zwwC"];return(_c=function(){return t})()}const Ec=Mc;!function(){const t=Mc,e=_c();for(;;)try{if(987095===-parseInt(t(383,"1DQ6"))/1*(-parseInt(t(341,")eZA"))/2)+-parseInt(t(371,"ypLv"))/3*(parseInt(t(342,"1sNX"))/4)+parseInt(t(405,"rb!N"))/5*(parseInt(t(367,"rb!N"))/6)+parseInt(t(356,"^36*"))/7*(-parseInt(t(347,"prNm"))/8)+parseInt(t(380,"i90d"))/9*(parseInt(t(359,"9qJ6"))/10)+parseInt(t(378,"9qJ6"))/11*(-parseInt(t(375,"x(5m"))/12)+parseInt(t(397,"1DQ6"))/13*(parseInt(t(386,"4Td6"))/14))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const Dc=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Mc(351,"Z!s^")](e,arguments);return n=null,t}}:function(){};return t=!1,r}}()(void 0,function(){const t=Mc;return Dc[t(398,"jpQg")]()[t(349,"2VVX")]("(((.+)+)+)+$")[t(348,"4Td6")]()[t(355,"VdDg")](Dc)[t(370,"xzWl")](t(352,"5p!u"))});Dc();const Ic=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Mc(358,"w)$F")](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function Mc(t,e){t-=340;const n=_c();let r=n[t];if(void 0===Mc.oqrvkq){var s=function(t){let e="",n="",r=e+s;for(let s,o,i=0,c=0;o=t.charAt(c++);~o&&(s=i%4?64*s+o:o,i++%4)?e+=r.charCodeAt(c+10)-10!=0?String.fromCharCode(255&s>>(-2*i&6)):i:0)o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(o);for(let s=0,o=e.length;s<o;s++)n+="%"+("00"+e.charCodeAt(s).toString(16)).slice(-2);return decodeURIComponent(n)};const t=function(t,e){let n,r,o=[],i=0,c="";for(t=s(t),r=0;r<256;r++)o[r]=r;for(r=0;r<256;r++)i=(i+o[r]+e.charCodeAt(r%e.length))%256,n=o[r],o[r]=o[i],o[i]=n;r=0,i=0;for(let s=0;s<t.length;s++)r=(r+1)%256,i=(i+o[r])%256,n=o[r],o[r]=o[i],o[i]=n,c+=String.fromCharCode(t.charCodeAt(s)^o[(o[r]+o[i])%256]);return c};Mc.IIwnzZ=t,Mc.yFtFyt={},Mc.oqrvkq=!0}const o=t+n[0],i=Mc.yFtFyt[o];if(i)r=i;else{if(void 0===Mc.ROpHqX){const t=function(t){this.mvQasL=t,this.NqYvdm=[1,0,0],this.zyPvcD=function(){return"newState"},this.OZtnHT="\\w+ *\\(\\) *{\\w+ *",this.eVTplQ="['|\"].+['|\"];? *}"};t.prototype.SfbTUQ=function(){const t=new RegExp(this.OZtnHT+this.eVTplQ).test(this.zyPvcD.toString())?--this.NqYvdm[1]:--this.NqYvdm[0];return this.SIVPeD(t)},t.prototype.SIVPeD=function(t){return Boolean(~t)?this.usMlgq(this.mvQasL):t},t.prototype.usMlgq=function(t){for(let e=0,n=this.NqYvdm.length;e<n;e++)this.NqYvdm.push(Math.round(Math.random())),n=this.NqYvdm.length;return t(this.NqYvdm[0])},new t(Mc).SfbTUQ(),Mc.ROpHqX=!0}r=Mc.IIwnzZ(r,e),Mc.yFtFyt[o]=r}return r}Ic(void 0,function(){const t=Mc,e=function(){const t=Mc;let e;try{e=Function("return (function() "+t(373,"tk7e")+");")()}catch(n){e=window}return e}(),n=e[t(388,"(XI2")]=e[t(392,"jpQg")]||{},r=[t(363,"rb!N"),t(381,"1sNX"),"info",t(406,"4Td6"),t(407,"^]uo"),t(390,"pHt5"),t(403,"1sNX")];for(let s=0;s<r.length;s++){const e=Ic.constructor[t(377,"DiRm")][t(354,"RAU)")](Ic),o=r[s],i=n[o]||e;e[t(394,"WlTT")]=Ic.bind(Ic),e[t(343,"Lc9v")]=i[t(391,"pHt5")][t(374,"DP[k")](i),n[o]=e}})(),Ec(389,"jpQg");class Oc{roomId;[Ec(372,"Z!s^")];provider;[Ec(366,"i90d")];[Ec(387,"84*z")];awareness;constructor(t,e){const n=Ec;this.roomId=t,this[n(364,"x(5m")]=new(xc[n(395,"zDZH")]),this[n(350,"prNm")]=this.ydoc[n(361,"kPVw")](n(376,"U*Zq")),this[n(396,"prNm")]=new(xc[n(379,"kPVw")])(this[n(365,"!ebR")])}[Ec(368,"84*z")](){this.todoUndoManager.undo()}[Ec(400,")eZA")](){const t=Ec;this[t(357,"KRSz")][t(401,"21pp")]()}[Ec(393,"x(5m")](){const t=Ec;this.provider?.[t(384,"xzWl")]()}}const Rc=Ac;function Ac(t,e){t-=323;const n=Nc();let r=n[t];if(void 0===Ac.MqXbMt){var s=function(t){let e="",n="",r=e+s;for(let s,o,i=0,c=0;o=t.charAt(c++);~o&&(s=i%4?64*s+o:o,i++%4)?e+=r.charCodeAt(c+10)-10!=0?String.fromCharCode(255&s>>(-2*i&6)):i:0)o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(o);for(let s=0,o=e.length;s<o;s++)n+="%"+("00"+e.charCodeAt(s).toString(16)).slice(-2);return decodeURIComponent(n)};const t=function(t,e){let n,r,o=[],i=0,c="";for(t=s(t),r=0;r<256;r++)o[r]=r;for(r=0;r<256;r++)i=(i+o[r]+e.charCodeAt(r%e.length))%256,n=o[r],o[r]=o[i],o[i]=n;r=0,i=0;for(let s=0;s<t.length;s++)r=(r+1)%256,i=(i+o[r])%256,n=o[r],o[r]=o[i],o[i]=n,c+=String.fromCharCode(t.charCodeAt(s)^o[(o[r]+o[i])%256]);return c};Ac.ZhqxMA=t,Ac.pQAIVr={},Ac.MqXbMt=!0}const o=t+n[0],i=Ac.pQAIVr[o];if(i)r=i;else{if(void 0===Ac.AYBTLt){const t=function(t){this.OFKyfZ=t,this.arpmyD=[1,0,0],this.kDGtlC=function(){return"newState"},this.taXREC="\\w+ *\\(\\) *{\\w+ *",this.BLJSyE="['|\"].+['|\"];? *}"};t.prototype.BVJSjV=function(){const t=new RegExp(this.taXREC+this.BLJSyE).test(this.kDGtlC.toString())?--this.arpmyD[1]:--this.arpmyD[0];return this.JTnxcl(t)},t.prototype.JTnxcl=function(t){return Boolean(~t)?this.srYbfX(this.OFKyfZ):t},t.prototype.srYbfX=function(t){for(let e=0,n=this.arpmyD.length;e<n;e++)this.arpmyD.push(Math.round(Math.random())),n=this.arpmyD.length;return t(this.arpmyD[0])},new t(Ac).BVJSjV(),Ac.AYBTLt=!0}r=Ac.ZhqxMA(r,e),Ac.pQAIVr[o]=r}return r}function Nc(){const t=["p8kKAJm","omkEuLtdH8opW6OEW5K5WRq","W4eTma","WR3cQebKWPqfWRj6WOq1BG","W6PwWOG","W5hcOwSY","smkveG","WOxcJLm","WQJcJSo3WQHrWO0dWRJdTW","WRbaWO8","WR3cKCkWWP7dUG","W53cVqZdIHGNW6mZ","fSkIA2K","WR9tWPrDiq","qxldNq","W6KxW4aSn8ogfCoKlcBcSaSU","WP3dPgJcILX8WRSMzbxdLSkVW4S","W4ldRbpcTa","FSo/hSkceq","WQ9IW5C1xIK","oCoeWPS","tmo9dI0","W7BdSmoonZLadmkGW6pdUM1RcW","W7BcTSkQmmkEW7y","l8kdxutdLG","W5PJFG","W7hdK8kSWR9YWO0","mumhcCoobdNdHW","WQjLk8kIdgG","WRdcHmkUWPxdT8kl","amk1pCoW","WOJcIu5kWPvE","W5xdMHmvW5mbl8o7WOGVd8kmWO4","qSoXdI5GlW","DeddQComleTsW75F","W7ujW582kSoDcmk/thBdKM4","WPvXzmoTWQ/cM3dcLCkHW6ej","rXq8","Bmo8iSkzevtcSCkT","W7j7c8kOrMW","WR3cQGGnW48DWRnt","W7/dRWiJ","zSoUW7DO","W7GlW4ejD8kVpM3dSgVdMYub","WPJcII9O","ECoNkMPbymoyW7rty2xcNq","W59BocC","W6VdStyyW5qwWObH","xmoHoG","W4lcTxq5cSohW4e5WR7dLmo5e0xcHa0VW7u","WQJcJSkpW4/dGru1WQBcRxNdIW","dmkpaW","WR1Ljmk3g2G","xSoKkZpdNColW53cH8oLWOH/","dfnNpCkzy8o8aHddUCkNWR4","W7X3WOqLxwe","w2RdQSow","CSkgW7GxDGFcMSonb8kFgJlcSwa1W7lcQW","WQD8WQyauuOV","W67dK8kJWQPLWO0","d8kthIu","WQzLWOu","W5NcVsG","WQmRW516gJfipbfLD8k3Ea","W5NcPYZdLG","eIFcMfXzW645tmksW67dKtHO","W5lcQCoGW7q","whBdTmool1zBW5HqWOvueM1U","e8kdaYOtDW","W53dUa/cP8kSbG","WOlcGe9cWPm","W50Tia","WQGoW4L5WQpcVSkUW4ldTYK4xmo8","WQDxWPHwmmo/","WQZcOHqMk8kxWOJdGSouWPtcOSo3WRhcM8oCtMacWOJcR8k3W4lcJmoM","wCo1eIC","ySoPW78","W47cUCo9W7T8WPK","WP/dPgZcJ1n7W6uGxbxdHSkJ","W49foq","W5P5ESkA","mKCXbmoipJxdHW","W5lcPwOU","W7RdL8orWO/cHraRWPxcKNRdLG","W63dMCk1","rSkteK3cUSktWRe","oCkyuKm","W54Roq","uh/dMq","lxSf","W7dcQmkXtxm0zG","W4bpjdtcU8kX","FbVcSG"];return(Nc=function(){return t})()}!function(){const t=Ac,e=Nc();for(;;)try{if(342227===parseInt(t(414,"lFC6"))/1*(-parseInt(t(366,"EkOA"))/2)+parseInt(t(410,"z@yY"))/3+-parseInt(t(405,"EkOA"))/4*(-parseInt(t(363,"bNRL"))/5)+-parseInt(t(350,"4qPA"))/6+-parseInt(t(375,"cVO6"))/7*(-parseInt(t(348,"AnTj"))/8)+parseInt(t(386,"^Y]K"))/9*(parseInt(t(381,"6awC"))/10)+-parseInt(t(394,"bNRL"))/11)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const Pc=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Ac(388,")Ucz")](e,arguments);return n=null,t}}:function(){};return t=!1,r}}()(void 0,function(){const t=Ac;return Pc.toString()[t(406,"3Q!(")](t(339,"8op$"))[t(332,"gMyx")]()[t(335,"djex")](Pc)[t(344,"^Y]K")](t(413,"Rrfx"))});Pc();const $c=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();$c(void 0,function(){const t=Ac;let e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(s){e=window}const n=e[t(370,"%FRQ")]=e.console||{},r=[t(380,"lFC6"),t(360,"dBWv"),t(327,"kWx%"),"error","exception",t(391,"m8DQ"),t(402,"A0Cw")];for(let o=0;o<r[t(358,"m8DQ")];o++){const e=$c[t(379,"A0Cw")].prototype[t(371,"A0Cw")]($c),s=r[o],i=n[s]||e;e[t(412,"Hc1r")]=$c[t(399,"dBWv")]($c),e[t(323,"DtVS")]=i[t(389,"bNRL")].bind(i),n[s]=e}})();class Tc{static applyPhotoshopSmoothing(t,e=.5){const n=Ac;if(t.length<4||0===e)return t;const r=[],s=.6*e,o=[];for(let a=0;a<t[n(397,"tcU8")]-2;a+=2)if(o[n(383,"kSy*")](t[a],t[a+1]),a<t[n(409,"z@yY")]-2){const e=t[a+2],r=t[a+3],s=t[a],i=t[a+1],c=Math[n(326,"6awC")](Math[n(382,"6(GC")](e-s,2)+Math[n(356,"lFC6")](r-i,2)),l=Math.min(Math[n(387,"Rrfx")](Math[n(396,"DtVS")](c/5),1),3);for(let t=1;t<=l;t++){const n=t/(l+1),c=s+(e-s)*n,a=i+(r-i)*n;o.push(c,a)}}o[n(408,"YogC")](t[t[n(376,"5a!x")]-2],t[t[n(353,"sNfI")]-1]);const i=[];for(let a=2;a<o.length;a+=2){const t=o[a]-o[a-2],e=o[a+1]-o[a-1];i.push(Math[n(331,"5a!x")](t*t+e*e))}const c=i.reduce((t,e)=>t+e,0)/i[n(324,"ES%!")];for(let a=0;a<o[n(407,")Ucz")];a+=2)if(0===a||a===o.length-2)r[n(345,"sNfI")](o[a],o[a+1]);else{const t=i[a/2-1],e=Math[n(384,"%FRQ")](t/(1.5*c),2),l=s*Math[n(377,"V8ZY")](.1,2-e),h=Math[n(361,"kWx%")](5,Math.floor(3+4*l)),d=Math[n(355,"z@yY")](h/2);let u=0,p=0,f=0;for(let r=-d;r<=d;r++){const t=a+2*r;if(t>=0&&t<o[n(362,"&@%d")]-1){const e=Math[n(392,"4qPA")](r),s=Math[n(346,"hp&&")](-e*e/(2*Math[n(403,"#AU1")](d/2,2)))*(1-.5*l);u+=o[t]*s,p+=o[t+1]*s,f+=s}}f>0?r[n(349,"bNRL")](u/f,p/f):r[n(341,"Hc1r")](o[a],o[a+1])}const l=[];for(let a=0;a<r.length;a+=2)if(0===a||a===r[n(411,"dBWv")]-2)l[n(390,"5mHZ")](r[a],r[a+1]);else{const t=l[l[n(401,"gcw@")]-2],e=l[l[n(340,"AnTj")]-1],s=r[a],o=r[a+1];Math.sqrt(Math[n(369,"^Y]K")](s-t,2)+Math.pow(o-e,2))>=2&&l[n(329,"[X!Y")](s,o)}return l[n(337,"3Q!(")]>=4?l:t}static calculateCurvePoints(t,e,n,r){const s=Ac,o=Math[s(367,"kSy*")](Math[s(398,"tmwL")](n-t,2)+Math.pow(r-e,2)),i=Math.atan2(r-e,n-t),c=n-t,l=r-e,a=Math.abs(l*Math[s(415,"8op$")](i)-c*Math[s(336,"sNfI")](i)),h=o*Math[s(333,"1P]J")](Math.max(a/o,.2),.8),d=(t+n)/2,u=(e+r)/2;let p=1;if(Math[s(385,"z@yY")](c)>Math.abs(l))p=l>0?1:-1;else{const t=(i%(2*Math.PI)+2*Math.PI)%(2*Math.PI);p=t>Math.PI/2&&t<3*Math.PI/2?c>0?-1:1:c>0?1:-1}const f=d-Math[s(372,"lFC6")](i)*h*p,g=u+Math[s(364,"5a!x")](i)*h*p,m=[];for(let w=0;w<=1;w+=.02){const o=Math[s(374,"OyG^")](1-w,2)*t+2*(1-w)*w*f+Math[s(347,"bNRL")](w,2)*n,i=Math[s(347,"bNRL")](1-w,2)*e+2*(1-w)*w*g+Math[s(382,"6(GC")](w,2)*r;m[s(365,"#AU1")](o,i)}return m}static[Rc(342,"0M*m")](t,e,n,r){const s=Rc;return Math[s(395,"B!%K")](Math[s(373,"4qPA")](n-t,2)+Math[s(374,"OyG^")](r-e,2))}static[Rc(359,"XD#L")](t){const e=Rc;if(t.length<4)return 0;const n=[];for(let r=2;r<t[e(354,"B!%K")];r+=2){const s=this[e(334,"kSy*")](t[r-2],t[r-1],t[r],t[r+1]);n.push(s)}return n.reduce((t,e)=>t+e,0)/n[e(362,"&@%d")]}static[Rc(352,"Hc1r")](t,e=2){const n=Rc;if(t[n(404,"^Y]K")]<4)return t;const r=[];for(let s=0;s<t[n(404,"^Y]K")];s+=2)if(0===s||s===t[n(353,"sNfI")]-2)r[n(351,"&@%d")](t[s],t[s+1]);else{const o=r[r[n(358,"m8DQ")]-2],i=r[r[n(337,"3Q!(")]-1],c=t[s],l=t[s+1];this.calculateDistance(o,i,c,l)>=e&&r[n(378,"@Ici")](c,l)}return r}}!function(){for(var t=zc,e=Gc();;)try{if(766394===-parseInt(t(193,"rUMH"))/1+-parseInt(t(203,"i75D"))/2+-parseInt(t(199,")pME"))/3*(-parseInt(t(205,"mq(0"))/4)+-parseInt(t(177,"yC[$"))/5+parseInt(t(200,"[lo9"))/6+parseInt(t(188,"*H$("))/7+-parseInt(t(194,"j[nn"))/8*(parseInt(t(186,"66US"))/9))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();var Lc=function(){var t=!0;return function(e,n){var r=t?function(){if(n){var t=n[zc(176,"66US")](e,arguments);return n=null,t}}:function(){};return t=!1,r}}()(void 0,function(){var t=zc;return Lc[t(170,"!qZt")]()[t(182,"rUMH")](t(206,"9&l2"))[t(185,"wv3N")]()[t(191,"wv3N")](Lc)[t(178,"Xll[")](t(204,"vjn0"))});Lc();var Uc=function(){var t=!0;return function(e,n){var r=t?function(){if(n){var t=n[zc(180,"y&z3")](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function zc(t,e){t-=168;var n=Gc(),r=n[t];if(void 0===zc.swSUdv){var s=function(t){for(var e,n,r="",o="",i=r+s,c=0,l=0;n=t.charAt(l++);~n&&(e=c%4?64*e+n:n,c++%4)?r+=i.charCodeAt(l+10)-10!=0?String.fromCharCode(255&e>>(-2*c&6)):c:0)n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var a=0,h=r.length;a<h;a++)o+="%"+("00"+r.charCodeAt(a).toString(16)).slice(-2);return decodeURIComponent(o)};zc.fUVgrX=function(t,e){var n,r,o=[],i=0,c="";for(t=s(t),r=0;r<256;r++)o[r]=r;for(r=0;r<256;r++)i=(i+o[r]+e.charCodeAt(r%e.length))%256,n=o[r],o[r]=o[i],o[i]=n;r=0,i=0;for(var l=0;l<t.length;l++)i=(i+o[r=(r+1)%256])%256,n=o[r],o[r]=o[i],o[i]=n,c+=String.fromCharCode(t.charCodeAt(l)^o[(o[r]+o[i])%256]);return c},zc.KrfyQm={},zc.swSUdv=!0}var o=t+n[0],i=zc.KrfyQm[o];if(i)r=i;else{if(void 0===zc.eIQCNj){var c=function(t){this.TkWiMi=t,this.fjVtlK=[1,0,0],this.pCRBbh=function(){return"newState"},this.Shwnid="\\w+ *\\(\\) *{\\w+ *",this.QNCXfS="['|\"].+['|\"];? *}"};c.prototype.WlJGqD=function(){var t=new RegExp(this.Shwnid+this.QNCXfS).test(this.pCRBbh.toString())?--this.fjVtlK[1]:--this.fjVtlK[0];return this.pLKaRP(t)},c.prototype.pLKaRP=function(t){return Boolean(~t)?this.cKQofI(this.TkWiMi):t},c.prototype.cKQofI=function(t){for(var e=0,n=this.fjVtlK.length;e<n;e++)this.fjVtlK.push(Math.round(Math.random())),n=this.fjVtlK.length;return t(this.fjVtlK[0])},new c(zc).WlJGqD(),zc.eIQCNj=!0}r=zc.fUVgrX(r,e),zc.KrfyQm[o]=r}return r}function Gc(){var t=["xbeLnLO","x8knW5e0","W6yNDmoVCIGt","B1WhktvutCkS","W6mKDCoZBW","WPD0W7ldTeddJWtcGq","WO7dR1W/pbxdPW","W6FdTSopW7HlWRRdJmkg","hh40W4W4ma","WQlcSmoIWOdcUW","t8o6W7ldVr7dP8oLiSoOa8oKsmkQ","xHD1W4pdH8kx","WQhcQCo8WOG","W7DTW7LFga","W51vWOBcNWWDaSoCWPtcRJ/dPSkg","WPaPW4fmWR7cSa","kCkrxweGWRfoW4xcPW","eenWAG5KCvKeiSosW5NdUG","W4T/pHZdTxO/wG","W7FdTSkNW57dSe9FEw7dTmoRWPtcQG","WPPZoq","W60wW5ddOmoFW6ldReGeaSoFCxq","WP/dPuy5irFcOKSws8klWPufWQqFeMJcHI8","WPKrW5ZdMvfCsmoPWPm","W5X/aXVdS2eKxSoUWQBdSq","dmoDWOPGW4z5WPywWR7cL8kR","W5j1WPuoW6/cGCoxw8kVacm","aGNdJYv8eM5G","a8otW5xcMmkHkhxdILZdT8kBDq","W7yfW4vmW58ZA8ow","W7P/fsXQ","WOanW5xdGG","WRb5kmkVlxubwxaAWQXt","tqtdICk7WPlcP8khnclcRMddVCoG","s8o4W77dUHRdPCoLcSokoSoCDmk5","WO0pW7FcTG","W5HwWOlcMq8BaCoYWOtcGcpdJmkf","W540DSojWQ8xWQFdL13dPCoDEW","WO83W5HEmevTW4q","WPWCWPRdNMfXWQarW4qBW6/cKa"];return(Gc=function(){return t})()}Uc(void 0,function(){for(var t=zc,e=function(){var t,e=zc;try{t=Function(e(189,"QJZu")+'{}.constructor("return this")( ));')()}catch(n){t=window}return t}(),n=e[t(169,")pME")]=e[t(173,"QJZu")]||{},r=[t(187,"vjn0"),"warn",t(198,"i75D"),t(197,"npbv"),"exception",t(207,"[MJ&"),"trace"],s=0;s<r.length;s++){var o=Uc.constructor[t(190,"i75D")][t(179,"66US")](Uc),i=r[s],c=n[i]||o;o[t(183,"TJ^H")]=Uc[t(168,"qY#1")](Uc),o.toString=c[t(174,"nwc1")][t(202,"7*@o")](c),n[i]=o}})();export{Ct as A,Tc as B,Mt as D,Wt as P,Oc as Y,st as p,lt as u};
