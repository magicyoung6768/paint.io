import{r as e,q as t,p as o,l as r,g as n,e as a,f as s,C as i,$ as l}from"./index-hyz1gGYG.js";import{u as c,r as p}from"./useBreakpoint-D29ngWH8.js";import{g as d,m,y as g,u,X as f,a1 as h,a4 as x,a0 as y,$ as v,a as S,a6 as C,a7 as $,d as z,T as b,Z as E,b as N,k as w}from"./compiler-runtime-lZCNVxYm.js";const k=e.createContext({}),P=e=>{const{antCls:r,componentCls:n,iconCls:a,avatarBg:s,avatarColor:i,containerSize:l,containerSizeLG:c,containerSizeSM:p,textFontSize:d,textFontSizeLG:m,textFontSizeSM:g,iconFontSize:u,iconFontSizeLG:f,iconFontSizeSM:h,borderRadius:x,borderRadiusLG:y,borderRadiusSM:v,lineWidth:S,lineType:C}=e,$=(e,t,o,r)=>({width:e,height:e,borderRadius:"50%",fontSize:t,[`&${n}-square`]:{borderRadius:r},[`&${n}-icon`]:{fontSize:o,[`> ${a}`]:{margin:0}}});return{[n]:{...o(e),position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:i,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${t(S)} ${C} transparent`,"&-image":{background:"transparent"},[`${r}-image-img`]:{display:"block"},...$(l,d,u,x),"&-lg":{...$(c,m,f,y)},"&-sm":{...$(p,g,h,v)},"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}}}},B=e=>{const{componentCls:t,groupBorderColor:o,groupOverlapping:r,groupSpace:n}=e;return{[`${t}-group`]:{display:"inline-flex",[t]:{borderColor:o},"> *:not(:first-child)":{marginInlineStart:r}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:n}}}},M=d("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:o}=e,r=m(e,{avatarBg:o,avatarColor:t});return[P(r),B(r)]},e=>{const{controlHeight:t,controlHeightLG:o,controlHeightSM:r,fontSize:n,fontSizeLG:a,fontSizeXL:s,fontSizeHeading3:i,marginXS:l,marginXXS:c,colorBorderBg:p}=e;return{containerSize:t,containerSizeLG:o,containerSizeSM:r,textFontSize:n,textFontSizeLG:n,textFontSizeSM:n,iconFontSize:Math.round((a+s)/2),iconFontSizeLG:i,iconFontSizeSM:n,groupSpace:c,groupOverlapping:-l,groupBorderColor:p}}),W=e.forwardRef((t,o)=>{const{prefixCls:i,shape:l,size:d,src:m,srcSet:f,icon:h,className:x,rootClassName:y,style:v,alt:S,draggable:C,children:$,crossOrigin:z,gap:b=4,onError:E,...N}=t,[w,P]=e.useState(1),[B,W]=e.useState(!1),[L,F]=e.useState(!0),R=e.useRef(null),G=e.useRef(null),O=r(o,R),{getPrefixCls:T,className:j,style:I}=n("avatar"),D=e.useContext(k),H=()=>{if(!G.current||!R.current)return;const e=G.current.offsetWidth,t=R.current.offsetWidth;0!==e&&0!==t&&2*b<t&&P(t-2*b<e?(t-2*b)/e:1)};e.useEffect(()=>{W(!0)},[]),e.useEffect(()=>{F(!0),P(1)},[m]),e.useEffect(H,[b]);const A=()=>{const e=E?.();!1!==e&&F(!1)},X=g(e=>d??D?.size??e??"default"),_=Object.keys("object"==typeof X&&X||{}).some(e=>["xs","sm","md","lg","xl","xxl"].includes(e)),q=c(_),V=e.useMemo(()=>{if("object"!=typeof X)return{};const e=p.find(e=>q[e]),t=X[e];return t?{width:t,height:t,fontSize:t&&(h||$)?t/2:18}:{}},[q,X,h,$]),K=T("avatar",i),U=u(K),[Y,Z]=M(K,U),J=a({[`${K}-lg`]:"large"===X,[`${K}-sm`]:"small"===X}),Q=e.isValidElement(m),ee=a(K,J,j,`${K}-${l||D?.shape||"circle"}`,{[`${K}-image`]:Q||m&&L,[`${K}-icon`]:!!h},Z,U,x,y,Y),te="number"==typeof X?{width:X,height:X,fontSize:h?X/2:18}:{};let oe;if("string"==typeof m&&L)oe=e.createElement("img",{src:m,draggable:C,srcSet:f,onError:A,alt:S,crossOrigin:z});else if(Q)oe=m;else if(h)oe=h;else if(B||1!==w){const t=`scale(${w})`,o={msTransform:t,WebkitTransform:t,transform:t};oe=e.createElement(s,{onResize:H},e.createElement("span",{className:`${K}-string`,ref:G,style:o},$))}else oe=e.createElement("span",{className:`${K}-string`,style:{opacity:0},ref:G},$);return e.createElement("span",{...N,style:{...te,...V,...I,...v},className:ee,ref:O},oe)}),L=e=>e?"function"==typeof e?e():e:null,F=e=>{const{componentCls:t,popoverColor:r,titleMinWidth:n,fontWeightStrong:a,innerPadding:s,boxShadowSecondary:i,colorTextHeading:l,borderRadiusLG:c,zIndexPopup:p,titleMarginBottom:d,colorBgElevated:m,popoverBg:g,titleBorderBottom:u,innerContentPadding:f,titlePadding:x}=e;return[{[t]:{...o(e),position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:p,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":m,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-container`]:{backgroundColor:g,backgroundClip:"padding-box",borderRadius:c,boxShadow:i,padding:s},[`${t}-title`]:{minWidth:n,marginBottom:d,color:l,fontWeight:a,borderBottom:u,padding:x},[`${t}-content`]:{color:r,padding:f}}},h(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block"}}]},R=e=>{const{componentCls:t}=e;return{[t]:x.map(o=>{const r=e[`${o}6`];return{[`&${t}-${o}`]:{"--antd-arrow-background-color":r,[`${t}-inner`]:{backgroundColor:r},[`${t}-arrow`]:{background:"transparent"}}}})}},G=d("Popover",e=>{const{colorBgElevated:t,colorText:o}=e,r=m(e,{popoverBg:t,popoverColor:o});return[F(r),R(r),f(r,"zoom-big")]},e=>{const{lineWidth:t,controlHeight:o,fontHeight:r,padding:n,wireframe:a,zIndexPopupBase:s,borderRadiusLG:i,marginXS:l,lineType:c,colorSplit:p,paddingSM:d}=e,m=o-r,g=m/2,u=m/2-t,f=n;return{titleMinWidth:177,zIndexPopup:s+30,...v(e),...y({contentRadius:i,limitVerticalRadius:!0}),innerPadding:a?0:12,titleMarginBottom:a?0:l,titlePadding:a?`${g}px ${f}px ${u}px`:0,titleBorderBottom:a?`${t}px ${c} ${p}`:"none",innerContentPadding:a?`${d}px ${f}px`:0}},{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]}),O=t=>{const{title:o,content:r,prefixCls:n,classNames:s,styles:i}=t;return o||r?e.createElement(e.Fragment,null,o&&e.createElement("div",{className:a(`${n}-title`,s?.title),style:i?.title},o),r&&e.createElement("div",{className:a(`${n}-content`,s?.content),style:i?.content},r)):null},T=t=>{const{hashId:o,prefixCls:r,className:n,style:s,placement:i="top",title:l,content:c,children:p,classNames:d,styles:m}=t,g=L(l),u=L(c),f={...t,placement:i},[h,x]=S([d],[m],{props:f}),y=a(o,r,`${r}-pure`,`${r}-placement-${i}`,n);return e.createElement("div",{className:y,style:s},e.createElement("div",{className:`${r}-arrow`}),e.createElement(C,{...t,className:o,prefixCls:r,classNames:h,styles:x},p||e.createElement(O,{prefixCls:r,title:g,content:u,classNames:h,styles:x})))},j=e.forwardRef((t,o)=>{const{prefixCls:r,title:s,content:i,overlayClassName:l,placement:c="top",trigger:p,children:d,mouseEnterDelay:m=.1,mouseLeaveDelay:g=.1,onOpenChange:u,overlayStyle:f={},styles:h,classNames:x,motion:y,arrow:v,...C}=t,{getPrefixCls:k,className:P,style:B,classNames:M,styles:W,arrow:F,trigger:R}=n("popover"),T=k("popover",r),[j,I]=G(T),D=k(),H=$(v,F),A=p||R||"hover",X={...t,placement:c,trigger:A,mouseEnterDelay:m,mouseLeaveDelay:g,overlayStyle:f,styles:h,classNames:x},[_,q]=S([M,x],[W,h],{props:X}),V=a(l,j,I,P,_.root),[K,U]=z(t.defaultOpen??!1,t.open),Y=(e,t)=>{U(e),u?.(e,t)},Z=L(s),J=L(i);return e.createElement(b,{unique:!1,arrow:H,placement:c,trigger:A,mouseEnterDelay:m,mouseLeaveDelay:g,...C,prefixCls:T,classNames:{root:V,container:_.container,arrow:_.arrow},styles:{root:{...q.root,...B,...f},container:q.container,arrow:q.arrow},ref:o,open:K,onOpenChange:e=>{Y(e)},overlay:Z||J?e.createElement(O,{prefixCls:T,title:Z,content:J,classNames:_,styles:q}):null,motion:{motionName:E(D,"zoom-big","string"==typeof y?.motionName?y?.motionName:void 0)},"data-popover-inject":!0},N(d,{onKeyDown:t=>{e.isValidElement(d)&&d?.props.onKeyDown?.(t),(e=>{e.keyCode===w.ESC&&Y(!1,e)})(t)}}))});j._InternalPanelDoNotUseOrYouWillBeFired=t=>{const{prefixCls:o,className:r,...n}=t,{getPrefixCls:s}=e.useContext(i),l=s("popover",o),[c,p]=G(l);return e.createElement(T,{...n,prefixCls:l,hashId:c,className:a(r,p)})};const I=t=>{const{size:o,shape:r}=e.useContext(k),n=e.useMemo(()=>({size:t.size||o,shape:t.shape||r}),[t.size,t.shape,o,r]);return e.createElement(k.Provider,{value:n},t.children)},D=W;D.Group=t=>{const{getPrefixCls:o,direction:r}=e.useContext(i),{prefixCls:n,className:s,rootClassName:c,style:p,maxCount:d,maxStyle:m,size:g,shape:f,maxPopoverPlacement:h,maxPopoverTrigger:x,children:y,max:v}=t,S=o("avatar",n),C=`${S}-group`,$=u(S),[z,b]=M(S,$),E=a(C,{[`${C}-rtl`]:"rtl"===r},b,$,s,c,z),w=l(y).map((e,t)=>N(e,{key:`avatar-key-${t}`})),k=v?.count||d,P=w.length;if(k&&k<P){const t=w.slice(0,k),o=w.slice(k,P),r=v?.style||m,n=v?.popover?.trigger||x||"hover",s=v?.popover?.placement||h||"top",i={content:o,...v?.popover,placement:s,trigger:n,rootClassName:a(`${C}-popover`,v?.popover?.rootClassName)};return t.push(e.createElement(j,{key:"avatar-popover-key",destroyOnHidden:!0,...i},e.createElement(W,{style:r},"+"+(P-k)))),e.createElement(I,{shape:f,size:g},e.createElement("div",{className:E,style:p},t))}return e.createElement(I,{shape:f,size:g},e.createElement("div",{className:E,style:p},w))};export{D as A,j as P};
