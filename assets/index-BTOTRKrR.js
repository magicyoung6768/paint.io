import{k as e,g as t,m as n,K as s,C as o,u as r,a,b as c,l as i,n as l,p,j as u,_ as m}from"./compiler-runtime-BNGP8ANp.js";import{Q as f,r as d,e as y,R as g,T as h,d as v,p as k,g as E,C,U as x,V as N}from"./index-CDKw0UCm.js";import{p as $,R as b,a as S,r as w}from"./index-CC9YKY7L.js";import{R as P,a as R}from"./statusUtils-BWZF7hSp.js";import{b as j}from"./http-1EEc4dlM.js";const A="add",O="keep",I="remove",M="removed";function F(e){let t;return t=e&&"object"==typeof e&&"key"in e?e:{key:e},{...t,key:String(t.key)}}function L(e=[]){return e.map(F)}function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},H.apply(this,arguments)}const D=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];const T=function(e,t=f){class n extends d.Component{static defaultProps={component:"div"};state={keyEntities:[]};static getDerivedStateFromProps({keys:e},{keyEntities:t}){const n=L(e),s=function(e=[],t=[]){let n=[],s=0;const o=t.length,r=L(e),a=L(t);r.forEach(e=>{let t=!1;for(let r=s;r<o;r+=1){const o=a[r];if(o.key===e.key){s<r&&(n=n.concat(a.slice(s,r).map(e=>({...e,status:A}))),s=r),n.push({...o,status:O}),s+=1,t=!0;break}}t||n.push({...e,status:I})}),s<o&&(n=n.concat(a.slice(s).map(e=>({...e,status:A}))));const c={};return n.forEach(({key:e})=>{c[e]=(c[e]||0)+1}),Object.keys(c).filter(e=>c[e]>1).forEach(e=>{n=n.filter(({key:t,status:n})=>t!==e||n!==I),n.forEach(t=>{t.key===e&&(t.status=O)})}),n}(t,n);return{keyEntities:s.filter(e=>{const n=t.find(({key:t})=>e.key===t);return!n||n.status!==M||e.status!==I})}}removeKey=e=>{this.setState(t=>({keyEntities:t.keyEntities.map(t=>t.key!==e?t:{...t,status:M})}),()=>{const{keyEntities:e}=this.state;0===e.filter(({status:e})=>e!==M).length&&this.props.onAllRemoved&&this.props.onAllRemoved()})};render(){const{keyEntities:e}=this.state,{component:n,children:s,onVisibleChanged:o,onAllRemoved:r,...a}=this.props,c=n||d.Fragment,i={};return D.forEach(e=>{i[e]=a[e],delete a[e]}),delete a.keys,d.createElement(c,a,e.map(({status:e,...n},r)=>{const a=e===A||e===O;return d.createElement(t,H({},i,{key:n.key,visible:a,eventProps:n,onVisibleChanged:e=>{o?.(e,{key:n.key}),e||this.removeKey(n.key)}}),(e,t)=>s({...e,index:r},t))}))}}return n}();function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},z.apply(this,arguments)}const K=d.forwardRef((t,n)=>{const{prefixCls:s,style:o,className:r,duration:a=4.5,showProgress:c,pauseOnHover:i=!0,eventKey:l,content:p,closable:u,props:m,onClick:f,onNoticeClose:g,times:h,hovering:v}=t,[k,E]=d.useState(!1),[C,x]=d.useState(0),[N,b]=d.useState(0),S=v||k,w="number"==typeof a?a:0,P=w>0&&c,R=()=>{g(l)};d.useEffect(()=>{if(!S&&w>0){const e=Date.now()-N,t=setTimeout(()=>{R()},1e3*w-N);return()=>{i&&clearTimeout(t),b(Date.now()-e)}}},[w,S,h]),d.useEffect(()=>{if(!S&&P&&(i||0===N)){const e=performance.now();let t;const n=()=>{cancelAnimationFrame(t),t=requestAnimationFrame(t=>{const s=t+N-e,o=Math.min(s/(1e3*w),1);x(100*o),o<1&&n()})};return n(),()=>{i&&cancelAnimationFrame(t)}}},[w,N,S,P,h]);const j=d.useMemo(()=>"object"==typeof u&&null!==u?u:{},[u]),A=$(j,!0),O=100-(!C||C<0?0:C>100?100:C),I=`${s}-notice`;return d.createElement("div",z({},m,{ref:n,className:y(I,r,{[`${I}-closable`]:u}),style:o,onMouseEnter:e=>{E(!0),m?.onMouseEnter?.(e)},onMouseLeave:e=>{E(!1),m?.onMouseLeave?.(e)},onClick:f}),d.createElement("div",{className:`${I}-content`},p),u&&d.createElement("button",z({className:`${I}-close`,onKeyDown:t=>{"Enter"!==t.key&&"Enter"!==t.code&&t.keyCode!==e.ENTER||R()},"aria-label":"Close"},A,{onClick:e=>{e.preventDefault(),e.stopPropagation(),R()}}),j.closeIcon??"x"),P&&d.createElement("progress",{className:`${I}-progress`,max:"100",value:O},O+"%"))}),W=g.createContext({}),B=({children:e,classNames:t})=>g.createElement(W.Provider,{value:{classNames:t}},e);function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},X.apply(this,arguments)}const G=e=>{const{configList:t,placement:n,prefixCls:s,className:o,style:r,motion:a,onAllNoticeRemoved:c,onNoticeClose:i,stack:l}=e,{classNames:p}=d.useContext(W),u=d.useRef({}),[m,f]=d.useState(null),[h,v]=d.useState([]),k=t.map(e=>({config:e,key:String(e.key)})),[E,{offset:C,threshold:x,gap:N}]=(e=>{const t={offset:8,threshold:3,gap:16};return e&&"object"==typeof e&&(t.offset=e.offset??8,t.threshold=e.threshold??3,t.gap=e.gap??16),[!!e,t]})(l),$=E&&(h.length>0||k.length<=x),b="function"==typeof a?a(n):a;return d.useEffect(()=>{E&&h.length>1&&v(e=>e.filter(e=>k.some(({key:t})=>e===t)))},[h,k,E]),d.useEffect(()=>{E&&u.current[k[k.length-1]?.key]&&f(u.current[k[k.length-1]?.key])},[k,E]),g.createElement(T,X({key:n,className:y(s,`${s}-${n}`,p?.list,o,{[`${s}-stack`]:!!E,[`${s}-stack-expanded`]:$}),style:r,keys:k,motionAppear:!0},b,{onAllRemoved:()=>{c(n)}}),({config:e,className:t,style:o,index:r},a)=>{const{key:c,times:l}=e,f=String(c),{className:d,style:x,classNames:b,styles:S,...w}=e,P=k.findIndex(e=>e.key===f),R={};if(E){const e=k.length-1-(P>-1?P:r-1),t="top"===n||"bottom"===n?"-50%":"0";if(e>0){R.height=$?u.current[f]?.offsetHeight:m?.offsetHeight;let s=0;for(let t=0;t<e;t++)s+=u.current[k[k.length-1-t].key]?.offsetHeight+N;const o=($?s:e*C)*(n.startsWith("top")?1:-1),r=!$&&m?.offsetWidth&&u.current[f]?.offsetWidth?(m?.offsetWidth-2*C*(e<3?e:3))/u.current[f]?.offsetWidth:1;R.transform=`translate3d(${t}, ${o}px, 0) scaleX(${r})`}else R.transform=`translate3d(${t}, 0, 0)`}return g.createElement("div",{ref:a,className:y(`${s}-notice-wrapper`,t,b?.wrapper),style:{...o,...R,...S?.wrapper},onMouseEnter:()=>v(e=>e.includes(f)?e:[...e,f]),onMouseLeave:()=>v(e=>e.filter(e=>e!==f))},g.createElement(K,X({},w,{ref:e=>{P>-1?u.current[f]=e:delete u.current[f]},prefixCls:s,classNames:b,styles:S,className:y(d,p?.notice),style:x,times:l,key:c,eventKey:c,onNoticeClose:i,hovering:E&&h.length>0})))})},U=d.forwardRef((e,t)=>{const{prefixCls:n="rc-notification",container:s,motion:o,maxCount:r,className:a,style:c,onAllRemoved:i,stack:l,renderNotifications:p}=e,[u,m]=d.useState([]),f=e=>{const t=u.find(t=>t.key===e),n=t?.closable,s=n&&"object"==typeof n?n:{},{onClose:o}=s;o?.(),t?.onClose?.(),m(t=>t.filter(t=>t.key!==e))};d.useImperativeHandle(t,()=>({open:e=>{m(t=>{let n=[...t];const s=n.findIndex(t=>t.key===e.key),o={...e};return s>=0?(o.times=(t[s]?.times||0)+1,n[s]=o):(o.times=0,n.push(o)),r>0&&n.length>r&&(n=n.slice(-r)),n})},close:e=>{f(e)},destroy:()=>{m([])}}));const[y,g]=d.useState({});d.useEffect(()=>{const e={};u.forEach(t=>{const{placement:n="topRight"}=t;n&&(e[n]=e[n]||[],e[n].push(t))}),Object.keys(y).forEach(t=>{e[t]=e[t]||[]}),g(e)},[u]);const v=e=>{g(t=>{const n={...t};return(n[e]||[]).length||delete n[e],n})},k=d.useRef(!1);if(d.useEffect(()=>{Object.keys(y).length>0?k.current=!0:k.current&&(i?.(),k.current=!1)},[y]),!s)return null;const E=Object.keys(y);return h.createPortal(d.createElement(d.Fragment,null,E.map(e=>{const t=y[e],s=d.createElement(G,{key:e,configList:t,placement:e,prefixCls:n,className:a?.(e),style:c?.(e),motion:o,onNoticeClose:f,onAllNoticeRemoved:v,stack:l});return p?p(s,{prefixCls:n,key:e}):s})),s)}),V=()=>document.body;let Y=0;function _(e={}){const{getContainer:t=V,motion:n,prefixCls:s,maxCount:o,className:r,style:a,onAllRemoved:c,stack:i,renderNotifications:l,...p}=e,[u,m]=d.useState(),f=d.useRef(),y=d.createElement(U,{container:u,ref:f,prefixCls:s,motion:n,maxCount:o,className:r,style:a,onAllRemoved:c,stack:i,renderNotifications:l}),[g,h]=d.useState([]),k=v(e=>{const t=function(...e){const t={};return e.forEach(e=>{e&&Object.keys(e).forEach(n=>{const s=e[n];void 0!==s&&(t[n]=s)})}),t}(p,e);null!==t.key&&void 0!==t.key||(t.key=`rc-notification-${Y}`,Y+=1),h(e=>[...e,{type:"open",config:t}])}),E=d.useMemo(()=>({open:k,close:e=>{h(t=>[...t,{type:"close",key:e}])},destroy:()=>{h(e=>[...e,{type:"destroy"}])}}),[]);return d.useEffect(()=>{m(t())}),d.useEffect(()=>{if(f.current&&g.length){let e,t;g.forEach(e=>{switch(e.type){case"open":f.current.open(e.config);break;case"close":f.current.close(e.key);break;case"destroy":f.current.destroy()}}),h(n=>(e===n&&t||(e=n,t=n.filter(e=>!g.includes(e))),t))}},[g]),[E,y]}const q=t("Message",e=>(e=>{const{componentCls:t,iconCls:n,boxShadow:o,colorText:r,colorSuccess:a,colorError:c,colorWarning:i,colorInfo:l,fontSizeLG:p,motionEaseInOutCirc:u,motionDurationSlow:m,marginXS:f,paddingXS:d,borderRadiusLG:y,zIndexPopup:g,contentPadding:h,contentBg:v}=e,E=`${t}-notice`,C=new s("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:d,transform:"translateY(0)",opacity:1}}),x=new s("MessageMoveOut",{"0%":{maxHeight:e.height,padding:d,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),N={padding:d,textAlign:"center",[`${t}-custom-content`]:{display:"flex",alignItems:"center"},[`${t}-custom-content > ${n}`]:{marginInlineEnd:f,fontSize:p},[`${E}-content`]:{display:"inline-block",padding:h,background:v,borderRadius:y,boxShadow:o,pointerEvents:"all"},[`${t}-success > ${n}`]:{color:a},[`${t}-error > ${n}`]:{color:c},[`${t}-warning > ${n}`]:{color:i},[`${t}-info > ${n},\n      ${t}-loading > ${n}`]:{color:l}};return[{[t]:{...k(e),color:r,position:"fixed",top:f,width:"100%",pointerEvents:"none",zIndex:g,[`${t}-move-up`]:{animationFillMode:"forwards"},[`\n        ${t}-move-up-appear,\n        ${t}-move-up-enter\n      `]:{animationName:C,animationDuration:m,animationPlayState:"paused",animationTimingFunction:u},[`\n        ${t}-move-up-appear${t}-move-up-appear-active,\n        ${t}-move-up-enter${t}-move-up-enter-active\n      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:x,animationDuration:m,animationPlayState:"paused",animationTimingFunction:u},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}}},{[t]:{[`${E}-wrapper`]:{...N}}},{[`${t}-notice-pure-panel`]:{...N,padding:0,textAlign:"start"}}]})(n(e,{height:150})),e=>({zIndexPopup:e.zIndexPopupBase+o+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`})),Q={info:d.createElement(j,null),success:d.createElement(S,null),error:d.createElement(R,null),warning:d.createElement(b,null),loading:d.createElement(P,null)},J=e=>{const{prefixCls:t,type:n,icon:s,children:o,classNames:r,styles:a}=e,i=c(s||n&&Q[n],e=>{const t={...e?.style,...a?.icon};return{className:y(e.className,r?.icon),style:t}});return d.createElement("div",{className:y(`${t}-custom-content`,`${t}-${n}`)},i,d.createElement("span",{className:r?.content,style:a?.content},o))};function Z(e){let t;const n=new Promise(n=>{t=e(()=>{n(!0)})}),s=()=>{t?.()};return s.then=(e,t)=>n.then(e,t),s.promise=n,s}const ee=3,te=({children:e,prefixCls:t})=>{const n=r(t),[s,o]=q(t,n);return d.createElement(B,{classNames:{list:y(s,o,n)}},e)},ne=(e,{prefixCls:t,key:n})=>d.createElement(te,{prefixCls:t,key:n},e),se=d.forwardRef((e,t)=>{const{top:n,prefixCls:s,getContainer:o,maxCount:r,duration:c=ee,rtl:i,transitionName:l,onAllRemoved:p,pauseOnHover:u=!0}=e,{getPrefixCls:m,direction:f,getPopupContainer:g}=E("message"),{message:h}=d.useContext(C),v=s||m("message"),[k,x]=a([e?.classNames,h?.classNames],[e?.styles,h?.styles],{props:e}),[N,$]=_({prefixCls:v,style:()=>({left:"50%",transform:"translateX(-50%)",top:n??8}),className:()=>y({[`${v}-rtl`]:i??"rtl"===f}),motion:()=>function(e,t){return{motionName:t??`${e}-move-up`}}(v,l),closable:!1,duration:c,getContainer:()=>o?.()||g?.()||document.body,maxCount:r,onAllRemoved:p,renderNotifications:ne,pauseOnHover:u});return d.useImperativeHandle(t,()=>({...N,prefixCls:v,message:h,classNames:k,styles:x})),$});let oe=0;function re(e){const t=d.useRef(null);return[d.useMemo(()=>{const n=e=>{t.current?.close(e)},s=s=>{if(!t.current){const e=()=>{};return e.then=()=>{},e}const{open:o,prefixCls:r,message:a,classNames:c,styles:m}=t.current,f=a?.className||{},g=a?.style||{},h=a?.classNames||{},v=a?.styles||{},k=`${r}-notice`,{content:E,icon:C,type:x,key:N,className:$,style:b,onClose:S,classNames:w={},styles:P={},...R}=s;let j=N;u(j)||(oe+=1,j=`antd-message-${oe}`);const A={...e,...s},O=i(h,{props:A}),I=i(w,{props:A}),M=i(v,{props:A}),F=i(P,{props:A}),L=l(void 0,O,I,c),H=p(M,F,m);return Z(e=>(o({...R,key:j,content:d.createElement(J,{prefixCls:r,type:x,icon:C,classNames:L,styles:H},E),placement:"top",className:y({[`${k}-${x}`]:x},$,f,L.root),style:{...H.root,...g,...b},onClose:()=>{S?.(),e()}}),()=>{n(j)}))},o={open:s,destroy:e=>{void 0!==e?n(e):t.current?.destroy()}};return["info","success","warning","error","loading"].forEach(e=>{o[e]=(t,n,o)=>{let r,a,c;r=t&&"object"==typeof t&&"content"in t?t:{content:t},"function"==typeof n?c=n:(a=n,c=o);const i={onClose:c,duration:a,...r,type:e};return s(i)}}),o},[]),d.createElement(se,{key:"message-holder",...e,ref:t})]}const ae=g.createContext({});let ce=null,ie=e=>e(),le=[],pe={};function ue(){const{getContainer:e,duration:t,rtl:n,maxCount:s,top:o}=pe,r=e?.()||document.body;return{getContainer:()=>r,duration:t,rtl:n,maxCount:s,top:o}}const me=g.forwardRef((e,t)=>{const{messageConfig:n,sync:s}=e,{getPrefixCls:o}=d.useContext(C),r=pe.prefixCls||o("message"),a=d.useContext(ae),[c,i]=re({...n,prefixCls:r,...a.message});return g.useImperativeHandle(t,()=>{const e={...c};return Object.keys(e).forEach(t=>{e[t]=(...e)=>(s(),c[t].apply(c,e))}),{instance:e,sync:s}}),i}),fe=g.forwardRef((e,t)=>{const[n,s]=g.useState(ue),o=()=>{s(ue)};g.useEffect(o,[]);const r=N(),a=r.getRootPrefixCls(),c=r.getIconPrefixCls(),i=r.getTheme(),l=g.createElement(me,{ref:t,sync:o,messageConfig:n});return g.createElement(x,{prefixCls:a,iconPrefixCls:c,theme:i},r.holderRender?r.holderRender(l):l)}),de=()=>{if(!ce){const e=document.createDocumentFragment(),t={fragment:e};return ce=t,void ie(()=>{w(g.createElement(fe,{ref:e=>{const{instance:n,sync:s}=e||{};Promise.resolve().then(()=>{!t.instance&&n&&(t.instance=n,t.sync=s,de())})}}),e)})}ce.instance&&(le.forEach(e=>{const{type:t,skipped:n}=e;if(!n)switch(t){case"open":ie(()=>{const t=ce.instance.open({...pe,...e.config});t?.then(e.resolve),e.setCloseFn(t)});break;case"destroy":ie(()=>{ce?.instance.destroy(e.key)});break;default:ie(()=>{var n;const s=(n=ce.instance)[t].apply(n,m(e.args));s?.then(e.resolve),e.setCloseFn(s)})}}),le=[])};const ye={open:function(e){const t=Z(t=>{let n;const s={type:"open",config:e,resolve:t,setCloseFn:e=>{n=e}};return le.push(s),()=>{n?ie(()=>{n()}):s.skipped=!0}});return de(),t},destroy:e=>{le.push({type:"destroy",key:e}),de()},config:function(e){pe={...pe,...e},ie(()=>{ce?.sync?.()})},useMessage:function(e){return re(e)},_InternalPanelDoNotUseOrYouWillBeFired:e=>{const{prefixCls:t,className:n,style:s,type:o,icon:c,content:i,classNames:l,styles:p,...u}=e,{getPrefixCls:m,className:f,style:g,classNames:h,styles:v}=E("message"),k=t||m("message"),C=r(k),[x,N]=q(k,C),[$,b]=a([h,l],[v,p],{props:e});return d.createElement(K,{...u,prefixCls:k,className:y(f,$.root,n,x,`${k}-notice-pure-panel`,N,C),style:{...b.root,...g,...s},eventKey:"pure",duration:null,content:d.createElement(J,{prefixCls:k,type:o,icon:c,classNames:$,styles:b},i)})}};["success","info","warning","error","loading"].forEach(e=>{ye[e]=(...t)=>function(e,t){const n=Z(n=>{let s;const o={type:e,args:t,resolve:n,setCloseFn:e=>{s=e}};return le.push(o),()=>{s?ie(()=>{s()}):o.skipped=!0}});return de(),n}(e,t)});export{ye as s};
