import{I as e,g as t,a8 as n,m as r,a9 as a,u as l,a5 as o,j as i,_ as s,y as c,a as m,aa as u,ab as d,ac as p,ad as f,ae as g,F as h,f as b,T as $,o as x,af as y,ag as v,ah as C,ai as w,b as E,aj as k,ak as S}from"./compiler-runtime-yXDBLoTa.js";import{r as I,q as M,p as F,a2 as N,e as z,D as q,g as P,aH as R,av as H,aI as j,$ as T,w as D,aG as W,l as _,aJ as A,aK as L,h as O,ay as B,aL as V,C as X,a0 as G,aM as K}from"./index-CLALTDGz.js";import{C as U}from"./CSSMotionList-DrSSpTdw.js";import{g as Y}from"./collapse-BIO5DT9H.js";import{u as J,C as Q,c as Z,g as ee,R as te,a as ne,b as re}from"./convertToTooltipProps-CZUEUORc.js";import{u as ae,R as le,a as oe}from"./statusUtils-Co8hAMnZ.js";import{R as ie,a as se}from"./index-DzkHr-TF.js";var ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},me.apply(this,arguments)}const ue=(t,n)=>I.createElement(e,me({},t,{ref:n,icon:ce})),de=I.forwardRef(ue);function pe(e){const[t,n]=I.useState(e);return I.useEffect(()=>{const t=setTimeout(()=>{n(e)},e.length?0:10);return()=>{clearTimeout(t)}},[e]),t}const fe=e=>{const{componentCls:t}=e,n=`${t}-show-help`,r=`${t}-show-help-item`;return{[n]:{transition:`opacity ${e.motionDurationFast} ${e.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[r]:{overflow:"hidden",transition:`height ${e.motionDurationFast} ${e.motionEaseInOut},\n                     opacity ${e.motionDurationFast} ${e.motionEaseInOut},\n                     transform ${e.motionDurationFast} ${e.motionEaseInOut} !important`,[`&${r}-appear, &${r}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${r}-leave-active`]:{transform:"translateY(-5px)"}}}}},ge=e=>({legend:{display:"block",width:"100%",marginBottom:e.marginLG,padding:0,color:e.colorTextDescription,fontSize:e.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${M(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${M(e.controlOutlineWidth)} ${e.controlOutline}`},output:{display:"block",paddingTop:15,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight}}),he=(e,t)=>{const{formItemCls:n}=e;return{[n]:{[`${n}-label > label`]:{height:t},[`${n}-control-input`]:{minHeight:t}}}},be=e=>{const{componentCls:t}=e;return{[e.componentCls]:{...F(e),...ge(e),[`${t}-text`]:{display:"inline-block",paddingInlineEnd:e.paddingSM},"&-small":{...he(e,e.controlHeightSM)},"&-large":{...he(e,e.controlHeightLG)}}}},$e=e=>{const{formItemCls:t,iconCls:r,rootPrefixCls:a,antCls:l,labelRequiredMarkColor:o,labelColor:i,labelFontSize:s,labelHeight:c,labelColonMarginInlineStart:m,labelColonMarginInlineEnd:u,itemMarginBottom:d}=e;return{[t]:{...F(e),marginBottom:d,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,\n        &-hidden${l}-row`]:{display:"none"},"&-has-warning":{[`${t}-split`]:{color:e.colorError}},"&-has-error":{[`${t}-split`]:{color:e.colorWarning}},[`${t}-label`]:{flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:e.lineHeight,whiteSpace:"unset","> label":{verticalAlign:"middle",textWrap:"balance"}},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:c,color:i,fontSize:s,[`> ${r}`]:{fontSize:e.fontSize,verticalAlign:"top"},[`&${t}-required`]:{"&::before":{display:"inline-block",marginInlineEnd:e.marginXXS,color:o,fontSize:e.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"'},[`&${t}-required-mark-hidden, &${t}-required-mark-optional`]:{"&::before":{display:"none"}}},[`${t}-optional`]:{display:"inline-block",marginInlineStart:e.marginXXS,color:e.colorTextDescription,[`&${t}-required-mark-hidden`]:{display:"none"}},[`${t}-tooltip`]:{color:e.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:e.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:m,marginInlineEnd:u},[`&${t}-no-colon::after`]:{content:'"\\a0"'}}},[`${t}-control`]:{"--ant-display":"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${a}-col-'"]):not([class*="' ${a}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:e.controlHeight,"&-content":{flex:"auto",maxWidth:"100%",[`&:has(> ${l}-switch:only-child, > ${l}-rate:only-child)`]:{display:"flex",alignItems:"center"}}}},[t]:{"&-additional":{display:"flex",flexDirection:"column"},"&-explain, &-extra":{clear:"both",color:e.colorTextDescription,fontSize:e.fontSize,lineHeight:e.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:e.controlHeightSM,transition:`color ${e.motionDurationMid} ${e.motionEaseOut}`},"&-explain":{"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning}}},[`&-with-help ${t}-explain`]:{height:"auto",opacity:1},[`${t}-feedback-icon`]:{fontSize:e.fontSize,textAlign:"center",visibility:"visible",animationName:n,animationDuration:e.motionDurationMid,animationTimingFunction:e.motionEaseOutBack,pointerEvents:"none","&-success":{color:e.colorSuccess},"&-error":{color:e.colorError},"&-warning":{color:e.colorWarning},"&-validating":{color:e.colorPrimary}}}}},xe=e=>({padding:e.verticalLabelPadding,margin:e.verticalLabelMargin,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{visibility:"hidden"}}}),ye=e=>{const{antCls:t,formItemCls:n}=e;return{[`${n}-horizontal`]:{[`${n}-label`]:{flexGrow:0},[`${n}-control`]:{flex:"1 1 0",minWidth:0},[`${n}-label[class$='-24'], ${n}-label[class*='-24 ']`]:{[`& + ${n}-control`]:{minWidth:"unset"}},[`${t}-col-24${n}-label,\n        ${t}-col-xl-24${n}-label`]:xe(e)}}},ve=e=>{const{componentCls:t,formItemCls:n,inlineItemMarginBottom:r}=e;return{[`${t}-inline`]:{display:"flex",flexWrap:"wrap",[`${n}-inline`]:{flex:"none",marginInlineEnd:e.margin,marginBottom:r,"&-row":{flexWrap:"nowrap"},[`> ${n}-label,\n        > ${n}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${n}-label`]:{flex:"none"},[`${t}-text`]:{display:"inline-block"},[`${n}-has-feedback`]:{display:"inline-block"}}}}},Ce=e=>{const{componentCls:t,formItemCls:n,rootPrefixCls:r}=e;return{[`${n} ${n}-label`]:xe(e),[`${t}:not(${t}-inline)`]:{[n]:{flexWrap:"wrap",[`${n}-label, ${n}-control`]:{[`&:not([class*=" ${r}-col-xs"])`]:{flex:"0 0 100%",maxWidth:"100%"}}}}}},we=e=>{const{componentCls:t,formItemCls:n,antCls:r}=e;return{[`${n}-vertical`]:{[`${n}-row`]:{flexDirection:"column"},[`${n}-label > label`]:{height:"auto"},[`${n}-control`]:{width:"100%"},[`${n}-label,\n        ${r}-col-24${n}-label,\n        ${r}-col-xl-24${n}-label`]:xe(e)},[`@media (max-width: ${M(e.screenXSMax)})`]:[Ce(e),{[t]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-xs-24${n}-label`]:xe(e)}}}],[`@media (max-width: ${M(e.screenSMMax)})`]:{[t]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-sm-24${n}-label`]:xe(e)}}},[`@media (max-width: ${M(e.screenMDMax)})`]:{[t]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-md-24${n}-label`]:xe(e)}}},[`@media (max-width: ${M(e.screenLGMax)})`]:{[t]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-lg-24${n}-label`]:xe(e)}}}}},Ee=(e,t)=>r(e,{formItemCls:`${e.componentCls}-item`,rootPrefixCls:t}),ke=t("Form",(e,{rootPrefixCls:t})=>{const r=Ee(e,t);return[be(r),$e(r),fe(r),ye(r),ve(r),we(r),Y(r),n]},e=>({labelRequiredMarkColor:e.colorError,labelColor:e.colorTextHeading,labelFontSize:e.fontSize,labelHeight:e.controlHeight,labelColonMarginInlineStart:e.marginXXS/2,labelColonMarginInlineEnd:e.marginXS,itemMarginBottom:e.marginLG,verticalLabelPadding:`0 0 ${e.paddingXS}px`,verticalLabelMargin:0,inlineItemMarginBottom:0}),{order:-1e3}),Se=[];function Ie(e,t,n,r=0){return{key:"string"==typeof e?e:`${t}-${r}`,error:e,errorStatus:n}}const Me=({help:e,helpStatus:t,errors:n=Se,warnings:r=Se,className:c,fieldId:m,onVisibleChanged:u})=>{const{prefixCls:d}=I.useContext(a),p=`${d}-item-explain`,f=l(d),[g,h]=ke(d,f),b=I.useMemo(()=>o(d),[d]),$=pe(n),x=pe(r),y=I.useMemo(()=>i(e)?[Ie(e,"help",t)]:[].concat(s($.map((e,t)=>Ie(e,"error","error",t))),s(x.map((e,t)=>Ie(e,"warning","warning",t)))),[e,t,$,x]),v=I.useMemo(()=>{const e={};return y.forEach(({key:t})=>{e[t]=(e[t]||0)+1}),y.map((t,n)=>({...t,key:e[t.key]>1?`${t.key}-fallback-${n}`:t.key}))},[y]),C={};return m&&(C.id=`${m}_help`),I.createElement(N,{motionDeadline:b.motionDeadline,motionName:`${d}-show-help`,visible:!!v.length,onVisibleChanged:u},e=>{const{className:t,style:n}=e;return I.createElement("div",{...C,className:z(p,t,h,f,c,g),style:n},I.createElement(U,{keys:v,...o(d),motionName:`${d}-show-help-item`,component:!1},e=>{const{key:t,error:n,errorStatus:r,className:a,style:l}=e;return I.createElement("div",{key:t,className:z(a,{[`${p}-${r}`]:r}),style:l},n)}))})},Fe=(e,t)=>{const n=I.useContext(q),{getPrefixCls:r,direction:a,requiredMark:o,colon:i,scrollToFirstError:s,className:h,style:b,styles:$,classNames:x}=P("form"),{prefixCls:y,className:v,rootClassName:C,size:w,disabled:E=n,form:k,colon:S,labelAlign:M,labelWrap:F,labelCol:N,wrapperCol:T,layout:D="horizontal",scrollToFirstError:W,requiredMark:_,onFinishFailed:A,name:L,style:O,feedbackIcons:B,variant:V,classNames:X,styles:G,...K}=e,U=c(w),Y=I.useContext(R),Q=I.useMemo(()=>void 0!==_?_:void 0===o||o,[_,o]),Z=S??i,ee=r("form",y),te=l(ee),[ne,re]=ke(ee,te),ae={...e,size:U,disabled:E,layout:D,colon:Z,requiredMark:Q},[le,oe]=m([x,X],[$,G],{props:ae}),ie=z(ee,`${ee}-${D}`,{[`${ee}-hide-required-mark`]:!1===Q,[`${ee}-rtl`]:"rtl"===a,[`${ee}-${U}`]:U},re,te,ne,h,v,C,le.root),[se]=J(k),{__INTERNAL__:ce}=se;ce.name=L;const me=I.useMemo(()=>({name:L,labelAlign:M,labelCol:N,labelWrap:F,wrapperCol:T,layout:D,colon:Z,requiredMark:Q,itemRef:ce.itemRef,form:se,feedbackIcons:B,classNames:le,styles:oe}),[L,M,N,T,D,Z,Q,se,B,le,oe]),ue=I.useRef(null);I.useImperativeHandle(t,()=>({...se,nativeElement:ue.current?.nativeElement}));const de=(e,t)=>{if(e){let n={block:"nearest"};"object"==typeof e&&(n={...n,...e}),se.scrollToField(t,n)}};return I.createElement(u.Provider,{value:V},I.createElement(H,{disabled:E},I.createElement(j.Provider,{value:U},I.createElement(d,{validateMessages:Y},I.createElement(p.Provider,{value:me},I.createElement(f,{status:!0},I.createElement(g,{id:L,...K,name:L,onFinishFailed:e=>{if(A?.(e),e.errorFields.length){const t=e.errorFields[0].name;if(void 0!==W)return void de(W,t);void 0!==s&&de(s,t)}},form:se,ref:ue,style:{...oe?.root,...b,...O},className:ie})))))))},Ne=I.forwardRef(Fe);const ze=()=>{const{status:e,errors:t=[],warnings:n=[]}=I.useContext(h);return{status:e,errors:t,warnings:n}};ze.Context=h;const qe=b(["Form","item-item"],(e,{rootPrefixCls:t})=>(e=>{const{formItemCls:t}=e;return{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{[`${t}-control`]:{display:"flex"}}}})(Ee(e,t))),Pe=e=>{const{prefixCls:t,status:n,labelCol:r,wrapperCol:l,children:o,errors:i,warnings:s,_internalItemRender:c,extra:m,help:u,fieldId:d,marginBottom:f,onErrorVisibleChanged:g,label:h}=e,b=`${t}-item`,$=I.useContext(p),{classNames:x,styles:y}=$,v=I.useMemo(()=>{let e={...l||$.wrapperCol||{}};if(null===h&&!r&&!l&&$.labelCol){[void 0,"xs","sm","md","lg","xl","xxl"].forEach(t=>{const n=t?[t]:[],r=A($.labelCol,n),a="object"==typeof r?r:{},l=A(e,n);"span"in a&&!("offset"in("object"==typeof l?l:{}))&&a.span<24&&(e=L(e,[].concat(n,["offset"]),a.span))})}return e},[l,$.wrapperCol,$.labelCol,h,r]),C=z(`${b}-control`,v.className),w=I.useMemo(()=>{const{labelCol:e,wrapperCol:t,...n}=$;return n},[$]),E=I.useRef(null),[k,S]=I.useState(0);O(()=>{m&&E.current?S(E.current.clientHeight):S(0)},[m]);const M=I.createElement("div",{className:`${b}-control-input`},I.createElement("div",{className:z(`${b}-control-input-content`,x?.content),style:y?.content},o)),F=I.useMemo(()=>({prefixCls:t,status:n}),[t,n]),N=null!==f||i.length||s.length?I.createElement(a.Provider,{value:F},I.createElement(Me,{fieldId:d,errors:i,warnings:s,help:u,helpStatus:n,className:`${b}-explain-connected`,onVisibleChanged:g})):null,q={};d&&(q.id=`${d}_extra`);const P=m?I.createElement("div",{...q,className:`${b}-extra`,ref:E},m):null,R=N||P?I.createElement("div",{className:`${b}-additional`,style:f?{minHeight:f+k}:{}},N,P):null,H=c&&"pro_table_render"===c.mark&&c.render?c.render(e,{input:M,errorList:N,extra:P}):I.createElement(I.Fragment,null,M,R);return I.createElement(p.Provider,{value:w},I.createElement(Q,{...v,className:C},H),I.createElement(qe,{prefixCls:t}))},Re=({prefixCls:e,label:t,htmlFor:n,labelCol:r,labelAlign:a,colon:l,required:o,requiredMark:i,tooltip:s,vertical:c})=>{const[m]=ae("Form"),{labelAlign:u,labelCol:d,labelWrap:f,colon:g,classNames:h,styles:b}=I.useContext(p);if(!t)return null;const x=r||d||{},y=`${e}-item-label`,v=z(y,"left"===(a||u)&&`${y}-left`,x.className,{[`${y}-wrap`]:!!f});let C=t;const w=!0===l||!1!==g&&!1!==l;w&&!c&&"string"==typeof t&&t.trim()&&(C=t.replace(/[:|ï¼š]\s*$/,""));const E=Z(s);if(E){const{icon:t=I.createElement(de,null),...n}=E,r=I.createElement($,{...n},I.cloneElement(t,{className:`${e}-item-tooltip`,title:"",onClick:e=>{e.preventDefault()},tabIndex:null}));C=I.createElement(I.Fragment,null,C,r)}const k="optional"===i,S="function"==typeof i,M=!1===i;let F;S?C=i(C,{required:!!o}):k&&!o&&(C=I.createElement(I.Fragment,null,C,I.createElement("span",{className:`${e}-item-optional`,title:""},m?.optional||B.Form?.optional))),M?F="hidden":(k||S)&&(F="optional");const N=z(h?.label,{[`${e}-item-required`]:o,[`${e}-item-required-mark-${F}`]:F,[`${e}-item-no-colon`]:!w});return I.createElement(Q,{...x,className:v},I.createElement("label",{htmlFor:n,className:N,style:b?.label,title:"string"==typeof t?t:""},C))},He={success:se,warning:ie,error:oe,validating:le};function je({children:e,errors:t,warnings:n,hasFeedback:r,validateStatus:a,prefixCls:l,meta:o,noStyle:i,name:s}){const c=`${l}-item`,{feedbackIcons:m}=I.useContext(p),u=ee(t,n,o,null,!!r,a),{isFormItemInput:d,status:f,hasFeedback:g,feedbackIcon:b,name:$}=I.useContext(h),x=I.useMemo(()=>{let e;if(r){const a=!0!==r&&r.icons||m,l=u&&a?.({status:u,errors:t,warnings:n})?.[u],o=u?He[u]:null;e=!1!==l&&o?I.createElement("span",{className:z(`${c}-feedback-icon`,`${c}-feedback-icon-${u}`)},l||I.createElement(o,null)):null}const a={status:u||"",errors:t,warnings:n,hasFeedback:!!r,feedbackIcon:e,isFormItemInput:!0,name:s};return i&&(a.status=(u??f)||"",a.isFormItemInput=d,a.hasFeedback=!!(r??g),a.feedbackIcon=void 0!==r?a.feedbackIcon:b,a.name=s??$),a},[u,r,i,d,f]);return I.createElement(h.Provider,{value:x},e)}function Te(e){const{prefixCls:t,className:n,rootClassName:r,style:a,help:l,errors:o,warnings:s,validateStatus:c,meta:m,hasFeedback:u,hidden:d,children:f,fieldId:g,required:h,isRequired:b,onSubItemMetaChange:$,layout:v,name:C,...w}=e,E=`${t}-item`,{requiredMark:k,layout:S}=I.useContext(p),M=v||S,F="vertical"===M,N=I.useRef(null),q=pe(o),P=pe(s),R=i(l),H=!!(R||o.length||s.length),j=!!N.current&&V(N.current),[T,D]=I.useState(null);O(()=>{if(H&&N.current){const e=getComputedStyle(N.current);D(Number.parseInt(e.marginBottom,10))}},[H,j]);const W=((e=!1)=>{const t=e?q:m.errors,n=e?P:m.warnings;return ee(t,n,m,"",!!u,c)})(),_=z(E,n,r,{[`${E}-with-help`]:R||q.length||P.length,[`${E}-has-feedback`]:W&&u,[`${E}-has-success`]:"success"===W,[`${E}-has-warning`]:"warning"===W,[`${E}-has-error`]:"error"===W,[`${E}-is-validating`]:"validating"===W,[`${E}-hidden`]:d,[`${E}-${M}`]:M});return I.createElement("div",{className:_,style:a,ref:N},I.createElement(te,{className:`${E}-row`,...x(w,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol","validateDebounce"])},I.createElement(Re,{htmlFor:g,...e,requiredMark:k,required:h??b,prefixCls:t,vertical:F}),I.createElement(Pe,{...e,...m,errors:q,warnings:P,prefixCls:t,status:W,help:l,marginBottom:T,onErrorVisibleChanged:e=>{e||D(null)}},I.createElement(y.Provider,{value:$},I.createElement(je,{prefixCls:t,meta:m,errors:m.errors,warnings:m.warnings,hasFeedback:u,validateStatus:W,name:C},f)))),!!T&&I.createElement("div",{className:`${E}-margin-offset`,style:{marginBottom:-T}}))}const De=I.memo(e=>e.children,(e,t)=>function(e,t){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(n=>{const r=e[n],a=t[n];return r===a||"function"==typeof r||"function"==typeof a})}(e.control,t.control)&&e.update===t.update&&e.childProps.length===t.childProps.length&&e.childProps.every((e,n)=>e===t.childProps[n]));const We=function(e){const{name:t,noStyle:n,className:r,dependencies:a,prefixCls:o,shouldUpdate:c,rules:m,children:u,required:d,label:f,messageVariables:g,trigger:h="onChange",validateTrigger:b,hidden:$,help:x,layout:k}=e,{getPrefixCls:S}=I.useContext(X),{name:M}=I.useContext(p),F=function(e){if("function"==typeof e)return e;const t=T(e);return t.length<=1?t[0]:t}(u),N="function"==typeof F,q=I.useContext(y),{validateTrigger:P}=I.useContext(v),R=i(b)?b:P,H=i(t),j=S("form",o),A=l(j),[L,O]=ke(j,A),B=I.useContext(C),V=I.useRef(null),[U,Y]=function(e){const[t,n]=I.useState(e),r=I.useRef(null),a=I.useRef([]),l=I.useRef(!1);return I.useEffect(()=>(l.current=!1,()=>{l.current=!0,D.cancel(r.current),r.current=null}),[]),[t,function(e){l.current||(null===r.current&&(a.current=[],r.current=D(()=>{r.current=null,n(e=>{let t=e;return a.current.forEach(e=>{t=e(t)}),t})})),a.current.push(e))}]}({}),[J,Q]=G(()=>({errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1})),Z=(e,t)=>{Y(n=>{const r={...n},a=[].concat(s(e.name.slice(0,-1)),s(t)).join("__SPLIT__");return e.destroy?delete r[a]:r[a]=e,r})},[ee,te]=I.useMemo(()=>{const e=s(J.errors),t=s(J.warnings);return Object.values(U).forEach(n=>{e.push.apply(e,s(n.errors||[])),t.push.apply(t,s(n.warnings||[]))}),[e,t]},[U,J.errors,J.warnings]),ae=function(){const{itemRef:e}=I.useContext(p),t=I.useRef({});return function(n,r){const a=r&&"object"==typeof r&&W(r),l=n.join("_");return t.current.name===l&&t.current.originRef===a||(t.current.name=l,t.current.originRef=a,t.current.ref=_(e(n),a)),t.current.ref}}();function le(a,l,o){return n&&!$?I.createElement(je,{prefixCls:j,hasFeedback:e.hasFeedback,validateStatus:e.validateStatus,meta:J,errors:ee,warnings:te,noStyle:!0,name:t},a):I.createElement(Te,{key:"row",...e,className:z(r,O,A,L),prefixCls:j,fieldId:l,isRequired:o,errors:ee,warnings:te,meta:J,onSubItemMetaChange:Z,layout:k,name:t},a)}if(!H&&!N&&!a)return le(F);let oe={};return"string"==typeof f?oe.label=f:t&&(oe.label=String(t)),g&&(oe={...oe,...g}),I.createElement(w,{...e,messageVariables:oe,trigger:h,validateTrigger:R,onMetaChange:e=>{const t=B?.getKey(e.name);if(Q(e.destroy?{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}:e,!0),n&&!1!==x&&q){let n=e.name;if(e.destroy)n=V.current||n;else if(void 0!==t){const[e,r]=t;n=[e].concat(s(r)),V.current=n}q(e,n)}}},(n,r,l)=>{const o=ne(t).length&&r?r.name:[],i=re(o,M),u=void 0!==d?d:!!m?.some(e=>{if(e&&"object"==typeof e&&e.required&&!e.warningOnly)return!0;if("function"==typeof e){const t=e(l);return t?.required&&!t?.warningOnly}return!1}),p={...n};let f=null;if(Array.isArray(F)&&H)f=F;else if(N&&(!c&&!a||H));else if(!a||N||H)if(I.isValidElement(F)){const t={...F.props,...p};if(t.id||(t.id=i),x||ee.length>0||te.length>0||e.extra){const n=[];(x||ee.length>0)&&n.push(`${i}_help`),e.extra&&n.push(`${i}_extra`),t["aria-describedby"]=n.join(" ")}ee.length>0&&(t["aria-invalid"]="true"),u&&(t["aria-required"]="true"),K(F)&&(t.ref=ae(o,F));new Set([].concat(s(ne(h)),s(ne(R)))).forEach(e=>{t[e]=(...t)=>{p[e]?.(...t),F.props[e]?.(...t)}});const n=[t["aria-required"],t["aria-invalid"],t["aria-describedby"]];f=I.createElement(De,{control:p,update:F,childProps:n},E(F,t))}else f=N&&(c||a)&&!H?F(l):F;else;return le(f,i,u)})};We.useStatus=ze;const _e=Ne;_e.Item=We,_e.List=({prefixCls:e,children:t,...n})=>{const{getPrefixCls:r}=I.useContext(X),l=r("form",e),o=I.useMemo(()=>({prefixCls:l,status:"error"}),[l]);return I.createElement(k,{...n},(e,n,r)=>I.createElement(a.Provider,{value:o},t(e.map(e=>({...e,fieldKey:e.key})),n,{errors:r.errors,warnings:r.warnings})))},_e.ErrorList=Me,_e.useForm=J,_e.useFormInstance=function(){const{form:e}=I.useContext(p);return e},_e.useWatch=S,_e.Provider=d;export{_e as F};
