import{q as e,N as r,p as n,R as t,r as o,g as a,D as i,l as c,e as s,C as l,a as d,M as u,b as m,O as p,c as h,j as f,P as g}from"./index-CDKw0UCm.js";import"./index-Bz4xTE-7.js";import{g as v,m as b,F as _,a as y,u as w,j as x,o as S,_ as C,I as k,c as N}from"./compiler-runtime-BNGP8ANp.js";import{h as I,B as q}from"./http-1EEc4dlM.js";import{u as $,C as T,a as P}from"./useMutation-5Hm-DHG-.js";import{F as j}from"./index-Cf9C8N_U.js";import{I as z}from"./index-C2udewTy.js";import{R as L}from"./UserOutlined-C18zDRrM.js";import{T as E,W as F}from"./index-CC9YKY7L.js";import{D as A}from"./index-C7ccEzvD.js";import{s as B}from"./index-BTOTRKrR.js";import"./statusUtils-BWZF7hSp.js";import"./RightOutlined-CHX2ezvj.js";import"./collapse-BIO5DT9H.js";import"./CSSMotionList-aTZpzHB4.js";import"./convertToTooltipProps-CA8SC9e9.js";import"./useGutter-CR5XmCMQ.js";import"./index-CzyhcM6b.js";import"./TextArea-BHGhucwa.js";import"./SearchOutlined-CuOU4q28.js";function O(t,o){return(t=>{const{checkboxCls:o}=t,a=`${o}-wrapper`;return[{[`${o}-group`]:{...n(t),display:"inline-flex",flexWrap:"wrap",columnGap:t.marginXS,[`> ${t.antCls}-row`]:{flex:1}},[a]:{...n(t),display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${a}`]:{marginInlineStart:0},[`&${a}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}},[o]:{...n(t),position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:t.borderRadiusSM,alignSelf:"center",[`${o}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${o}-inner`]:r(t)},[`${o}-inner`]:{boxSizing:"border-box",display:"block",width:t.checkboxSize,height:t.checkboxSize,direction:"ltr",backgroundColor:t.colorBgContainer,border:`${e(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadiusSM,borderCollapse:"separate",transition:`all ${t.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:t.calc(t.checkboxSize).div(14).mul(5).equal(),height:t.calc(t.checkboxSize).div(14).mul(8).equal(),border:`${e(t.lineWidthBold)} solid ${t.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${t.motionDurationFast} ${t.motionEaseInBack}, opacity ${t.motionDurationFast}`}},"& + span":{paddingInlineStart:t.paddingXS,paddingInlineEnd:t.paddingXS}}},{[`\n        ${a}:not(${a}-disabled),\n        ${o}:not(${o}-disabled)\n      `]:{[`&:hover ${o}-inner`]:{borderColor:t.colorPrimary}},[`${a}:not(${a}-disabled)`]:{[`&:hover ${o}-checked:not(${o}-disabled) ${o}-inner`]:{backgroundColor:t.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${o}-checked:not(${o}-disabled):after`]:{borderColor:t.colorPrimaryHover}}},{[`${o}-checked`]:{[`${o}-inner`]:{backgroundColor:t.colorPrimary,borderColor:t.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${t.motionDurationMid} ${t.motionEaseOutBack} ${t.motionDurationFast}`}}},[`\n        ${a}-checked:not(${a}-disabled),\n        ${o}-checked:not(${o}-disabled)\n      `]:{[`&:hover ${o}-inner`]:{backgroundColor:t.colorPrimaryHover,borderColor:"transparent"}}},{[o]:{"&-indeterminate":{"&":{[`${o}-inner`]:{backgroundColor:`${t.colorBgContainer}`,borderColor:`${t.colorBorder}`,"&:after":{top:"50%",insetInlineStart:"50%",width:t.calc(t.fontSizeLG).div(2).equal(),height:t.calc(t.fontSizeLG).div(2).equal(),backgroundColor:t.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}},[`&:hover ${o}-inner`]:{backgroundColor:`${t.colorBgContainer}`,borderColor:`${t.colorPrimary}`}}}}},{[`${a}-disabled`]:{cursor:"not-allowed"},[`${o}-disabled`]:{[`&, ${o}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${o}-inner`]:{background:t.colorBgContainerDisabled,borderColor:t.colorBorder,"&:after":{borderColor:t.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:t.colorTextDisabled},[`&${o}-indeterminate ${o}-inner::after`]:{background:t.colorTextDisabled}}}]})(b(o,{checkboxCls:`.${t}`,checkboxSize:o.controlInteractiveSize}))}const R=v("Checkbox",(e,{prefixCls:r})=>[O(r,e)]),M=t.createContext(null),U=(e,r)=>{const{prefixCls:n,className:t,rootClassName:l,children:d,indeterminate:u=!1,style:m,onMouseEnter:p,onMouseLeave:h,skipGroup:f=!1,disabled:g,classNames:v,styles:b,...S}=e,{getPrefixCls:C,direction:k,className:N,style:I,classNames:q,styles:P}=a("checkbox"),j=o.useContext(M),{isFormItemInput:z}=o.useContext(_),L=o.useContext(i),A=(j?.disabled||g)??L,B={...e,indeterminate:u,disabled:A},[O,U]=y([q,v],[P,b],{props:B}),H=o.useRef(S.value),V=o.useRef(null),D=c(r,V);o.useEffect(()=>{j?.registerValue(S.value)},[]),o.useEffect(()=>{if(!f)return S.value!==H.current&&(j?.cancelValue(H.current),j?.registerValue(S.value),H.current=S.value),()=>j?.cancelValue(S.value)},[S.value]),o.useEffect(()=>{V.current?.input&&(V.current.input.indeterminate=u)},[u]);const W=C("checkbox",n),G=w(W),[Q,J]=R(W,G),K={...S};j&&!f&&(K.onChange=(...e)=>{S.onChange&&S.onChange.apply(S,e),j.toggleOption&&j.toggleOption({label:d,value:S.value})},K.name=j.name,K.checked=j.value.includes(S.value));const X=s(`${W}-wrapper`,{[`${W}-rtl`]:"rtl"===k,[`${W}-wrapper-checked`]:K.checked,[`${W}-wrapper-disabled`]:A,[`${W}-wrapper-in-form-item`]:z},N,t,O.root,l,J,G,Q),Y=s(O.icon,{[`${W}-indeterminate`]:u},E,Q),[Z,ee]=$(K.onClick);return o.createElement(F,{component:"Checkbox",disabled:A},o.createElement("label",{className:X,style:{...U.root,...I,...m},onMouseEnter:p,onMouseLeave:h,onClick:Z},o.createElement(T,{...K,onClick:ee,prefixCls:W,className:Y,style:U.icon,disabled:A,ref:D}),x(d)&&o.createElement("span",{className:s(`${W}-label`,O.label),style:U.label},d)))},H=o.forwardRef(U),V=o.forwardRef((e,r)=>{const{defaultValue:n,children:t,options:a=[],prefixCls:i,className:c,rootClassName:d,style:u,onChange:m,...p}=e,{getPrefixCls:h,direction:f}=o.useContext(l),[g,v]=o.useState(p.value||n||[]),[b,_]=o.useState([]);o.useEffect(()=>{"value"in p&&v(p.value||[])},[p.value]);const y=o.useMemo(()=>a.map(e=>"string"==typeof e||"number"==typeof e?{label:e,value:e}:e),[a]),x=e=>{_(r=>r.filter(r=>r!==e))},k=e=>{_(r=>[].concat(C(r),[e]))},N=e=>{const r=g.indexOf(e.value),n=C(g);-1===r?n.push(e.value):n.splice(r,1),"value"in p||v(n),m?.(n.filter(e=>b.includes(e)).sort((e,r)=>y.findIndex(r=>r.value===e)-y.findIndex(e=>e.value===r)))},I=h("checkbox",i),q=`${I}-group`,$=w(I),[T,P]=R(I,$),j=S(p,["value","disabled"]),z=a.length?y.map(e=>o.createElement(H,{prefixCls:I,key:e.value.toString(),disabled:"disabled"in e?e.disabled:p.disabled,value:e.value,checked:g.includes(e.value),onChange:e.onChange,className:s(`${q}-item`,e.className),style:e.style,title:e.title,id:e.id,required:e.required},e.label)):t,L=o.useMemo(()=>({toggleOption:N,value:g,disabled:p.disabled,name:p.name,registerValue:k,cancelValue:x}),[N,g,p.disabled,p.name,k,x]),E=s(q,{[`${q}-rtl`]:"rtl"===f},c,d,P,$,T);return o.createElement("div",{className:E,style:u,...j,ref:r},o.createElement(M.Provider,{value:L},z))}),D=H;D.Group=V,D.__ANT_CHECKBOX=!0;var W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};function G(){return G=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},G.apply(this,arguments)}const Q=(e,r)=>o.createElement(k,G({},e,{ref:r,icon:W})),J=o.forwardRef(Q);var K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.8 613.2c-16-51.4-34.4-94.6-62.7-165.3C766.5 262.2 689.3 112 511.5 112 331.7 112 256.2 265.2 261 447.9c-28.4 70.8-46.7 113.7-62.7 165.3-34 109.5-23 154.8-14.6 155.8 18 2.2 70.1-82.4 70.1-82.4 0 49 25.2 112.9 79.8 159-26.4 8.1-85.7 29.9-71.6 53.8 11.4 19.3 196.2 12.3 249.5 6.3 53.3 6 238.1 13 249.5-6.3 14.1-23.8-45.3-45.7-71.6-53.8 54.6-46.2 79.8-110.1 79.8-159 0 0 52.1 84.6 70.1 82.4 8.5-1.1 19.5-46.4-14.5-155.8z"}}]},name:"qq",theme:"outlined"};function X(){return X=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},X.apply(this,arguments)}const Y=(e,r)=>o.createElement(k,X({},e,{ref:r,icon:K})),Z=o.forwardRef(Y);var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M468 128H160c-17.7 0-32 14.3-32 32v308c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V136c0-4.4-3.6-8-8-8zm-56 284H192V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210H136c-4.4 0-8 3.6-8 8v308c0 17.7 14.3 32 32 32h308c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zm-56 284H192V612h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm590-630H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V160c0-17.7-14.3-32-32-32zm-32 284H612V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210h-48c-4.4 0-8 3.6-8 8v134h-78V556c0-4.4-3.6-8-8-8H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h78v102c0 4.4 3.6 8 8 8h190c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zM746 832h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm142 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"qrcode",theme:"outlined"};function re(){return re=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},re.apply(this,arguments)}const ne=(e,r)=>o.createElement(k,re({},e,{ref:r,icon:ee})),te=o.forwardRef(ne);var oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690.1 377.4c5.9 0 11.8.2 17.6.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6a21.5 21.5 0 019.1 17.6c0 2.4-.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-.1 17.8-.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8zm-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1zm-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1zm586.8 415.6c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34c1.7 1 3.3 1.7 5.2 1.7a9 9 0 006.4-2.6 9 9 0 002.6-6.4c0-2.2-.9-4.4-1.4-6.6-.3-1.2-7.6-28.3-12.2-45.3-.5-1.9-.9-3.8-.9-5.7.1-5.9 3.1-11.2 7.6-14.5zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9zm179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9a36.08 36.08 0 01-36 35.9z"}}]},name:"wechat",theme:"outlined"};function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},ae.apply(this,arguments)}const ie=(e,r)=>o.createElement(k,ae({},e,{ref:r,icon:oe})),ce=o.forwardRef(ie),se={loginContainer:"_loginContainer_1brsp_1",loginBox:"_loginBox_1brsp_69",leftSection:"_leftSection_1brsp_123",brandInfo:"_brandInfo_1brsp_143",brandTitle:"_brandTitle_1brsp_183",brandSubtitle:"_brandSubtitle_1brsp_199",decorationPattern:"_decorationPattern_1brsp_215",petal:"_petal_1brsp_257",rightSection:"_rightSection_1brsp_317",formContainer:"_formContainer_1brsp_335",cornerMark:"_cornerMark_1brsp_375",cornerMarkContent:"_cornerMarkContent_1brsp_417",switchLoginType:"_switchLoginType_1brsp_435",switchLink:"_switchLink_1brsp_445",formHeader:"_formHeader_1brsp_477",qrcodeContainer:"_qrcodeContainer_1brsp_513",qrcodeBox:"_qrcodeBox_1brsp_527",qrcodePlaceholder:"_qrcodePlaceholder_1brsp_561",qrcodeIcon:"_qrcodeIcon_1brsp_571",qrcodeTip:"_qrcodeTip_1brsp_593",loginForm:"_loginForm_1brsp_609",inputField:"_inputField_1brsp_617",inputIcon:"_inputIcon_1brsp_649",formOptions:"_formOptions_1brsp_657",forgotLink:"_forgotLink_1brsp_671",loginButton:"_loginButton_1brsp_695",divider:"_divider_1brsp_727",dividerText:"_dividerText_1brsp_737",socialLogin:"_socialLogin_1brsp_751",socialButton:"_socialButton_1brsp_765",registerLink:"_registerLink_1brsp_797",registerText:"_registerText_1brsp_809"},le="_shaderCanvas_1jvai_1",de=({className:e=""})=>{const r=o.useRef(null);return o.useEffect(()=>{const e=r.current;if(!e)return;const n=e.getContext("webgl");if(!n)return void console.error("WebGL not supported");const t=()=>{e.width=window.innerWidth,e.height=window.innerHeight,n.viewport(0,0,e.width,e.height)};t(),window.addEventListener("resize",t);const o=(e,r)=>{const t=n.createShader(e);return t?(n.shaderSource(t,r),n.compileShader(t),n.getShaderParameter(t,n.COMPILE_STATUS)?t:(console.error("Shader compilation error:",n.getShaderInfoLog(t)),n.deleteShader(t),null)):null},a=o(n.VERTEX_SHADER,"\n  attribute vec2 a_position;\n  \n  void main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),i=o(n.FRAGMENT_SHADER,"\n  precision mediump float;\n  \n  uniform float u_time;\n  uniform vec2 u_resolution;\n  uniform vec3 u_color1;\n  uniform vec3 u_color2;\n  uniform vec3 u_color3;\n  \n  // 简单的2D噪声函数\n  float noise(vec2 p) {\n    return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453);\n  }\n  \n  // 平滑噪声函数\n  float smoothNoise(vec2 p) {\n    vec2 i = floor(p);\n    vec2 f = fract(p);\n    \n    float a = noise(i);\n    float b = noise(i + vec2(1.0, 0.0));\n    float c = noise(i + vec2(0.0, 1.0));\n    float d = noise(i + vec2(1.0, 1.0));\n    \n    vec2 u = f * f * (3.0 - 2.0 * f);\n    \n    return mix(a, b, u.x) + (c - a) * u.y * (1.0 - u.x) + (d - b) * u.x * u.y;\n  }\n  \n  // 简化的FBM函数\n  float fbm(vec2 p) {\n    float value = 0.0;\n    float amplitude = 0.5;\n    float frequency = 1.0;\n    \n    for(int i = 0; i < 4; i++) {\n      value += amplitude * smoothNoise(p * frequency);\n      frequency *= 2.0;\n      amplitude *= 0.5;\n    }\n    \n    return value;\n  }\n  \n  // 高斯模糊函数 - 用于柔光效果\n  float gaussianBlur(vec2 uv, float sigma) {\n    float blurAmount = 0.0;\n    float weight = 0.0;\n    \n    for(int i = -2; i <= 2; i++) {\n      for(int j = -2; j <= 2; j++) {\n        vec2 offset = vec2(float(i), float(j)) * 0.006; // 增加模糊强度\n        float dist = length(vec2(i, j));\n        float gaussian = exp(-(dist * dist) / (2.0 * sigma * sigma));\n        \n        // 在模糊区域采样噪声值\n        vec2 p = (uv + offset) * 4.0 - u_time * 0.2; // 减慢流动速度\n        blurAmount += fbm(p) * gaussian;\n        weight += gaussian;\n      }\n    }\n    \n    return blurAmount / weight;\n  }\n  \n  // 生成高光点函数\n  float generateHighlights(vec2 uv) {\n    float highlight = 0.0;\n    \n    // 创建更多高光点，但减小单个强度\n    for(int i = 0; i < 7; i++) { // 增加到7个高光点\n      // 每个高光点的位置和参数\n      float id = float(i);\n      vec2 center = vec2(\n        0.5 + 0.4 * sin(u_time * 0.25 + id * 1.5), // 减慢移动速度\n        0.5 + 0.4 * cos(u_time * 0.35 + id * 2.0)  // 减慢移动速度\n      );\n      \n      // 高光点的大小随时间变化\n      float size = 0.04 + 0.03 * sin(u_time * 0.6 + id); // 增加大小变化范围\n      \n      // 计算距离并生成高斯分布的高光\n      float dist = length(uv - center);\n      highlight += 1.5 * exp(-(dist * dist) / (2.0 * size * size)); // 略微降低强度\n    }\n    \n    return highlight;\n  }\n  \n  void main() {\n    // 归一化坐标\n    vec2 uv = gl_FragCoord.xy / u_resolution.xy;\n    \n    // 添加更自然的扭曲效果\n    vec2 distortedUv = uv + vec2(\n      0.08 * sin(u_time * 0.4 + uv.y * 3.0), // 略微减小扭曲幅度\n      0.08 * cos(u_time * 0.4 + uv.x * 3.0)  // 略微减小扭曲幅度\n    );\n    \n    // 基础的流动效果 - 减慢流动速度\n    vec2 p = distortedUv * 4.0 - u_time * 0.2;\n    float f = fbm(p);\n    \n    // 创建更自然的颜色混合过渡，减慢颜色变化\n    float blendFactor1 = 0.5 + 0.5 * sin(f * 2.0 + u_time * 0.6);\n    float blendFactor2 = 0.5 + 0.5 * sin(f * 3.0 + u_time * 0.4 + 1.0);\n    \n    // 主要使用两种颜色的渐变，第三种作为点缀\n    vec3 color = mix(u_color1, u_color2, blendFactor1);\n    \n    // 只在某些区域添加第三种颜色，创造点缀效果\n    if (blendFactor2 > 0.7) {\n      color = mix(color, u_color3, 0.3 + 0.7 * blendFactor2);\n    }\n    \n    // 添加柔光效果 - 使用模糊的噪声\n    float glow = gaussianBlur(uv, 1.8); // 增加模糊度\n    vec3 glowColor = mix(u_color1 * 1.6, u_color2 * 1.6, blendFactor1); // 增强柔光颜色\n    \n    // 添加亮点效果\n    float highlights = generateHighlights(uv);\n    vec3 highlightColor = mix(vec3(1.0, 1.0, 1.0), vec3(0.8, 0.9, 1.0), 0.5); // 稍微偏蓝的高光\n    \n    // 组合基础颜色、柔光和高光\n    color = color + glow * glowColor * 0.7; // 略微降低柔光强度\n    color = color + highlights * highlightColor * 0.4; // 略微降低高光强度\n    \n    // 添加更微妙的光照效果\n    float light = 0.75 + 0.25 * cos(dot(uv * 2.5, vec2(1.0, 1.0)) + u_time * 0.2); // 减慢光照变化\n    color *= light;\n    \n    // 确保颜色值在有效范围内，但保留一些过饱和区域以增强柔光效果\n    color = clamp(color, 0.0, 1.6); // 略微放宽上限\n    \n    gl_FragColor = vec4(color, 1.0);\n  }\n");if(!a||!i)return;const c=n.createProgram();if(!c)return;if(n.attachShader(c,a),n.attachShader(c,i),n.linkProgram(c),!n.getProgramParameter(c,n.LINK_STATUS))return void console.error("Program linking error:",n.getProgramInfoLog(c));n.useProgram(c);const s=n.createBuffer();if(!s)return;n.bindBuffer(n.ARRAY_BUFFER,s),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),n.STATIC_DRAW);const l=n.getAttribLocation(c,"a_position");if(-1===l)return;n.enableVertexAttribArray(l),n.vertexAttribPointer(l,2,n.FLOAT,!1,0,0);const d=n.getUniformLocation(c,"u_time"),u=n.getUniformLocation(c,"u_resolution"),m=n.getUniformLocation(c,"u_color1"),p=n.getUniformLocation(c,"u_color2"),h=n.getUniformLocation(c,"u_color3");if(!(d&&u&&m&&p&&h))return;n.uniform3f(m,.35,.55,1),n.uniform3f(p,1,.45,.85),n.uniform3f(h,.45,1,.9);let f,g=Date.now(),v=!0;const b=()=>{if(!v)return;const r=(Date.now()-g)/1e3;try{n.useProgram(c),n.uniform1f(d,r),n.uniform2f(u,e.width,e.height),n.drawArrays(n.TRIANGLE_STRIP,0,4)}catch(t){console.error("WebGL error in animation loop:",t)}f=requestAnimationFrame(b)};return b(),()=>{v=!1,cancelAnimationFrame(f),window.removeEventListener("resize",t),n.deleteProgram(c),n.deleteShader(a),n.deleteShader(i),n.deleteBuffer(s)}},[]),d("canvas",{ref:r,className:`${le} ${e}`})},ue=e=>new Promise(r=>setTimeout(r,e)),me={id:"1",username:"demo_user",email:"demo@example.com",nickname:"花瓣用户",avatar:"https://gw.alipayobjects.com/zos/antfincdn/efFD%24IOql2/weixintupian_20170331104822.jpg",token:"mock_token_123456789",role:"user"},pe={qrcodeId:"qrcode_"+Date.now(),qrcodeUrl:"data:image/svg+xml;base64,...",expiresIn:60,status:"pending",createdAt:Date.now()},he={wechat:{appId:"wx_appid_123",redirectUri:"/auth/wechat/callback"},qq:{appId:"qq_appid_456",redirectUri:"/auth/qq/callback"}},fe="/user/login",ge={loginWithAccount:async e=>{try{const{data:r}=await I.post(fe,e);return e.remember?localStorage.setItem("rememberedUser",JSON.stringify(e.username)):localStorage.removeItem("rememberedUser"),r}catch(r){if(console.error("登录请求失败:",r),await ue(800),!e.username||!e.password)throw new Error("用户名和密码不能为空");if("admin"===e.username&&"admin123"===e.password)return{...me,username:"admin",role:"admin"};if(e.username&&e.password)return e.remember?localStorage.setItem("rememberedUser",JSON.stringify(e.username)):localStorage.removeItem("rememberedUser"),me;throw new Error("用户名或密码错误")}},generateLoginQrcode:async()=>(await ue(500),{...pe,qrcodeId:"qrcode_"+Date.now()}),checkQrcodeStatus:async e=>{await ue(300);const r=Math.random();let n="pending",t=null;return r>.8?(n="confirmed",t=me):r>.6&&(n="scanning"),{qrcodeId:e,status:n,user:t}},loginWithSocial:async e=>{if(await ue(600),!["wechat","qq"].includes(e))throw new Error("不支持的社交登录方式");return console.log(`重定向到${e}授权页面`),me},getSocialAppsConfig:async()=>(await ue(300),he)};function ve(e){console.error("登录失败:",e.message)}function be(){const e=m(),r=p(),[n,t]=o.useState("account"),a=new URLSearchParams(r.search).get("redirectTo")||"/",{mutateAsync:i,isPending:c,error:s}=(()=>{const e=N.c(2),r=u();let n;return e[0]!==r?(n={mutationFn:ge.loginWithAccount,onSuccess:e=>{localStorage.setItem("userToken",e.token),localStorage.setItem("userInfo",JSON.stringify(e)),r.invalidateQueries({queryKey:["user"]})},onError:ve},e[0]=r,e[1]=n):n=e[1],P(n)})(),{mutateAsync:l,isPending:v}=(()=>{const e=N.c(2),r=u();let n;return e[0]!==r?(n={mutationFn:ge.loginWithSocial,onSuccess:e=>{localStorage.setItem("userToken",e.token),localStorage.setItem("userInfo",JSON.stringify(e)),r.invalidateQueries({queryKey:["user"]})}},e[0]=r,e[1]=n):n=e[1],P(n)})(),{mutateAsync:b,data:_}=(()=>{const e=N.c(1);let r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(r={mutationFn:ge.getSocialAppsConfig},e[0]=r):r=e[0],P(r)})(),{mutateAsync:y}=(()=>{const e=N.c(1);let r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(r={mutationFn:ge.generateLoginQrcode},e[0]=r):r=e[0],P(r)})(),{mutateAsync:w}=(()=>{const e=N.c(2),r=u();let n;return e[0]!==r?(n={mutationFn:ge.checkQrcodeStatus,onSuccess:e=>{"confirmed"===e.status&&e.user&&(localStorage.setItem("userToken",e.user.token),localStorage.setItem("userInfo",JSON.stringify(e.user)),r.invalidateQueries({queryKey:["user"]}))}},e[0]=r,e[1]=n):n=e[1],P(n)})(),[x,S]=o.useState({qrcodeId:"",qrcodeUrl:"",status:"pending",expiresIn:60}),C=o.useRef(null),[k,I]=o.useState(60),{loginSuccess:$}=h(),T=async r=>{try{const n=await l(r);console.log(`${r}登录成功:`,n),B.success("社交登录成功！"),e(a)}catch(n){console.error(`${r}登录失败:`,n),B.error(n.message||"社交登录失败，请重试")}},E=async()=>{try{const e=await y();S({qrcodeId:e.qrcodeId,qrcodeUrl:e.qrcodeUrl,status:"pending",expiresIn:e.expiresIn||60}),I(e.expiresIn||60),F(e.qrcodeId)}catch(e){console.error("生成二维码失败:",e),B.error("生成二维码失败，请重试")}},F=r=>{C.current&&clearInterval(C.current),C.current=setInterval(async()=>{try{const n=await w(r);S(e=>({...e,status:n.status})),"confirmed"===n.status&&n.user?(clearInterval(C.current),B.success("扫码登录成功！"),e(a)):"scanning"===n.status&&console.log("二维码正在被扫描..."),"expired"===n.status&&(clearInterval(C.current),B.error("二维码已过期，请重新生成"))}catch(n){console.error("检查二维码状态失败:",n)}},2e3)};return o.useEffect(()=>{if(k>0&&"qrcode"===n&&"pending"===x.status){const e=setTimeout(()=>I(k-1),1e3);return()=>clearTimeout(e)}0===k&&"pending"===x.status&&(S(e=>({...e,status:"expired"})),C.current&&clearInterval(C.current))},[k,n,x.status]),o.useEffect(()=>("qrcode"===n&&E(),()=>{C.current&&(clearInterval(C.current),C.current=null)}),[n]),f("div",{className:se.loginContainer,children:[d(de,{}),f("div",{className:se.loginBox,children:[d("button",{className:se.cornerMark,onClick:()=>t("account"===n?"qrcode":"account"),children:d("span",{className:se.cornerMarkContent,children:"account"===n?"账号登录":"二维码登录"})}),f("div",{className:se.leftSection,children:[f("div",{className:se.brandInfo,children:[d("h1",{className:se.brandTitle,children:"Paint"}),d("p",{className:se.brandSubtitle,children:"发现灵感，创造美好"})]}),f("div",{className:se.decorationPattern,children:[d("div",{className:se.petal}),d("div",{className:se.petal}),d("div",{className:se.petal}),d("div",{className:se.petal}),d("div",{className:se.petal})]})]}),d("div",{className:se.rightSection,children:f("div",{className:se.formContainer,children:[d("div",{className:se.formHeader,children:d("h2",{children:"登录"})}),"account"===n&&f(j,{name:"accountLogin",initialValues:{remember:!0},className:se.loginForm,onFinish:async r=>{try{const n=await i(r);console.log("登录成功:",n),$(n),B.success("登录成功！"),e(a)}catch(n){console.error("登录失败:",n),B.error(n.message||"登录失败，请检查用户名和密码")}},size:"large",children:[d(j.Item,{name:"username",rules:[{required:!0,message:"请输入用户名或邮箱"}],children:d(z,{prefix:d(L,{className:se.inputIcon}),placeholder:"用户名/邮箱",className:se.inputField})}),d(j.Item,{name:"password",rules:[{required:!0,message:"请输入密码"}],children:d(z.Password,{prefix:d(J,{className:se.inputIcon}),placeholder:"密码",className:se.inputField})}),d(j.Item,{children:f("div",{className:se.formOptions,children:[d(j.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:d(D,{children:"记住我"})}),d(g,{to:"/forget-password",className:se.forgotLink,children:"忘记密码？"})]})}),f(j.Item,{children:[d(q,{type:"primary",htmlType:"submit",className:se.loginButton,loading:c,block:!0,children:"登 录"}),d("div",{className:se.switchLoginType,children:d("span",{className:se.switchLink,onClick:()=>t("qrcode"),children:"使用二维码登录"})})]})]}),"qrcode"===n&&f("div",{className:se.qrcodeContainer,children:[f("div",{className:se.qrcodeBox,children:[x.qrcodeUrl?d("img",{src:x.qrcodeUrl,alt:"登录二维码",className:se.qrcodeImage}):f("div",{className:se.qrcodePlaceholder,children:[d(te,{className:se.qrcodeIcon}),d("p",{children:"生成二维码中..."})]}),"scanning"===x.status&&d("div",{className:se.qrcodeStatus,children:d("p",{className:se.statusText,children:"正在扫描..."})}),"expired"===x.status&&f("div",{className:se.qrcodeStatus+" expired",children:[d("p",{className:se.statusText,children:"二维码已过期"}),d(q,{type:"primary",size:"small",onClick:E,children:"重新生成"})]})]}),d("p",{className:se.qrcodeTip,children:"请使用花瓣APP扫描二维码登录"}),"pending"===x.status&&f("p",{className:se.countdownText,children:["二维码将在 ",k," 秒后过期"]}),d("div",{className:se.switchLoginType,children:d("span",{className:se.switchLink,onClick:()=>t("account"),children:"使用账号登录"})})]}),d(A,{className:se.divider,children:d("span",{className:se.dividerText,children:"或"})}),f("div",{className:se.socialLogin,children:[f(q,{className:se.socialButton,block:!0,loading:v,onClick:()=>T("wechat"),children:[d(ce,{}),"微信登录"]}),f(q,{className:se.socialButton,block:!0,loading:v,onClick:()=>T("qq"),children:[d(Z,{}),"QQ登录"]})]}),f("div",{className:se.registerLink,children:["还没有账号？",d(g,{to:"/register",className:se.registerText,children:"立即注册"})]})]})})]})]})}export{be as default};
